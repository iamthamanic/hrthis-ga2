
> hrthis@2.0.0 lint
> eslint src --ext .ts,.tsx --format=json

[{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/api/anthropic.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/api/chat-service.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Async arrow function has too many lines (35). Maximum allowed is 30.","line":18,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":56,"endColumn":2},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":27,"column":29,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":27,"endColumn":31,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[957,959],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":32,"column":38,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":32,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1156,1158],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":33,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":33,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1205,1207],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":79,"column":29,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":79,"endColumn":31,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2636,2638],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":82,"column":38,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":82,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2764,2766],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":86,"column":54,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":86,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2848,2850],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":88,"column":53,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":88,"endColumn":55,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2922,2924],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":89,"column":61,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":89,"endColumn":63,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2988,2990],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":90,"column":51,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":90,"endColumn":53,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3044,3046],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":120,"column":29,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":120,"endColumn":31,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3928,3930],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (94). Maximum allowed is 75.","line":122,"column":1,"nodeType":null,"messageId":"exceed","endLine":147,"endColumn":3},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":123,"column":38,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":123,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4056,4058],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":127,"column":54,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":127,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4140,4142],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":129,"column":53,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":129,"endColumn":55,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4214,4216],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":130,"column":61,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":130,"endColumn":63,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4280,4282],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":131,"column":51,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":131,"endColumn":53,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4336,4338],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/*\nIMPORTANT NOTICE: DO NOT REMOVE\n./src/api/chat-service.ts\nIf the user wants to use AI to generate text, answer questions, or analyze images you can use the functions defined in this file to communicate with the OpenAI, Anthropic, and Grok APIs.\n*/\nimport { AIMessage, AIRequestOptions, AIResponse } from \"../types/ai\";\n\nimport { getAnthropicClient } from \"./anthropic\";\nimport { getGrokClient } from \"./grok\";\nimport { getOpenAIClient } from \"./openai\";\n\n/**\n * Get a text response from Anthropic\n * @param messages - The messages to send to the AI\n * @param options - The options for the request\n * @returns The response from the AI\n */\nexport const getAnthropicTextResponse = async (\n  messages: AIMessage[],\n  options?: AIRequestOptions,\n): Promise<AIResponse> => {\n  try {\n    const client = getAnthropicClient();\n    const defaultModel = \"claude-3-5-sonnet-20240620\";\n\n    const response = await client.messages.create({\n      model: options?.model || defaultModel,\n      messages: messages.map((msg) => ({\n        role: msg.role === \"assistant\" ? \"assistant\" : \"user\",\n        content: msg.content,\n      })),\n      max_tokens: options?.maxTokens || 2048,\n      temperature: options?.temperature || 0.7,\n    });\n\n    // Handle content blocks from the response\n    const content = response.content.reduce((acc, block) => {\n      if (\"text\" in block) {\n        return acc + block.text;\n      }\n      return acc;\n    }, \"\");\n\n    return {\n      content,\n      usage: {\n        promptTokens: response.usage?.input_tokens || 0,\n        completionTokens: response.usage?.output_tokens || 0,\n        totalTokens: (response.usage?.input_tokens || 0) + (response.usage?.output_tokens || 0),\n      },\n    };\n  } catch (error) {\n    console.error(\"Anthropic API Error:\", error);\n    throw error;\n  }\n};\n\n/**\n * Get a simple chat response from Anthropic\n * @param prompt - The prompt to send to the AI\n * @returns The response from the AI\n */\nexport const getAnthropicChatResponse = async (prompt: string): Promise<AIResponse> => {\n  return await getAnthropicTextResponse([{ role: \"user\", content: prompt }]);\n};\n\n/**\n * Get a text response from OpenAI\n * @param messages - The messages to send to the AI\n * @param options - The options for the request\n * @returns The response from the AI\n */\nexport const getOpenAITextResponse = async (messages: AIMessage[], options?: AIRequestOptions): Promise<AIResponse> => {\n  try {\n    const client = getOpenAIClient();\n    const defaultModel = \"gpt-4o\"; //accepts images as well, use this for image analysis\n\n    const response = await client.chat.completions.create({\n      model: options?.model || defaultModel,\n      messages: messages,\n      temperature: options?.temperature ?? 0.7,\n      max_tokens: options?.maxTokens || 2048,\n    });\n\n    return {\n      content: response.choices[0]?.message?.content || \"\",\n      usage: {\n        promptTokens: response.usage?.prompt_tokens || 0,\n        completionTokens: response.usage?.completion_tokens || 0,\n        totalTokens: response.usage?.total_tokens || 0,\n      },\n    };\n  } catch (error) {\n    console.error(\"OpenAI API Error:\", error);\n    throw error;\n  }\n};\n\n/**\n * Get a simple chat response from OpenAI\n * @param prompt - The prompt to send to the AI\n * @returns The response from the AI\n */\nexport const getOpenAIChatResponse = async (prompt: string): Promise<AIResponse> => {\n  return await getOpenAITextResponse([{ role: \"user\", content: prompt }]);\n};\n\n/**\n * Get a text response from Grok\n * @param messages - The messages to send to the AI\n * @param options - The options for the request\n * @returns The response from the AI\n */\nexport const getGrokTextResponse = async (messages: AIMessage[], options?: AIRequestOptions): Promise<AIResponse> => {\n  try {\n    const client = getGrokClient();\n    const defaultModel = \"grok-3-beta\";\n\n    const response = await client.chat.completions.create({\n      model: options?.model || defaultModel,\n      messages: messages,\n      temperature: options?.temperature ?? 0.7,\n      max_tokens: options?.maxTokens || 2048,\n    });\n\n    return {\n      content: response.choices[0]?.message?.content || \"\",\n      usage: {\n        promptTokens: response.usage?.prompt_tokens || 0,\n        completionTokens: response.usage?.completion_tokens || 0,\n        totalTokens: response.usage?.total_tokens || 0,\n      },\n    };\n  } catch (error) {\n    console.error(\"Grok API Error:\", error);\n    throw error;\n  }\n};\n\n/**\n * Get a simple chat response from Grok\n * @param prompt - The prompt to send to the AI\n * @returns The response from the AI\n */\nexport const getGrokChatResponse = async (prompt: string): Promise<AIResponse> => {\n  return await getGrokTextResponse([{ role: \"user\", content: prompt }]);\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/api/grok.ts","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":13,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":13,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/*\nIMPORTANT NOTICE: DO NOT REMOVE\nThis is a custom client for the Grok API. You may update this service, but you should not need to.\nThe Grok API can be communicated with the \"openai\" package, so you can use the same functions as the openai package. It may not support all the same features, so please be careful.\n\n\ngrok-3-latest\ngrok-3-fast-latest\ngrok-3-mini-latest\n*/\nimport OpenAI from \"openai\";\n\nexport const getGrokClient = () => {\n  const apiKey = process.env.EXPO_PUBLIC_VIBECODE_GROK_API_KEY;\n  if (!apiKey) {\n    console.warn(\"Grok API key not found in environment variables\");\n  }\n  return new OpenAI({\n    apiKey: apiKey,\n    baseURL: \"https://api.x.ai/v1\",\n  });\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/api/image-generation.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Async function 'generateImage' has too many lines (41). Maximum allowed is 30.","line":19,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":66,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/*\nIMPORTANT NOTICE: DO NOT REMOVE\nThis is a custom asset generation service that uses a custom API endpoint maintained by Vibecode. If the user wants to build an app that generates images, assets, icons, or anything else, you must use this internal endpoint. Do not attempt to use replicate or chatgpt.\nYou may update this service, but you should not need to.\nThis endpoint uses openai's latest image generation API, AKA gpt4o, AKA gpt-image-1, so if the user is asking for that, this is the right service to use.\nDoes not support video and audio generation.\n*/\n\n// API endpoint configuration\nconst baseUrl = \"https://api.vibecodeapp.com\";\nconst endpoint = \"/api/storage/generate-image\";\n\n/**\n * Generate an image using the custom API endpoint\n * @param prompt The text prompt to generate an image from\n * @param options Optional parameters for image generation\n * @returns URL of the generated image, usable to render in the app directly.\n */\nexport async function generateImage(\n  prompt: string,\n  options?: {\n    size?: \"1024x1024\" | \"1536x1024\" | \"1024x1536\" | \"auto\";\n    quality?: \"low\" | \"medium\" | \"high\" | \"auto\";\n    format?: \"png\" | \"jpeg\" | \"webp\";\n    background?: undefined | \"transparent\";\n  }\n): Promise<string> {\n  try {\n    // Create request body\n    const requestBody = {\n      projectId: process.env.EXPO_PUBLIC_VIBECODE_PROJECT_ID,\n      prompt,\n      options: {\n        ...options,\n      },\n    };\n\n    // Make API request\n    const response = await fetch(`${baseUrl}${endpoint}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(requestBody),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      console.error(\"[AssetGenerationService] Error response:\", errorData);\n      throw new Error(`Image generation API error: ${response.status} ${JSON.stringify(errorData)}`);\n    }\n\n    const result = await response.json();\n\n    // Return the image data from the response\n    if (result.success && result.data) {\n      return result.data.imageUrl as string;\n    } else {\n      console.error(\"[AssetGenerationService] Invalid response format:\", result);\n      throw new Error(\"Invalid response format from API\");\n    }\n  } catch (error) {\n    console.error(\"Image Generation Error:\", error);\n    throw error;\n  }\n}\n\n/**\n * Convert aspect ratio to size format\n * @param aspectRatio The aspect ratio to convert\n * @returns The corresponding size format\n */\nexport function convertAspectRatioToSize(aspectRatio: string): \"1024x1024\" | \"1536x1024\" | \"1024x1536\" | \"auto\" {\n  switch (aspectRatio) {\n    case \"1:1\":\n      return \"1024x1024\";\n    case \"3:2\":\n      return \"1536x1024\";\n    case \"2:3\":\n      return \"1024x1536\";\n    default:\n      return \"auto\";\n  }\n}","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/api/openai.ts","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":12,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":12,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/*\nIMPORTANT NOTICE: DO NOT REMOVE\nThis is a custom client for the OpenAI API. You may update this service, but you should not need to.\n\nvalid model names:\ngpt-4.1-2025-04-14\no4-mini-2025-04-16\ngpt-4o-2024-11-20\n*/\nimport OpenAI from \"openai\";\n\nexport const getOpenAIClient = () => {\n  const apiKey = process.env.EXPO_PUBLIC_VIBECODE_OPENAI_API_KEY;\n  if (!apiKey) {\n    console.warn(\"OpenAI API key not found in environment variables\");\n  }\n  return new OpenAI({\n    apiKey: apiKey,\n  });\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/api/training-ai.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (44). Maximum allowed is 30.","line":10,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":63,"endColumn":2},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":11,"column":26,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":15,"endColumn":44},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (42). Maximum allowed is 30.","line":65,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":109,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (294). Maximum allowed is 75.","line":97,"column":1,"nodeType":null,"messageId":"exceed","endLine":358,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":135,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":135,"endColumn":45},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":152,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":152,"endColumn":50},{"ruleId":"max-params","severity":1,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":203,"column":121,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":203,"endColumn":123},{"ruleId":"max-params","severity":1,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":223,"column":124,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":223,"endColumn":126},{"ruleId":"max-params","severity":1,"message":"Async arrow function has too many parameters (4). Maximum allowed is 3.","line":248,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":248,"endColumn":22},{"ruleId":"max-params","severity":1,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":286,"column":118,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":286,"endColumn":120},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":293,"column":38,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":293,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9253,9255],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-params","severity":1,"message":"Async arrow function has too many parameters (4). Maximum allowed is 3.","line":337,"column":47,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":337,"endColumn":49}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { AIGenerationRequest, AIGeneratedContent } from '../types/training';\n\nimport { getOpenAITextResponse } from './chat-service';\n\n/**\n * AI Training Content Generator\n * Uses OpenAI GPT-4o to generate training content, lessons, and quizzes\n */\n\nconst buildTrainingPrompt = (request: AIGenerationRequest): string => {\n  const difficultyText = request.difficulty === 'BEGINNER' \n    ? 'Anfänger: Grundlagen erklären' \n    : request.difficulty === 'INTERMEDIATE' \n    ? 'Fortgeschritten: Vertiefte Kenntnisse vermitteln' \n    : 'Experte: Spezialisiertes Fachwissen';\n\n  const quizSection = request.includeQuiz \n    ? '- Quiz mit 2-3 Multiple-Choice-Fragen pro Lektion\\n   - Jede Frage mit 4 Antwortmöglichkeiten, korrekter Antwort und Erklärung'\n    : '';\n\n  const finalQuizSection = request.includeQuiz \n    ? `4. **Abschlussprüfung**: \n   - 2-3 zusammenfassende Fragen über alle Lektionen\n   - Bestehensgrenze: 70%` \n    : '';\n\n  return `\nDu bist ein Experte für Unternehmensschulungen und E-Learning. Erstelle eine strukturierte Schulung basierend auf folgenden Vorgaben:\n\n**Schulungsanfrage:**\n- Thema: ${request.topic}\n- Beschreibung: ${request.description}\n- Zielgruppe: ${request.targetAudience}\n- Dauer: ${request.duration} Minuten\n- Schwierigkeitsgrad: ${request.difficulty}\n- Anzahl Lektionen: ${request.lessonCount}\n- Quiz einschließen: ${request.includeQuiz ? 'Ja' : 'Nein'}\n\n**Aufgabe:**\nErstelle eine vollständige Schulung mit folgender Struktur:\n\n1. **Schulungstitel**: Prägnanter, professioneller Titel\n2. **Beschreibung**: Umfassende Beschreibung der Schulung (2-3 Sätze)\n3. **Lektionen**: ${request.lessonCount} Lektionen mit jeweils:\n   - Titel der Lektion\n   - Kurze Beschreibung (1-2 Sätze)\n   - Detaillierter Inhalt (strukturiert mit Überschriften, Aufzählungen, praktischen Beispielen)\n   ${quizSection}\n\n${finalQuizSection}\n\n**Wichtige Anforderungen:**\n- Inhalt muss praxisnah und unternehmensrelevant sein\n- Verwende klare, verständliche Sprache\n- Strukturiere den Inhalt logisch und aufbauend\n- Beispiele und Fallstudien einbauen\n- Bei ${difficultyText}\n\n**Antwortformat:**\n${buildJsonFormat(request)}\n\nErstelle jetzt die Schulung:`;\n};\n\nconst buildJsonFormat = (request: AIGenerationRequest): string => {\n  const quizFormat = request.includeQuiz \n    ? `\"quiz\": {\n        \"questions\": [\n          {\n            \"question\": \"Frage?\",\n            \"options\": [\"Option A\", \"Option B\", \"Option C\", \"Option D\"],\n            \"correctAnswer\": 0,\n            \"explanation\": \"Erklärung der korrekten Antwort\"\n          }\n        ],\n        \"passingScore\": 80\n      }`\n    : '';\n\n  const finalQuizFormat = request.includeQuiz \n    ? `,\n  \"finalQuiz\": {\n    \"questions\": [\n      {\n        \"question\": \"Abschlussfrage?\",\n        \"options\": [\"Option A\", \"Option B\", \"Option C\", \"Option D\"],\n        \"correctAnswer\": 0,\n        \"explanation\": \"Erklärung\"\n      }\n    ],\n    \"passingScore\": 70\n  }`\n    : '';\n\n  return `Antworte ausschließlich in folgendem JSON-Format:\n\n{\n  \"title\": \"Schulungstitel\",\n  \"description\": \"Schulungsbeschreibung\",\n  \"lessons\": [\n    {\n      \"title\": \"Lektionstitel\",\n      \"description\": \"Lektionsbeschreibung\",\n      \"content\": \"Detaillierter Lektionsinhalt mit Markdown-Formatierung\",\n      ${quizFormat}\n    }\n  ]${finalQuizFormat}\n}`;\n};\n\nconst parseAIResponse = (response: string, request: AIGenerationRequest): AIGeneratedContent => {\n  try {\n    const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n    const jsonString = jsonMatch ? jsonMatch[0] : response;\n    return JSON.parse(jsonString);\n  } catch (parseError) {\n    return createFallbackContent(response, request);\n  }\n};\n\nconst createFallbackContent = (response: string, request: AIGenerationRequest): AIGeneratedContent => {\n  return {\n    title: `${request.topic} - Umfassende Schulung`,\n    description: `Eine strukturierte Schulung zu ${request.topic} für ${request.targetAudience}. Diese Schulung vermittelt alle wichtigen Grundlagen und praktischen Anwendungen.`,\n    lessons: Array.from({ length: request.lessonCount }, (_, i) => ({\n      title: `Lektion ${i + 1}: ${request.topic} Grundlagen`,\n      description: `In dieser Lektion lernen Sie die wichtigsten Aspekte von ${request.topic} kennen.`,\n      content: `# Lektion ${i + 1}: ${request.topic}\\n\\n${response.substring(0, 500)}...`,\n      quiz: request.includeQuiz ? createDefaultQuiz(request.topic) : undefined\n    })),\n    finalQuiz: request.includeQuiz ? createDefaultFinalQuiz(request.topic) : undefined\n  };\n};\n\nconst createDefaultQuiz = (topic: string) => ({\n  questions: [\n    {\n      question: `Was ist das wichtigste Prinzip bei ${topic}?`,\n      options: [\n        'Sicherheit und Compliance',\n        'Effizienz',\n        'Kostenoptimierung',\n        'Alle genannten Punkte'\n      ],\n      correctAnswer: 3,\n      explanation: `Bei ${topic} sind alle Aspekte wichtig, aber besonders die Balance zwischen Sicherheit, Effizienz und Kosten.`\n    }\n  ],\n  passingScore: 80\n});\n\nconst createDefaultFinalQuiz = (topic: string) => ({\n  questions: [\n    {\n      question: `Was haben Sie in dieser ${topic} Schulung gelernt?`,\n      options: [\n        'Grundlagen und Best Practices',\n        'Nur theoretisches Wissen',\n        'Veraltete Methoden',\n        'Nichts Neues'\n      ],\n      correctAnswer: 0,\n      explanation: 'Diese Schulung vermittelt sowohl theoretische Grundlagen als auch praktische Best Practices.'\n    }\n  ],\n  passingScore: 70\n});\n\nconst validateGeneratedContent = (content: AIGeneratedContent): void => {\n  if (!content.title || !content.description || !content.lessons) {\n    throw new Error('Invalid AI response structure');\n  }\n};\n\nexport const generateTrainingContent = async (request: AIGenerationRequest): Promise<AIGeneratedContent> => {\n  try {\n    const prompt = buildTrainingPrompt(request);\n    \n    const aiResponse = await getOpenAITextResponse([\n      {\n        role: 'system',\n        content: 'Du bist ein Experte für Unternehmensschulungen und E-Learning-Content. Erstelle hochwertige, strukturierte Schulungsinhalte in deutscher Sprache.'\n      },\n      {\n        role: 'user',\n        content: prompt\n      }\n    ], { model: 'gpt-4o' });\n    \n    const parsedContent = parseAIResponse(aiResponse.content, request);\n    validateGeneratedContent(parsedContent);\n    \n    return parsedContent;\n  } catch (error) {\n    console.error('AI Training Generation Error:', error);\n    throw new Error('Fehler bei der KI-Generierung. Bitte versuchen Sie es erneut.');\n  }\n};\n\n/**\n * Generate a training certificate using AI\n */\nconst buildCertificatePrompt = (trainingTitle: string, userName: string, completionDate: string, score: number): string => {\n  return `\nErstelle einen professionellen Zertifikatstext für eine abgeschlossene Unternehmensschulung.\n\n**Details:**\n- Schulung: ${trainingTitle}\n- Teilnehmer: ${userName}\n- Abschlussdatum: ${completionDate}\n- Ergebnis: ${score}%\n\n**Anforderungen:**\n- Professioneller, offizieller Ton\n- Deutsche Sprache\n- Gratulation zur erfolgreichen Teilnahme\n- Bestätigung der erworbenen Kenntnisse\n- Verwende \"HRthis GmbH\" als ausstellendes Unternehmen\n\nErstelle einen strukturierten Zertifikatstext:`;\n};\n\nconst createFallbackCertificate = (trainingTitle: string, userName: string, completionDate: string, score: number): string => {\n  return `\nZERTIFIKAT\n\nHiermit wird bestätigt, dass\n\n${userName}\n\ndie Schulung \"${trainingTitle}\" erfolgreich abgeschlossen hat.\n\nAbschlussdatum: ${completionDate}\nErgebnis: ${score}%\n\nDiese Schulung vermittelte wichtige Kenntnisse und Fähigkeiten für den beruflichen Alltag.\n\nHRthis GmbH\nPersonalabteilung\n  `.trim();\n};\n\nexport const generateCertificateText = async (\n  trainingTitle: string, \n  userName: string, \n  completionDate: string,\n  score: number\n): Promise<string> => {\n  try {\n    const prompt = buildCertificatePrompt(trainingTitle, userName, completionDate, score);\n    \n    const aiResponse = await getOpenAITextResponse([\n      {\n        role: 'system',\n        content: 'Du erstellst professionelle Zertifikatstexte für Unternehmensschulungen in deutscher Sprache.'\n      },\n      {\n        role: 'user',\n        content: prompt\n      }\n    ], { model: 'gpt-4o' });\n\n    return aiResponse.content;\n  } catch (error) {\n    console.error('Certificate Generation Error:', error);\n    return createFallbackCertificate(trainingTitle, userName, completionDate, score);\n  }\n};\n\n/**\n * Generate email content for training notifications\n */\ntype NotificationType = 'NEW_TRAINING' | 'REMINDER' | 'DEADLINE_APPROACHING' | 'COMPLETED' | 'FAILED';\n\nconst getNotificationContext = (type: NotificationType): string => {\n  const contexts = {\n    NEW_TRAINING: 'eine neue Schulung ist verfügbar',\n    REMINDER: 'Erinnerung an eine nicht abgeschlossene Schulung',\n    DEADLINE_APPROACHING: 'die Deadline einer Schulung nähert sich',\n    COMPLETED: 'Gratulation zur abgeschlossenen Schulung',\n    FAILED: 'Information über nicht bestandene Schulung'\n  };\n  return contexts[type];\n};\n\nconst buildEmailPrompt = (context: string, userName: string, trainingTitle: string, additionalInfo?: string): string => {\n  return `\nErstelle eine professionelle E-Mail für ${context}.\n\n**Details:**\n- Empfänger: ${userName}\n- Schulung: ${trainingTitle}\n- Zusätzliche Info: ${additionalInfo || 'Keine'}\n- Absender: HRthis GmbH Personalabteilung\n\n**Anforderungen:**\n- Professioneller aber freundlicher Ton\n- Deutsche Sprache\n- Passende Betreffzeile\n- Strukturierte E-Mail mit klaren Handlungsaufforderungen\n- Link zur HRthis App erwähnen\n\nErstelle Betreff und E-Mail-Text:`;\n};\n\nconst extractEmailContent = (response: string, trainingTitle: string): { subject: string; body: string } => {\n  const lines = response.split('\\n');\n  const subjectLine = lines.find((line: string) => line.toLowerCase().includes('betreff:') || line.toLowerCase().includes('subject:'));\n  const subject = subjectLine ? subjectLine.replace(/betreff:|subject:/i, '').trim() : `HRthis: ${trainingTitle}`;\n  \n  const bodyStart = response.indexOf('\\n\\n') > 0 ? response.indexOf('\\n\\n') + 2 : 0;\n  const body = response.substring(bodyStart).trim();\n\n  return { subject, body };\n};\n\nconst createFallbackEmail = (type: NotificationType, userName: string, trainingTitle: string): { subject: string; body: string } => {\n  const fallbackSubjects = {\n    NEW_TRAINING: `Neue Schulung verfügbar: ${trainingTitle}`,\n    REMINDER: `Erinnerung: Schulung \"${trainingTitle}\" noch nicht abgeschlossen`,\n    DEADLINE_APPROACHING: `Deadline nähert sich: ${trainingTitle}`,\n    COMPLETED: `Glückwunsch! Schulung \"${trainingTitle}\" erfolgreich abgeschlossen`,\n    FAILED: `Schulung \"${trainingTitle}\" - Wiederholung erforderlich`\n  };\n\n  return {\n    subject: fallbackSubjects[type],\n    body: `Hallo ${userName},\\n\\nbezüglich der Schulung \"${trainingTitle}\" gibt es eine wichtige Information.\\n\\nBitte loggen Sie sich in die HRthis App ein, um weitere Details zu erfahren.\\n\\nBeste Grüße\\nIhr HRthis Team`\n  };\n};\n\nexport const generateTrainingNotificationEmail = async (\n  type: NotificationType,\n  userName: string,\n  trainingTitle: string,\n  additionalInfo?: string\n): Promise<{ subject: string; body: string }> => {\n  try {\n    const context = getNotificationContext(type);\n    const prompt = buildEmailPrompt(context, userName, trainingTitle, additionalInfo);\n    \n    const aiResponse = await getOpenAITextResponse([\n      {\n        role: 'system',\n        content: 'Du erstellst professionelle E-Mail-Benachrichtigungen für Unternehmensschulungen in deutscher Sprache.'\n      },\n      {\n        role: 'user',\n        content: prompt\n      }\n    ], { model: 'gpt-4o' });\n    \n    return extractEmailContent(aiResponse.content, trainingTitle);\n  } catch (error) {\n    console.error('Email Generation Error:', error);\n    return createFallbackEmail(type, userName, trainingTitle);\n  }\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/api/transcribe-audio.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Async arrow function has too many lines (33). Maximum allowed is 30.","line":12,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":50,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":12,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":12,"endColumn":64},{"ruleId":"max-statements","severity":1,"message":"Async arrow function has too many statements (17). Maximum allowed is 15.","line":12,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":50,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/*\nIMPORTANT NOTICE: DO NOT REMOVE\nThis is a custom audio transcription service that uses a custom API endpoint maintained by Vibecode.\nYou can use this function to transcribe audio files, and it will return the text of the audio file.\n*/\n\n/**\n * Transcribe an audio file\n * @param localAudioUri - The local URI of the audio file to transcribe. Obtained via the expo-av library.\n * @returns The text of the audio file\n */\nexport const transcribeAudio = async (localAudioUri: string) => {\n  try {\n    // Create FormData for the audio file\n    const formData = new FormData();\n    const fileData = {\n      uri: localAudioUri,\n      type: \"audio/m4a\",\n      name: \"recording.m4a\",\n    } as unknown as Blob;\n    formData.append(\"file\", fileData);\n    formData.append(\"model\", \"gpt-4o-transcribe\");\n    formData.append(\"language\", \"en\");\n\n    const OPENAI_API_KEY = process.env.EXPO_PUBLIC_VIBECODE_OPENAI_API_KEY;\n    if (!OPENAI_API_KEY) {\n      throw new Error(\"OPENAI_API_KEY is not set\");\n    }\n\n    // API call to OpenAI's gpt-4o-transcribe\n    const response = await fetch(\"https://api.openai.com/v1/audio/transcriptions\", {\n      method: \"POST\",\n      headers: {\n        Authorization: `Bearer ${OPENAI_API_KEY}`,\n      },\n      body: formData,\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error(`Transcription failed: ${errorText}`);\n    }\n\n    const result = await response.json();\n    return result.text;\n  } catch (error) {\n    console.error(\"Transcription error:\", error);\n    throw error;\n  }\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/AchievementsGallery.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/AvatarCustomization.tsx","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (97). Maximum allowed is 75.","line":84,"column":1,"nodeType":null,"messageId":"exceed","endLine":107,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { Avatar, AvatarAccessory } from '../types/learning';\n\nimport { availableAccessories } from './avatar/avatarData';\nimport { CustomizationPanel } from './avatar/CustomizationPanel';\nimport { PreviewPanel } from './avatar/PreviewPanel';\nimport { useAvatarCustomization } from './avatar/useAvatarCustomization';\n\ninterface AvatarCustomizationProps {\n  avatar: Avatar;\n  onUpdate: (avatar: Avatar) => void;\n  onClose: () => void;\n}\n\nconst CustomizationHeader: React.FC<{ onClose: () => void }> = ({ onClose }) => (\n  <div className=\"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6\">\n    <div className=\"flex justify-between items-center\">\n      <h2 className=\"text-2xl font-bold\">Avatar anpassen</h2>\n      <button\n        onClick={onClose}\n        className=\"text-white hover:text-gray-200 transition-colors\"\n      >\n        ✕\n      </button>\n    </div>\n  </div>\n);\n\ntype TabType = 'accessories' | 'colors';\n\nconst CustomizationContent: React.FC<{\n  previewAvatar: Avatar;\n  userCoins: number;\n  activeTab: TabType;\n  ownedItems: string[];\n  setActiveTab: (tab: TabType) => void;\n  handleAccessoryPreview: (accessory: AvatarAccessory) => void;\n  handleAccessoryPurchase: (accessory: AvatarAccessory) => void;\n  handleAccessoryRemove: (type: string) => void;\n  handleColorChange: (type: 'skin' | 'hair' | 'background', color: string) => void;\n}> = ({\n  previewAvatar,\n  userCoins,\n  activeTab,\n  ownedItems,\n  setActiveTab,\n  handleAccessoryPreview,\n  handleAccessoryPurchase,\n  handleAccessoryRemove,\n  handleColorChange\n}) => (\n  <div className=\"flex h-[70vh]\">\n    <PreviewPanel \n      avatar={previewAvatar} \n      userCoins={userCoins} \n    />\n    \n    <CustomizationPanel\n      activeTab={activeTab}\n      previewAvatar={previewAvatar}\n      availableAccessories={availableAccessories}\n      ownedItems={ownedItems}\n      userCoins={userCoins}\n      onTabChange={setActiveTab}\n      onAccessoryPreview={handleAccessoryPreview}\n      onAccessoryPurchase={handleAccessoryPurchase}\n      onAccessoryRemove={handleAccessoryRemove}\n      onColorChange={handleColorChange}\n    />\n  </div>\n);\n\nconst CustomizationFooter: React.FC<{ onClose: () => void; onSave: () => void }> = ({ onClose, onSave }) => (\n  <div className=\"bg-gray-100 px-6 py-4 flex justify-end space-x-3\">\n    <button\n      onClick={onClose}\n      className=\"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n    >\n      Abbrechen\n    </button>\n    <button\n      onClick={onSave}\n      className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n    >\n      Speichern\n    </button>\n  </div>\n);\n\nexport const AvatarCustomization: React.FC<AvatarCustomizationProps> = ({\n  avatar,\n  onUpdate,\n  onClose\n}) => {\n  const customizationState = useAvatarCustomization({ avatar, onUpdate, onClose });\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden\">\n        <CustomizationHeader onClose={onClose} />\n        <CustomizationContent {...customizationState} />\n        <CustomizationFooter onClose={onClose} onSave={customizationState.handleSave} />\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/AvatarDisplay.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (36). Maximum allowed is 30.","line":24,"column":60,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":67,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { useAchievementsStore } from '../state/achievements';\nimport { useAvatarStore } from '../state/avatar';\nimport { cn } from '../utils/cn';\n\nimport { AchievementsGrid } from './avatar/AchievementsGrid';\nimport { AvatarCircle } from './avatar/AvatarCircle';\nimport { CoinsSection } from './avatar/CoinsSection';\nimport { SkillsList } from './avatar/SkillsList';\nimport { UserInfo } from './avatar/UserInfo';\n\ninterface AvatarDisplayProps {\n  userId: string;\n  showEditButton?: boolean;\n  onEdit?: () => void;\n  className?: string;\n}\n\n/**\n * Large Avatar Display Component (for Settings/Profile page)\n * Shows full avatar with level, skills, and achievements like Screenshot 2\n */\nexport const AvatarDisplay: React.FC<AvatarDisplayProps> = ({\n  userId,\n  showEditButton = false,\n  onEdit,\n  className\n}) => {\n  const { getUserAvatar } = useAvatarStore();\n  const { getUnlockedAchievements } = useAchievementsStore();\n  \n  const userAvatar = getUserAvatar(userId);\n  const unlockedAchievements = getUnlockedAchievements(userId);\n\n  if (!userAvatar) {\n    return (\n      <div className={cn(\"flex flex-col items-center p-6\", className)}>\n        <div className=\"w-32 h-32 bg-gray-200 rounded-full flex items-center justify-center mb-4\">\n          <span className=\"text-gray-400 text-4xl\">👤</span>\n        </div>\n        <p className=\"text-gray-500\">Avatar wird geladen...</p>\n      </div>\n    );\n  }\n\n\n  return (\n    <div className={cn(\"flex flex-col items-center p-6 bg-white rounded-xl\", className)}>\n      <AvatarCircle \n        showEditButton={showEditButton}\n        onEdit={onEdit}\n      />\n      \n      <UserInfo \n        title={userAvatar.title}\n        level={userAvatar.level}\n      />\n      \n      <SkillsList skills={userAvatar.skills} />\n      \n      <CoinsSection />\n      \n      <AchievementsGrid achievements={unlockedAchievements} />\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/AvatarMini.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/DashboardNews.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/FileUpload.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (38). Maximum allowed is 30.","line":93,"column":54,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":132,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (108). Maximum allowed is 75.","line":98,"column":1,"nodeType":null,"messageId":"exceed","endLine":132,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * FileUpload Component\n * \n * A comprehensive file upload component with drag & drop, preview,\n * and validation for dashboard info files (images and PDFs).\n */\n\nimport React from 'react';\n\nimport { useDashboardInfoStore } from '../state/dashboardInfo';\n\nimport { FilePreview } from './fileupload/FilePreview';\nimport { FileTypeHelp } from './fileupload/FileTypeHelp';\nimport { UploadArea } from './fileupload/UploadArea';\nimport { useFileUpload } from './fileupload/useFileUpload';\n\ninterface FileUploadProps {\n  /** Callback when file is selected and validated */\n  onFileSelect: (file: File) => void;\n  /** Callback when file is removed */\n  onFileRemove: () => void;\n  /** Currently selected file */\n  selectedFile?: File | null;\n  /** Accept specific file types */\n  accept?: string;\n  /** Whether upload is in progress */\n  isUploading?: boolean;\n  /** Error message to display */\n  error?: string;\n  /** Maximum file size in bytes */\n  maxSize?: number;\n  /** Custom placeholder text */\n  placeholder?: string;\n}\n\ninterface UploadHandlers {\n  isDragOver: boolean;\n  previewUrl: string | null;\n  fileInputRef: React.RefObject<HTMLInputElement | null>;\n  handleFileSelect: (file: File) => void;\n  handleFileRemove: () => void;\n  handleDragOver: (e: React.DragEvent) => void;\n  handleDragLeave: (e: React.DragEvent) => void;\n  handleDrop: (e: React.DragEvent) => void;\n  handleClick: (isUploading: boolean) => void;\n  handleInputChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nconst UploadAreaSection: React.FC<{\n  uploadHandlers: UploadHandlers;\n  isUploading: boolean;\n  error?: string;\n  placeholder: string;\n  maxSize?: number;\n  accept: string;\n  formatFileSize: (size: number) => string;\n}> = ({ uploadHandlers, isUploading, error, placeholder, maxSize, accept, formatFileSize }) => (\n  <UploadArea\n    isDragOver={uploadHandlers.isDragOver}\n    isUploading={isUploading}\n    error={error}\n    placeholder={placeholder}\n    maxSize={maxSize}\n    accept={accept}\n    formatFileSize={formatFileSize}\n    onDragOver={uploadHandlers.handleDragOver}\n    onDragLeave={uploadHandlers.handleDragLeave}\n    onDrop={uploadHandlers.handleDrop}\n    onClick={() => uploadHandlers.handleClick(isUploading)}\n    onInputChange={uploadHandlers.handleInputChange}\n    fileInputRef={uploadHandlers.fileInputRef}\n  />\n);\n\nconst FilePreviewSection: React.FC<{\n  selectedFile: File;\n  previewUrl: string | null;\n  isUploading: boolean;\n  error?: string;\n  formatFileSize: (size: number) => string;\n  onFileRemove: () => void;\n}> = ({ selectedFile, previewUrl, isUploading, error, formatFileSize, onFileRemove }) => (\n  <FilePreview\n    selectedFile={selectedFile}\n    previewUrl={previewUrl}\n    isUploading={isUploading}\n    error={error}\n    formatFileSize={formatFileSize}\n    onFileRemove={onFileRemove}\n  />\n);\n\nexport const FileUpload: React.FC<FileUploadProps> = ({\n  onFileSelect,\n  onFileRemove,\n  selectedFile,\n  accept = '.png,.jpg,.jpeg,.svg,.pdf',\n  isUploading = false,\n  error,\n  maxSize,\n  placeholder = 'Datei hier ablegen oder klicken zum Auswählen'\n}) => {\n  const { formatFileSize } = useDashboardInfoStore();\n  const uploadHandlers = useFileUpload({ onFileSelect, onFileRemove });\n\n  return (\n    <div className=\"space-y-4\">\n      {!selectedFile ? (\n        <UploadAreaSection\n          uploadHandlers={uploadHandlers}\n          isUploading={isUploading}\n          error={error}\n          placeholder={placeholder}\n          maxSize={maxSize}\n          accept={accept}\n          formatFileSize={formatFileSize}\n        />\n      ) : (\n        <FilePreviewSection\n          selectedFile={selectedFile}\n          previewUrl={uploadHandlers.previewUrl}\n          isUploading={isUploading}\n          error={error}\n          formatFileSize={formatFileSize}\n          onFileRemove={uploadHandlers.handleFileRemove}\n        />\n      )}\n\n      <FileTypeHelp maxSize={maxSize} formatFileSize={formatFileSize} />\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/LootboxAnimation.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (38). Maximum allowed is 30.","line":15,"column":66,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":56,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { Reward } from '../types/learning';\n\nimport { LootboxStages } from './lootbox/LootboxStages';\nimport { ParticleEffect } from './lootbox/ParticleEffect';\nimport { useLootboxAnimation } from './lootbox/useLootboxAnimation';\n\ninterface LootboxAnimationProps {\n  reward: Reward;\n  onComplete: () => void;\n  autoStart?: boolean;\n}\n\nexport const LootboxAnimation: React.FC<LootboxAnimationProps> = ({ \n  reward, \n  onComplete, \n  autoStart = false \n}) => {\n  const { stage, particles, handleStartAnimation } = useLootboxAnimation({ autoStart, onComplete });\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50\">\n      <div className=\"relative\">\n        <ParticleEffect particles={particles} show={stage === 'revealing'} />\n\n        <div className=\"relative w-80 h-80 flex items-center justify-center\">\n          <LootboxStages \n            stage={stage} \n            reward={reward} \n            onStartAnimation={handleStartAnimation} \n          />\n        </div>\n\n        {stage !== 'waiting' && stage !== 'complete' && (\n          <button\n            onClick={onComplete}\n            className=\"absolute top-4 right-4 text-white hover:text-gray-300 text-2xl\"\n          >\n            ×\n          </button>\n        )}\n      </div>\n\n      <style>{`\n        @keyframes fade-out {\n          from { opacity: 1; }\n          to { opacity: 0; }\n        }\n        .animate-fade-out {\n          animation: fade-out 1s ease-out forwards;\n        }\n      `}</style>\n    </div>\n  );\n};\n\n// Re-export utility components\nexport { MultiRewardAnimation } from './lootbox/MultiRewardAnimation';\nexport { CelebrationOverlay } from './lootbox/CelebrationOverlay';","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/Quiz.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (47). Maximum allowed is 30.","line":15,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":63,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { TestQuestion, TestResult } from '../types/learning';\n\nimport { QuizContent } from './quiz/QuizContent';\nimport { useDragAndDrop } from './quiz/useDragAndDrop';\nimport { useQuiz } from './quiz/useQuiz';\n\ninterface QuizProps {\n  videoId: string;\n  questions: TestQuestion[];\n  onComplete: (result: TestResult) => void;\n}\n\nexport const Quiz: React.FC<QuizProps> = ({ videoId, questions, onComplete }) => {\n  const { draggedItems, dropZones, initializeSorting, handleDragStart, handleDrop, handleDragOver } = useDragAndDrop();\n  \n  const {\n    currentQuestion,\n    currentQuestionIndex,\n    isLastQuestion,\n    selectedAnswer,\n    setSelectedAnswer,\n    showExplanation,\n    isAnswered,\n    canAnswer,\n    isCorrect,\n    handleAnswer,\n    nextQuestion,\n    onDrop\n  } = useQuiz({ \n    videoId, \n    questions, \n    onComplete, \n    dropZones, \n    initializeSorting, \n    handleDrop \n  });\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-sm p-6\">\n      <QuizContent\n        currentQuestion={currentQuestion}\n        currentQuestionIndex={currentQuestionIndex}\n        totalQuestions={questions.length}\n        selectedAnswer={selectedAnswer}\n        setSelectedAnswer={setSelectedAnswer}\n        isAnswered={isAnswered}\n        showExplanation={showExplanation}\n        isLastQuestion={isLastQuestion}\n        isCorrect={isCorrect}\n        canAnswer={canAnswer}\n        onAnswer={handleAnswer}\n        onNext={nextQuestion}\n        onDrop={onDrop}\n        draggedItems={draggedItems}\n        dropZones={dropZones}\n        onDragStart={handleDragStart}\n        onDragOver={handleDragOver}\n      />\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/SkillsDisplay.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (45). Maximum allowed is 30.","line":23,"column":60,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":72,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { useAvatarStore } from '../state/avatar';\nimport { cn } from '../utils/cn';\n\nimport { SkillCard } from './skills/SkillCard';\nimport { SkillsHeader } from './skills/SkillsHeader';\nimport { SkillsSummaryStats } from './skills/SkillsSummaryStats';\n\ninterface SkillsDisplayProps {\n  userId: string;\n  layout?: 'horizontal' | 'vertical' | 'grid';\n  showXP?: boolean;\n  showProgress?: boolean;\n  className?: string;\n}\n\n\n/**\n * Skills Display Component\n * Shows user skills with different layout options\n */\nexport const SkillsDisplay: React.FC<SkillsDisplayProps> = ({\n  userId,\n  layout = 'horizontal',\n  showXP = true,\n  showProgress = true,\n  className\n}) => {\n  const { getUserAvatar } = useAvatarStore();\n  const userAvatar = getUserAvatar(userId);\n\n  if (!userAvatar) {\n    return (\n      <div className={cn(\"p-6\", className)}>\n        <div className=\"text-center\">\n          <div className=\"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4\"></div>\n          <p className=\"text-gray-500\">Skills werden geladen...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const containerClasses = {\n    horizontal: \"space-y-3\",\n    vertical: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\",\n    grid: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"\n  };\n\n  return (\n    <div className={cn(\"w-full\", className)}>\n      <SkillsHeader totalXP={userAvatar.totalXP} />\n      \n      <div className={containerClasses[layout]}>\n        {userAvatar.skills.map((skill) => (\n          <SkillCard\n            key={skill.id}\n            skill={skill}\n            showXP={showXP}\n            showProgress={showProgress}\n            layout={layout}\n          />\n        ))}\n      </div>\n      \n      <SkillsSummaryStats \n        skills={userAvatar.skills}\n        avatarLevel={userAvatar.level}\n      />\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/TeamCalendarView.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (48). Maximum allowed is 30.","line":21,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":76,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":21,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":21,"endColumn":83},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":51,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":51,"endColumn":47},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":57,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":57,"endColumn":60},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":61,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":61,"endColumn":32},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (33). Maximum allowed is 30.","line":83,"column":66,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":118,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (97). Maximum allowed is 75.","line":95,"column":1,"nodeType":null,"messageId":"exceed","endLine":118,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\n\nimport { CalendarEntry } from '../types/calendar';\n\nimport { TeamCalendarGrid } from './calendar/TeamCalendarGrid';\nimport {\n  generateDateRange\n} from './calendar/TeamCalendarHelpers';\nimport { TeamCalendarLegend } from './calendar/TeamCalendarLegend';\nimport { TeamCalendarNavigation } from './calendar/TeamCalendarNavigation';\n\ninterface TeamCalendarViewProps {\n  view: 'monat' | 'jahr';\n  entries: CalendarEntry[];\n  users: { userId: string; userName: string }[];\n  onCellClick?: (userId: string, date: string) => void;\n  isAdmin?: boolean;\n  showLegend?: boolean;\n}\n\nconst useTeamCalendarLogic = (view: 'monat' | 'jahr', entries: CalendarEntry[]) => {\n  const [selectedMonth, setSelectedMonth] = useState(new Date());\n  const [hoveredCell, setHoveredCell] = useState<{ userId: string; date: string } | null>(null);\n  const [filterType, setFilterType] = useState<string>('all');\n\n  const dateRange = useMemo(() => {\n    return generateDateRange(view, selectedMonth);\n  }, [view, selectedMonth]);\n\n  const entriesByUserAndDate = useMemo(() => {\n    const map = new Map<string, CalendarEntry>();\n    entries.forEach(entry => {\n      const key = `${entry.userId}-${entry.date}`;\n      map.set(key, entry);\n    });\n    return map;\n  }, [entries]);\n\n  const filteredEntries = useMemo(() => {\n    if (filterType === 'all') return entriesByUserAndDate;\n    \n    const filtered = new Map<string, CalendarEntry>();\n    entriesByUserAndDate.forEach((entry, key) => {\n      if (entry.type === filterType) {\n        filtered.set(key, entry);\n      }\n    });\n    return filtered;\n  }, [entriesByUserAndDate, filterType]);\n\n  const navigateMonth = (direction: number) => {\n    const newDate = new Date(selectedMonth);\n    newDate.setMonth(newDate.getMonth() + direction);\n    setSelectedMonth(newDate);\n  };\n\n  const handleCellHover = (userId: string, date: string) => {\n    setHoveredCell({ userId, date });\n  };\n\n  const handleCellLeave = () => {\n    setHoveredCell(null);\n  };\n\n  return {\n    selectedMonth,\n    hoveredCell,\n    filterType,\n    dateRange,\n    filteredEntries,\n    navigateMonth,\n    handleCellHover,\n    handleCellLeave,\n    setFilterType\n  };\n};\n\n/**\n * TeamCalendarView Component\n * Displays a scrollable calendar view with absence status for all team members\n * Each user has a horizontal row, each day has a cell with info & color\n */\nexport const TeamCalendarView: React.FC<TeamCalendarViewProps> = ({\n  view,\n  entries,\n  users,\n  onCellClick,\n  isAdmin: _isAdmin = false,\n  showLegend = true\n}) => {\n  const calendarLogic = useTeamCalendarLogic(view, entries);\n\n  return (\n    <div className=\"w-full\">\n      <TeamCalendarNavigation\n        view={view}\n        selectedMonth={calendarLogic.selectedMonth}\n        filterType={calendarLogic.filterType}\n        onNavigateMonth={calendarLogic.navigateMonth}\n        onFilterChange={calendarLogic.setFilterType}\n      />\n      \n      <TeamCalendarGrid\n        view={view}\n        dateRange={calendarLogic.dateRange}\n        users={users}\n        filteredEntries={calendarLogic.filteredEntries}\n        selectedMonth={calendarLogic.selectedMonth}\n        hoveredCell={calendarLogic.hoveredCell}\n        onCellClick={onCellClick}\n        onCellHover={calendarLogic.handleCellHover}\n        onCellLeave={calendarLogic.handleCellLeave}\n      />\n      \n      <TeamCalendarLegend showLegend={showLegend} />\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/VideoPlayer.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (33). Maximum allowed is 30.","line":28,"column":6,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":61,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":71,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":71,"endColumn":40},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (41). Maximum allowed is 30.","line":77,"column":56,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":121,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (109). Maximum allowed is 75.","line":85,"column":1,"nodeType":null,"messageId":"exceed","endLine":121,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { VideoContent, TranscriptionSegment } from '../types/learning';\n\nimport { ProgressBar } from './video/ProgressBar';\nimport { TranscriptPanel } from './video/TranscriptPanel';\nimport { useVideoPlayer } from './video/useVideoPlayer';\nimport { VideoContainer } from './video/VideoContainer';\nimport { VideoControls } from './video/VideoControls';\n\ninterface VideoPlayerProps {\n  video: VideoContent;\n  onComplete?: () => void;\n}\n\nconst VideoControlsOverlay: React.FC<{\n  currentTime: number;\n  duration: number;\n  videoRef: React.RefObject<HTMLVideoElement | null>;\n  isPlaying: boolean;\n  playbackSpeed: number;\n  showTranscript: boolean;\n  onTogglePlay: () => void;\n  onSkip: (seconds: number) => void;\n  onChangeSpeed: () => void;\n  onToggleTranscript: () => void;\n  formatTime: (seconds: number) => string;\n}> = ({\n  currentTime,\n  duration,\n  videoRef,\n  isPlaying,\n  playbackSpeed,\n  showTranscript,\n  onTogglePlay,\n  onSkip,\n  onChangeSpeed,\n  onToggleTranscript,\n  formatTime\n}) => (\n  <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4\">\n    <ProgressBar\n      currentTime={currentTime}\n      duration={duration}\n      videoRef={videoRef}\n    />\n    \n    <VideoControls\n      isPlaying={isPlaying}\n      currentTime={currentTime}\n      duration={duration}\n      playbackSpeed={playbackSpeed}\n      showTranscript={showTranscript}\n      onTogglePlay={onTogglePlay}\n      onSkip={onSkip}\n      onChangeSpeed={onChangeSpeed}\n      onToggleTranscript={onToggleTranscript}\n      formatTime={formatTime}\n    />\n  </div>\n);\n\nconst ActiveSubtitle: React.FC<{ segment: TranscriptionSegment }> = ({ segment }) => (\n  <div className=\"absolute bottom-20 left-0 right-0 text-center px-4\">\n    <div className=\"inline-block bg-black/80 text-white px-4 py-2 rounded-lg\">\n      <p className=\"text-lg\">{segment.text}</p>\n    </div>\n  </div>\n);\n\nconst getYouTubeInfo = (url: string) => {\n  const isYouTube = url.includes('youtube.com') || url.includes('youtu.be');\n  const youtubeId = isYouTube ? url.match(/(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([^&\\n?#]+)/)?.[1] : null;\n  return { isYouTube, youtubeId };\n};\n\nexport const VideoPlayer: React.FC<VideoPlayerProps> = ({ video, onComplete }) => {\n  const playerState = useVideoPlayer({ video, onComplete });\n  const { isYouTube, youtubeId } = getYouTubeInfo(video.url);\n  const activeSegment = playerState.getActiveTranscriptSegment();\n\n  return (\n    <div className=\"bg-black rounded-xl overflow-hidden\">\n      <VideoContainer\n        video={video}\n        videoRef={playerState.videoRef}\n        isYouTube={isYouTube}\n        youtubeId={youtubeId}\n      />\n\n      {!isYouTube && (\n        <VideoControlsOverlay\n          currentTime={playerState.currentTime}\n          duration={video.duration}\n          videoRef={playerState.videoRef}\n          isPlaying={playerState.isPlaying}\n          playbackSpeed={playerState.playbackSpeed}\n          showTranscript={playerState.showTranscript}\n          onTogglePlay={playerState.togglePlayPause}\n          onSkip={playerState.skipTime}\n          onChangeSpeed={() => playerState.changeSpeed()}\n          onToggleTranscript={() => playerState.setShowTranscript(!playerState.showTranscript)}\n          formatTime={playerState.formatTime}\n        />\n      )}\n\n      {playerState.showTranscript && (\n        <TranscriptPanel\n          video={video}\n          currentTime={playerState.currentTime}\n          videoRef={playerState.videoRef}\n          formatTime={playerState.formatTime}\n        />\n      )}\n\n      {activeSegment && !playerState.showTranscript && (\n        <ActiveSubtitle segment={activeSegment} />\n      )}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/YearView.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (32). Maximum allowed is 30.","line":64,"column":50,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":98,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (89). Maximum allowed is 75.","line":84,"column":1,"nodeType":null,"messageId":"exceed","endLine":98,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { LeaveRequest, User } from '../types';\n\nimport { UserVacationRow } from './yearview/UserVacationRow';\nimport { WeekHeaderRow } from './yearview/WeekHeaderRow';\nimport { getCurrentWeekNumber } from './yearview/yearViewHelpers';\n\ninterface YearViewProps {\n  year: number;\n  yearData: { [userId: string]: { [week: string]: LeaveRequest[] } };\n  allUsers: User[];\n  viewMode: 'personal' | 'team';\n  getUserName: (userId: string) => string;\n}\n\nconst YearViewLegend: React.FC = () => (\n  <div className=\"bg-white rounded-xl p-4 mt-4\">\n    <h4 className=\"text-sm font-medium text-gray-700 mb-3\">Legende</h4>\n    <div className=\"flex flex-wrap gap-4 text-sm\">\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-4 h-4 bg-blue-200 border border-gray-300 rounded\" />\n        <span>Urlaub</span>\n      </div>\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-4 h-4 bg-red-200 border border-gray-300 rounded\" />\n        <span>Krankheit</span>\n      </div>\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-4 h-4 bg-gradient-to-r from-blue-200 to-red-200 border border-gray-300 rounded\" />\n        <span>Gemischt</span>\n      </div>\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-4 h-4 bg-blue-100 border border-blue-300 rounded\" />\n        <span>Aktuelle Woche</span>\n      </div>\n    </div>\n  </div>\n);\n\nconst UserRowsContainer: React.FC<{\n  allUsers: User[];\n  getUserName: (userId: string) => string;\n  weeks: number[];\n  year: number;\n  currentWeek: number;\n  yearData: { [userId: string]: { [week: string]: LeaveRequest[] } };\n}> = ({ allUsers, getUserName, weeks, year, currentWeek, yearData }) => (\n  <div className=\"space-y-1\">\n    {allUsers.map(user => (\n      <UserVacationRow\n        key={user.id}\n        userId={user.id}\n        userName={getUserName(user.id)}\n        weeks={weeks}\n        year={year}\n        currentWeek={currentWeek}\n        yearData={yearData}\n      />\n    ))}\n  </div>\n);\n\nexport const YearView: React.FC<YearViewProps> = ({\n  year,\n  yearData,\n  allUsers,\n  viewMode,\n  getUserName\n}) => {\n  const weeks = Array.from({ length: 53 }, (_, i) => i + 1);\n  const currentWeek = getCurrentWeekNumber();\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"overflow-x-auto\">\n        <div className=\"min-w-max\">\n          <WeekHeaderRow \n            year={year}\n            weeks={weeks}\n            viewMode={viewMode}\n          />\n          \n          <UserRowsContainer\n            allUsers={allUsers}\n            getUserName={getUserName}\n            weeks={weeks}\n            year={year}\n            currentWeek={currentWeek}\n            yearData={yearData}\n          />\n        </div>\n      </div>\n\n      <YearViewLegend />\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/achievements/AchievementCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/achievements/AchievementCardGrid.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":30,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":50},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (141). Maximum allowed is 75.","line":86,"column":1,"nodeType":null,"messageId":"exceed","endLine":157,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (40). Maximum allowed is 30.","line":92,"column":121,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":135,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport React from 'react';\n\nimport { Achievement } from '../../types/gamification';\nimport { cn } from '../../utils/cn';\n\ninterface AchievementCardGridProps {\n  achievement: Achievement;\n  isUnlocked: boolean;\n  unlockedAt?: string;\n  progress?: number;\n  onClick?: () => void;\n}\n\nconst RARITY_COLORS = {\n  common: 'from-gray-300 to-gray-500',\n  rare: 'from-blue-300 to-blue-500',\n  epic: 'from-purple-300 to-purple-500',\n  legendary: 'from-yellow-300 to-orange-500'\n};\n\nconst RARITY_LABELS = {\n  common: 'Häufig',\n  rare: 'Selten', \n  epic: 'Episch',\n  legendary: 'Legendär'\n};\n\nconst getRarityBadgeClasses = (rarity: string) => {\n  const rarityClasses = {\n    legendary: 'bg-yellow-100 text-yellow-800',\n    epic: 'bg-purple-100 text-purple-800',\n    rare: 'bg-blue-100 text-blue-800',\n    common: 'bg-gray-100 text-gray-800'\n  };\n  return rarityClasses[rarity as keyof typeof rarityClasses] || rarityClasses.common;\n};\n\nconst ProgressRing: React.FC<{ progress: number }> = ({ progress }) => {\n  const circumference = 2 * Math.PI * 44;\n  const strokeDashoffset = circumference * (1 - progress / 100);\n  \n  return (\n    <div className=\"absolute inset-0 flex items-center justify-center\">\n      <svg className=\"w-24 h-24 transform -rotate-90\">\n        <circle\n          cx=\"48\"\n          cy=\"48\" \n          r=\"44\"\n          stroke=\"currentColor\"\n          strokeWidth=\"4\"\n          fill=\"none\"\n          className=\"text-gray-200\"\n        />\n        <circle\n          cx=\"48\"\n          cy=\"48\"\n          r=\"44\"\n          stroke=\"currentColor\"\n          strokeWidth=\"4\"\n          fill=\"none\"\n          strokeDasharray={circumference}\n          strokeDashoffset={strokeDashoffset}\n          className=\"text-blue-500 transition-all duration-300\"\n        />\n      </svg>\n    </div>\n  );\n};\n\nconst CardIcon: React.FC<{ achievement: Achievement; isUnlocked: boolean; progress: number }> = ({ achievement, isUnlocked, progress }) => (\n  <div className=\"relative mb-4\">\n    <div className={cn(\n      \"w-20 h-20 rounded-full flex items-center justify-center text-3xl text-white shadow-lg mx-auto\",\n      `bg-gradient-to-br ${RARITY_COLORS[achievement.rarity]}`,\n      !isUnlocked && \"grayscale\"\n    )}>\n      <span>{achievement.icon}</span>\n    </div>\n    \n    {!isUnlocked && progress > 0 && <ProgressRing progress={progress} />}\n    \n    {!isUnlocked && progress === 0 && (\n      <div className=\"absolute bottom-0 right-0 w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center text-white text-sm\">\n        🔒\n      </div>\n    )}\n  </div>\n);\n\nconst CardContent: React.FC<{ achievement: Achievement; isUnlocked: boolean; unlockedAt?: string; progress: number }> = ({ achievement, isUnlocked, unlockedAt, progress }) => (\n  <div className=\"text-center\">\n    <h3 className={cn(\n      \"font-semibold mb-2\",\n      isUnlocked ? \"text-gray-900\" : \"text-gray-500\"\n    )}>\n      {achievement.name}\n    </h3>\n    \n    <p className={cn(\n      \"text-sm mb-3\",\n      isUnlocked ? \"text-gray-600\" : \"text-gray-400\"\n    )}>\n      {achievement.description}\n    </p>\n    \n    <div className={cn(\n      \"inline-block text-xs px-3 py-1 rounded-full font-medium mb-2\",\n      getRarityBadgeClasses(achievement.rarity)\n    )}>\n      {RARITY_LABELS[achievement.rarity]}\n    </div>\n    \n    {isUnlocked && unlockedAt && (\n      <p className=\"text-xs text-gray-500\">\n        Freigeschaltet am {format(new Date(unlockedAt), 'dd.MM.yyyy', { locale: de })}\n      </p>\n    )}\n    \n    {!isUnlocked && progress > 0 && (\n      <div className=\"mt-3\">\n        <p className=\"text-xs text-gray-500 mb-1\">\n          {Math.round(progress)}% abgeschlossen\n        </p>\n        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n          <div \n            className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\n            style={{ width: `${Math.min(100, progress)}%` }}\n          />\n        </div>\n      </div>\n    )}\n  </div>\n);\n\nexport const AchievementCardGrid: React.FC<AchievementCardGridProps> = ({\n  achievement,\n  isUnlocked,\n  unlockedAt,\n  progress = 0,\n  onClick\n}) => (\n  <div \n    className={cn(\n      \"bg-white rounded-xl p-6 border transition-all duration-200 group\",\n      isUnlocked \n        ? \"border-gray-200 hover:shadow-lg cursor-pointer hover:scale-105\" \n        : \"border-gray-100 opacity-70\",\n      onClick && \"hover:border-gray-300\"\n    )}\n    onClick={onClick}\n  >\n    <CardIcon achievement={achievement} isUnlocked={isUnlocked} progress={progress} />\n    <CardContent achievement={achievement} isUnlocked={isUnlocked} unlockedAt={unlockedAt} progress={progress} />\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/achievements/AchievementCardList.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":30,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":50},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (34). Maximum allowed is 30.","line":80,"column":6,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":115,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (131). Maximum allowed is 75.","line":84,"column":1,"nodeType":null,"messageId":"exceed","endLine":142,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport React from 'react';\n\nimport { Achievement } from '../../types/gamification';\nimport { cn } from '../../utils/cn';\n\ninterface AchievementCardListProps {\n  achievement: Achievement;\n  isUnlocked: boolean;\n  unlockedAt?: string;\n  progress?: number;\n  onClick?: () => void;\n}\n\nconst RARITY_COLORS = {\n  common: 'from-gray-300 to-gray-500',\n  rare: 'from-blue-300 to-blue-500',\n  epic: 'from-purple-300 to-purple-500',\n  legendary: 'from-yellow-300 to-orange-500'\n};\n\nconst RARITY_LABELS = {\n  common: 'Häufig',\n  rare: 'Selten', \n  epic: 'Episch',\n  legendary: 'Legendär'\n};\n\nconst getRarityBadgeClasses = (rarity: string) => {\n  const rarityClasses = {\n    legendary: 'bg-yellow-100 text-yellow-800',\n    epic: 'bg-purple-100 text-purple-800',\n    rare: 'bg-blue-100 text-blue-800',\n    common: 'bg-gray-100 text-gray-800'\n  };\n  return rarityClasses[rarity as keyof typeof rarityClasses] || rarityClasses.common;\n};\n\nconst ProgressBar: React.FC<{ progress: number }> = ({ progress }) => (\n  <div className=\"mt-2\">\n    <div className=\"flex justify-between text-xs text-gray-500 mb-1\">\n      <span>Fortschritt</span>\n      <span>{Math.round(progress)}%</span>\n    </div>\n    <div className=\"w-full bg-gray-200 rounded-full h-2\">\n      <div \n        className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\n        style={{ width: `${Math.min(100, progress)}%` }}\n      />\n    </div>\n  </div>\n);\n\nconst AchievementIcon: React.FC<{ achievement: Achievement; isUnlocked: boolean; progress: number }> = ({ achievement, isUnlocked, progress }) => (\n  <div className={cn(\n    \"w-16 h-16 rounded-full flex items-center justify-center text-2xl text-white shadow-md relative\",\n    `bg-gradient-to-br ${RARITY_COLORS[achievement.rarity]}`,\n    !isUnlocked && \"grayscale\"\n  )}>\n    <span>{achievement.icon}</span>\n    {!isUnlocked && progress > 0 && (\n      <div className=\"absolute inset-0 rounded-full border-4 border-gray-300\">\n        <div \n          className=\"absolute inset-0 rounded-full border-4 border-blue-500\"\n          style={{\n            clipPath: `polygon(50% 50%, 50% 0%, ${50 + (progress / 100) * 50}% 0%, 100% 100%, 0% 100%)`\n          }}\n        />\n      </div>\n    )}\n  </div>\n);\n\nconst AchievementContent: React.FC<{ \n  achievement: Achievement; \n  isUnlocked: boolean; \n  unlockedAt?: string; \n  progress: number; \n}> = ({ achievement, isUnlocked, unlockedAt, progress }) => (\n  <div className=\"flex-1\">\n    <div className=\"flex items-start justify-between mb-2\">\n      <div>\n        <h3 className={cn(\n          \"font-semibold\",\n          isUnlocked ? \"text-gray-900\" : \"text-gray-500\"\n        )}>\n          {achievement.name}\n        </h3>\n        <p className={cn(\n          \"text-sm\",\n          isUnlocked ? \"text-gray-600\" : \"text-gray-400\"\n        )}>\n          {achievement.description}\n        </p>\n      </div>\n      \n      <div className=\"text-right\">\n        <div className={cn(\n          \"text-xs px-2 py-1 rounded-full font-medium\",\n          getRarityBadgeClasses(achievement.rarity)\n        )}>\n          {RARITY_LABELS[achievement.rarity]}\n        </div>\n        {isUnlocked && unlockedAt && (\n          <p className=\"text-xs text-gray-500 mt-1\">\n            {format(new Date(unlockedAt), 'dd.MM.yyyy', { locale: de })}\n          </p>\n        )}\n      </div>\n    </div>\n\n    {!isUnlocked && progress > 0 && <ProgressBar progress={progress} />}\n  </div>\n);\n\nexport const AchievementCardList: React.FC<AchievementCardListProps> = ({\n  achievement,\n  isUnlocked,\n  unlockedAt,\n  progress = 0,\n  onClick\n}) => (\n  <div \n    className={cn(\n      \"flex items-center gap-4 p-4 bg-white rounded-lg border transition-all duration-200\",\n      isUnlocked \n        ? \"border-gray-200 hover:shadow-md cursor-pointer\" \n        : \"border-gray-100 opacity-60\",\n      onClick && \"hover:border-gray-300\"\n    )}\n    onClick={onClick}\n  >\n    <AchievementIcon achievement={achievement} isUnlocked={isUnlocked} progress={progress} />\n    <AchievementContent \n      achievement={achievement} \n      isUnlocked={isUnlocked} \n      unlockedAt={unlockedAt} \n      progress={progress} \n    />\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/achievements/AchievementGrid.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":36,"column":47,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":36,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1089,1091],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { Achievement, UserAchievement } from '../../types/gamification';\n\nimport { AchievementCard } from './AchievementCard';\n\ninterface AchievementGridProps {\n  achievements: Achievement[];\n  userAchievements: UserAchievement[];\n  layout: 'grid' | 'list';\n  onAchievementClick: (achievement: Achievement) => void;\n}\n\nconst CONTAINER_CLASSES = {\n  grid: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",\n  list: \"space-y-4\"\n};\n\nexport const AchievementGrid: React.FC<AchievementGridProps> = ({\n  achievements,\n  userAchievements,\n  layout,\n  onAchievementClick\n}) => (\n  <div className={CONTAINER_CLASSES[layout]}>\n    {achievements.map(achievement => {\n      const userAchievement = userAchievements.find(ua => ua.achievementId === achievement.id);\n      const isUnlocked = !!userAchievement;\n      \n      return (\n        <AchievementCard\n          key={achievement.id}\n          achievement={achievement}\n          isUnlocked={isUnlocked}\n          unlockedAt={userAchievement?.unlockedAt}\n          progress={userAchievement?.progress || 0}\n          layout={layout}\n          onClick={() => onAchievementClick(achievement)}\n        />\n      );\n    })}\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/achievements/AchievementModal.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":25,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":25,"endColumn":50},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (39). Maximum allowed is 30.","line":35,"column":66,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":77,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { Achievement } from '../../types/gamification';\nimport { cn } from '../../utils/cn';\n\ninterface AchievementModalProps {\n  achievement: Achievement;\n  onClose: () => void;\n}\n\nconst MODAL_RARITY_COLORS = {\n  common: 'from-gray-300 to-gray-500',\n  rare: 'from-blue-300 to-blue-500',\n  epic: 'from-purple-300 to-purple-500',\n  legendary: 'from-yellow-300 to-orange-500'\n};\n\nconst MODAL_RARITY_LABELS = {\n  common: 'Häufig',\n  rare: 'Selten',\n  epic: 'Episch',\n  legendary: 'Legendär'\n};\n\nconst getRarityBadgeClasses = (rarity: string) => {\n  const rarityClasses = {\n    legendary: 'bg-yellow-100 text-yellow-800',\n    epic: 'bg-purple-100 text-purple-800',\n    rare: 'bg-blue-100 text-blue-800',\n    common: 'bg-gray-100 text-gray-800'\n  };\n  return rarityClasses[rarity as keyof typeof rarityClasses] || rarityClasses.common;\n};\n\nexport const AchievementModal: React.FC<AchievementModalProps> = ({\n  achievement,\n  onClose\n}) => {\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-xl p-6 max-w-md w-full\">\n        <div className=\"text-center\">\n          <div className={cn(\n            \"w-24 h-24 rounded-full flex items-center justify-center text-4xl text-white shadow-lg mx-auto mb-4\",\n            `bg-gradient-to-br ${MODAL_RARITY_COLORS[achievement.rarity]}`\n          )}>\n            {achievement.icon}\n          </div>\n          \n          <h3 className=\"text-xl font-bold text-gray-900 mb-2\">\n            {achievement.name}\n          </h3>\n          \n          <p className=\"text-gray-600 mb-4\">\n            {achievement.description}\n          </p>\n          \n          <div className=\"flex justify-center gap-4 mb-6\">\n            <div className={cn(\n              \"px-3 py-1 rounded-full text-sm font-medium\",\n              getRarityBadgeClasses(achievement.rarity)\n            )}>\n              {MODAL_RARITY_LABELS[achievement.rarity]}\n            </div>\n          </div>\n          \n          <button\n            onClick={onClose}\n            className=\"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors\"\n          >\n            Schließen\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/achievements/AchievementsGallery.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (32). Maximum allowed is 30.","line":38,"column":6,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":70,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":72,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":72,"endColumn":100},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":75,"column":83,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":75,"endColumn":85,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2376,2378],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (123). Maximum allowed is 75.","line":92,"column":1,"nodeType":null,"messageId":"exceed","endLine":146,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (38). Maximum allowed is 30.","line":103,"column":72,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":146,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\n\nimport { useAchievementsStore } from '../../state/achievements';\nimport { Achievement, UserAchievement } from '../../types/gamification';\nimport { cn } from '../../utils/cn';\n\nimport { AchievementGrid } from './AchievementGrid';\nimport { AchievementModal } from './AchievementModal';\nimport { CategoryFilter } from './CategoryFilter';\nimport { EmptyState } from './EmptyState';\nimport { ProgressHeader } from './ProgressHeader';\nimport { filterAchievements } from './useAchievementFilters';\n\ninterface AchievementsGalleryProps {\n  userId: string;\n  showLocked?: boolean;\n  showProgress?: boolean;\n  layout?: 'grid' | 'list';\n  filterCategory?: string;\n  className?: string;\n}\n\ninterface ProgressStats {\n  totalAchievements: number;\n  unlockedAchievements: number;\n  completionRate: number;\n  recentUnlocks: UserAchievement[];\n}\n\n\n/**\n * Achievements Gallery Component\n * Shows all achievements with unlock status and progress\n */\nconst Header: React.FC<{\n  progressStats: ProgressStats;\n  layout: 'grid' | 'list';\n}> = ({ progressStats, layout }) => (\n  <div className=\"flex items-center justify-between mb-6\">\n    <div>\n      <h2 className=\"text-2xl font-bold text-gray-900\">Achievements</h2>\n      <p className=\"text-gray-600\">\n        {progressStats.unlockedAchievements} von {progressStats.totalAchievements} freigeschaltet \n        ({Math.round(progressStats.completionRate)}%)\n      </p>\n    </div>\n    \n    {/* Layout toggle */}\n    <div className=\"flex gap-2\">\n      <button\n        onClick={() => layout !== 'grid' && window.location.reload()}\n        className={cn(\n          \"p-2 rounded-lg\",\n          layout === 'grid' ? 'bg-blue-100 text-blue-600' : 'bg-gray-100 text-gray-600'\n        )}\n      >\n        ⊞\n      </button>\n      <button\n        onClick={() => layout !== 'list' && window.location.reload()}\n        className={cn(\n          \"p-2 rounded-lg\",\n          layout === 'list' ? 'bg-blue-100 text-blue-600' : 'bg-gray-100 text-gray-600'\n        )}\n      >\n        ☰\n      </button>\n    </div>\n  </div>\n);\n\nconst useAchievementsGalleryLogic = (userId: string, filterCategory?: string, showLocked = true) => {\n  const { getAchievements, getUserAchievements, getUnlockedAchievements, getProgressStats } = useAchievementsStore();\n  \n  const [selectedCategory, setSelectedCategory] = useState<string>(filterCategory || 'all');\n  const [selectedAchievement, setSelectedAchievement] = useState<Achievement | null>(null);\n\n  const allAchievements = getAchievements();\n  const userAchievements = getUserAchievements(userId);\n  const unlockedAchievements = getUnlockedAchievements(userId);\n  const progressStats = getProgressStats(userId);\n\n  const unlockedAchievementIds = unlockedAchievements.map(ua => ua.id);\n  const filteredAchievements = filterAchievements(\n    allAchievements,\n    selectedCategory,\n    showLocked,\n    unlockedAchievementIds\n  );\n\n  return {\n    selectedCategory,\n    selectedAchievement,\n    allAchievements,\n    userAchievements,\n    progressStats,\n    filteredAchievements,\n    setSelectedCategory,\n    setSelectedAchievement\n  };\n};\n\nexport const AchievementsGallery: React.FC<AchievementsGalleryProps> = ({\n  userId,\n  showLocked = true,\n  showProgress: _showProgress = true,\n  layout = 'grid',\n  filterCategory,\n  className\n}) => {\n  const galleryState = useAchievementsGalleryLogic(userId, filterCategory, showLocked);\n\n  return (\n    <div className={cn(\"w-full\", className)}>\n      <Header progressStats={galleryState.progressStats} layout={layout} />\n\n      <ProgressHeader\n        completionRate={galleryState.progressStats.completionRate}\n        unlockedCount={galleryState.progressStats.unlockedAchievements}\n        totalCount={galleryState.progressStats.totalAchievements}\n      />\n\n      <CategoryFilter\n        selectedCategory={galleryState.selectedCategory}\n        onCategoryChange={galleryState.setSelectedCategory}\n        achievements={galleryState.allAchievements}\n      />\n\n      <AchievementGrid\n        achievements={galleryState.filteredAchievements}\n        userAchievements={galleryState.userAchievements}\n        layout={layout}\n        onAchievementClick={galleryState.setSelectedAchievement}\n      />\n\n      {galleryState.filteredAchievements.length === 0 && <EmptyState />}\n\n      {galleryState.selectedAchievement && (\n        <AchievementModal\n          achievement={galleryState.selectedAchievement}\n          onClose={() => galleryState.setSelectedAchievement(null)}\n        />\n      )}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/achievements/CategoryFilter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/achievements/EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/achievements/ProgressHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/achievements/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/achievements/useAchievementFilters.ts","messages":[{"ruleId":"max-params","severity":1,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":17,"column":18,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":17,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Achievement } from '../../types/gamification';\n\nexport const CATEGORIES = [\n  { id: 'all', name: 'Alle', icon: '🏆' },\n  { id: 'learning', name: 'Lernen', icon: '🎓' },\n  { id: 'attendance', name: 'Anwesenheit', icon: '⏰' },\n  { id: 'engagement', name: 'Engagement', icon: '💪' },\n  { id: 'milestone', name: 'Meilensteine', icon: '🎯' },\n  { id: 'special', name: 'Spezial', icon: '⭐' }\n];\n\nexport const filterAchievements = (\n  achievements: Achievement[],\n  selectedCategory: string,\n  showLocked: boolean,\n  unlockedAchievementIds: string[]\n): Achievement[] => {\n  return achievements.filter(achievement => {\n    // Category filter\n    if (selectedCategory !== 'all' && achievement.category !== selectedCategory) {\n      return false;\n    }\n    \n    // Lock filter\n    return showLocked || unlockedAchievementIds.includes(achievement.id);\n  });\n};\n\nexport const getCategoryCount = (\n  achievements: Achievement[],\n  categoryId: string\n): number => {\n  if (categoryId === 'all') {\n    return achievements.length;\n  }\n  return achievements.filter(a => a.category === categoryId).length;\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/AccessoryTab.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":16,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":16,"endColumn":39},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (50). Maximum allowed is 30.","line":31,"column":6,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":85,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 14. Maximum allowed is 10.","line":31,"column":6,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":85,"endColumn":2},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":36,"column":7,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":42,"endColumn":69},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":38,"column":11,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":42,"endColumn":69},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (161). Maximum allowed is 75.","line":85,"column":1,"nodeType":null,"messageId":"exceed","endLine":181,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":87,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":87,"endColumn":92},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":88,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":88,"endColumn":53},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":92,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":92,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":96,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":96,"endColumn":34},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (42). Maximum allowed is 30.","line":137,"column":58,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":181,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":156,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":156,"endColumn":99}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { Avatar, AvatarAccessory } from '../../types/learning';\nimport { cn } from '../../utils/cn';\n\ninterface AccessoryTabProps {\n  accessories: AvatarAccessory[];\n  previewAvatar: Avatar;\n  ownedItems: string[];\n  userCoins: number;\n  onPreview: (accessory: AvatarAccessory) => void;\n  onPurchase: (accessory: AvatarAccessory) => void;\n  onRemove: (type: string) => void;\n}\n\nconst getTypeLabel = (type: string) => {\n  const labels = {\n    hat: 'Kopfbedeckungen',\n    glasses: 'Brillen',\n    clothing: 'Kleidung'\n  };\n  return labels[type as keyof typeof labels] || type;\n};\n\nconst AccessoryButton: React.FC<{\n  accessory: AvatarAccessory;\n  owned: boolean;\n  equipped: boolean;\n  affordable: boolean;\n  onAction: () => void;\n}> = ({ accessory, owned, equipped, affordable, onAction }) => (\n  <button\n    onClick={onAction}\n    className={cn(\n      \"relative p-4 rounded-lg border-2 transition-all\",\n      equipped\n        ? \"border-blue-500 bg-blue-50\"\n        : owned || accessory.requiredLevel\n        ? \"border-gray-300 hover:border-gray-400 bg-white\"\n        : affordable\n        ? \"border-gray-300 hover:border-blue-300 bg-white\"\n        : \"border-gray-200 bg-gray-50 opacity-50 cursor-not-allowed\"\n    )}\n    disabled={!owned && !accessory.requiredLevel && !affordable}\n  >\n    <div className=\"aspect-square bg-gray-100 rounded-lg mb-2 p-2\">\n      <img\n        src={accessory.imageUrl}\n        alt={accessory.name}\n        className=\"w-full h-full object-contain\"\n      />\n    </div>\n    \n    <p className=\"text-sm font-medium text-gray-900 truncate\">\n      {accessory.name}\n    </p>\n    \n    {accessory.price && !owned && (\n      <p className={cn(\n        \"text-xs mt-1\",\n        affordable ? \"text-gray-600\" : \"text-red-600\"\n      )}>\n        {accessory.price} 🪙\n      </p>\n    )}\n    \n    {accessory.requiredLevel && (\n      <p className=\"text-xs mt-1 text-blue-600\">\n        Level {accessory.requiredLevel}\n      </p>\n    )}\n    \n    {owned && !equipped && (\n      <div className=\"absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded\">\n        Gekauft\n      </div>\n    )}\n    \n    {equipped && (\n      <div className=\"absolute top-2 right-2 bg-blue-500 text-white text-xs px-2 py-1 rounded\">\n        Angelegt\n      </div>\n    )}\n  </button>\n);\n\nconst useAccessoryTab = (previewAvatar: Avatar, ownedItems: string[], userCoins: number) => {\n  const isEquipped = (accessory: AvatarAccessory) => {\n    return previewAvatar.accessories.some(a => a.id === accessory.id);\n  };\n\n  const canAfford = (price?: number) => {\n    return !price || userCoins >= price;\n  };\n\n  const isOwned = (id: string) => {\n    return ownedItems.includes(id);\n  };\n\n  return { isEquipped, canAfford, isOwned };\n};\n\nconst AccessoryGroup: React.FC<{\n  type: string;\n  items: AvatarAccessory[];\n  isEquipped: (accessory: AvatarAccessory) => boolean;\n  canAfford: (price?: number) => boolean;\n  isOwned: (id: string) => boolean;\n  onAction: (accessory: AvatarAccessory, equipped: boolean, owned: boolean) => void;\n}> = ({ type, items, isEquipped, canAfford, isOwned, onAction }) => (\n  <div>\n    <h4 className=\"font-medium text-gray-700 mb-3 capitalize\">\n      {getTypeLabel(type)}\n    </h4>\n    \n    <div className=\"grid grid-cols-3 gap-3\">\n      {items.map(accessory => {\n        const owned = isOwned(accessory.id);\n        const equipped = isEquipped(accessory);\n        const affordable = canAfford(accessory.price);\n        \n        return (\n          <AccessoryButton\n            key={accessory.id}\n            accessory={accessory}\n            owned={owned}\n            equipped={equipped}\n            affordable={affordable}\n            onAction={() => onAction(accessory, equipped, owned)}\n          />\n        );\n      })}\n    </div>\n  </div>\n);\n\nexport const AccessoryTab: React.FC<AccessoryTabProps> = ({\n  accessories,\n  previewAvatar,\n  ownedItems,\n  userCoins,\n  onPreview,\n  onPurchase,\n  onRemove\n}) => {\n  const { isEquipped, canAfford, isOwned } = useAccessoryTab(previewAvatar, ownedItems, userCoins);\n  \n  const groupedAccessories = accessories.reduce((acc, accessory) => {\n    if (!acc[accessory.type]) {\n      acc[accessory.type] = [];\n    }\n    acc[accessory.type].push(accessory);\n    return acc;\n  }, {} as Record<string, AvatarAccessory[]>);\n\n  const handleAccessoryAction = (accessory: AvatarAccessory, equipped: boolean, owned: boolean) => {\n    if (equipped) {\n      onRemove(accessory.type);\n    } else if (owned || accessory.requiredLevel) {\n      onPreview(accessory);\n    } else {\n      onPurchase(accessory);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {Object.entries(groupedAccessories).map(([type, items]) => (\n        <AccessoryGroup\n          key={type}\n          type={type}\n          items={items}\n          isEquipped={isEquipped}\n          canAfford={canAfford}\n          isOwned={isOwned}\n          onAction={handleAccessoryAction}\n        />\n      ))}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/AchievementsGrid.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (41). Maximum allowed is 30.","line":16,"column":66,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":59,"endColumn":2},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":31,"column":15,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":34,"endColumn":63},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":32,"column":15,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":34,"endColumn":63}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { cn } from '../../utils/cn';\n\ninterface Achievement {\n  id: string;\n  name: string;\n  icon: string;\n  rarity: 'common' | 'rare' | 'epic' | 'legendary';\n}\n\ninterface AchievementsGridProps {\n  achievements: Achievement[];\n}\n\nexport const AchievementsGrid: React.FC<AchievementsGridProps> = ({ \n  achievements \n}) => (\n  <div className=\"w-full\">\n    <h3 className=\"text-xl font-semibold text-gray-900 mb-4 text-center\">Achievements</h3>\n    \n    {achievements.length > 0 ? (\n      <div className=\"flex justify-center gap-4 flex-wrap\">\n        {achievements.slice(0, 6).map((achievement) => (\n          <div\n            key={achievement.id}\n            className=\"relative group cursor-pointer transform hover:scale-110 transition-transform\"\n          >\n            <div className={cn(\n              \"w-12 h-12 rounded-full flex items-center justify-center text-2xl shadow-lg\",\n              achievement.rarity === 'legendary' ? 'bg-gradient-to-r from-purple-400 to-pink-400' :\n              achievement.rarity === 'epic' ? 'bg-gradient-to-r from-purple-300 to-blue-400' :\n              achievement.rarity === 'rare' ? 'bg-gradient-to-r from-blue-300 to-green-400' :\n              'bg-gradient-to-r from-yellow-300 to-orange-400'\n            )}>\n              <span>{achievement.icon}</span>\n            </div>\n            \n            <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10\">\n              {achievement.name}\n            </div>\n          </div>\n        ))}\n        \n        {achievements.length > 6 && (\n          <div className=\"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 border-2 border-dashed border-gray-300\">\n            <span className=\"text-xs\">+{achievements.length - 6}</span>\n          </div>\n        )}\n      </div>\n    ) : (\n      <div className=\"text-center py-8\">\n        <span className=\"text-4xl mb-2 block\">🏆</span>\n        <p className=\"text-gray-500\">Noch keine Achievements freigeschaltet</p>\n        <p className=\"text-sm text-gray-400\">Absolviere Schulungen und sammle XP!</p>\n      </div>\n    )}\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/AvatarCircle.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (47). Maximum allowed is 30.","line":14,"column":58,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":63,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\ninterface AvatarCircleProps {\n  /** Avatar image URL */\n  avatarUrl?: string;\n  /** Whether to show edit button */\n  showEditButton?: boolean;\n  /** Edit button click handler */\n  onEdit?: () => void;\n  /** Size of the avatar (default: 40 for w-40 h-40) */\n  size?: number;\n}\n\nexport const AvatarCircle: React.FC<AvatarCircleProps> = ({\n  avatarUrl,\n  showEditButton = false,\n  onEdit,\n  size = 40\n}) => {\n  const sizeClass = `w-${size} h-${size}`;\n  const innerSize = Math.floor(size * 0.6);\n  const innerSizeClass = `w-${innerSize} h-${innerSize}`;\n\n  return (\n    <div className=\"relative mb-6\">\n      <div className={`${sizeClass} bg-gradient-to-br from-gray-300 to-gray-500 rounded-full flex items-center justify-center relative overflow-hidden`}>\n        {avatarUrl ? (\n          <img \n            src={avatarUrl} \n            alt=\"Profilbild\" \n            className=\"w-full h-full object-cover\"\n          />\n        ) : (\n          <>\n            <div className=\"absolute inset-0 opacity-20\">\n              <svg width=\"100%\" height=\"100%\" className=\"w-full h-full\">\n                <defs>\n                  <pattern id=\"grid\" width=\"20\" height=\"20\" patternUnits=\"userSpaceOnUse\">\n                    <path d=\"M 20 0 L 0 0 0 20\" fill=\"none\" stroke=\"white\" strokeWidth=\"1\"/>\n                  </pattern>\n                </defs>\n                <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\" />\n              </svg>\n            </div>\n            \n            <div className={`relative z-10 ${innerSizeClass} bg-gray-600 rounded-full flex items-center justify-center`}>\n              <span className=\"text-white text-3xl\">👤</span>\n            </div>\n          </>\n        )}\n      </div>\n\n      {showEditButton && (\n        <button\n          onClick={onEdit}\n          className=\"absolute top-0 right-0 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center hover:shadow-xl transition-shadow\"\n        >\n          <span className=\"text-gray-600\">✏️</span>\n        </button>\n      )}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/AvatarMini.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (35). Maximum allowed is 30.","line":70,"column":54,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":109,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (92). Maximum allowed is 75.","line":91,"column":1,"nodeType":null,"messageId":"exceed","endLine":109,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { useAvatarStore } from '../../state/avatar';\nimport { Skill } from '../../types/avatar';\nimport { cn } from '../../utils/cn';\n\ninterface AvatarMiniProps {\n  userId: string;\n  onClick?: () => void;\n  className?: string;\n  showProgress?: boolean;\n}\n\n/**\n * Mini Avatar Component (for Dashboard)\n * Compact display like Screenshot 1 with skills preview and achievements\n */\nconst AvatarMiniSkeleton: React.FC<{ className?: string }> = ({ className }) => (\n  <div className={cn(\"bg-white rounded-xl p-4 shadow-sm\", className)}>\n    <div className=\"animate-pulse\">\n      <div className=\"w-16 h-16 bg-gray-200 rounded-full mb-3\"></div>\n      <div className=\"h-4 bg-gray-200 rounded mb-2\"></div>\n      <div className=\"h-3 bg-gray-200 rounded\"></div>\n    </div>\n  </div>\n);\n\nconst AvatarMiniHeader: React.FC<{ onClick?: () => void }> = ({ onClick }) => (\n  <div className=\"flex items-center justify-between mb-4\">\n    <h3 className=\"text-sm font-semibold text-gray-700\">Avatar</h3>\n    {onClick && (\n      <span className=\"text-xs text-gray-400 hover:text-gray-600\">\n        Einstellungen →\n      </span>\n    )}\n  </div>\n);\n\nconst SkillsSection: React.FC<{ primarySkill: Skill }> = ({ primarySkill }) => (\n  <div className=\"mb-6\">\n    <h4 className=\"text-lg font-semibold text-gray-900 mb-3 text-center\">Skills</h4>\n    <div className=\"bg-gradient-to-r from-cyan-400 to-cyan-600 text-white px-4 py-2 rounded-full text-center font-medium\">\n      Level {primarySkill.level}\n    </div>\n  </div>\n);\n\nconst EngagementSection: React.FC = () => (\n  <div className=\"mb-6\">\n    <div className=\"flex items-center justify-between bg-gradient-to-r from-yellow-100 to-orange-100 rounded-xl p-4\">\n      <div className=\"flex items-center gap-2\">\n        <span className=\"font-semibold text-gray-900\">Engagement</span>\n      </div>\n      <div className=\"flex items-center gap-1\">\n        <span className=\"text-lg font-bold text-gray-900\">1600</span>\n        <span className=\"text-lg\">🪙</span>\n      </div>\n    </div>\n    <p className=\"text-center text-xs text-gray-600 mt-2\">Browo Coins</p>\n  </div>\n);\n\nconst AchievementSection: React.FC = () => (\n  <div className=\"text-center\">\n    <span className=\"text-3xl mb-2 block\">🏆</span>\n    <p className=\"text-xs text-gray-500\">Verdiene dein erstes Achievement!</p>\n  </div>\n);\n\nexport const AvatarMini: React.FC<AvatarMiniProps> = ({\n  userId,\n  onClick,\n  className,\n  showProgress: _showProgress = true\n}) => {\n  const { getUserAvatar } = useAvatarStore();\n  const userAvatar = getUserAvatar(userId);\n\n  if (!userAvatar) {\n    return <AvatarMiniSkeleton className={className} />;\n  }\n\n  const primarySkill = userAvatar.skills.reduce((prev, current) => \n    current.level > prev.level ? current : prev\n  );\n\n  return (\n    <div \n      className={cn(\n        \"bg-white rounded-xl p-6 shadow-sm transition-all duration-200 flex flex-col h-full\",\n        onClick && \"cursor-pointer hover:shadow-md hover:scale-105\",\n        className\n      )}\n      onClick={onClick}\n    >\n      <AvatarMiniHeader onClick={onClick} />\n      \n      <div className=\"flex-grow flex flex-col justify-center\">\n        <div className=\"text-center mb-6\">\n          <h4 className=\"text-sm font-medium text-gray-900\">Level 01: Rookie</h4>\n        </div>\n\n        <SkillsSection primarySkill={primarySkill} />\n        <EngagementSection />\n        <AchievementSection />\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/AvatarPreview.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (48). Maximum allowed is 30.","line":11,"column":60,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":60,"endColumn":2},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":39,"column":57,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":39,"endColumn":59,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1078,1080],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { Avatar } from '../../types/learning';\nimport { cn } from '../../utils/cn';\n\ninterface AvatarPreviewProps {\n  avatar: Avatar;\n  className?: string;\n}\n\nexport const AvatarPreview: React.FC<AvatarPreviewProps> = ({\n  avatar,\n  className\n}) => {\n  return (\n    <div className={cn(\"relative\", className)}>\n      {/* Background */}\n      <div \n        className=\"absolute inset-0 rounded-2xl\"\n        style={{ backgroundColor: avatar.backgroundColor }}\n      />\n      \n      {/* Base Avatar */}\n      <div className=\"relative p-8\">\n        <div \n          className=\"w-32 h-32 mx-auto rounded-full flex items-center justify-center text-5xl font-bold\"\n          style={{ \n            backgroundColor: avatar.skinColor,\n            color: avatar.hairColor \n          }}\n        >\n          {avatar.baseImage ? (\n            <img \n              src={avatar.baseImage} \n              alt=\"Avatar\" \n              className=\"w-full h-full object-cover rounded-full\"\n            />\n          ) : (\n            <span>{avatar.name?.charAt(0).toUpperCase() || 'A'}</span>\n          )}\n        </div>\n        \n        {/* Accessories */}\n        {avatar.accessories.map(accessory => (\n          <img\n            key={accessory.id}\n            src={accessory.imageUrl}\n            alt={accessory.name}\n            className={cn(\n              \"absolute w-16 h-16\",\n              accessory.type === 'hat' && \"top-4 left-1/2 -translate-x-1/2\",\n              accessory.type === 'glasses' && \"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\",\n              accessory.type === 'clothing' && \"bottom-4 left-1/2 -translate-x-1/2\"\n            )}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/AvatarUpload.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (37). Maximum allowed is 30.","line":24,"column":53,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":62,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":71,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":71,"endColumn":43},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":76,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":76,"endColumn":33},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (133). Maximum allowed is 75.","line":91,"column":1,"nodeType":null,"messageId":"exceed","endLine":154,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (48). Maximum allowed is 30.","line":103,"column":58,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":154,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":112,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":112,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\n\nimport { FileUpload } from '../FileUpload';\n\ninterface AvatarUploadProps {\n  /** Current avatar URL */\n  currentAvatarUrl?: string;\n  /** Callback when avatar file is selected */\n  onAvatarChange: (file: File | null) => void;\n  /** Whether upload is in progress */\n  isUploading?: boolean;\n  /** Error message to display */\n  error?: string;\n  /** Whether user can edit avatar */\n  canEdit?: boolean;\n}\n\ninterface AvatarDisplayProps {\n  avatarUrl?: string;\n  showEditButton: boolean;\n  onEdit: () => void;\n}\n\nconst AvatarDisplay: React.FC<AvatarDisplayProps> = ({ avatarUrl, showEditButton, onEdit }) => (\n  <div className=\"relative mb-6\">\n    <div className=\"w-40 h-40 bg-gradient-to-br from-gray-300 to-gray-500 rounded-full flex items-center justify-center relative overflow-hidden\">\n      {avatarUrl ? (\n        <img \n          src={avatarUrl} \n          alt=\"Profilbild\" \n          className=\"w-full h-full object-cover\"\n        />\n      ) : (\n        <>\n          <div className=\"absolute inset-0 opacity-20\">\n            <svg width=\"100%\" height=\"100%\" className=\"w-full h-full\">\n              <defs>\n                <pattern id=\"grid\" width=\"20\" height=\"20\" patternUnits=\"userSpaceOnUse\">\n                  <path d=\"M 20 0 L 0 0 0 20\" fill=\"none\" stroke=\"white\" strokeWidth=\"1\"/>\n                </pattern>\n              </defs>\n              <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\" />\n            </svg>\n          </div>\n          \n          <div className=\"relative z-10 w-24 h-24 bg-gray-600 rounded-full flex items-center justify-center\">\n            <span className=\"text-white text-3xl\">👤</span>\n          </div>\n        </>\n      )}\n    </div>\n\n    {showEditButton && (\n      <button\n        onClick={onEdit}\n        className=\"absolute top-0 right-0 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center hover:shadow-xl transition-shadow\"\n      >\n        <span className=\"text-gray-600\">✏️</span>\n      </button>\n    )}\n  </div>\n);\n\nconst UploadSection: React.FC<{\n  onAvatarChange: (file: File | null) => void;\n  isUploading: boolean;\n  error?: string;\n}> = ({ onAvatarChange, isUploading, error }) => {\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n\n  const handleFileSelect = (file: File) => {\n    setSelectedFile(file);\n    onAvatarChange(file);\n  };\n\n  const handleFileRemove = () => {\n    setSelectedFile(null);\n    onAvatarChange(null);\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <FileUpload\n        onFileSelect={handleFileSelect}\n        onFileRemove={handleFileRemove}\n        selectedFile={selectedFile}\n        accept=\".png,.jpg,.jpeg\"\n        isUploading={isUploading}\n        error={error}\n        maxSize={5 * 1024 * 1024} // 5MB for avatars\n        placeholder=\"Profilbild hier ablegen oder klicken zum Auswählen\"\n      />\n      \n      <div className=\"text-sm text-gray-600\">\n        <p>• Erlaubte Formate: PNG, JPG, JPEG</p>\n        <p>• Maximale Dateigröße: 5 MB</p>\n        <p>• Empfohlene Größe: Quadratisch (z.B. 400x400 Pixel)</p>\n      </div>\n    </div>\n  );\n};\n\nexport const AvatarUpload: React.FC<AvatarUploadProps> = ({\n  currentAvatarUrl,\n  onAvatarChange,\n  isUploading = false,\n  error,\n  canEdit = true\n}) => {\n  const [showUpload, setShowUpload] = useState(false);\n\n  const handleEditClick = () => {\n    if (canEdit) {\n      setShowUpload(!showUpload);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center\">\n      <AvatarDisplay\n        avatarUrl={currentAvatarUrl}\n        showEditButton={canEdit}\n        onEdit={handleEditClick}\n      />\n\n      {showUpload && canEdit && (\n        <div className=\"w-full max-w-md\">\n          <UploadSection\n            onAvatarChange={onAvatarChange}\n            isUploading={isUploading}\n            error={error}\n          />\n          \n          <div className=\"flex gap-2 mt-4\">\n            {currentAvatarUrl && (\n              <button\n                onClick={() => onAvatarChange(null)}\n                className=\"flex-1 px-4 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors\"\n              >\n                Bild entfernen\n              </button>\n            )}\n            <button\n              onClick={() => setShowUpload(false)}\n              className=\"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              Abbrechen\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/CoinsSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/ColorTab.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":62,"column":46,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":62,"endColumn":48,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1671,1673],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":69,"column":46,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":69,"endColumn":48,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1872,1874],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":76,"column":52,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":76,"endColumn":54,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2087,2089],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { Avatar } from '../../types/learning';\nimport { cn } from '../../utils/cn';\n\ninterface ColorTabProps {\n  previewAvatar: Avatar;\n  onColorChange: (type: 'skin' | 'hair' | 'background', color: string) => void;\n}\n\nconst skinColors = [\n  '#FDBCB4', '#F5DEB3', '#FFE4C4', '#D2B48C', \n  '#BC9A6A', '#A0522D', '#8B4513', '#654321'\n];\n\nconst hairColors = [\n  '#000000', '#3B3B3B', '#8B4513', '#D2691E',\n  '#FFD700', '#FF6347', '#9370DB', '#4169E1'\n];\n\nconst backgroundColors = [\n  '#E3F2FD', '#F3E5F5', '#E8F5E9', '#FFF3E0',\n  '#FFEBEE', '#F3F4F6', '#FFFDE7', '#E0F2F1'\n];\n\nconst ColorPalette: React.FC<{\n  title: string;\n  colors: string[];\n  selectedColor: string;\n  onColorSelect: (color: string) => void;\n  isRounded?: boolean;\n}> = ({ title, colors, selectedColor, onColorSelect, isRounded = true }) => (\n  <div>\n    <h4 className=\"font-medium text-gray-700 mb-3\">{title}</h4>\n    <div className=\"flex flex-wrap gap-2\">\n      {colors.map(color => (\n        <button\n          key={color}\n          onClick={() => onColorSelect(color)}\n          className={cn(\n            \"w-12 h-12 border-4 transition-all\",\n            isRounded ? \"rounded-full\" : \"rounded-lg\",\n            selectedColor === color\n              ? \"border-blue-500 scale-110\"\n              : \"border-gray-300 hover:border-gray-400\"\n          )}\n          style={{ backgroundColor: color }}\n        />\n      ))}\n    </div>\n  </div>\n);\n\nexport const ColorTab: React.FC<ColorTabProps> = ({\n  previewAvatar,\n  onColorChange\n}) => (\n  <div className=\"space-y-6\">\n    <ColorPalette\n      title=\"Hautfarbe\"\n      colors={skinColors}\n      selectedColor={previewAvatar.skinColor || '#FDBCB4'}\n      onColorSelect={(color) => onColorChange('skin', color)}\n    />\n    \n    <ColorPalette\n      title=\"Haarfarbe\"\n      colors={hairColors}\n      selectedColor={previewAvatar.hairColor || '#000000'}\n      onColorSelect={(color) => onColorChange('hair', color)}\n    />\n    \n    <ColorPalette\n      title=\"Hintergrund\"\n      colors={backgroundColors}\n      selectedColor={previewAvatar.backgroundColor || '#E3F2FD'}\n      onColorSelect={(color) => onColorChange('background', color)}\n      isRounded={false}\n    />\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/CustomizationPanel.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (36). Maximum allowed is 30.","line":24,"column":70,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":61,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { Avatar, AvatarAccessory } from '../../types/learning';\n\nimport { AccessoryTab } from './AccessoryTab';\nimport { ColorTab } from './ColorTab';\nimport { CustomizationTabs } from './CustomizationTabs';\n\ntype TabType = 'accessories' | 'colors';\n\ninterface CustomizationPanelProps {\n  activeTab: TabType;\n  previewAvatar: Avatar;\n  availableAccessories: AvatarAccessory[];\n  ownedItems: string[];\n  userCoins: number;\n  onTabChange: (tab: TabType) => void;\n  onAccessoryPreview: (accessory: AvatarAccessory) => void;\n  onAccessoryPurchase: (accessory: AvatarAccessory) => void;\n  onAccessoryRemove: (type: string) => void;\n  onColorChange: (type: 'skin' | 'hair' | 'background', color: string) => void;\n}\n\nexport const CustomizationPanel: React.FC<CustomizationPanelProps> = ({\n  activeTab,\n  previewAvatar,\n  availableAccessories,\n  ownedItems,\n  userCoins,\n  onTabChange,\n  onAccessoryPreview,\n  onAccessoryPurchase,\n  onAccessoryRemove,\n  onColorChange\n}) => (\n  <div className=\"w-2/3 p-6 overflow-y-auto\">\n    <CustomizationTabs \n      activeTab={activeTab} \n      onTabChange={onTabChange} \n    />\n\n    {activeTab === 'accessories' && (\n      <AccessoryTab\n        accessories={availableAccessories}\n        previewAvatar={previewAvatar}\n        ownedItems={ownedItems}\n        userCoins={userCoins}\n        onPreview={onAccessoryPreview}\n        onPurchase={onAccessoryPurchase}\n        onRemove={onAccessoryRemove}\n      />\n    )}\n\n    {activeTab === 'colors' && (\n      <ColorTab\n        previewAvatar={previewAvatar}\n        onColorChange={onColorChange}\n      />\n    )}\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/CustomizationTabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/PreviewPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/SkillsList.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (34). Maximum allowed is 30.","line":17,"column":54,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":54,"endColumn":2},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":23,"column":31,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":25,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\ninterface Skill {\n  id: string;\n  name: string;\n  icon: string;\n  level: number;\n  currentXP: number;\n  totalXP: number;\n  color: string;\n}\n\ninterface SkillsListProps {\n  skills: Skill[];\n}\n\nexport const SkillsList: React.FC<SkillsListProps> = ({ skills }) => (\n  <div className=\"w-full mb-6\">\n    <h3 className=\"text-xl font-semibold text-gray-900 mb-4 text-center\">Skills</h3>\n    \n    <div className=\"space-y-4\">\n      {skills.map((skill) => {\n        const skillProgress = skill.currentXP > 0 && skill.level > 1\n          ? ((skill.currentXP / (skill.totalXP / skill.level)) * 100)\n          : (skill.totalXP > 0 ? 25 : 0);\n\n        return (\n          <div key={skill.id} className=\"flex items-center gap-4\">\n            <div className=\"flex items-center gap-3 min-w-[140px]\">\n              <span className=\"text-2xl\">{skill.icon}</span>\n              <span className=\"font-medium text-gray-900\">{skill.name}</span>\n            </div>\n            \n            <div className=\"flex-1 bg-gray-200 rounded-full h-3 relative overflow-hidden\">\n              <div \n                className=\"h-full rounded-full transition-all duration-300\"\n                style={{ \n                  width: `${Math.min(100, skillProgress)}%`,\n                  backgroundColor: skill.color \n                }}\n              />\n            </div>\n            \n            <div className=\"min-w-[60px] text-right\">\n              <span className=\"text-sm font-medium text-gray-600\">\n                Level {skill.level}\n              </span>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/UserInfo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/avatarData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/avatar/useAvatarCustomization.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (50). Maximum allowed is 30.","line":14,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":70,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":14,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":18,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":23,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":23,"endColumn":65},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":33,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":33,"endColumn":66},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":39,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":39,"endColumn":50},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":46,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":46,"endColumn":85},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":49,"column":8,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":49,"endColumn":89},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":53,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":53,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\n\nimport { useLearningStore } from '../../state/learning';\nimport { Avatar, AvatarAccessory } from '../../types/learning';\n\ntype TabType = 'accessories' | 'colors';\n\ninterface UseAvatarCustomizationProps {\n  avatar: Avatar;\n  onUpdate: (avatar: Avatar) => void;\n  onClose: () => void;\n}\n\nexport const useAvatarCustomization = ({ \n  avatar, \n  onUpdate, \n  onClose \n}: UseAvatarCustomizationProps) => {\n  const { userCoins, ownedItems, purchaseItem } = useLearningStore();\n  const [activeTab, setActiveTab] = useState<TabType>('accessories');\n  const [previewAvatar, setPreviewAvatar] = useState<Avatar>(avatar);\n\n  const handleAccessoryPreview = (accessory: AvatarAccessory) => {\n    const currentAccessories = previewAvatar.accessories.filter(a => a.type !== accessory.type);\n    const isEquipped = previewAvatar.accessories.some(a => a.id === accessory.id);\n    \n    setPreviewAvatar({\n      ...previewAvatar,\n      accessories: isEquipped ? currentAccessories : [...currentAccessories, accessory]\n    });\n  };\n\n  const handleAccessoryPurchase = (accessory: AvatarAccessory) => {\n    if (accessory.price && purchaseItem(accessory.id)) {\n      handleAccessoryPreview(accessory);\n    }\n  };\n\n  const handleAccessoryRemove = (type: string) => {\n    setPreviewAvatar({\n      ...previewAvatar,\n      accessories: previewAvatar.accessories.filter(a => a.type !== type)\n    });\n  };\n\n  const handleColorChange = (type: 'skin' | 'hair' | 'background', color: string) => {\n    setPreviewAvatar({\n      ...previewAvatar,\n      [type === 'skin' ? 'skinColor' : type === 'hair' ? 'hairColor' : 'backgroundColor']: color\n    });\n  };\n\n  const handleSave = () => {\n    onUpdate(previewAvatar);\n    onClose();\n  };\n\n  return {\n    activeTab,\n    previewAvatar,\n    userCoins,\n    ownedItems,\n    setActiveTab,\n    handleAccessoryPreview,\n    handleAccessoryPurchase,\n    handleAccessoryRemove,\n    handleColorChange,\n    handleSave\n  };\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/BenefitCard.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":79,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":79,"endColumn":30},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (129). Maximum allowed is 75.","line":83,"column":1,"nodeType":null,"messageId":"exceed","endLine":144,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (38). Maximum allowed is 30.","line":101,"column":56,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":144,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { type ShopBenefit } from '../../state/shop';\nimport { cn } from '../../utils/cn';\n\ninterface BenefitCardProps {\n  benefit: ShopBenefit;\n  userBalance: number;\n  isAdmin: boolean;\n  onPurchase: (benefitId: string, coinCost: number) => void;\n  onEdit: (benefit: ShopBenefit) => void;\n  onDelete: (benefitId: string) => void;\n}\n\nconst getCategoryIcon = (category: string): string => {\n  switch (category) {\n    case 'WELLNESS': return '💆';\n    case 'FOOD': return '🍽️';\n    case 'TECH': return '💻';\n    case 'TIME_OFF': return '🏖️';\n    default: return '🎁';\n  }\n};\n\nconst getCategoryName = (category: string): string => {\n  switch (category) {\n    case 'WELLNESS': return 'Wellness';\n    case 'FOOD': return 'Essen & Trinken';\n    case 'TECH': return 'Technologie';\n    case 'TIME_OFF': return 'Freizeit';\n    default: return 'Sonstiges';\n  }\n};\n\nconst BenefitHeader: React.FC<{ benefit: ShopBenefit }> = ({ benefit }) => (\n  <div className=\"flex items-start justify-between mb-3\">\n    <div className=\"flex items-center\">\n      <span className=\"text-2xl mr-3\">{getCategoryIcon(benefit.category)}</span>\n      <div>\n        <h3 className=\"font-semibold text-gray-900\">{benefit.title}</h3>\n        <p className=\"text-xs text-gray-500\">{getCategoryName(benefit.category)}</p>\n      </div>\n    </div>\n    <div className=\"text-right\">\n      <p className=\"text-lg font-bold text-blue-600\">{benefit.coinCost}</p>\n      <p className=\"text-xs text-gray-500\">Coins</p>\n    </div>\n  </div>\n);\n\nconst AdminControls: React.FC<{\n  benefit: ShopBenefit;\n  onEdit: (benefit: ShopBenefit) => void;\n  onDelete: (id: string) => void;\n}> = ({ benefit, onEdit, onDelete }) => (\n  <div className=\"flex gap-2 mb-2\">\n    <button\n      onClick={() => onEdit(benefit)}\n      className=\"flex-1 p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors text-sm font-medium\"\n    >\n      ✏️ Bearbeiten\n    </button>\n    <button\n      onClick={() => onDelete(benefit.id)}\n      className=\"flex-1 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium\"\n    >\n      🗑️ Löschen\n    </button>\n  </div>\n);\n\nconst PurchaseButton: React.FC<{\n  benefit: ShopBenefit;\n  canPurchase: boolean;\n  isOutOfStock: boolean;\n  userBalance: number;\n  onPurchase: (id: string, cost: number) => void;\n}> = ({ benefit, canPurchase, isOutOfStock, userBalance, onPurchase }) => {\n  const getButtonText = () => {\n    if (isOutOfStock) return 'Ausverkauft';\n    if (userBalance < benefit.coinCost) return 'Nicht genug Coins';\n    return 'Kaufen';\n  };\n\n  return (\n    <button\n      onClick={() => onPurchase(benefit.id, benefit.coinCost)}\n      disabled={!canPurchase}\n      className={cn(\n        \"w-full py-2 px-4 rounded-lg font-medium transition-colors\",\n        canPurchase\n          ? \"bg-blue-600 text-white hover:bg-blue-700\"\n          : \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n      )}\n    >\n      {getButtonText()}\n    </button>\n  );\n};\n\nexport const BenefitCard: React.FC<BenefitCardProps> = ({\n  benefit,\n  userBalance,\n  isAdmin,\n  onPurchase,\n  onEdit,\n  onDelete\n}) => {\n  const canPurchase = userBalance >= benefit.coinCost && \n    (!benefit.stockLimit || (benefit.currentStock ?? 0) > 0);\n\n  const isOutOfStock = Boolean(benefit.stockLimit && \n    (!benefit.currentStock || benefit.currentStock === 0));\n\n  return (\n    <div className=\"bg-white rounded-xl p-4 shadow-sm\">\n      <BenefitHeader benefit={benefit} />\n      \n      <p className=\"text-sm text-gray-600 mb-4\">{benefit.description}</p>\n      \n      {benefit.stockLimit && (\n        <p className=\"text-xs text-gray-500 mb-2\">\n          Noch {benefit.currentStock} von {benefit.stockLimit} verfügbar\n        </p>\n      )}\n      \n      {isAdmin && (\n        <AdminControls \n          benefit={benefit} \n          onEdit={onEdit} \n          onDelete={onDelete} \n        />\n      )}\n      \n      <PurchaseButton\n        benefit={benefit}\n        canPurchase={canPurchase}\n        isOutOfStock={isOutOfStock}\n        userBalance={userBalance}\n        onPurchase={onPurchase}\n      />\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/BenefitForm.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":50,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":50,"endColumn":50},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":64,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":64,"endColumn":63},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":79,"column":66,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":79,"endColumn":68,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2591,2593],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (259). Maximum allowed is 75.","line":90,"column":1,"nodeType":null,"messageId":"exceed","endLine":290,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":104,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":110,"endColumn":24},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":134,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":134,"endColumn":86},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":143,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":143,"endColumn":124},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (31). Maximum allowed is 30.","line":170,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":200,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":170,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":170,"endColumn":135},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":202,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":202,"endColumn":100},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":227,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":227,"endColumn":109},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":246,"column":8,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":246,"endColumn":93},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (36). Maximum allowed is 30.","line":251,"column":56,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":290,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":259,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":259,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\n\nimport type { ShopBenefit } from '../../state/shop';\nimport { cn } from '../../utils/cn';\n\ninterface ShopStore {\n  addBenefit: (benefit: Omit<ShopBenefit, 'id' | 'createdAt'>) => Promise<void>;\n  updateBenefit: (benefitId: string, updates: Partial<ShopBenefit>) => Promise<void>;\n  isLoading: boolean;\n}\n\ninterface BenefitFormProps {\n  editingBenefit: ShopBenefit | null;\n  shopStore: ShopStore;\n  onClose: () => void;\n  onError: (error: string) => void;\n}\n\ninterface FormData {\n  title: string;\n  description: string;\n  cost: string;\n  category: 'WELLNESS' | 'FOOD' | 'TECH' | 'TIME_OFF' | 'OTHER';\n  stockLimit: string;\n  unlimited: boolean;\n}\n\nconst validateForm = (formData: FormData): string | null => {\n  const { title, description, cost, category, stockLimit, unlimited } = formData;\n  \n  if (!title || !description || !cost || !category) {\n    return 'Bitte füllen Sie alle Pflichtfelder aus';\n  }\n  \n  const parsedCost = parseInt(cost);\n  if (isNaN(parsedCost) || parsedCost <= 0) {\n    return 'Bitte geben Sie einen gültigen Coin-Preis ein';\n  }\n  \n  if (!unlimited) {\n    const parsedStockLimit = parseInt(stockLimit);\n    if (isNaN(parsedStockLimit) || parsedStockLimit <= 0) {\n      return 'Bitte geben Sie einen gültigen Lagerbestand ein';\n    }\n  }\n  \n  return null;\n};\n\nconst createBenefitData = (formData: FormData) => {\n  const cost = parseInt(formData.cost);\n  const stockLimit = formData.unlimited ? undefined : parseInt(formData.stockLimit);\n  \n  return {\n    title: formData.title,\n    description: formData.description,\n    coinCost: cost,\n    category: formData.category,\n    stockLimit: stockLimit,\n    currentStock: stockLimit\n  };\n};\n\nconst useBenefitForm = (editingBenefit: ShopBenefit | null) => {\n  const [benefitTitle, setBenefitTitle] = useState('');\n  const [benefitDescription, setBenefitDescription] = useState('');\n  const [benefitCost, setBenefitCost] = useState('');\n  const [benefitCategory, setBenefitCategory] = useState<'WELLNESS' | 'FOOD' | 'TECH' | 'TIME_OFF' | 'OTHER'>('WELLNESS');\n  const [benefitStockLimit, setBenefitStockLimit] = useState('');\n  const [benefitUnlimited, setBenefitUnlimited] = useState(true);\n\n  useEffect(() => {\n    if (editingBenefit) {\n      setBenefitTitle(editingBenefit.title);\n      setBenefitDescription(editingBenefit.description);\n      setBenefitCost(editingBenefit.coinCost.toString());\n      setBenefitCategory(editingBenefit.category);\n      setBenefitUnlimited(!editingBenefit.stockLimit);\n      setBenefitStockLimit(editingBenefit.stockLimit?.toString() || '');\n    }\n  }, [editingBenefit]);\n\n  return {\n    benefitTitle, setBenefitTitle,\n    benefitDescription, setBenefitDescription,\n    benefitCost, setBenefitCost,\n    benefitCategory, setBenefitCategory,\n    benefitStockLimit, setBenefitStockLimit,\n    benefitUnlimited, setBenefitUnlimited\n  };\n};\n\ninterface FormSubmitParams {\n  e: React.FormEvent;\n  formData: FormData;\n  editingBenefit: ShopBenefit | null;\n  shopStore: ShopStore;\n  handlers: {\n    onClose: () => void;\n    onError: (error: string) => void;\n  };\n}\n\nconst handleFormSubmit = async ({\n  e,\n  formData,\n  editingBenefit,\n  shopStore,\n  handlers: { onClose, onError }\n}: FormSubmitParams) => {\n  e.preventDefault();\n\n  const validationError = validateForm(formData);\n  if (validationError) {\n    onError(validationError);\n    return;\n  }\n\n  try {\n    const benefitData = createBenefitData(formData);\n    \n    if (editingBenefit) {\n      await shopStore.updateBenefit(editingBenefit.id, benefitData);\n    } else {\n      await shopStore.addBenefit({ ...benefitData, isActive: true });\n    }\n    \n    onClose();\n  } catch (error) {\n    onError('Fehler beim Speichern des Benefits');\n  }\n};\n\nconst renderFormHeader = (editingBenefit: ShopBenefit | null, onClose: () => void) => (\n  <div className=\"flex items-center justify-between\">\n    <h3 className=\"text-lg font-semibold text-gray-900\">\n      {editingBenefit ? 'Benefit bearbeiten' : 'Neues Benefit erstellen'}\n    </h3>\n    <button type=\"button\" onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">✕</button>\n  </div>\n);\n\nconst renderBasicFields = (formState: ReturnType<typeof useBenefitForm>, inputClassName: string, labelClassName: string) => (\n  <>\n    <div>\n      <label className={labelClassName}>Titel</label>\n      <input\n        type=\"text\"\n        value={formState.benefitTitle}\n        onChange={(e) => formState.setBenefitTitle(e.target.value)}\n        className={inputClassName}\n        placeholder=\"z.B. Massage Gutschein\"\n        required\n      />\n    </div>\n\n    <div>\n      <label className={labelClassName}>Beschreibung</label>\n      <textarea\n        value={formState.benefitDescription}\n        onChange={(e) => formState.setBenefitDescription(e.target.value)}\n        className={`${inputClassName} h-20 resize-none`}\n        placeholder=\"Beschreibung des Benefits...\"\n        required\n      />\n    </div>\n  </>\n);\n\nconst renderPriceAndCategoryFields = (formState: ReturnType<typeof useBenefitForm>, inputClassName: string, labelClassName: string) => (\n  <div className=\"grid grid-cols-2 gap-4\">\n    <div>\n      <label className={labelClassName}>Coin-Preis</label>\n      <input\n        type=\"number\"\n        value={formState.benefitCost}\n        onChange={(e) => formState.setBenefitCost(e.target.value)}\n        className={inputClassName}\n        placeholder=\"z.B. 150\"\n        min=\"1\"\n        required\n      />\n    </div>\n    <div>\n      <label className={labelClassName}>Kategorie</label>\n      <select\n        value={formState.benefitCategory}\n        onChange={(e) => formState.setBenefitCategory(e.target.value as 'WELLNESS' | 'FOOD' | 'TECH' | 'TIME_OFF' | 'OTHER')}\n        className={inputClassName}\n        required\n      >\n        <option value=\"WELLNESS\">Wellness</option>\n        <option value=\"FOOD\">Essen & Trinken</option>\n        <option value=\"TECH\">Technologie</option>\n        <option value=\"TIME_OFF\">Freizeit</option>\n        <option value=\"OTHER\">Sonstiges</option>\n      </select>\n    </div>\n  </div>\n);\n\nconst renderStockFields = (formState: ReturnType<typeof useBenefitForm>, inputClassName: string) => (\n  <div>\n    <label className=\"flex items-center mb-2\">\n      <input\n        type=\"checkbox\"\n        checked={formState.benefitUnlimited}\n        onChange={(e) => formState.setBenefitUnlimited(e.target.checked)}\n        className=\"mr-2\"\n      />\n      <span className=\"text-sm font-medium text-gray-700\">Unbegrenzter Lagerbestand</span>\n    </label>\n    {!formState.benefitUnlimited && (\n      <input\n        type=\"number\"\n        value={formState.benefitStockLimit}\n        onChange={(e) => formState.setBenefitStockLimit(e.target.value)}\n        className={inputClassName}\n        placeholder=\"Lagerbestand (z.B. 10)\"\n        min=\"1\"\n        required\n      />\n    )}\n  </div>\n);\n\nconst renderFormButtons = (onClose: () => void, shopStore: ShopStore, editingBenefit: ShopBenefit | null) => (\n  <div className=\"flex space-x-3\">\n    <button\n      type=\"button\"\n      onClick={onClose}\n      className=\"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n    >\n      Abbrechen\n    </button>\n    <button\n      type=\"submit\"\n      disabled={shopStore.isLoading}\n      className={cn(\n        \"flex-1 py-2 px-4 rounded-lg font-medium transition-colors\",\n        shopStore.isLoading \n          ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n          : \"bg-blue-600 text-white hover:bg-blue-700\"\n      )}\n    >\n      {shopStore.isLoading ? 'Speichert...' : editingBenefit ? 'Aktualisieren' : 'Erstellen'}\n    </button>\n  </div>\n);\n\nexport const BenefitForm: React.FC<BenefitFormProps> = ({\n  editingBenefit,\n  shopStore,\n  onClose,\n  onError\n}) => {\n  const formState = useBenefitForm(editingBenefit);\n  \n  const handleSubmit = (e: React.FormEvent) => {\n    const formData: FormData = {\n      title: formState.benefitTitle,\n      description: formState.benefitDescription,\n      cost: formState.benefitCost,\n      category: formState.benefitCategory,\n      stockLimit: formState.benefitStockLimit,\n      unlimited: formState.benefitUnlimited\n    };\n    \n    return handleFormSubmit({\n      e,\n      formData,\n      editingBenefit,\n      shopStore,\n      handlers: { onClose, onError }\n    });\n  };\n\n  const inputClassName = \"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\";\n  const labelClassName = \"text-sm font-medium text-gray-700 mb-2 block\";\n\n  return (\n    <form onSubmit={handleSubmit} className=\"bg-white rounded-xl p-6 shadow-sm space-y-4 border-2 border-blue-200\">\n      {renderFormHeader(editingBenefit, onClose)}\n      {renderBasicFields(formState, inputClassName, labelClassName)}\n      {renderPriceAndCategoryFields(formState, inputClassName, labelClassName)}\n      {renderStockFields(formState, inputClassName)}\n      {renderFormButtons(onClose, shopStore, editingBenefit)}\n    </form>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/BenefitsShop.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (39). Maximum allowed is 30.","line":17,"column":58,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":58,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { useShopStore, type ShopBenefit } from '../../state/shop';\n\nimport { BenefitCard } from './BenefitCard';\nimport { CoinEventsProgress } from './CoinEventsProgress';\n\ninterface BenefitsShopProps {\n  userBalance: number;\n  isAdmin: boolean;\n  onPurchase: (benefitId: string, coinCost: number) => Promise<void>;\n  onShowBenefitForm: () => void;\n  onEditBenefit: (benefit: ShopBenefit) => void;\n  onDeleteBenefit: (benefitId: string) => Promise<void>;\n}\n\nexport const BenefitsShop: React.FC<BenefitsShopProps> = ({\n  userBalance,\n  isAdmin,\n  onPurchase,\n  onShowBenefitForm,\n  onEditBenefit,\n  onDeleteBenefit\n}) => {\n  const { getActiveBenefits } = useShopStore();\n\n  return (\n    <div className=\"space-y-4\">\n      <CoinEventsProgress userBalance={userBalance} />\n\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-lg font-semibold text-gray-900\">Benefits Shop</h2>\n        {isAdmin && (\n          <button\n            onClick={onShowBenefitForm}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors\"\n          >\n            + Neues Benefit\n          </button>\n        )}\n      </div>\n      \n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n        {getActiveBenefits().map((benefit) => (\n          <BenefitCard\n            key={benefit.id}\n            benefit={benefit}\n            userBalance={userBalance}\n            isAdmin={isAdmin}\n            onPurchase={onPurchase}\n            onEdit={onEditBenefit}\n            onDelete={onDeleteBenefit}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/CoinEventForm.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":41,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":41,"endColumn":53},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":48,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":48,"endColumn":57},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":71,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":71,"endColumn":87},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":80,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":80,"endColumn":127},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (183). Maximum allowed is 75.","line":90,"column":1,"nodeType":null,"messageId":"exceed","endLine":209,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":107,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":107,"endColumn":129},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":135,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":135,"endColumn":114},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":154,"column":8,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":154,"endColumn":93},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (43). Maximum allowed is 30.","line":159,"column":60,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":209,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":167,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":167,"endColumn":53}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\n\nimport type { CoinEvent } from '../../state/coinEvents';\nimport { cn } from '../../utils/cn';\n\ninterface EventsStore {\n  addEvent: (event: Omit<CoinEvent, 'id' | 'createdAt'>) => Promise<void>;\n  updateEvent: (eventId: string, updates: Partial<CoinEvent>) => Promise<void>;\n  isLoading: boolean;\n}\n\ninterface CoinEventFormProps {\n  editingEvent: CoinEvent | null;\n  eventsStore: EventsStore;\n  onClose: () => void;\n  onError: (error: string) => void;\n}\n\ninterface EventFormData {\n  title: string;\n  description: string;\n  requiredCoins: string;\n  reward: string;\n}\n\nconst validateEventForm = (formData: EventFormData): string | null => {\n  const { title, description, requiredCoins, reward } = formData;\n  \n  if (!title || !description || !requiredCoins || !reward) {\n    return 'Bitte füllen Sie alle Felder aus';\n  }\n  \n  const parsedCoins = parseInt(requiredCoins);\n  if (isNaN(parsedCoins) || parsedCoins <= 0) {\n    return 'Bitte geben Sie eine gültige Coin-Anzahl ein';\n  }\n  \n  return null;\n};\n\nconst createEventData = (formData: EventFormData) => ({\n  title: formData.title,\n  description: formData.description,\n  requiredCoins: parseInt(formData.requiredCoins),\n  reward: formData.reward\n});\n\nconst useEventForm = (editingEvent: CoinEvent | null) => {\n  const [eventTitle, setEventTitle] = useState('');\n  const [eventDescription, setEventDescription] = useState('');\n  const [eventRequiredCoins, setEventRequiredCoins] = useState('');\n  const [eventReward, setEventReward] = useState('');\n\n  useEffect(() => {\n    if (editingEvent) {\n      setEventTitle(editingEvent.title);\n      setEventDescription(editingEvent.description);\n      setEventRequiredCoins(editingEvent.requiredCoins.toString());\n      setEventReward(editingEvent.reward);\n    }\n  }, [editingEvent]);\n\n  return {\n    eventTitle, setEventTitle,\n    eventDescription, setEventDescription,\n    eventRequiredCoins, setEventRequiredCoins,\n    eventReward, setEventReward\n  };\n};\n\nconst renderEventFormHeader = (editingEvent: CoinEvent | null, onClose: () => void) => (\n  <div className=\"flex items-center justify-between\">\n    <h3 className=\"text-lg font-semibold text-gray-900\">\n      {editingEvent ? 'Event bearbeiten' : 'Neues Event erstellen'}\n    </h3>\n    <button type=\"button\" onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">✕</button>\n  </div>\n);\n\nconst renderEventBasicFields = (formState: ReturnType<typeof useEventForm>, inputClassName: string, labelClassName: string) => (\n  <>\n    <div>\n      <label className={labelClassName}>Titel</label>\n      <input\n        type=\"text\"\n        value={formState.eventTitle}\n        onChange={(e) => formState.setEventTitle(e.target.value)}\n        className={inputClassName}\n        placeholder=\"z.B. Bronze Status\"\n        required\n      />\n    </div>\n\n    <div>\n      <label className={labelClassName}>Beschreibung</label>\n      <textarea\n        value={formState.eventDescription}\n        onChange={(e) => formState.setEventDescription(e.target.value)}\n        className={`${inputClassName} h-20 resize-none`}\n        placeholder=\"Beschreibung des Events...\"\n        required\n      />\n    </div>\n  </>\n);\n\nconst renderEventDetailsFields = (formState: ReturnType<typeof useEventForm>, inputClassName: string, labelClassName: string) => (\n  <div className=\"grid grid-cols-2 gap-4\">\n    <div>\n      <label className={labelClassName}>Benötigte Coins</label>\n      <input\n        type=\"number\"\n        value={formState.eventRequiredCoins}\n        onChange={(e) => formState.setEventRequiredCoins(e.target.value)}\n        className={inputClassName}\n        placeholder=\"z.B. 100\"\n        min=\"1\"\n        required\n      />\n    </div>\n    <div>\n      <label className={labelClassName}>Belohnung</label>\n      <input\n        type=\"text\"\n        value={formState.eventReward}\n        onChange={(e) => formState.setEventReward(e.target.value)}\n        className={inputClassName}\n        placeholder=\"z.B. Exklusiver Badge + 5% Rabatt\"\n        required\n      />\n    </div>\n  </div>\n);\n\nconst renderEventFormButtons = (onClose: () => void, eventsStore: EventsStore, editingEvent: CoinEvent | null) => (\n  <div className=\"flex space-x-3\">\n    <button\n      type=\"button\"\n      onClick={onClose}\n      className=\"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n    >\n      Abbrechen\n    </button>\n    <button\n      type=\"submit\"\n      disabled={eventsStore.isLoading}\n      className={cn(\n        \"flex-1 py-2 px-4 rounded-lg font-medium transition-colors\",\n        eventsStore.isLoading \n          ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n          : \"bg-purple-600 text-white hover:bg-purple-700\"\n      )}\n    >\n      {eventsStore.isLoading ? 'Speichert...' : editingEvent ? 'Aktualisieren' : 'Erstellen'}\n    </button>\n  </div>\n);\n\nexport const CoinEventForm: React.FC<CoinEventFormProps> = ({\n  editingEvent,\n  eventsStore,\n  onClose,\n  onError\n}) => {\n  const formState = useEventForm(editingEvent);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    const formData: EventFormData = {\n      title: formState.eventTitle,\n      description: formState.eventDescription,\n      requiredCoins: formState.eventRequiredCoins,\n      reward: formState.eventReward\n    };\n\n    const validationError = validateEventForm(formData);\n    if (validationError) {\n      onError(validationError);\n      return;\n    }\n\n    try {\n      const eventData = createEventData(formData);\n      \n      if (editingEvent) {\n        await eventsStore.updateEvent(editingEvent.id, eventData);\n      } else {\n        await eventsStore.addEvent({ ...eventData, isActive: true });\n      }\n      \n      onClose();\n    } catch (error) {\n      onError('Fehler beim Speichern des Events');\n    }\n  };\n\n  const inputClassName = \"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500\";\n  const labelClassName = \"text-sm font-medium text-gray-700 mb-2 block\";\n\n  return (\n    <form onSubmit={handleSubmit} className=\"bg-white rounded-xl p-6 shadow-sm space-y-4 border-2 border-purple-200 mb-4\">\n      {renderEventFormHeader(editingEvent, onClose)}\n      {renderEventBasicFields(formState, inputClassName, labelClassName)}\n      {renderEventDetailsFields(formState, inputClassName, labelClassName)}\n      {renderEventFormButtons(onClose, eventsStore, editingEvent)}\n    </form>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/CoinEventProgress.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":62,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":62,"endColumn":131},{"ruleId":"max-params","severity":1,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":62,"column":129,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":62,"endColumn":131}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { useCoinEventsStore, CoinEvent } from '../../state/coinEvents';\n\ninterface CoinEventProgressProps {\n  userBalance: number;\n}\n\nconst CoinEventHeader: React.FC = () => (\n  <div className=\"mb-3\">\n    <h3 className=\"font-semibold text-lg\">🎯 Coin Events</h3>\n    <p className=\"text-sm opacity-90\">Erreiche Meilensteine und erhalte Belohnungen!</p>\n  </div>\n);\n\nconst NextEventProgress: React.FC<{ event: CoinEvent; userBalance: number }> = ({ event, userBalance }) => {\n  const progress = (userBalance / event.requiredCoins) * 100;\n  \n  return (\n    <div>\n      <div className=\"flex items-center justify-between mb-2\">\n        <span className=\"text-sm font-medium\">{event.title}</span>\n        <span className=\"text-sm\">{userBalance} / {event.requiredCoins} Coins</span>\n      </div>\n      <div className=\"w-full bg-white/20 rounded-full h-3\">\n        <div \n          className=\"bg-white rounded-full h-3 transition-all duration-500 ease-out\"\n          style={{ width: `${Math.min(progress, 100)}%` }}\n        />\n      </div>\n      <p className=\"text-xs mt-2 opacity-90\">Belohnung: {event.reward}</p>\n    </div>\n  );\n};\n\nconst AllEventsComplete: React.FC = () => (\n  <div className=\"text-center py-2\">\n    <p className=\"text-lg font-bold\">🏆 Alle Events freigeschaltet!</p>\n    <p className=\"text-sm opacity-90\">Glückwunsch, du hast alle Meilensteine erreicht!</p>\n  </div>\n);\n\nconst NoActiveEvents: React.FC = () => (\n  <div className=\"text-center py-2\">\n    <p className=\"text-sm opacity-90\">Keine aktiven Events verfügbar</p>\n  </div>\n);\n\nconst UnlockedEventsList: React.FC<{ events: CoinEvent[] }> = ({ events }) => (\n  <div className=\"mt-4 pt-4 border-t border-white/20\">\n    <p className=\"text-xs font-semibold mb-2\">✅ Freigeschaltet:</p>\n    <div className=\"flex flex-wrap gap-2\">\n      {events.map((event) => (\n        <span key={event.id} className=\"text-xs bg-white/20 px-2 py-1 rounded-full\">\n          {event.title}\n        </span>\n      ))}\n    </div>\n  </div>\n);\n\nconst getEventContent = (nextEvent: CoinEvent | null, unlockedEvents: CoinEvent[], allEvents: CoinEvent[], userBalance: number) => {\n  if (nextEvent) {\n    return <NextEventProgress event={nextEvent} userBalance={userBalance} />;\n  } else if (unlockedEvents.length === allEvents.length && allEvents.length > 0) {\n    return <AllEventsComplete />;\n  } else {\n    return <NoActiveEvents />;\n  }\n};\n\nexport const CoinEventProgress: React.FC<CoinEventProgressProps> = ({ userBalance }) => {\n  const { getActiveEvents, getUnlockedEvents, getNextEvent } = useCoinEventsStore();\n  \n  const unlockedEvents = getUnlockedEvents(userBalance);\n  const nextEvent = getNextEvent(userBalance);\n  const allEvents = getActiveEvents();\n  \n  return (\n    <div className=\"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl p-4 text-white shadow-lg\">\n      <CoinEventHeader />\n      {getEventContent(nextEvent, unlockedEvents, allEvents, userBalance)}\n      {unlockedEvents.length > 0 && <UnlockedEventsList events={unlockedEvents} />}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/CoinEventsProgress.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":62,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":62,"endColumn":134},{"ruleId":"max-params","severity":1,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":62,"column":132,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":62,"endColumn":134}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { useCoinEventsStore, CoinEvent } from '../../state/coinEvents';\n\ninterface CoinEventsProgressProps {\n  userBalance: number;\n}\n\nconst EventHeader: React.FC = () => (\n  <div className=\"mb-3\">\n    <h3 className=\"font-semibold text-lg\">🎯 Coin Events</h3>\n    <p className=\"text-sm opacity-90\">Erreiche Meilensteine und erhalte Belohnungen!</p>\n  </div>\n);\n\nconst NextEventProgress: React.FC<{ nextEvent: CoinEvent; userBalance: number }> = ({ nextEvent, userBalance }) => {\n  const progress = (userBalance / nextEvent.requiredCoins) * 100;\n  \n  return (\n    <div>\n      <div className=\"flex items-center justify-between mb-2\">\n        <span className=\"text-sm font-medium\">{nextEvent.title}</span>\n        <span className=\"text-sm\">{userBalance} / {nextEvent.requiredCoins} Coins</span>\n      </div>\n      <div className=\"w-full bg-white/20 rounded-full h-3\">\n        <div \n          className=\"bg-white rounded-full h-3 transition-all duration-500 ease-out\"\n          style={{ width: `${Math.min(progress, 100)}%` }}\n        />\n      </div>\n      <p className=\"text-xs mt-2 opacity-90\">Belohnung: {nextEvent.reward}</p>\n    </div>\n  );\n};\n\nconst AllEventsComplete: React.FC = () => (\n  <div className=\"text-center py-2\">\n    <p className=\"text-lg font-bold\">🏆 Alle Events freigeschaltet!</p>\n    <p className=\"text-sm opacity-90\">Glückwunsch, du hast alle Meilensteine erreicht!</p>\n  </div>\n);\n\nconst NoActiveEvents: React.FC = () => (\n  <div className=\"text-center py-2\">\n    <p className=\"text-sm opacity-90\">Keine aktiven Events verfügbar</p>\n  </div>\n);\n\nconst UnlockedEventsList: React.FC<{ events: CoinEvent[] }> = ({ events }) => (\n  <div className=\"mt-4 pt-4 border-t border-white/20\">\n    <p className=\"text-xs font-semibold mb-2\">✅ Freigeschaltet:</p>\n    <div className=\"flex flex-wrap gap-2\">\n      {events.map((event) => (\n        <span key={event.id} className=\"text-xs bg-white/20 px-2 py-1 rounded-full\">\n          {event.title}\n        </span>\n      ))}\n    </div>\n  </div>\n);\n\nconst getProgressContent = (nextEvent: CoinEvent | null, unlockedEvents: CoinEvent[], allEvents: CoinEvent[], userBalance: number) => {\n  if (nextEvent) {\n    return <NextEventProgress nextEvent={nextEvent} userBalance={userBalance} />;\n  }\n  \n  if (unlockedEvents.length === allEvents.length && allEvents.length > 0) {\n    return <AllEventsComplete />;\n  }\n  \n  return <NoActiveEvents />;\n};\n\nexport const CoinEventsProgress: React.FC<CoinEventsProgressProps> = ({ userBalance }) => {\n  const { getActiveEvents, getUnlockedEvents, getNextEvent } = useCoinEventsStore();\n\n  const unlockedEvents = getUnlockedEvents(userBalance);\n  const nextEvent = getNextEvent(userBalance);\n  const allEvents = getActiveEvents();\n\n  return (\n    <div className=\"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl p-4 text-white shadow-lg\">\n      <EventHeader />\n      {getProgressContent(nextEvent, unlockedEvents, allEvents, userBalance)}\n      {unlockedEvents.length > 0 && <UnlockedEventsList events={unlockedEvents} />}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/CoinGrantForm.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":28,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":28,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":53,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":59,"endColumn":24},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (213). Maximum allowed is 75.","line":87,"column":1,"nodeType":null,"messageId":"exceed","endLine":237,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (38). Maximum allowed is 30.","line":93,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":131,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":93,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":99,"endColumn":25},{"ruleId":"max-lines-per-function","severity":1,"message":"Async arrow function has too many lines (38). Maximum allowed is 30.","line":141,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":182,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":141,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":147,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":184,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":184,"endColumn":100},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":214,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":214,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\n\nimport type { CoinRule } from '../../state/coins';\nimport type { User } from '../../types';\n\nimport { \n  validateGrantForm, \n  getAmountAndReason, \n  resetFormState, \n  renderUserSelection, \n  renderCustomReasonOption, \n  renderSubmitButton,\n  type FormState \n} from './CoinGrantFormHelpers';\n\ninterface CoinsStore {\n  getCoinRules: () => CoinRule[];\n  grantCoins: (userId: string, amount: number, reason: string, adminId: string) => Promise<void>;\n  isLoading: boolean;\n}\n\ninterface CoinGrantFormProps {\n  user: User;\n  coinsStore: CoinsStore;\n  onError: (error: string) => void;\n}\n\nconst useGrantForm = () => {\n  const [selectedUserId, setSelectedUserId] = useState('');\n  const [coinAmount, setCoinAmount] = useState('');\n  const [coinReason, setCoinReason] = useState('');\n  const [selectedRuleId, setSelectedRuleId] = useState('');\n  const [isCustomReason, setIsCustomReason] = useState(false);\n\n  return {\n    selectedUserId, setSelectedUserId,\n    coinAmount, setCoinAmount,\n    coinReason, setCoinReason,\n    selectedRuleId, setSelectedRuleId,\n    isCustomReason, setIsCustomReason\n  };\n};\n\n\ninterface RuleOptionsProps {\n  coinsStore: CoinsStore;\n  selectedRuleId: string;\n  isCustomReason: boolean;\n  setSelectedRuleId: (value: string) => void;\n  setIsCustomReason: (value: boolean) => void;\n}\n\nconst renderRuleOptions = ({\n  coinsStore,\n  selectedRuleId,\n  isCustomReason,\n  setSelectedRuleId,\n  setIsCustomReason\n}: RuleOptionsProps) => (\n  <div className=\"space-y-2\">\n    {coinsStore.getCoinRules().map((rule: CoinRule) => (\n      <label key={rule.id} className=\"flex items-start\">\n        <input\n          type=\"radio\"\n          name=\"coinReason\"\n          value={rule.id}\n          checked={selectedRuleId === rule.id && !isCustomReason}\n          onChange={(e) => {\n            setSelectedRuleId(e.target.value);\n            setIsCustomReason(false);\n          }}\n          className=\"mt-1 mr-3\"\n        />\n        <div className=\"flex-1\">\n          <p className=\"font-medium text-gray-900\">{rule.title}</p>\n          <p className=\"text-sm text-gray-600\">{rule.description}</p>\n          <p className=\"text-sm font-semibold text-green-600\">+{rule.coinAmount} Coins</p>\n        </div>\n      </label>\n    ))}\n  </div>\n);\n\n\ninterface CustomFieldsProps {\n  isCustomReason: boolean;\n  coinAmount: string;\n  setCoinAmount: (value: string) => void;\n  coinReason: string;\n  setCoinReason: (value: string) => void;\n}\n\nconst renderCustomFields = ({\n  isCustomReason,\n  coinAmount,\n  setCoinAmount,\n  coinReason,\n  setCoinReason\n}: CustomFieldsProps) => (\n  isCustomReason ? (\n    <>\n      <div>\n        <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n          Anzahl Coins\n        </label>\n        <input\n          type=\"number\"\n          value={coinAmount}\n          onChange={(e) => setCoinAmount(e.target.value)}\n          className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          placeholder=\"z.B. 25\"\n          min=\"1\"\n          required={isCustomReason}\n        />\n      </div>\n\n      <div>\n        <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n          Begründung\n        </label>\n        <textarea\n          value={coinReason}\n          onChange={(e) => setCoinReason(e.target.value)}\n          className=\"w-full border border-gray-300 rounded-lg px-3 py-2 h-20 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\"\n          placeholder=\"Grund für die Coin-Vergabe...\"\n          required={isCustomReason}\n        />\n      </div>\n    </>\n  ) : null\n);\n\ninterface GrantFormSubmitParams {\n  e: React.FormEvent;\n  formState: ReturnType<typeof useGrantForm>;\n  user: User;\n  coinsStore: CoinsStore;\n  onError: (error: string) => void;\n}\n\nconst handleGrantFormSubmit = async ({\n  e,\n  formState,\n  user,\n  coinsStore,\n  onError\n}: GrantFormSubmitParams) => {\n  e.preventDefault();\n  \n  const formData: FormState = {\n    selectedUserId: formState.selectedUserId,\n    coinAmount: formState.coinAmount,\n    coinReason: formState.coinReason,\n    selectedRuleId: formState.selectedRuleId,\n    isCustomReason: formState.isCustomReason\n  };\n\n  const validationError = validateGrantForm(formData);\n  if (validationError) {\n    onError(validationError);\n    return;\n  }\n\n  const result = getAmountAndReason(formData, coinsStore);\n  if ('error' in result) {\n    onError(result.error);\n    return;\n  }\n\n  try {\n    await coinsStore.grantCoins(formState.selectedUserId, result.amount, result.reason, user.id);\n    resetFormState({\n      setSelectedUserId: formState.setSelectedUserId,\n      setCoinAmount: formState.setCoinAmount,\n      setCoinReason: formState.setCoinReason,\n      setSelectedRuleId: formState.setSelectedRuleId,\n      setIsCustomReason: formState.setIsCustomReason\n    });\n  } catch (error) {\n    onError('Fehler beim Verteilen der Coins');\n  }\n};\n\nconst renderReasonSection = (formState: ReturnType<typeof useGrantForm>, coinsStore: CoinsStore) => (\n  <div>\n    <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n      Grund auswählen\n    </label>\n    <div className=\"space-y-2\">\n      {renderRuleOptions({\n        coinsStore,\n        selectedRuleId: formState.selectedRuleId,\n        isCustomReason: formState.isCustomReason,\n        setSelectedRuleId: formState.setSelectedRuleId,\n        setIsCustomReason: formState.setIsCustomReason\n      })}\n      {renderCustomReasonOption(\n        formState.isCustomReason,\n        formState.setIsCustomReason,\n        formState.setSelectedRuleId\n      )}\n    </div>\n  </div>\n);\n\n\nexport const CoinGrantForm: React.FC<CoinGrantFormProps> = ({\n  user,\n  coinsStore,\n  onError\n}) => {\n  const formState = useGrantForm();\n\n  const handleSubmit = (e: React.FormEvent) => \n    handleGrantFormSubmit({\n      e,\n      formState,\n      user,\n      coinsStore,\n      onError\n    });\n\n  return (\n    <form onSubmit={handleSubmit} className=\"bg-white rounded-xl p-6 shadow-sm space-y-4\">\n      {renderUserSelection(formState.selectedUserId, formState.setSelectedUserId)}\n      {renderReasonSection(formState, coinsStore)}\n      {renderCustomFields({\n        isCustomReason: formState.isCustomReason,\n        coinAmount: formState.coinAmount,\n        setCoinAmount: formState.setCoinAmount,\n        coinReason: formState.coinReason,\n        setCoinReason: formState.setCoinReason\n      })}\n      {renderSubmitButton(coinsStore)}\n    </form>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/CoinGrantFormHelpers.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":60,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":66,"endColumn":6},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":74,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":74,"endColumn":107},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (119). Maximum allowed is 75.","line":87,"column":1,"nodeType":null,"messageId":"exceed","endLine":133,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":95,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":99,"endColumn":5},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":118,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":118,"endColumn":62}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport type { CoinRule } from '../../state/coins';\nimport { cn } from '../../utils/cn';\n\ninterface CoinsStore {\n  getCoinRules: () => CoinRule[];\n  isLoading: boolean;\n}\n\ninterface FormState {\n  selectedUserId: string;\n  coinAmount: string;\n  coinReason: string;\n  selectedRuleId: string;\n  isCustomReason: boolean;\n}\n\nconst availableUsers = [\n  { id: '1', name: 'Max M.' },\n  { id: '2', name: 'Anna A.' },\n  { id: '3', name: 'Tom K.' },\n  { id: '4', name: 'Lisa S.' },\n  { id: '5', name: 'Julia B.' },\n  { id: '6', name: 'Marco L.' }\n];\n\nexport const validateGrantForm = (formState: FormState): string | null => {\n  if (!formState.selectedUserId) {\n    return 'Bitte wählen Sie einen Mitarbeiter aus';\n  }\n\n  if (!formState.isCustomReason && !formState.selectedRuleId) {\n    return 'Bitte wählen Sie eine Regel aus';\n  }\n\n  if (formState.isCustomReason && (!formState.coinAmount || !formState.coinReason)) {\n    return 'Bitte geben Sie Anzahl und Begründung ein';\n  }\n\n  return null;\n};\n\nexport const getAmountAndReason = (formState: FormState, coinsStore: CoinsStore): { amount: number; reason: string } | { error: string } => {\n  if (formState.isCustomReason) {\n    const amount = parseInt(formState.coinAmount);\n    if (isNaN(amount) || amount <= 0) {\n      return { error: 'Bitte geben Sie eine gültige Coin-Anzahl ein' };\n    }\n    return { amount, reason: formState.coinReason };\n  } else {\n    const selectedRule = coinsStore.getCoinRules().find((rule: CoinRule) => rule.id === formState.selectedRuleId);\n    if (!selectedRule) {\n      return { error: 'Ungültige Regel ausgewählt' };\n    }\n    return { amount: selectedRule.coinAmount, reason: selectedRule.title };\n  }\n};\n\nexport const resetFormState = (setters: {\n  setSelectedUserId: (value: string) => void;\n  setCoinAmount: (value: string) => void;\n  setCoinReason: (value: string) => void;\n  setSelectedRuleId: (value: string) => void;\n  setIsCustomReason: (value: boolean) => void;\n}) => {\n  setters.setSelectedUserId('');\n  setters.setCoinAmount('');\n  setters.setCoinReason('');\n  setters.setSelectedRuleId('');\n  setters.setIsCustomReason(false);\n};\n\nexport const renderUserSelection = (selectedUserId: string, setSelectedUserId: (value: string) => void) => (\n  <div>\n    <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n      Mitarbeiter auswählen\n    </label>\n    <select\n      value={selectedUserId}\n      onChange={(e) => setSelectedUserId(e.target.value)}\n      className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n      required\n    >\n      <option value=\"\">Mitarbeiter auswählen...</option>\n      {availableUsers.map((user) => (\n        <option key={user.id} value={user.id}>\n          {user.name}\n        </option>\n      ))}\n    </select>\n  </div>\n);\n\nexport const renderCustomReasonOption = (\n  isCustomReason: boolean,\n  setIsCustomReason: (value: boolean) => void,\n  setSelectedRuleId: (value: string) => void\n) => (\n  <label className=\"flex items-start\">\n    <input\n      type=\"radio\"\n      name=\"coinReason\"\n      checked={isCustomReason}\n      onChange={() => {\n        setIsCustomReason(true);\n        setSelectedRuleId('');\n      }}\n      className=\"mt-1 mr-3\"\n    />\n    <div className=\"flex-1\">\n      <p className=\"font-medium text-gray-900\">Eigene Begründung</p>\n      <p className=\"text-sm text-gray-600\">Geben Sie eine individuelle Begründung und Coin-Anzahl ein</p>\n    </div>\n  </label>\n);\n\nexport const renderSubmitButton = (coinsStore: CoinsStore) => (\n  <button\n    type=\"submit\"\n    disabled={coinsStore.isLoading}\n    className={cn(\n      \"w-full py-2 px-4 rounded-lg font-medium transition-colors\",\n      coinsStore.isLoading \n        ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n        : \"bg-blue-600 text-white hover:bg-blue-700\"\n    )}\n  >\n    {coinsStore.isLoading ? 'Verteilt...' : 'Coins verteilen'}\n  </button>\n);\n\nexport type { FormState };","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/CoinRuleForm.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":38,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":38,"endColumn":51},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":44,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":44,"endColumn":54},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":64,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":64,"endColumn":84},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (37). Maximum allowed is 30.","line":73,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":111,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":73,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":73,"endColumn":124},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (160). Maximum allowed is 75.","line":90,"column":1,"nodeType":null,"messageId":"exceed","endLine":185,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":113,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":113,"endColumn":109},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":132,"column":8,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":132,"endColumn":91},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (41). Maximum allowed is 30.","line":137,"column":58,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":185,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":145,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":145,"endColumn":53}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\n\nimport type { CoinRule } from '../../state/coins';\nimport { cn } from '../../utils/cn';\n\ninterface CoinsStore {\n  addCoinRule: (rule: Omit<CoinRule, 'id' | 'createdAt'>) => Promise<void>;\n  updateCoinRule: (ruleId: string, updates: Partial<CoinRule>) => Promise<void>;\n  isLoading: boolean;\n}\n\ninterface CoinRuleFormProps {\n  editingRule: CoinRule | null;\n  coinsStore: CoinsStore;\n  onClose: () => void;\n  onError: (error: string) => void;\n}\n\ninterface RuleFormData {\n  title: string;\n  description: string;\n  amount: string;\n}\n\nconst validateRuleForm = (formData: RuleFormData): string | null => {\n  if (!formData.title || !formData.description || !formData.amount) {\n    return 'Bitte füllen Sie alle Felder aus';\n  }\n\n  const amount = parseInt(formData.amount);\n  if (isNaN(amount) || amount <= 0) {\n    return 'Bitte geben Sie eine gültige Coin-Anzahl ein';\n  }\n\n  return null;\n};\n\nconst createRuleData = (formData: RuleFormData) => ({\n  title: formData.title,\n  description: formData.description,\n  coinAmount: parseInt(formData.amount)\n});\n\nconst useRuleForm = (editingRule: CoinRule | null) => {\n  const [ruleTitle, setRuleTitle] = useState('');\n  const [ruleDescription, setRuleDescription] = useState('');\n  const [ruleAmount, setRuleAmount] = useState('');\n\n  useEffect(() => {\n    if (editingRule) {\n      setRuleTitle(editingRule.title);\n      setRuleDescription(editingRule.description);\n      setRuleAmount(editingRule.coinAmount.toString());\n    }\n  }, [editingRule]);\n\n  return {\n    ruleTitle, setRuleTitle,\n    ruleDescription, setRuleDescription,\n    ruleAmount, setRuleAmount\n  };\n};\n\nconst renderRuleFormHeader = (editingRule: CoinRule | null, onClose: () => void) => (\n  <div className=\"flex items-center justify-between\">\n    <h3 className=\"text-lg font-semibold text-gray-900\">\n      {editingRule ? 'Regel bearbeiten' : 'Neue Regel erstellen'}\n    </h3>\n    <button type=\"button\" onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">✕</button>\n  </div>\n);\n\nconst renderRuleFormFields = (formState: ReturnType<typeof useRuleForm>, inputClassName: string, labelClassName: string) => (\n  <>\n    <div>\n      <label className={labelClassName}>Titel</label>\n      <input\n        type=\"text\"\n        value={formState.ruleTitle}\n        onChange={(e) => formState.setRuleTitle(e.target.value)}\n        className={inputClassName}\n        placeholder=\"z.B. Schulung abgeschlossen\"\n        required\n      />\n    </div>\n\n    <div>\n      <label className={labelClassName}>Beschreibung</label>\n      <textarea\n        value={formState.ruleDescription}\n        onChange={(e) => formState.setRuleDescription(e.target.value)}\n        className={`${inputClassName} h-20 resize-none`}\n        placeholder=\"Beschreibung der Regel...\"\n        required\n      />\n    </div>\n\n    <div>\n      <label className={labelClassName}>Coin-Anzahl</label>\n      <input\n        type=\"number\"\n        value={formState.ruleAmount}\n        onChange={(e) => formState.setRuleAmount(e.target.value)}\n        className={inputClassName}\n        placeholder=\"z.B. 20\"\n        min=\"1\"\n        required\n      />\n    </div>\n  </>\n);\n\nconst renderRuleFormButtons = (onClose: () => void, coinsStore: CoinsStore, editingRule: CoinRule | null) => (\n  <div className=\"flex space-x-3\">\n    <button\n      type=\"button\"\n      onClick={onClose}\n      className=\"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n    >\n      Abbrechen\n    </button>\n    <button\n      type=\"submit\"\n      disabled={coinsStore.isLoading}\n      className={cn(\n        \"flex-1 py-2 px-4 rounded-lg font-medium transition-colors\",\n        coinsStore.isLoading \n          ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n          : \"bg-blue-600 text-white hover:bg-blue-700\"\n      )}\n    >\n      {coinsStore.isLoading ? 'Speichert...' : editingRule ? 'Aktualisieren' : 'Erstellen'}\n    </button>\n  </div>\n);\n\nexport const CoinRuleForm: React.FC<CoinRuleFormProps> = ({\n  editingRule,\n  coinsStore,\n  onClose,\n  onError\n}) => {\n  const formState = useRuleForm(editingRule);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    const formData: RuleFormData = {\n      title: formState.ruleTitle,\n      description: formState.ruleDescription,\n      amount: formState.ruleAmount\n    };\n\n    const validationError = validateRuleForm(formData);\n    if (validationError) {\n      onError(validationError);\n      return;\n    }\n\n    try {\n      const ruleData = createRuleData(formData);\n      \n      if (editingRule) {\n        await coinsStore.updateCoinRule(editingRule.id, ruleData);\n      } else {\n        await coinsStore.addCoinRule({ ...ruleData, isActive: true });\n      }\n      \n      onClose();\n    } catch (error) {\n      onError('Fehler beim Speichern der Regel');\n    }\n  };\n\n  const inputClassName = \"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\";\n  const labelClassName = \"text-sm font-medium text-gray-700 mb-2 block\";\n\n  return (\n    <form onSubmit={handleSubmit} className=\"bg-white rounded-xl p-6 shadow-sm space-y-4 border-2 border-blue-200\">\n      {renderRuleFormHeader(editingRule, onClose)}\n      {renderRuleFormFields(formState, inputClassName, labelClassName)}\n      {renderRuleFormButtons(onClose, coinsStore, editingRule)}\n    </form>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/EarnTab.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":13,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":13,"endColumn":134},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":18,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":18,"endColumn":109},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":29,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":29,"endColumn":117},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":34,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":34,"endColumn":89},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":48,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":55,"endColumn":6},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (41). Maximum allowed is 30.","line":66,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":106,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":66,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":71,"endColumn":6},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (32). Maximum allowed is 30.","line":73,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":104,"endColumn":6},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (112). Maximum allowed is 75.","line":88,"column":1,"nodeType":null,"messageId":"exceed","endLine":127,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":116,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":116,"endColumn":41},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":117,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":117,"endColumn":43},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":118,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":118,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\n\nimport type { CoinRule, CoinsStore } from '../../state/coins';\n\nimport { CoinRuleForm } from './CoinRuleForm';\n\ninterface EarnTabProps {\n  isAdmin: boolean;\n  coinsStore: CoinsStore;\n  onError: (error: string) => void;\n}\n\nconst handleEditRule = (rule: CoinRule, setEditingRule: (rule: CoinRule | null) => void, setShowRuleForm: (show: boolean) => void) => {\n  setEditingRule(rule);\n  setShowRuleForm(true);\n};\n\nconst handleDeleteRule = async (ruleId: string, coinsStore: CoinsStore, onError: (error: string) => void) => {\n  // TODO: Replace with modal confirmation component\n  // if (window.confirm('Sind Sie sicher, dass Sie diese Regel löschen möchten?')) {\n    try {\n      await coinsStore.deleteCoinRule(ruleId);\n    } catch (error) {\n      onError('Fehler beim Löschen der Regel');\n    }\n  // }\n};\n\nconst resetRuleForm = (setShowRuleForm: (show: boolean) => void, setEditingRule: (rule: CoinRule | null) => void) => {\n  setShowRuleForm(false);\n  setEditingRule(null);\n};\n\nconst renderRuleHeader = (isAdmin: boolean, setShowRuleForm: (show: boolean) => void) => (\n  <div className=\"flex items-center justify-between\">\n    <h2 className=\"text-lg font-semibold text-gray-900\">Wie bekomme ich Coins?</h2>\n    {isAdmin && (\n      <button\n        onClick={() => setShowRuleForm(true)}\n        className=\"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors\"\n      >\n        + Neue Regel\n      </button>\n    )}\n  </div>\n);\n\nconst renderRuleForm = (props: {\n  showRuleForm: boolean;\n  isAdmin: boolean;\n  editingRule: CoinRule | null;\n  coinsStore: CoinsStore;\n  resetFormCallback: () => void;\n  onError: (error: string) => void;\n}) => (\n  props.showRuleForm && props.isAdmin ? (\n    <CoinRuleForm\n      editingRule={props.editingRule}\n      coinsStore={props.coinsStore}\n      onClose={props.resetFormCallback}\n      onError={props.onError}\n    />\n  ) : null\n);\n\nconst renderRulesList = (props: {\n  coinsStore: CoinsStore;\n  isAdmin: boolean;\n  onEditRule: (rule: CoinRule) => void;\n  onDeleteRule: (ruleId: string) => void;\n}) => (\n  <div className=\"space-y-3\">\n    {props.coinsStore.getCoinRules().map((rule: CoinRule) => (\n      <div key={rule.id} className=\"bg-white rounded-xl p-4 shadow-sm\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <h3 className=\"font-semibold text-gray-900\">{rule.title}</h3>\n            <p className=\"text-sm text-gray-600\">{rule.description}</p>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"text-right\">\n              <p className=\"text-lg font-bold text-green-600\">+{rule.coinAmount}</p>\n              <p className=\"text-xs text-gray-500\">Coins</p>\n            </div>\n            {props.isAdmin && (\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => props.onEditRule(rule)}\n                  className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                >\n                  ✏️\n                </button>\n                <button\n                  onClick={() => props.onDeleteRule(rule.id)}\n                  className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                >\n                  🗑️\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    ))}\n  </div>\n);\n\nexport const EarnTab: React.FC<EarnTabProps> = ({\n  isAdmin,\n  coinsStore,\n  onError\n}) => {\n  const [showRuleForm, setShowRuleForm] = useState(false);\n  const [editingRule, setEditingRule] = useState<CoinRule | null>(null);\n\n  const onEditRule = (rule: CoinRule) => handleEditRule(rule, setEditingRule, setShowRuleForm);\n  const onDeleteRule = (ruleId: string) => handleDeleteRule(ruleId, coinsStore, onError);\n  const resetFormCallback = () => resetRuleForm(setShowRuleForm, setEditingRule);\n\n  return (\n    <div className=\"space-y-4\">\n      {renderRuleHeader(isAdmin, setShowRuleForm)}\n      {renderRuleForm({ showRuleForm, isAdmin, editingRule, coinsStore, resetFormCallback, onError })}\n      {renderRulesList({ coinsStore, isAdmin, onEditRule, onDeleteRule })}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/HistoryTab.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":34,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":34,"endColumn":43},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":44,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":44,"endColumn":106},{"ruleId":"max-params","severity":1,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":44,"column":104,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":44,"endColumn":106},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":56,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":56,"endColumn":50},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":69,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":69,"endColumn":50},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":82,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":82,"endColumn":111},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (159). Maximum allowed is 75.","line":85,"column":1,"nodeType":null,"messageId":"exceed","endLine":175,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":105,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":105,"endColumn":106},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":134,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":134,"endColumn":110},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":140,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":140,"endColumn":71},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":147,"column":8,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":151,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\n\nimport type { CoinTransaction, CoinsStore } from '../../state/coins';\nimport type { User } from '../../types';\nimport { cn } from '../../utils/cn';\n\ninterface HistoryTabProps {\n  isAdmin: boolean;\n  user: User;\n  coinsStore: CoinsStore;\n}\n\nconst availableUsers = [\n  { id: '1', name: 'Max M.' },\n  { id: '2', name: 'Anna A.' },\n  { id: '3', name: 'Tom K.' },\n  { id: '4', name: 'Lisa S.' },\n  { id: '5', name: 'Julia B.' },\n  { id: '6', name: 'Marco L.' }\n];\n\nconst getUserName = (userId: string): string => {\n  const names: { [key: string]: string } = {\n    '1': 'Max M.',\n    '2': 'Anna A.',\n    '3': 'Tom K.',\n    '4': 'Lisa S.',\n    '5': 'Julia B.',\n    '6': 'Marco L.'\n  };\n  return names[userId] || 'Unbekannt';\n};\n\nconst formatDate = (dateString: string) => {\n  return new Date(dateString).toLocaleDateString('de-DE', {\n    day: '2-digit',\n    month: '2-digit',\n    year: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n};\n\nconst getTransactions = (isAdmin: boolean, selectedUserId: string, coinsStore: CoinsStore, user: User) => {\n  if (isAdmin) {\n    if (selectedUserId) {\n      return coinsStore.getUserTransactions(selectedUserId);\n    } else {\n      return coinsStore.getAllTransactions();\n    }\n  } else {\n    return coinsStore.getUserTransactions(user.id);\n  }\n};\n\nconst getTransactionTypeStyle = (type: string) => {\n  switch (type) {\n    case 'BENEFIT_PURCHASE':\n      return 'px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full';\n    case 'ADMIN_GRANT':\n      return 'px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full';\n    case 'RULE_EARNED':\n      return 'px-2 py-1 bg-yellow-100 text-yellow-700 text-xs rounded-full';\n    default:\n      return 'px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full';\n  }\n};\n\nconst getTransactionTypeLabel = (type: string) => {\n  switch (type) {\n    case 'BENEFIT_PURCHASE':\n      return 'Kauf';\n    case 'ADMIN_GRANT':\n      return 'Vergabe';\n    case 'RULE_EARNED':\n      return 'Verdient';\n    default:\n      return 'Unbekannt';\n  }\n};\n\nconst renderHeader = (isAdmin: boolean, selectedUserId: string, setSelectedUserId: (value: string) => void) => (\n  <div className=\"flex items-center justify-between\">\n    <h2 className=\"text-lg font-semibold text-gray-900\">\n      {isAdmin ? 'Coin-Historie' : 'Meine Coin-Historie'}\n    </h2>\n    \n    {isAdmin && (\n      <select\n        value={selectedUserId}\n        onChange={(e) => setSelectedUserId(e.target.value)}\n        className=\"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n      >\n        <option value=\"\">Alle Mitarbeiter</option>\n        {availableUsers.map((user) => (\n          <option key={user.id} value={user.id}>\n            {user.name}\n          </option>\n        ))}\n      </select>\n    )}\n  </div>\n);\n\nconst renderTransactionItem = (transaction: CoinTransaction, isAdmin: boolean, selectedUserId: string) => (\n  <div key={transaction.id} className=\"bg-white rounded-xl p-4 shadow-sm\">\n    <div className=\"flex items-center justify-between\">\n      <div>\n        <div className=\"flex items-center gap-2 mb-1\">\n          <p className=\"font-medium text-gray-900\">{transaction.reason}</p>\n          <span className={getTransactionTypeStyle(transaction.type)}>\n            {getTransactionTypeLabel(transaction.type)}\n          </span>\n        </div>\n        <p className=\"text-sm text-gray-500\">\n          {formatDate(transaction.createdAt)}\n          {transaction.adminId && ` • von ${getUserName(transaction.adminId)}`}\n          {isAdmin && !selectedUserId && ` • ${getUserName(transaction.userId)}`}\n        </p>\n      </div>\n      <div className=\"text-right\">\n        <p className={cn(\n          \"text-lg font-bold\",\n          transaction.amount > 0 ? \"text-green-600\" : \"text-red-600\"\n        )}>\n          {transaction.amount > 0 ? '+' : ''}{transaction.amount}\n        </p>\n        <p className=\"text-xs text-gray-500\">Coins</p>\n      </div>\n    </div>\n  </div>\n);\n\nconst renderTransactionsList = (transactions: CoinTransaction[], isAdmin: boolean, selectedUserId: string) => (\n  <div className=\"space-y-3\">\n    {transactions.map((transaction: CoinTransaction) => renderTransactionItem(transaction, isAdmin, selectedUserId))}\n  </div>\n);\n\nconst renderEmptyState = (isAdmin: boolean, selectedUserId: string) => (\n  <div className=\"bg-white rounded-xl p-8 flex flex-col items-center shadow-sm\">\n    <span className=\"text-4xl mb-4\">📊</span>\n    <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n      Keine Transaktionen\n    </h3>\n    <p className=\"text-gray-600 text-center\">\n      {isAdmin && selectedUserId \n        ? `${getUserName(selectedUserId)} hat noch keine Coin-Transaktionen.`\n        : isAdmin \n          ? 'Es gibt noch keine Coin-Transaktionen im System.'\n          : 'Sie haben noch keine Coin-Transaktionen.'\n      }\n    </p>\n  </div>\n);\n\nexport const HistoryTab: React.FC<HistoryTabProps> = ({\n  isAdmin,\n  user,\n  coinsStore\n}) => {\n  const [selectedHistoryUserId, setSelectedHistoryUserId] = useState('');\n\n  const transactions = getTransactions(isAdmin, selectedHistoryUserId, coinsStore, user);\n\n  return (\n    <div className=\"space-y-4\">\n      {renderHeader(isAdmin, selectedHistoryUserId, setSelectedHistoryUserId)}\n      {transactions.length > 0 \n        ? renderTransactionsList(transactions, isAdmin, selectedHistoryUserId)\n        : renderEmptyState(isAdmin, selectedHistoryUserId)\n      }\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/ManageTab.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":17,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":17,"endColumn":141},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":22,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":22,"endColumn":113},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":33,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":33,"endColumn":122},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":38,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":38,"endColumn":105},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":49,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":49,"endColumn":83},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":61,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":67,"endColumn":6},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (36). Maximum allowed is 30.","line":78,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":113,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":78,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":78,"endColumn":138},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (32). Maximum allowed is 30.","line":80,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":111,"endColumn":6},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (122). Maximum allowed is 75.","line":89,"column":1,"nodeType":null,"messageId":"exceed","endLine":139,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":124,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":124,"endColumn":44},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":125,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":125,"endColumn":45},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":126,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":126,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\n\nimport type { CoinEvent, EventsStore } from '../../state/coinEvents';\nimport type { CoinsStore } from '../../state/coins';\nimport type { User } from '../../types';\n\nimport { CoinEventForm } from './CoinEventForm';\nimport { CoinGrantForm } from './CoinGrantForm';\n\ninterface ManageTabProps {\n  user: User;\n  coinsStore: CoinsStore;\n  eventsStore: EventsStore;\n  onError: (error: string) => void;\n}\n\nconst handleEditEvent = (event: CoinEvent, setEditingEvent: (event: CoinEvent | null) => void, setShowEventForm: (show: boolean) => void) => {\n  setEditingEvent(event);\n  setShowEventForm(true);\n};\n\nconst handleDeleteEvent = async (eventId: string, eventsStore: EventsStore, onError: (error: string) => void) => {\n  // TODO: Replace with modal confirmation component\n  // if (window.confirm('Sind Sie sicher, dass Sie dieses Event löschen möchten?')) {\n    try {\n      await eventsStore.deleteEvent(eventId);\n    } catch (error) {\n      onError('Fehler beim Löschen des Events');\n    }\n  // }\n};\n\nconst resetEventForm = (setShowEventForm: (show: boolean) => void, setEditingEvent: (event: CoinEvent | null) => void) => {\n  setShowEventForm(false);\n  setEditingEvent(null);\n};\n\nconst renderCoinGrantSection = (user: User, coinsStore: CoinsStore, onError: (error: string) => void) => (\n  <div>\n    <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Coins verteilen</h2>\n    <CoinGrantForm\n      user={user}\n      coinsStore={coinsStore}\n      onError={onError}\n    />\n  </div>\n);\n\nconst renderEventManagementHeader = (setShowEventForm: (show: boolean) => void) => (\n  <div className=\"flex items-center justify-between mb-4\">\n    <h2 className=\"text-lg font-semibold text-gray-900\">Coin Events verwalten</h2>\n    <button\n      onClick={() => setShowEventForm(true)}\n      className=\"px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors\"\n    >\n      + Neues Event\n    </button>\n  </div>\n);\n\nconst renderEventForm = (props: {\n  showEventForm: boolean;\n  editingEvent: CoinEvent | null;\n  eventsStore: EventsStore;\n  resetFormCallback: () => void;\n  onError: (error: string) => void;\n}) => (\n  props.showEventForm ? (\n    <CoinEventForm\n      editingEvent={props.editingEvent}\n      eventsStore={props.eventsStore}\n      onClose={props.resetFormCallback}\n      onError={props.onError}\n    />\n  ) : null\n);\n\nconst renderEventsList = (eventsStore: EventsStore, onEditEvent: (event: CoinEvent) => void, onDeleteEvent: (eventId: string) => void) => (\n  <div className=\"space-y-3\">\n    {eventsStore.getActiveEvents().map((event: CoinEvent) => (\n      <div key={event.id} className=\"bg-white rounded-xl p-4 shadow-sm\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <h3 className=\"font-semibold text-gray-900\">{event.title}</h3>\n            <p className=\"text-sm text-gray-600\">{event.description}</p>\n            <div className=\"flex items-center gap-4 mt-2\">\n              <span className=\"text-sm font-medium text-purple-600\">\n                🎯 {event.requiredCoins} Coins benötigt\n              </span>\n              <span className=\"text-sm text-gray-500\">\n                🎁 {event.reward}\n              </span>\n            </div>\n          </div>\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => onEditEvent(event)}\n              className=\"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors\"\n            >\n              ✏️\n            </button>\n            <button\n              onClick={() => onDeleteEvent(event.id)}\n              className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n            >\n              🗑️\n            </button>\n          </div>\n        </div>\n      </div>\n    ))}\n  </div>\n);\n\nexport const ManageTab: React.FC<ManageTabProps> = ({\n  user,\n  coinsStore,\n  eventsStore,\n  onError\n}) => {\n  const [showEventForm, setShowEventForm] = useState(false);\n  const [editingEvent, setEditingEvent] = useState<CoinEvent | null>(null);\n\n  const onEditEvent = (event: CoinEvent) => handleEditEvent(event, setEditingEvent, setShowEventForm);\n  const onDeleteEvent = (eventId: string) => handleDeleteEvent(eventId, eventsStore, onError);\n  const resetFormCallback = () => resetEventForm(setShowEventForm, setEditingEvent);\n\n  return (\n    <div className=\"space-y-6\">\n      {renderCoinGrantSection(user, coinsStore, onError)}\n      \n      <div>\n        {renderEventManagementHeader(setShowEventForm)}\n        {renderEventForm({ showEventForm, editingEvent, eventsStore, resetFormCallback, onError })}\n        {renderEventsList(eventsStore, onEditEvent, onDeleteEvent)}\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/ShopTab.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":17,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":17,"endColumn":155},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":22,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":22,"endColumn":113},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":33,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":33,"endColumn":132},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":38,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":38,"endColumn":92},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":52,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":59,"endColumn":6},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":70,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":77,"endColumn":6},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (100). Maximum allowed is 75.","line":88,"column":1,"nodeType":null,"messageId":"exceed","endLine":115,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":103,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":103,"endColumn":50},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":104,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":104,"endColumn":49},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":105,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":105,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\n\nimport type { ShopBenefit, ShopStore } from '../../state/shop';\n\nimport { BenefitCard } from './BenefitCard';\nimport { BenefitForm } from './BenefitForm';\nimport { CoinEventProgress } from './CoinEventProgress';\n\ninterface ShopTabProps {\n  userBalance: number;\n  isAdmin: boolean;\n  shopStore: ShopStore;\n  onPurchase: (benefitId: string, coinCost: number) => Promise<void>;\n  onError: (error: string) => void;\n}\n\nconst handleEditBenefit = (benefit: ShopBenefit, setEditingBenefit: (benefit: ShopBenefit | null) => void, setShowBenefitForm: (show: boolean) => void) => {\n  setEditingBenefit(benefit);\n  setShowBenefitForm(true);\n};\n\nconst handleDeleteBenefit = async (benefitId: string, shopStore: ShopStore, onError: (error: string) => void) => {\n  // TODO: Replace with modal confirmation component\n  // if (window.confirm('Sind Sie sicher, dass Sie dieses Benefit löschen möchten?')) {\n    try {\n      await shopStore.deleteBenefit(benefitId);\n    } catch (error) {\n      onError('Fehler beim Löschen des Benefits');\n    }\n  // }\n};\n\nconst resetBenefitForm = (setShowBenefitForm: (show: boolean) => void, setEditingBenefit: (benefit: ShopBenefit | null) => void) => {\n  setShowBenefitForm(false);\n  setEditingBenefit(null);\n};\n\nconst renderShopHeader = (isAdmin: boolean, setShowBenefitForm: (show: boolean) => void) => (\n  <div className=\"flex items-center justify-between\">\n    <h2 className=\"text-lg font-semibold text-gray-900\">Benefits</h2>\n    {isAdmin && (\n      <button\n        onClick={() => setShowBenefitForm(true)}\n        className=\"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors\"\n      >\n        + Neues Benefit\n      </button>\n    )}\n  </div>\n);\n\nconst renderBenefitForm = (props: {\n  showBenefitForm: boolean;\n  isAdmin: boolean;\n  editingBenefit: ShopBenefit | null;\n  shopStore: ShopStore;\n  resetFormCallback: () => void;\n  onError: (error: string) => void;\n}) => (\n  props.showBenefitForm && props.isAdmin ? (\n    <BenefitForm\n      editingBenefit={props.editingBenefit}\n      shopStore={props.shopStore}\n      onClose={props.resetFormCallback}\n      onError={props.onError}\n    />\n  ) : null\n);\n\nconst renderBenefitsGrid = (props: {\n  shopStore: ShopStore;\n  userBalance: number;\n  isAdmin: boolean;\n  onPurchase: (benefitId: string, coinCost: number) => Promise<void>;\n  onEditBenefit: (benefit: ShopBenefit) => void;\n  onDeleteBenefit: (benefitId: string) => void;\n}) => (\n  <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n    {props.shopStore.getActiveBenefits().map((benefit: ShopBenefit) => (\n      <BenefitCard\n        key={benefit.id}\n        benefit={benefit}\n        userBalance={props.userBalance}\n        isAdmin={props.isAdmin}\n        onPurchase={props.onPurchase}\n        onEdit={props.onEditBenefit}\n        onDelete={props.onDeleteBenefit}\n      />\n    ))}\n  </div>\n);\n\nexport const ShopTab: React.FC<ShopTabProps> = ({\n  userBalance,\n  isAdmin,\n  shopStore,\n  onPurchase,\n  onError\n}) => {\n  const [showBenefitForm, setShowBenefitForm] = useState(false);\n  const [editingBenefit, setEditingBenefit] = useState<ShopBenefit | null>(null);\n\n  const onEditBenefit = (benefit: ShopBenefit) => handleEditBenefit(benefit, setEditingBenefit, setShowBenefitForm);\n  const onDeleteBenefit = (benefitId: string) => handleDeleteBenefit(benefitId, shopStore, onError);\n  const resetFormCallback = () => resetBenefitForm(setShowBenefitForm, setEditingBenefit);\n\n  return (\n    <div className=\"space-y-4\">\n      <CoinEventProgress userBalance={userBalance} />\n      {renderShopHeader(isAdmin, setShowBenefitForm)}\n      {renderBenefitForm({ showBenefitForm, isAdmin, editingBenefit, shopStore, resetFormCallback, onError })}\n      {renderBenefitsGrid({ shopStore, userBalance, isAdmin, onPurchase, onEditBenefit, onDeleteBenefit })}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/TabNavigation.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (56). Maximum allowed is 30.","line":11,"column":60,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":66,"endColumn":2},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 4 times.","line":21,"column":11,"nodeType":"Literal","endLine":21,"endColumn":58},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 4 times.","line":22,"column":34,"nodeType":"Literal","endLine":22,"endColumn":58},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 4 times.","line":22,"column":61,"nodeType":"Literal","endLine":22,"endColumn":109}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { cn } from '../../utils/cn';\n\ninterface TabNavigationProps {\n  activeTab: 'shop' | 'earn' | 'history' | 'manage';\n  onTabChange: (tab: 'shop' | 'earn' | 'history' | 'manage') => void;\n  isAdmin: boolean;\n}\n\nexport const TabNavigation: React.FC<TabNavigationProps> = ({\n  activeTab,\n  onTabChange,\n  isAdmin\n}) => {\n  return (\n    <div className=\"flex bg-white rounded-lg p-1 mb-6 shadow-sm\">\n      <button\n        onClick={() => onTabChange('shop')}\n        className={cn(\n          \"flex-1 py-2 px-3 rounded-md transition-colors\",\n          activeTab === 'shop' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n        )}\n      >\n        <span className=\"text-center font-medium text-sm\">\n          🪙 Coins einlösen\n        </span>\n      </button>\n      <button\n        onClick={() => onTabChange('earn')}\n        className={cn(\n          \"flex-1 py-2 px-3 rounded-md transition-colors\",\n          activeTab === 'earn' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n        )}\n      >\n        <span className=\"text-center font-medium text-sm\">\n          💰 Coins bekommen\n        </span>\n      </button>\n      <button\n        onClick={() => onTabChange('history')}\n        className={cn(\n          \"flex-1 py-2 px-3 rounded-md transition-colors\",\n          activeTab === 'history' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n        )}\n      >\n        <span className=\"text-center font-medium text-sm\">\n          📊 Historie\n        </span>\n      </button>\n      {isAdmin && (\n        <button\n          onClick={() => onTabChange('manage')}\n          className={cn(\n            \"flex-1 py-2 px-3 rounded-md transition-colors\",\n            activeTab === 'manage' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n          )}\n        >\n          <span className=\"text-center font-medium text-sm\">\n            ⚙️ Verwaltung\n          </span>\n        </button>\n      )}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/benefits/tabs/TabNavigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/calendar/CalendarControls.tsx","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (118). Maximum allowed is 75.","line":83,"column":1,"nodeType":null,"messageId":"exceed","endLine":127,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { CalendarView, CalendarViewMode, CalendarFilterMode } from '../../types/calendar';\nimport { cn } from '../../utils/cn';\n\ninterface CalendarControlsProps {\n  viewMode: CalendarViewMode;\n  calendarView: CalendarView;\n  filterMode: CalendarFilterMode;\n  onViewModeChange: (mode: CalendarViewMode) => void;\n  onCalendarViewChange: (view: CalendarView) => void;\n  onFilterModeChange: (filter: CalendarFilterMode) => void;\n}\n\nconst ToggleButton: React.FC<{\n  isActive: boolean;\n  onClick: () => void;\n  children: React.ReactNode;\n  colorScheme?: 'blue' | 'green';\n}> = ({ isActive, onClick, children, colorScheme = 'blue' }) => {\n  const activeColor = colorScheme === 'green' ? 'bg-green-500' : 'bg-blue-500';\n  \n  return (\n    <button\n      onClick={onClick}\n      className={cn(\n        \"flex-1 py-2 px-3 rounded-md transition-colors text-sm\",\n        isActive ? `${activeColor} text-white` : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n      )}\n    >\n      {children}\n    </button>\n  );\n};\n\nconst ViewModeToggle: React.FC<{\n  viewMode: CalendarViewMode;\n  onViewModeChange: (mode: CalendarViewMode) => void;\n}> = ({ viewMode, onViewModeChange }) => (\n  <div className=\"flex bg-white rounded-lg p-1 shadow-sm\">\n    <ToggleButton\n      isActive={viewMode === 'personal'}\n      onClick={() => onViewModeChange('personal')}\n    >\n      👤 Persönlich\n    </ToggleButton>\n    <ToggleButton\n      isActive={viewMode === 'team'}\n      onClick={() => onViewModeChange('team')}\n    >\n      👥 Team\n    </ToggleButton>\n  </div>\n);\n\nconst CalendarViewToggle: React.FC<{\n  calendarView: CalendarView;\n  onCalendarViewChange: (view: CalendarView) => void;\n}> = ({ calendarView, onCalendarViewChange }) => (\n  <div className=\"flex bg-white rounded-lg p-1 shadow-sm\">\n    <ToggleButton\n      isActive={calendarView === 'month'}\n      onClick={() => onCalendarViewChange('month')}\n      colorScheme=\"green\"\n    >\n      📅 Monat\n    </ToggleButton>\n    <ToggleButton\n      isActive={calendarView === 'year'}\n      onClick={() => onCalendarViewChange('year')}\n      colorScheme=\"green\"\n    >\n      📆 Jahr\n    </ToggleButton>\n  </div>\n);\n\nconst FilterToggle: React.FC<{\n  filterMode: CalendarFilterMode;\n  viewMode: CalendarViewMode;\n  onFilterModeChange: (filter: CalendarFilterMode) => void;\n}> = ({ filterMode, viewMode, onFilterModeChange }) => (\n  <div className=\"flex bg-white rounded-lg p-1 shadow-sm\">\n    <ToggleButton\n      isActive={filterMode === 'all'}\n      onClick={() => onFilterModeChange('all')}\n    >\n      Alle\n    </ToggleButton>\n    <ToggleButton\n      isActive={filterMode === 'leaves'}\n      onClick={() => onFilterModeChange('leaves')}\n    >\n      Abwesenheit\n    </ToggleButton>\n    {viewMode === 'personal' && (\n      <ToggleButton\n        isActive={filterMode === 'work'}\n        onClick={() => onFilterModeChange('work')}\n      >\n        Arbeitszeit\n      </ToggleButton>\n    )}\n  </div>\n);\n\nexport const CalendarControls: React.FC<CalendarControlsProps> = ({\n  viewMode,\n  calendarView,\n  filterMode,\n  onViewModeChange,\n  onCalendarViewChange,\n  onFilterModeChange\n}) => (\n  <div className=\"space-y-4\">\n    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n      <ViewModeToggle viewMode={viewMode} onViewModeChange={onViewModeChange} />\n      <CalendarViewToggle calendarView={calendarView} onCalendarViewChange={onCalendarViewChange} />\n    </div>\n    \n    <FilterToggle \n      filterMode={filterMode} \n      viewMode={viewMode} \n      onFilterModeChange={onFilterModeChange} \n    />\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/calendar/CalendarGrid.tsx","messages":[{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":38,"column":17,"nodeType":"TemplateLiteral","messageId":"noArrayIndex","endLine":38,"endColumn":33},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (31). Maximum allowed is 30.","line":85,"column":58,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":117,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (101). Maximum allowed is 75.","line":90,"column":1,"nodeType":null,"messageId":"exceed","endLine":117,"endColumn":3},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":101,"column":20,"nodeType":"TemplateLiteral","messageId":"noArrayIndex","endLine":101,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { CalendarDay, CalendarEvent, CalendarFilterMode } from '../../types/calendar';\nimport { cn } from '../../utils/cn';\n\ninterface CalendarGridProps {\n  calendarDays: CalendarDay[];\n  events: CalendarEvent[];\n  filterMode: CalendarFilterMode;\n  onDayClick: (day: CalendarDay) => void;\n}\n\nconst WEEKDAYS = ['Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa', 'So'];\n\nconst getFilteredEvents = (events: CalendarEvent[], day: CalendarDay, filterMode: CalendarFilterMode): CalendarEvent[] => {\n  const dayDateString = day.date instanceof Date ? day.date.toISOString().split('T')[0] : day.date;\n  const dayEvents = events.filter(event => event.date === dayDateString);\n  \n  return dayEvents.filter(event => {\n    if (filterMode === 'all') return true;\n    if (filterMode === 'leaves') return event.type === 'urlaub' || event.type === 'krank';\n    if (filterMode === 'work') return event.type === 'zeit';\n    return true;\n  });\n};\n\nconst getDayNumber = (day: CalendarDay): number => {\n  return day.date instanceof Date ? day.date.getDate() : new Date(day.date).getDate();\n};\n\nconst getDayOfWeek = (day: CalendarDay): number => {\n  return day.date instanceof Date ? day.date.getDay() : new Date(day.date).getDay();\n};\n\nconst EventList: React.FC<{ events: CalendarEvent[] }> = ({ events }) => (\n  <div className=\"flex-1 space-y-0.5\">\n    {events.slice(0, 3).map((event, index) => (\n      <div key={`event-${index}`} className={cn(\n        \"text-xs px-1 py-0.5 rounded text-white truncate\",\n        event.color\n      )}>\n        {event.title}\n      </div>\n    ))}\n    \n    {events.length > 3 && (\n      <div className=\"text-xs text-gray-500\">\n        +{events.length - 3} mehr\n      </div>\n    )}\n  </div>\n);\n\nconst DayContent: React.FC<{ day: CalendarDay; events: CalendarEvent[] }> = ({ day, events }) => (\n  <div className=\"h-full flex flex-col p-1\">\n    <span className={cn(\n      \"text-sm font-medium mb-1\",\n      !day.isCurrentMonth && \"text-gray-400\",\n      day.isToday && \"text-blue-600 font-bold\",\n      day.isWeekend && day.isCurrentMonth && \"text-gray-600\"\n    )}>\n      {getDayNumber(day)}\n    </span>\n    \n    <EventList events={events} />\n    \n    {day.isWeekend && day.isCurrentMonth && (\n      <div className=\"text-xs text-gray-400 mt-auto\">\n        {getDayOfWeek(day) === 6 ? 'SA' : 'SO'}\n      </div>\n    )}\n  </div>\n);\n\nconst WeekdayHeaders: React.FC = () => (\n  <div className=\"grid grid-cols-7 mb-2\">\n    {WEEKDAYS.map((day) => (\n      <div key={day} className=\"flex items-center justify-center py-3\">\n        <span className=\"text-sm font-semibold text-gray-500\">{day}</span>\n      </div>\n    ))}\n  </div>\n);\n\nexport const CalendarGrid: React.FC<CalendarGridProps> = ({\n  calendarDays,\n  events,\n  filterMode,\n  onDayClick\n}) => {\n  return (\n    <div className=\"bg-white rounded-xl p-4 shadow-sm\">\n      <WeekdayHeaders />\n      \n      <div className=\"grid grid-cols-7 gap-0 border border-gray-200 rounded-lg overflow-hidden\">\n        {calendarDays.map((day, index) => {\n          const filteredEvents = getFilteredEvents(events, day, filterMode);\n          \n          return (\n            <button\n              key={`day-${index}`}\n              className={cn(\n                \"aspect-square border-b border-r border-gray-100 text-left hover:bg-gray-50 transition-colors relative\",\n                !day.isCurrentMonth && \"bg-gray-50\",\n                day.isToday && \"bg-blue-50 border-blue-200\",\n                day.isWeekend && \"bg-gray-25\"\n              )}\n              onClick={() => onDayClick(day)}\n            >\n              <DayContent day={day} events={filteredEvents} />\n            </button>\n          );\n        })}\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/calendar/CalendarHeader.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (31). Maximum allowed is 30.","line":79,"column":62,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":111,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (101). Maximum allowed is 75.","line":84,"column":1,"nodeType":null,"messageId":"exceed","endLine":111,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { CalendarView, CalendarViewMode } from '../../types/calendar';\n\ninterface CalendarHeaderProps {\n  viewMode: CalendarViewMode;\n  calendarView: CalendarView;\n  currentDate: Date;\n  isAdmin: boolean;\n  onNavigate: (to: string) => void;\n  onNavigateMonth: (direction: 'prev' | 'next') => void;\n  onNavigateYear: (direction: 'prev' | 'next') => void;\n  onGoToToday: () => void;\n}\n\nconst getMonthYearText = (currentDate: Date): string => {\n  return currentDate.toLocaleDateString('de-DE', {\n    month: 'long',\n    year: 'numeric'\n  });\n};\n\nconst ActionButtons: React.FC<{\n  isAdmin: boolean;\n  onNavigate: (to: string) => void;\n  onGoToToday: () => void;\n}> = ({ isAdmin, onNavigate, onGoToToday }) => (\n  <div className=\"flex items-center space-x-3\">\n    {isAdmin && (\n      <button\n        onClick={() => onNavigate('/team-calendar')}\n        className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm flex items-center gap-2\"\n      >\n        📊 Team-Kalender\n      </button>\n    )}\n    \n    <button\n      onClick={() => onNavigate('/request-leave')}\n      className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm\"\n    >\n      + Urlaub\n    </button>\n    \n    <button\n      onClick={onGoToToday}\n      className=\"bg-white px-3 py-2 rounded-lg shadow-sm hover:bg-gray-50 transition-colors text-sm border\"\n    >\n      Heute\n    </button>\n  </div>\n);\n\nconst NavigationControls: React.FC<{\n  calendarView: CalendarView;\n  currentDate: Date;\n  onNavigateMonth: (direction: 'prev' | 'next') => void;\n  onNavigateYear: (direction: 'prev' | 'next') => void;\n}> = ({ calendarView, currentDate, onNavigateMonth, onNavigateYear }) => (\n  <div className=\"flex items-center space-x-2\">\n    <button \n      onClick={() => calendarView === 'month' ? onNavigateMonth('prev') : onNavigateYear('prev')}\n      className=\"w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm hover:bg-gray-50 transition-colors\"\n    >\n      <span className=\"text-lg text-gray-600\">‹</span>\n    </button>\n    <h2 className=\"text-lg font-semibold text-gray-900 min-w-40 text-center\">\n      {calendarView === 'month' ? getMonthYearText(currentDate) : currentDate.getFullYear()}\n    </h2>\n    <button \n      onClick={() => calendarView === 'month' ? onNavigateMonth('next') : onNavigateYear('next')}\n      className=\"w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm hover:bg-gray-50 transition-colors\"\n    >\n      <span className=\"text-lg text-gray-600\">›</span>\n    </button>\n  </div>\n);\n\nexport const CalendarHeader: React.FC<CalendarHeaderProps> = ({\n  viewMode,\n  calendarView,\n  currentDate,\n  isAdmin,\n  onNavigate,\n  onNavigateMonth,\n  onNavigateYear,\n  onGoToToday\n}) => {\n  return (\n    <div className=\"flex items-center justify-between mb-6\">\n      <h1 className=\"text-xl font-bold text-gray-900\">\n        {viewMode === 'personal' ? 'Mein Kalender' : 'Team Kalender'}\n      </h1>\n      \n      <div className=\"flex items-center space-x-3\">\n        <ActionButtons \n          isAdmin={isAdmin}\n          onNavigate={onNavigate}\n          onGoToToday={onGoToToday}\n        />\n        \n        <NavigationControls\n          calendarView={calendarView}\n          currentDate={currentDate}\n          onNavigateMonth={onNavigateMonth}\n          onNavigateYear={onNavigateYear}\n        />\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/calendar/CalendarLegend.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (37). Maximum allowed is 30.","line":9,"column":62,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":45,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { CalendarViewMode } from '../../types/calendar';\n\ninterface CalendarLegendProps {\n  viewMode: CalendarViewMode;\n}\n\nexport const CalendarLegend: React.FC<CalendarLegendProps> = ({ viewMode }) => {\n  return (\n    <div className=\"bg-white rounded-xl p-4 mt-4 shadow-sm\">\n      <h3 className=\"text-sm font-semibold text-gray-900 mb-3\">Legende</h3>\n      <div className=\"flex flex-wrap gap-4\">\n        <div className=\"flex items-center\">\n          <div className=\"w-3 h-3 bg-blue-500 rounded-full mr-2\" />\n          <span className=\"text-sm text-gray-600\">Urlaub</span>\n        </div>\n        <div className=\"flex items-center\">\n          <div className=\"w-3 h-3 bg-red-500 rounded-full mr-2\" />\n          <span className=\"text-sm text-gray-600\">Krankheit</span>\n        </div>\n        {viewMode === 'personal' && (\n          <>\n            <div className=\"flex items-center\">\n              <div className=\"w-3 h-3 bg-green-500 rounded-full mr-2\" />\n              <span className=\"text-sm text-gray-600\">Vollzeit (≥8h)</span>\n            </div>\n            <div className=\"flex items-center\">\n              <div className=\"w-3 h-3 bg-yellow-500 rounded-full mr-2\" />\n              <span className=\"text-sm text-gray-600\">Teilzeit (6-8h)</span>\n            </div>\n            <div className=\"flex items-center\">\n              <div className=\"w-3 h-3 bg-red-500 rounded-full mr-2\" />\n              <span className=\"text-sm text-gray-600\">Unterzeit (&lt;6h)</span>\n            </div>\n          </>\n        )}\n        <div className=\"flex items-center\">\n          <div className=\"w-3 h-3 bg-orange-500 rounded-full mr-2\" />\n          <span className=\"text-sm text-gray-600\">Erinnerung</span>\n        </div>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/calendar/DayDetailModal.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":76,"column":53,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":76,"endColumn":55,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2313,2315],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (155). Maximum allowed is 75.","line":83,"column":1,"nodeType":null,"messageId":"exceed","endLine":174,"endColumn":3},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":125,"column":53,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":125,"endColumn":55,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3870,3872],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":126,"column":47,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":126,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3903,3990],"text":"(selectedDay.userTimeRecord ?? \n                   (selectedDay.leaves?.length || 0) > 0)"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":127,"column":48,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":127,"endColumn":50,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3981,3983],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":128,"column":51,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":128,"endColumn":53,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4045,4047],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { LeaveRequest, TimeRecord as _TimeRecord } from '../../types';\nimport { CalendarDay, CalendarViewMode, UserLeave, UserTimeRecord, LeaveEntry as _LeaveEntry, ReminderEntry as _ReminderEntry } from '../../types/calendar';\nimport { VacationReminder } from '../../types/reminders';\n\ninterface _Reminder {\n  id: string;\n  message: string;\n  date: string;\n  userId: string;\n}\n\ninterface DayDetailModalProps {\n  selectedDay: CalendarDay | null;\n  viewMode: CalendarViewMode;\n  getUserName: (userId: string) => string;\n  onClose: () => void;\n}\n\nconst formatDate = (date: Date | string): string => {\n  const dateObj = date instanceof Date ? date : new Date(date);\n  return dateObj.toLocaleDateString('de-DE', { \n    weekday: 'long',\n    day: 'numeric',\n    month: 'long',\n    year: 'numeric'\n  });\n};\n\nconst ModalHeader: React.FC<{ selectedDay: CalendarDay; onClose: () => void }> = ({ selectedDay, onClose }) => (\n  <div className=\"flex justify-between items-center mb-4\">\n    <h3 className=\"text-lg font-semibold\">\n      {formatDate(selectedDay.date)}\n    </h3>\n    <button\n      onClick={onClose}\n      className=\"text-gray-400 hover:text-gray-600\"\n    >\n      ✕\n    </button>\n  </div>\n);\n\nconst UserLeaveEvents: React.FC<{ leaves: UserLeave[] }> = ({ leaves }) => (\n  <>\n    {leaves.map(leave => (\n      <div key={leave.id} className=\"p-3 bg-blue-50 rounded-lg\">\n        <div className=\"flex items-center\">\n          <span className=\"text-2xl mr-3\">\n            {leave.type === 'VACATION' ? '🏖️' : '🏥'}\n          </span>\n          <div>\n            <p className=\"font-medium\">\n              {leave.type === 'VACATION' ? 'Urlaub' : 'Krankheit'}\n            </p>\n            {leave.comment && (\n              <p className=\"text-sm text-gray-600\">{leave.comment}</p>\n            )}\n          </div>\n        </div>\n      </div>\n    ))}\n  </>\n);\n\nconst TimeRecordEvent: React.FC<{ timeRecord: UserTimeRecord }> = ({ timeRecord }) => (\n  <div className=\"p-3 bg-green-50 rounded-lg\">\n    <div className=\"flex items-center\">\n      <span className=\"text-2xl mr-3\">⏰</span>\n      <div>\n        <p className=\"font-medium\">\n          {timeRecord.totalHours.toFixed(1)}h gearbeitet\n        </p>\n        <p className=\"text-sm text-gray-600\">\n          {timeRecord.timeIn} - {timeRecord.timeOut || 'läuft'}\n          {timeRecord.breakMinutes > 0 && (\n            <span> (Pause: {timeRecord.breakMinutes}min)</span>\n          )}\n        </p>\n      </div>\n    </div>\n  </div>\n);\n\nconst TeamLeaveEvents: React.FC<{ leaves: LeaveRequest[]; getUserName: (userId: string) => string }> = ({ leaves, getUserName }) => (\n  <>\n    {leaves.map(leave => (\n      <div key={leave.id} className=\"p-3 bg-gray-50 rounded-lg\">\n        <div className=\"flex items-center\">\n          <span className=\"text-2xl mr-3\">\n            {leave.type === 'VACATION' ? '🏖️' : '🏥'}\n          </span>\n          <div>\n            <p className=\"font-medium\">\n              {getUserName(leave.userId)} - {leave.type === 'VACATION' ? 'Urlaub' : 'Krankheit'}\n            </p>\n            {leave.comment && (\n              <p className=\"text-sm text-gray-600\">{leave.comment}</p>\n            )}\n          </div>\n        </div>\n      </div>\n    ))}\n  </>\n);\n\nconst ReminderEvents: React.FC<{ reminders: VacationReminder[] }> = ({ reminders }) => (\n  <>\n    {reminders.map(reminder => (\n      <div key={reminder.id} className=\"p-3 bg-orange-50 rounded-lg\">\n        <div className=\"flex items-center\">\n          <span className=\"text-2xl mr-3\">🔔</span>\n          <div>\n            <p className=\"font-medium\">Erinnerung</p>\n            <p className=\"text-sm text-gray-600\">{reminder.message}</p>\n          </div>\n        </div>\n      </div>\n    ))}\n  </>\n);\n\nconst EmptyState: React.FC<{ selectedDay: CalendarDay }> = ({ selectedDay }) => {\n  const hasEvents = (selectedDay.userLeaves?.length || 0) > 0 || \n                   selectedDay.userTimeRecord || \n                   (selectedDay.leaves?.length || 0) > 0 || \n                   (selectedDay.reminders?.length || 0) > 0;\n\n  if (hasEvents) return null;\n\n  return (\n    <div className=\"text-center py-4\">\n      <p className=\"text-gray-500\">Keine Ereignisse für diesen Tag</p>\n    </div>\n  );\n};\n\nexport const DayDetailModal: React.FC<DayDetailModalProps> = ({\n  selectedDay,\n  viewMode,\n  getUserName,\n  onClose\n}) => {\n  if (!selectedDay) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-xl p-6 max-w-md w-full max-h-96 overflow-y-auto\">\n        <ModalHeader selectedDay={selectedDay} onClose={onClose} />\n        \n        <div className=\"space-y-3\">\n          {selectedDay.userLeaves && (\n            <UserLeaveEvents leaves={selectedDay.userLeaves} />\n          )}\n          \n          {selectedDay.userTimeRecord && (\n            <TimeRecordEvent timeRecord={selectedDay.userTimeRecord} />\n          )}\n          \n          {viewMode === 'team' && selectedDay.leaves && (\n            <TeamLeaveEvents leaves={selectedDay.leaves} getUserName={getUserName} />\n          )}\n          \n          {selectedDay.reminders && (\n            <ReminderEvents reminders={selectedDay.reminders} />\n          )}\n          \n          <EmptyState selectedDay={selectedDay} />\n        </div>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/calendar/TeamCalendarGrid.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":34,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":34,"endColumn":61},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":63,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":63,"endColumn":52},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (223). Maximum allowed is 75.","line":99,"column":1,"nodeType":null,"messageId":"exceed","endLine":252,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (31). Maximum allowed is 30.","line":155,"column":6,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":186,"endColumn":2},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (35). Maximum allowed is 30.","line":218,"column":66,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":252,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { format, isToday } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport React from 'react';\n\nimport { CalendarEntry, colorMap, abbreviationMap, getWorkTimeColor } from '../../types/calendar';\nimport { cn } from '../../utils/cn';\n\n// Constants\nconst DATE_FORMAT = 'yyyy-MM-dd';\n\ninterface TeamCalendarGridProps {\n  view: 'monat' | 'jahr';\n  dateRange: Date[];\n  users: { userId: string; userName: string }[];\n  filteredEntries: Map<string, CalendarEntry>;\n  selectedMonth: Date;\n  hoveredCell: { userId: string; date: string } | null;\n  onCellClick?: (userId: string, date: string) => void;\n  onCellHover: (userId: string, date: string) => void;\n  onCellLeave: () => void;\n}\n\n/**\n * Get calendar entry for a specific user and date\n */\nconst getEntry = (userId: string, date: Date, filteredEntries: Map<string, CalendarEntry>): CalendarEntry | undefined => {\n  const dateStr = format(date, DATE_FORMAT);\n  return filteredEntries.get(`${userId}-${dateStr}`);\n};\n\n/**\n * Generate cell content with appropriate styling based on entry type\n */\nconst getCellContent = (entry: CalendarEntry | undefined) => {\n  if (!entry) return null;\n\n  const abbreviation = entry.type === 'zeit' \n    ? abbreviationMap.zeit(entry.stunden)\n    : abbreviationMap[entry.type];\n\n  const backgroundColor = entry.type === 'zeit'\n    ? getWorkTimeColor(entry.stunden)\n    : colorMap[entry.type];\n\n  const textColor = entry.type === 'krank' ? 'white' : 'black';\n\n  return (\n    <div \n      className={cn(\n        \"absolute bottom-0 left-0 right-0 text-xs font-medium text-center py-0.5 rounded-sm\",\n        entry.status === 'beantragt' && \"opacity-60 border border-dashed border-gray-400\"\n      )}\n      style={{ backgroundColor, color: textColor }}\n    >\n      {abbreviation}\n    </div>\n  );\n};\n\n/**\n * Generate tooltip content for calendar entries\n */\nconst getTooltipContent = (entry: CalendarEntry) => {\n  let content = `${entry.type.charAt(0).toUpperCase() + entry.type.slice(1)}`;\n  if (entry.type === 'zeit' && entry.stunden) {\n    content += ` (${entry.stunden}h)`;\n  }\n  if (entry.status) {\n    content += ` - ${entry.status}`;\n  }\n  return content;\n};\n\nconst HEADER_BASE_CLASS = \"border-b border-gray-200 text-center\";\nconst TODAY_HIGHLIGHT_CLASS = \"bg-blue-50\";\n\nconst MonthHeaderCell: React.FC<{ date: Date }> = ({ date }) => (\n  <th\n    key={date.toISOString()}\n    className={cn(\n      \"p-1 text-xs font-medium text-gray-600 min-w-[40px]\",\n      HEADER_BASE_CLASS,\n      isToday(date) && TODAY_HIGHLIGHT_CLASS\n    )}\n  >\n    <div>{format(date, 'EEE', { locale: de })}</div>\n    <div className=\"text-sm font-semibold\">{format(date, 'd')}</div>\n  </th>\n);\n\nconst YearHeaderCells: React.FC<{ selectedMonth: Date }> = ({ selectedMonth }) => (\n  <>\n    {Array.from({ length: 12 }, (_, i) => {\n      const monthDate = new Date(selectedMonth.getFullYear(), i, 1);\n      const daysInMonth = new Date(selectedMonth.getFullYear(), i + 1, 0).getDate();\n      return (\n        <th\n          key={i}\n          colSpan={daysInMonth}\n          className={cn(\"p-2 text-sm font-medium text-gray-700\", HEADER_BASE_CLASS)}\n        >\n          {format(monthDate, 'MMM', { locale: de })}\n        </th>\n      );\n    })}\n  </>\n);\n\nconst YearDateRow: React.FC<{ dateRange: Date[] }> = ({ dateRange }) => (\n  <tr>\n    <th className=\"sticky left-0 bg-white z-10 border-b border-r border-gray-200\"></th>\n    {dateRange.map((date) => (\n      <th\n        key={date.toISOString()}\n        className={cn(\n          \"p-0.5 text-xs font-normal text-gray-500 min-w-[25px]\",\n          HEADER_BASE_CLASS,\n          isToday(date) && TODAY_HIGHLIGHT_CLASS\n        )}\n      >\n        {format(date, 'd')}\n      </th>\n    ))}\n  </tr>\n);\n\nconst TableHeader: React.FC<{\n  view: 'monat' | 'jahr';\n  dateRange: Date[];\n  selectedMonth: Date;\n}> = ({ view, dateRange, selectedMonth }) => (\n  <thead>\n    <tr>\n      <th className=\"sticky left-0 bg-white z-10 p-2 border-b border-r border-gray-200 text-left text-sm font-medium text-gray-700 min-w-[150px]\">\n        Mitarbeiter\n      </th>\n      {view === 'monat' && dateRange.map((date) => (\n        <MonthHeaderCell key={date.toISOString()} date={date} />\n      ))}\n      {view === 'jahr' && <YearHeaderCells selectedMonth={selectedMonth} />}\n    </tr>\n    {view === 'jahr' && <YearDateRow dateRange={dateRange} />}\n  </thead>\n);\n\nconst CalendarCell: React.FC<{\n  user: { userId: string; userName: string };\n  date: Date;\n  view: 'monat' | 'jahr';\n  filteredEntries: Map<string, CalendarEntry>;\n  hoveredCell: { userId: string; date: string } | null;\n  onCellClick?: (userId: string, date: string) => void;\n  onCellHover: (userId: string, date: string) => void;\n  onCellLeave: () => void;\n}> = ({ user, date, view, filteredEntries, hoveredCell, onCellClick, onCellHover, onCellLeave }) => {\n  const entry = getEntry(user.userId, date, filteredEntries);\n  const isHovered = hoveredCell?.userId === user.userId && hoveredCell?.date === format(date, DATE_FORMAT);\n\n  return (\n    <td\n      key={date.toISOString()}\n      className={cn(\n        \"relative p-0 border border-gray-100 cursor-pointer transition-colors\",\n        view === 'monat' ? \"h-12\" : \"h-8\",\n        isToday(date) && TODAY_HIGHLIGHT_CLASS,\n        isHovered && \"bg-gray-100\",\n        date.getDay() === 0 || date.getDay() === 6 ? \"bg-gray-50\" : \"\"\n      )}\n      onClick={() => onCellClick?.(user.userId, format(date, DATE_FORMAT))}\n      onMouseEnter={() => onCellHover(user.userId, format(date, DATE_FORMAT))}\n      onMouseLeave={onCellLeave}\n    >\n      {view === 'monat' && (\n        <div className=\"text-xs text-gray-400 text-center mt-0.5\">\n          {format(date, 'd')}\n        </div>\n      )}\n      {getCellContent(entry)}\n      {entry && isHovered && (\n        <div className=\"absolute z-20 bottom-full left-1/2 transform -translate-x-1/2 mb-1 px-2 py-1 bg-gray-800 text-white text-xs rounded whitespace-nowrap\">\n          {getTooltipContent(entry)}\n        </div>\n      )}\n    </td>\n  );\n};\n\nconst UserRow: React.FC<{\n  user: { userId: string; userName: string };\n  dateRange: Date[];\n  view: 'monat' | 'jahr';\n  filteredEntries: Map<string, CalendarEntry>;\n  hoveredCell: { userId: string; date: string } | null;\n  onCellClick?: (userId: string, date: string) => void;\n  onCellHover: (userId: string, date: string) => void;\n  onCellLeave: () => void;\n}> = ({ user, dateRange, view, filteredEntries, hoveredCell, onCellClick, onCellHover, onCellLeave }) => (\n  <tr key={user.userId} className=\"hover:bg-gray-50\">\n    <td className=\"sticky left-0 bg-white z-10 p-2 border-r border-gray-200 text-sm font-medium text-gray-900 whitespace-nowrap\">\n      {user.userName}\n    </td>\n    {dateRange.map((date) => (\n      <CalendarCell\n        key={date.toISOString()}\n        user={user}\n        date={date}\n        view={view}\n        filteredEntries={filteredEntries}\n        hoveredCell={hoveredCell}\n        onCellClick={onCellClick}\n        onCellHover={onCellHover}\n        onCellLeave={onCellLeave}\n      />\n    ))}\n  </tr>\n);\n\nexport const TeamCalendarGrid: React.FC<TeamCalendarGridProps> = ({\n  view,\n  dateRange,\n  users,\n  filteredEntries,\n  selectedMonth,\n  hoveredCell,\n  onCellClick,\n  onCellHover,\n  onCellLeave\n}) => (\n  <div className={cn(\n    \"overflow-x-auto border border-gray-200 rounded-lg\",\n    view === 'jahr' && \"max-w-full\"\n  )}>\n    <table className=\"w-full border-collapse\">\n      <TableHeader view={view} dateRange={dateRange} selectedMonth={selectedMonth} />\n      <tbody>\n        {users.map((user) => (\n          <UserRow\n            key={user.userId}\n            user={user}\n            dateRange={dateRange}\n            view={view}\n            filteredEntries={filteredEntries}\n            hoveredCell={hoveredCell}\n            onCellClick={onCellClick}\n            onCellHover={onCellHover}\n            onCellLeave={onCellLeave}\n          />\n        ))}\n      </tbody>\n    </table>\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/calendar/TeamCalendarHelpers.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (44). Maximum allowed is 30.","line":58,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":103,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":58,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":62,"endColumn":5},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (118). Maximum allowed is 75.","line":93,"column":1,"nodeType":null,"messageId":"exceed","endLine":138,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (32). Maximum allowed is 30.","line":106,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":138,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":106,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":113,"endColumn":6}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { format, isToday, startOfMonth, endOfMonth, eachDayOfInterval, startOfYear, endOfYear } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport React from 'react';\n\nimport { CalendarEntry, colorMap, abbreviationMap, getWorkTimeColor } from '../../types/calendar';\nimport { cn } from '../../utils/cn';\n\n// Helper function to generate date range\nexport const generateDateRange = (view: 'monat' | 'jahr', selectedMonth: Date): Date[] => {\n  if (view === 'monat') {\n    const start = startOfMonth(selectedMonth);\n    const end = endOfMonth(selectedMonth);\n    return eachDayOfInterval({ start, end });\n  } else {\n    const start = startOfYear(selectedMonth);\n    const end = endOfYear(selectedMonth);\n    return eachDayOfInterval({ start, end });\n  }\n};\n\n// Helper function to get entry for specific user and date\nexport const getEntryForUserAndDate = (\n  entries: CalendarEntry[],\n  userId: string,\n  date: Date\n): CalendarEntry | undefined => {\n  const dateString = format(date, 'yyyy-MM-dd');\n  return entries.find(entry => \n    entry.userId === userId && entry.date === dateString\n  );\n};\n\n// Helper function to get background color for cell\nexport const getCellBackgroundColor = (entry: CalendarEntry | undefined): string => {\n  if (!entry) return 'bg-gray-50';\n  \n  if (entry.type === 'zeit') {\n    return getWorkTimeColor(entry.stunden);\n  }\n  \n  return colorMap[entry.type] || '#f0f0f0';\n};\n\n// Helper function to get cell content\nexport const getCellContent = (entry: CalendarEntry | undefined): string => {\n  if (!entry) return '';\n  \n  if (entry.type === 'zeit') {\n    return typeof abbreviationMap.zeit === 'function' \n      ? abbreviationMap.zeit(entry.stunden) \n      : 'A';\n  }\n  \n  return abbreviationMap[entry.type] || '';\n};\n\n// Helper function to render month header\nexport const renderMonthHeader = (\n  selectedMonth: Date,\n  setSelectedMonth: (date: Date) => void,\n  view: 'monat' | 'jahr'\n) => {\n  return (\n    <div className=\"flex items-center justify-between mb-4\">\n      <button\n        onClick={() => {\n          const newDate = new Date(selectedMonth);\n          if (view === 'monat') {\n            newDate.setMonth(newDate.getMonth() - 1);\n          } else {\n            newDate.setFullYear(newDate.getFullYear() - 1);\n          }\n          setSelectedMonth(newDate);\n        }}\n        className=\"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600\"\n      >\n        ‹\n      </button>\n      \n      <h3 className=\"text-lg font-semibold\">\n        {view === 'monat' \n          ? format(selectedMonth, 'MMMM yyyy', { locale: de })\n          : format(selectedMonth, 'yyyy', { locale: de })\n        }\n      </h3>\n      \n      <button\n        onClick={() => {\n          const newDate = new Date(selectedMonth);\n          if (view === 'monat') {\n            newDate.setMonth(newDate.getMonth() + 1);\n          } else {\n            newDate.setFullYear(newDate.getFullYear() + 1);\n          }\n          setSelectedMonth(newDate);\n        }}\n        className=\"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600\"\n      >\n        ›\n      </button>\n    </div>\n  );\n};\n\n// Helper function to render calendar cell\nexport const renderCalendarCell = (params: {\n  entry: CalendarEntry | undefined;\n  date: Date;\n  userId: string;\n  hoveredCell: { userId: string; date: string } | null;\n  onCellClick?: (userId: string, date: string) => void;\n  setHoveredCell?: (cell: { userId: string; date: string } | null) => void;\n}) => {\n  const { entry, date, userId, hoveredCell, onCellClick, setHoveredCell } = params;\n  const dateString = format(date, 'yyyy-MM-dd');\n  const isHovered = hoveredCell?.userId === userId && hoveredCell?.date === dateString;\n  const cellBgColor = getCellBackgroundColor(entry);\n  const cellContent = getCellContent(entry);\n  \n  return (\n    <div\n      key={dateString}\n      className={cn(\n        \"w-8 h-8 border text-xs flex items-center justify-center cursor-pointer transition-all\",\n        isToday(date) && \"ring-2 ring-blue-500\",\n        isHovered && \"scale-110 z-10 shadow-lg\",\n        \"hover:scale-105\"\n      )}\n      style={{ backgroundColor: cellBgColor }}\n      onClick={() => onCellClick?.(userId, dateString)}\n      onMouseEnter={() => setHoveredCell?.({ userId, date: dateString })}\n      onMouseLeave={() => setHoveredCell?.(null)}\n      title={entry ? `${entry.type}${entry.stunden ? ` (${entry.stunden}h)` : ''}` : 'Keine Einträge'}\n    >\n      {cellContent}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/calendar/TeamCalendarLegend.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (39). Maximum allowed is 30.","line":9,"column":70,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":48,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { colorMap } from '../../types/calendar';\n\ninterface TeamCalendarLegendProps {\n  showLegend?: boolean;\n}\n\nexport const TeamCalendarLegend: React.FC<TeamCalendarLegendProps> = ({ showLegend = true }) => {\n  if (!showLegend) return null;\n\n  return (\n    <div className=\"mt-4 flex flex-wrap gap-4 text-sm\">\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: colorMap.urlaub }}></div>\n        <span>Urlaub</span>\n      </div>\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: colorMap.krank }}></div>\n        <span>Krankheit</span>\n      </div>\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: colorMap.meeting }}></div>\n        <span>Meeting</span>\n      </div>\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: colorMap.fortbildung }}></div>\n        <span>Fortbildung</span>\n      </div>\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: colorMap.ux }}></div>\n        <span>Sonderurlaub</span>\n      </div>\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: colorMap.zeit.vollzeit }}></div>\n        <span>Vollzeit (8h+)</span>\n      </div>\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: colorMap.zeit.teilzeit }}></div>\n        <span>Teilzeit (6-8h)</span>\n      </div>\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: colorMap.zeit.unter6h }}></div>\n        <span>Unter 6h</span>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/calendar/TeamCalendarNavigation.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (55). Maximum allowed is 30.","line":13,"column":78,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":69,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport React from 'react';\n\ninterface TeamCalendarNavigationProps {\n  view: 'monat' | 'jahr';\n  selectedMonth: Date;\n  onNavigateMonth: (direction: number) => void;\n  filterType: string;\n  onFilterChange: (filterType: string) => void;\n}\n\nexport const TeamCalendarNavigation: React.FC<TeamCalendarNavigationProps> = ({\n  view,\n  selectedMonth,\n  onNavigateMonth,\n  filterType,\n  onFilterChange\n}) => (\n  <div className=\"mb-4 flex items-center justify-between\">\n    <div className=\"flex items-center gap-4\">\n      {view === 'monat' && (\n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={() => onNavigateMonth(-1)}\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n            aria-label=\"Vorheriger Monat\"\n          >\n            ←\n          </button>\n          <h3 className=\"text-lg font-semibold min-w-48 text-center\">\n            {format(selectedMonth, 'MMMM yyyy', { locale: de })}\n          </h3>\n          <button\n            onClick={() => onNavigateMonth(1)}\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n            aria-label=\"Nächster Monat\"\n          >\n            →\n          </button>\n        </div>\n      )}\n      \n      {view === 'jahr' && (\n        <h3 className=\"text-lg font-semibold\">\n          Jahresübersicht {selectedMonth.getFullYear()}\n        </h3>\n      )}\n    </div>\n\n    <div className=\"flex items-center gap-2\">\n      <label htmlFor=\"filter-type\" className=\"text-sm font-medium text-gray-700\">\n        Filter:\n      </label>\n      <select\n        id=\"filter-type\"\n        value={filterType}\n        onChange={(e) => onFilterChange(e.target.value)}\n        className=\"border border-gray-300 rounded-md px-3 py-1 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n      >\n        <option value=\"all\">Alle anzeigen</option>\n        <option value=\"urlaub\">Urlaub</option>\n        <option value=\"krank\">Krank</option>\n        <option value=\"zeit\">Arbeitszeit</option>\n        <option value=\"homeoffice\">Homeoffice</option>\n      </select>\n    </div>\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/calendar/VacationStatsCard.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (35). Maximum allowed is 30.","line":9,"column":68,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":44,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { VacationStats } from '../../types/calendar';\n\ninterface VacationStatsCardProps {\n  stats: VacationStats;\n}\n\nexport const VacationStatsCard: React.FC<VacationStatsCardProps> = ({ stats }) => {\n  return (\n    <div className=\"bg-white rounded-xl p-4 shadow-sm\">\n      <h3 className=\"text-sm font-medium text-gray-700 mb-3\">\n        Urlaubsübersicht {new Date().getFullYear()}\n      </h3>\n      <div className=\"grid grid-cols-3 gap-4\">\n        <div className=\"text-center\">\n          <p className=\"text-2xl font-bold text-blue-600\">{stats.totalDays}</p>\n          <p className=\"text-xs text-gray-500\">Gesamt</p>\n        </div>\n        <div className=\"text-center\">\n          <p className=\"text-2xl font-bold text-red-600\">{stats.usedDays}</p>\n          <p className=\"text-xs text-gray-500\">Genommen</p>\n        </div>\n        <div className=\"text-center\">\n          <p className=\"text-2xl font-bold text-green-600\">{stats.remainingDays}</p>\n          <p className=\"text-xs text-gray-500\">Verfügbar</p>\n        </div>\n      </div>\n      \n      {/* Progress Bar */}\n      <div className=\"mt-3\">\n        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n          <div \n            className=\"bg-blue-500 h-2 rounded-full transition-all\"\n            style={{ width: `${Math.min(100, (stats.usedDays / stats.totalDays) * 100)}%` }}\n          />\n        </div>\n        <p className=\"text-xs text-gray-500 mt-1 text-center\">\n          {((stats.usedDays / stats.totalDays) * 100).toFixed(0)}% verbraucht\n        </p>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/fileupload/FilePreview.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (65). Maximum allowed is 30.","line":29,"column":56,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":97,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (88). Maximum allowed is 75.","line":84,"column":1,"nodeType":null,"messageId":"exceed","endLine":97,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { X, File, Image, CheckCircle, AlertCircle } from 'lucide-react';\nimport React from 'react';\n\nimport { DashboardInfoFileType } from '../../types/dashboardInfo';\n\ninterface FilePreviewProps {\n  selectedFile: File;\n  previewUrl: string | null;\n  isUploading: boolean;\n  error?: string;\n  formatFileSize: (size: number) => string;\n  onFileRemove: () => void;\n}\n\nconst getFileIcon = (file: File): React.ReactNode => {\n  if (file.type.startsWith('image/')) {\n    return <Image className=\"w-6 h-6 text-blue-500\" />;\n  } else if (file.type === 'application/pdf') {\n    return <File className=\"w-6 h-6 text-red-500\" />;\n  }\n  return <File className=\"w-6 h-6 text-gray-500\" />;\n};\n\nconst getFileType = (file: File): DashboardInfoFileType => {\n  if (file.type.startsWith('image/')) return 'image';\n  return 'pdf';\n};\n\nexport const FilePreview: React.FC<FilePreviewProps> = ({\n  selectedFile,\n  previewUrl,\n  isUploading,\n  error,\n  formatFileSize,\n  onFileRemove\n}) => (\n  <div className=\"border rounded-lg p-4 bg-gray-50\">\n    <div className=\"flex items-start justify-between\">\n      <div className=\"flex items-start space-x-4 flex-1\">\n        <div className=\"flex-shrink-0\">\n          {getFileType(selectedFile) === 'image' && previewUrl ? (\n            <img \n              src={previewUrl} \n              alt=\"Preview\" \n              className=\"w-16 h-16 object-cover rounded border\"\n            />\n          ) : (\n            <div className=\"w-16 h-16 bg-white border rounded flex items-center justify-center\">\n              {getFileIcon(selectedFile)}\n            </div>\n          )}\n        </div>\n        \n        <div className=\"flex-1 min-w-0\">\n          <p className=\"text-sm font-medium text-gray-900 truncate\">\n            {selectedFile.name}\n          </p>\n          <p className=\"text-sm text-gray-500\">\n            {formatFileSize(selectedFile.size)}\n          </p>\n          <div className=\"flex items-center mt-1\">\n            <CheckCircle className=\"w-4 h-4 text-green-500 mr-1\" />\n            <span className=\"text-xs text-green-600\">Datei bereit zum Upload</span>\n          </div>\n        </div>\n      </div>\n      \n      <button\n        onClick={onFileRemove}\n        disabled={isUploading}\n        className=\"ml-4 p-1 text-gray-400 hover:text-gray-600 disabled:opacity-50\"\n        title=\"Datei entfernen\"\n      >\n        <X className=\"w-5 h-5\" />\n      </button>\n    </div>\n    \n    {isUploading && (\n      <div className=\"mt-4\">\n        <div className=\"flex justify-between text-sm text-gray-600 mb-1\">\n          <span>Uploading...</span>\n          <span>0%</span>\n        </div>\n        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n          <div className=\"bg-blue-500 h-2 rounded-full animate-pulse\" style={{ width: '30%' }}></div>\n        </div>\n      </div>\n    )}\n\n    {error && (\n      <div className=\"flex items-center space-x-2 text-red-600 text-sm mt-3\">\n        <AlertCircle className=\"w-4 h-4\" />\n        <span>{error}</span>\n      </div>\n    )}\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/fileupload/FileTypeHelp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/fileupload/UploadArea.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (62). Maximum allowed is 30.","line":20,"column":54,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":84,"endColumn":2},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":70,"column":18,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":70,"endColumn":20,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1832,1834],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (79). Maximum allowed is 75.","line":81,"column":1,"nodeType":null,"messageId":"exceed","endLine":84,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Upload, AlertCircle } from 'lucide-react';\nimport React from 'react';\n\ninterface UploadAreaProps {\n  isDragOver: boolean;\n  isUploading: boolean;\n  error?: string;\n  placeholder: string;\n  maxSize?: number;\n  accept: string;\n  formatFileSize: (size: number) => string;\n  onDragOver: (e: React.DragEvent) => void;\n  onDragLeave: (e: React.DragEvent) => void;\n  onDrop: (e: React.DragEvent) => void;\n  onClick: () => void;\n  onInputChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  fileInputRef: React.RefObject<HTMLInputElement | null>;\n}\n\nexport const UploadArea: React.FC<UploadAreaProps> = ({\n  isDragOver,\n  isUploading,\n  error,\n  placeholder,\n  maxSize,\n  accept,\n  formatFileSize,\n  onDragOver,\n  onDragLeave,\n  onDrop,\n  onClick,\n  onInputChange,\n  fileInputRef\n}) => (\n  <div\n    className={`\n      border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all\n      ${isDragOver \n        ? 'border-blue-500 bg-blue-50' \n        : 'border-gray-300 hover:border-gray-400'\n      }\n      ${isUploading ? 'opacity-50 cursor-not-allowed' : ''}\n      ${error ? 'border-red-300 bg-red-50' : ''}\n    `}\n    onDragOver={onDragOver}\n    onDragLeave={onDragLeave}\n    onDrop={onDrop}\n    onClick={onClick}\n  >\n    <input\n      ref={fileInputRef}\n      type=\"file\"\n      accept={accept}\n      onChange={onInputChange}\n      className=\"hidden\"\n      disabled={isUploading}\n    />\n    \n    <div className=\"space-y-4\">\n      <div className=\"flex justify-center\">\n        {error ? (\n          <AlertCircle className=\"w-12 h-12 text-red-400\" />\n        ) : (\n          <Upload className={`w-12 h-12 ${isDragOver ? 'text-blue-500' : 'text-gray-400'}`} />\n        )}\n      </div>\n      \n      <div>\n        <p className={`text-lg font-medium ${error ? 'text-red-600' : 'text-gray-700'}`}>\n          {error || placeholder}\n        </p>\n        <p className=\"text-sm text-gray-500 mt-1\">\n          PNG, JPG, SVG oder PDF bis {maxSize ? formatFileSize(maxSize) : '10 MB'}\n        </p>\n      </div>\n      \n      {isUploading && (\n        <div className=\"flex justify-center\">\n          <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500\"></div>\n        </div>\n      )}\n    </div>\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/fileupload/useFileUpload.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (65). Maximum allowed is 30.","line":10,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":86,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":10,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":10,"endColumn":85},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":41,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":41,"endColumn":49},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":46,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":46,"endColumn":50},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":51,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":51,"endColumn":45},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":61,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":61,"endColumn":48},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":67,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":67,"endColumn":72},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":68,"column":45,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":68,"endColumn":47,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1827,1829],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useCallback } from 'react';\n\nimport { useDashboardInfoStore } from '../../state/dashboardInfo';\n\ninterface UseFileUploadProps {\n  onFileSelect: (file: File) => void;\n  onFileRemove: () => void;\n}\n\nexport const useFileUpload = ({ onFileSelect, onFileRemove }: UseFileUploadProps) => {\n  const [isDragOver, setIsDragOver] = useState(false);\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const { validateFile } = useDashboardInfoStore();\n\n  const handleFileSelect = useCallback((file: File) => {\n    const validation = validateFile(file);\n    \n    if (!validation.isValid) {\n      return;\n    }\n\n    if (validation.type === 'image') {\n      const url = URL.createObjectURL(file);\n      setPreviewUrl(url);\n    } else {\n      setPreviewUrl(null);\n    }\n\n    onFileSelect(file);\n  }, [validateFile, onFileSelect]);\n\n  const handleFileRemove = useCallback(() => {\n    if (previewUrl) {\n      URL.revokeObjectURL(previewUrl);\n      setPreviewUrl(null);\n    }\n    onFileRemove();\n  }, [previewUrl, onFileRemove]);\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragOver(true);\n  };\n\n  const handleDragLeave = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragOver(false);\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragOver(false);\n    \n    const files = Array.from(e.dataTransfer.files);\n    if (files.length > 0) {\n      handleFileSelect(files[0]);\n    }\n  };\n\n  const handleClick = (isUploading: boolean) => {\n    if (!isUploading && fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    if (files.length > 0) {\n      handleFileSelect(files[0]);\n    }\n  };\n\n  return {\n    isDragOver,\n    previewUrl,\n    fileInputRef,\n    handleFileSelect,\n    handleFileRemove,\n    handleDragOver,\n    handleDragLeave,\n    handleDrop,\n    handleClick,\n    handleInputChange\n  };\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/lootbox/CelebrationOverlay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/lootbox/LootboxHelpers.ts","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":3,"column":45,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":3,"endColumn":50},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":12,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":5},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":22,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":22,"endColumn":54},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":33,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":33,"endColumn":53},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":46,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":46,"endColumn":54},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":57,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":59,"endColumn":5}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nexport const generateCelebrationParticles = () => {\n  return Array.from({ length: 20 }, (_, i) => ({\n    id: i,\n    x: Math.random() * 100,\n    y: Math.random() * 100,\n    delay: Math.random() * 0.5\n  }));\n};\n\nexport const createAutoCompleteTimer = (\n  onComplete: () => void, \n  setStage: React.Dispatch<React.SetStateAction<'waiting' | 'opening' | 'revealing' | 'complete'>>\n) => {\n  return setTimeout(() => {\n    setStage('complete');\n    setTimeout(onComplete, 1000);\n  }, 3000);\n};\n\nexport const getRarityColor = (rewardType: string) => {\n  switch (rewardType) {\n    case 'coins':\n      return 'from-yellow-400 to-yellow-600';\n    case 'badge':\n      return 'from-purple-400 to-purple-600';\n    default:\n      return 'from-blue-400 to-blue-600';\n  }\n};\n\nexport const getRewardIcon = (rewardType: string) => {\n  switch (rewardType) {\n    case 'coins':\n      return '🪙';\n    case 'badge':\n      return '🏅';\n    case 'avatar-item':\n      return '👕';\n    default:\n      return '🎁';\n  }\n};\n\nexport const getRewardSound = (rewardType: string) => {\n  switch (rewardType) {\n    case 'coins':\n      return '💰';\n    case 'badge':\n      return '🎉';\n    default:\n      return '✨';\n  }\n};\n\nexport const startLootboxAnimation = (\n  setStage: React.Dispatch<React.SetStateAction<'waiting' | 'opening' | 'revealing' | 'complete'>>\n) => {\n  setStage('opening');\n  setTimeout(() => {\n    setStage('revealing');\n  }, 1500);\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/lootbox/LootboxStages.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (62). Maximum allowed is 30.","line":14,"column":59,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":80,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { Reward } from '../../types/learning';\nimport { cn } from '../../utils/cn';\n\nimport { getRarityColor, getRewardIcon, getRewardSound } from './LootboxHelpers';\n\ninterface LootboxStageProps {\n  stage: 'waiting' | 'opening' | 'revealing' | 'complete';\n  reward: Reward;\n  onStartAnimation: () => void;\n}\n\nexport const LootboxStages: React.FC<LootboxStageProps> = ({ stage, reward, onStartAnimation }) => {\n  if (stage === 'waiting') {\n    return (\n      <div className=\"text-center\">\n        <div \n          className=\"w-48 h-48 bg-gradient-to-br from-amber-400 to-amber-600 rounded-2xl mx-auto mb-6 flex items-center justify-center text-6xl shadow-2xl transform hover:scale-105 transition-transform cursor-pointer\"\n          onClick={onStartAnimation}\n        >\n          🎁\n        </div>\n        <p className=\"text-white text-xl font-bold mb-2\">Belohnung erhalten!</p>\n        <p className=\"text-gray-300\">Klicke um zu öffnen</p>\n      </div>\n    );\n  }\n\n  if (stage === 'opening') {\n    return (\n      <div className=\"text-center\">\n        <div className=\"w-48 h-48 bg-gradient-to-br from-amber-400 to-amber-600 rounded-2xl mx-auto mb-6 flex items-center justify-center text-6xl shadow-2xl animate-bounce\">\n          📦\n        </div>\n        <p className=\"text-white text-xl font-bold animate-pulse\">Öffnet sich...</p>\n      </div>\n    );\n  }\n\n  if (stage === 'revealing') {\n    return (\n      <div className=\"text-center animate-pulse\">\n        <div className={cn(\n          \"w-48 h-48 bg-gradient-to-br rounded-2xl mx-auto mb-6 flex items-center justify-center text-8xl shadow-2xl\",\n          getRarityColor(reward.type)\n        )}>\n          {getRewardIcon(reward.type)}\n        </div>\n        <div className=\"bg-white rounded-xl p-6 shadow-2xl max-w-sm\">\n          <div className=\"text-center\">\n            <div className=\"text-4xl mb-3\">{getRewardSound(reward.type)}</div>\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">\n              {reward.type === 'coins' ? `${reward.value} BrowoCoins` : reward.description}\n            </h3>\n            <p className=\"text-gray-600\">{reward.description}</p>\n            \n            {reward.type === 'coins' && (\n              <div className=\"mt-4 p-3 bg-yellow-50 rounded-lg\">\n                <p className=\"text-yellow-800 font-medium\">\n                  + {reward.value} 🪙\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (stage === 'complete') {\n    return (\n      <div className=\"text-center opacity-0 animate-fade-out\">\n        <div className=\"text-white text-2xl font-bold\">Belohnung erhalten!</div>\n      </div>\n    );\n  }\n\n  return null;\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/lootbox/MultiRewardAnimation.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":17,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":17,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\n\nimport { Reward } from '../../types/learning';\nimport { LootboxAnimation } from '../LootboxAnimation';\n\ninterface MultiRewardAnimationProps {\n  rewards: Reward[];\n  onComplete: () => void;\n}\n\nexport const MultiRewardAnimation: React.FC<MultiRewardAnimationProps> = ({ \n  rewards, \n  onComplete \n}) => {\n  const [currentRewardIndex, setCurrentRewardIndex] = useState(0);\n\n  const handleRewardComplete = () => {\n    if (currentRewardIndex < rewards.length - 1) {\n      setCurrentRewardIndex(currentRewardIndex + 1);\n    } else {\n      onComplete();\n    }\n  };\n\n  if (currentRewardIndex >= rewards.length) {\n    return null;\n  }\n\n  return (\n    <LootboxAnimation\n      reward={rewards[currentRewardIndex]}\n      onComplete={handleRewardComplete}\n      autoStart={currentRewardIndex > 0}\n    />\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/lootbox/ParticleEffect.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/lootbox/useLootboxAnimation.ts","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":10,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":10,"endColumn":92},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":29,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":29,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\n\nimport { generateCelebrationParticles, createAutoCompleteTimer, startLootboxAnimation } from './LootboxHelpers';\n\ninterface UseLootboxAnimationProps {\n  autoStart: boolean;\n  onComplete: () => void;\n}\n\nexport const useLootboxAnimation = ({ autoStart, onComplete }: UseLootboxAnimationProps) => {\n  const [stage, setStage] = useState<'waiting' | 'opening' | 'revealing' | 'complete'>('waiting');\n  const [particles, setParticles] = useState<Array<{ id: number; x: number; y: number; delay: number }>>([]);\n\n  useEffect(() => {\n    if (autoStart) {\n      handleStartAnimation();\n    }\n  }, [autoStart]);\n\n  useEffect(() => {\n    if (stage === 'revealing') {\n      setParticles(generateCelebrationParticles());\n      const timer = createAutoCompleteTimer(onComplete, setStage);\n      return () => clearTimeout(timer);\n    }\n    return undefined;\n  }, [stage, onComplete]);\n\n  const handleStartAnimation = () => {\n    startLootboxAnimation(setStage);\n  };\n\n  return {\n    stage,\n    particles,\n    handleStartAnimation\n  };\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/news/FileViewer.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (34). Maximum allowed is 30.","line":12,"column":54,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":47,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":49,"column":18,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":49,"endColumn":59}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { DashboardInfoFileType } from '../../types/dashboardInfo';\n\ninterface FileViewerProps {\n  fileType: DashboardInfoFileType;\n  fileData: string;\n  filename: string;\n  onOpenPdf: () => void;\n}\n\nexport const FileViewer: React.FC<FileViewerProps> = ({\n  fileType,\n  fileData,\n  filename,\n  onOpenPdf\n}) => {\n  if (fileType === 'image') {\n    return (\n      <div className=\"mb-4\">\n        <img \n          src={fileData}\n          alt={filename}\n          className=\"w-full h-48 object-cover rounded-lg\"\n          loading=\"lazy\"\n        />\n      </div>\n    );\n  }\n\n  if (fileType === 'pdf') {\n    return (\n      <div className=\"mb-4 bg-gray-100 rounded-lg p-6 text-center\">\n        <FileText className=\"w-12 h-12 text-red-500 mx-auto mb-2\" />\n        <p className=\"text-sm text-gray-600\">PDF-Dokument</p>\n        <button\n          onClick={onOpenPdf}\n          className=\"mt-2 text-blue-600 hover:text-blue-800 text-sm underline\"\n        >\n          PDF öffnen\n        </button>\n      </div>\n    );\n  }\n\n  return null;\n};\n\nconst FileText = ({ className }: { className: string }) => (\n  <svg className={className} fill=\"currentColor\" viewBox=\"0 0 20 20\">\n    <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n  </svg>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/news/NewsActions.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (31). Maximum allowed is 30.","line":14,"column":56,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":46,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Download, ExternalLink } from 'lucide-react';\nimport React from 'react';\n\nimport { DashboardInfoFileType } from '../../types/dashboardInfo';\n\ninterface NewsActionsProps {\n  fileType: DashboardInfoFileType;\n  fileSize: number;\n  onDownload: () => void;\n  onOpenPdf?: () => void;\n  formatFileSize: (size: number) => string;\n}\n\nexport const NewsActions: React.FC<NewsActionsProps> = ({\n  fileType,\n  fileSize,\n  onDownload,\n  onOpenPdf,\n  formatFileSize\n}) => (\n  <div className=\"flex items-center justify-between pt-3 border-t border-gray-200\">\n    <span className=\"text-xs text-gray-500\">\n      {formatFileSize(fileSize)}\n    </span>\n    \n    <div className=\"flex gap-2\">\n      <button\n        onClick={onDownload}\n        className=\"flex items-center gap-1 px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors\"\n      >\n        <Download className=\"w-3 h-3\" />\n        Download\n      </button>\n      \n      {fileType === 'pdf' && onOpenPdf && (\n        <button\n          onClick={onOpenPdf}\n          className=\"flex items-center gap-1 px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors\"\n        >\n          <ExternalLink className=\"w-3 h-3\" />\n          Öffnen\n        </button>\n      )}\n    </div>\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/news/NewsCard.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (35). Maximum allowed is 30.","line":15,"column":50,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":54,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Clock } from 'lucide-react';\nimport React from 'react';\n\nimport { useDashboardInfoStore } from '../../state/dashboardInfo';\nimport { DashboardInfo } from '../../types/dashboardInfo';\n\nimport { FileViewer } from './FileViewer';\nimport { NewsActions } from './NewsActions';\nimport { useNewsCard } from './useNewsCard';\n\ninterface NewsCardProps {\n  item: DashboardInfo;\n}\n\nexport const NewsCard: React.FC<NewsCardProps> = ({ item }) => {\n  const { formatFileSize } = useDashboardInfoStore();\n  const { handleDownload, handleOpenPdf, formatDate } = useNewsCard(item);\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow\">\n      <FileViewer\n        fileType={item.file.type}\n        fileData={item.file.data}\n        filename={item.file.filename}\n        onOpenPdf={handleOpenPdf}\n      />\n      \n      <div className=\"p-4\">\n        <h3 className=\"font-semibold text-lg text-gray-900 mb-2 line-clamp-2\">\n          {item.title}\n        </h3>\n        \n        {item.description && (\n          <p className=\"text-gray-600 text-sm mb-3 line-clamp-3\">\n            {item.description}\n          </p>\n        )}\n        \n        <div className=\"flex items-center gap-2 text-xs text-gray-500 mb-3\">\n          <Clock className=\"w-3 h-3\" />\n          <span>Erstellt: {formatDate(item.createdAt)}</span>\n        </div>\n        \n        <NewsActions\n          fileType={item.file.type}\n          fileSize={item.file.size}\n          onDownload={handleDownload}\n          onOpenPdf={item.file.type === 'pdf' ? handleOpenPdf : undefined}\n          formatFileSize={formatFileSize}\n        />\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/news/useNewsCard.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (42). Maximum allowed is 30.","line":3,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":47,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":3,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":3,"endColumn":52},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":4,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":4,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":13,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":13,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":34,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":34,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { DashboardInfo } from '../../types/dashboardInfo';\n\nexport const useNewsCard = (item: DashboardInfo) => {\n  const handleDownload = () => {\n    const link = document.createElement('a');\n    link.href = item.file.data;\n    link.download = item.file.filename;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const handleOpenPdf = () => {\n    const newWindow = window.open();\n    if (newWindow) {\n      newWindow.document.write(`\n        <html>\n          <head>\n            <title>${item.file.filename}</title>\n            <style>\n              body { margin: 0; padding: 0; background: #f5f5f5; }\n              iframe { width: 100vw; height: 100vh; border: none; }\n            </style>\n          </head>\n          <body>\n            <iframe src=\"${item.file.data}\" type=\"application/pdf\"></iframe>\n          </body>\n        </html>\n      `);\n      newWindow.document.close();\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('de-DE', {\n      day: '2-digit',\n      month: '2-digit', \n      year: 'numeric'\n    });\n  };\n\n  return {\n    handleDownload,\n    handleOpenPdf,\n    formatDate\n  };\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/quiz/QuizContent.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (92). Maximum allowed is 30.","line":28,"column":56,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":127,"endColumn":2},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (38). Maximum allowed is 30.","line":47,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":87,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":47,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":47,"endColumn":36},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (115). Maximum allowed is 75.","line":82,"column":1,"nodeType":null,"messageId":"exceed","endLine":127,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { TestQuestion } from '../../types/learning';\n\nimport { QuizControls, QuizHeader, QuizExplanation } from './QuizControls';\nimport { MultipleChoiceQuestion, ImageSelectionQuestion, SortingQuestion } from './QuizQuestionTypes';\n\ninterface QuizContentProps {\n  currentQuestion: TestQuestion;\n  currentQuestionIndex: number;\n  totalQuestions: number;\n  selectedAnswer: string | string[];\n  setSelectedAnswer: (answer: string | string[]) => void;\n  isAnswered: boolean;\n  showExplanation: boolean;\n  isLastQuestion: boolean;\n  isCorrect: boolean;\n  canAnswer: boolean;\n  onAnswer: () => void;\n  onNext: () => void;\n  onDrop: (e: React.DragEvent, dropIndex: number) => void;\n  draggedItems: string[];\n  dropZones: (string | null)[];\n  onDragStart: (e: React.DragEvent, item: string) => void;\n  onDragOver: (e: React.DragEvent) => void;\n}\n\nexport const QuizContent: React.FC<QuizContentProps> = ({\n  currentQuestion,\n  currentQuestionIndex,\n  totalQuestions,\n  selectedAnswer,\n  setSelectedAnswer,\n  isAnswered,\n  showExplanation,\n  isLastQuestion,\n  isCorrect,\n  canAnswer,\n  onAnswer,\n  onNext,\n  onDrop,\n  draggedItems,\n  dropZones,\n  onDragStart,\n  onDragOver\n}) => {\n  const renderQuestionInput = () => {\n    switch (currentQuestion.type) {\n      case 'multiple-choice':\n        return (\n          <MultipleChoiceQuestion\n            question={currentQuestion}\n            selectedAnswer={selectedAnswer}\n            onAnswerSelect={setSelectedAnswer}\n            isAnswered={isAnswered}\n          />\n        );\n\n      case 'image-selection':\n        return (\n          <ImageSelectionQuestion\n            question={currentQuestion}\n            selectedAnswer={selectedAnswer}\n            onAnswerSelect={setSelectedAnswer}\n            isAnswered={isAnswered}\n          />\n        );\n\n      case 'sorting':\n        return (\n          <SortingQuestion\n            question={currentQuestion}\n            selectedAnswer={selectedAnswer}\n            onAnswerSelect={setSelectedAnswer}\n            isAnswered={isAnswered}\n            draggedItems={draggedItems}\n            dropZones={dropZones}\n            onDragStart={onDragStart}\n            onDrop={onDrop}\n            onDragOver={onDragOver}\n          />\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <>\n      <QuizHeader\n        questionNumber={currentQuestionIndex + 1}\n        totalQuestions={totalQuestions}\n        question={currentQuestion.question}\n        points={currentQuestion.points}\n      />\n\n      {currentQuestion.mediaUrl && (\n        <img\n          src={currentQuestion.mediaUrl}\n          alt=\"Question media\"\n          className=\"w-full max-w-md mx-auto rounded-lg mb-4\"\n        />\n      )}\n\n      {renderQuestionInput()}\n\n      {showExplanation && currentQuestion.explanation && (\n        <QuizExplanation\n          explanation={currentQuestion.explanation}\n          isCorrect={isCorrect}\n        />\n      )}\n\n      <QuizControls\n        currentQuestionIndex={currentQuestionIndex}\n        totalQuestions={totalQuestions}\n        isAnswered={isAnswered}\n        showExplanation={showExplanation}\n        isLastQuestion={isLastQuestion}\n        onAnswer={onAnswer}\n        onNext={onNext}\n        canAnswer={canAnswer}\n      />\n    </>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/quiz/QuizControls.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (50). Maximum allowed is 30.","line":16,"column":58,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":67,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (120). Maximum allowed is 75.","line":83,"column":1,"nodeType":null,"messageId":"exceed","endLine":131,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { cn } from '../../utils/cn';\n\ninterface QuizControlsProps {\n  currentQuestionIndex: number;\n  totalQuestions: number;\n  isAnswered: boolean;\n  showExplanation: boolean;\n  isLastQuestion: boolean;\n  onAnswer: () => void;\n  onNext: () => void;\n  canAnswer: boolean;\n}\n\nexport const QuizControls: React.FC<QuizControlsProps> = ({\n  currentQuestionIndex,\n  totalQuestions,\n  isAnswered,\n  showExplanation,\n  isLastQuestion,\n  onAnswer,\n  onNext,\n  canAnswer\n}) => (\n  <div className=\"flex justify-between items-center mt-8\">\n    {/* Progress indicator */}\n    <div className=\"flex items-center space-x-2\">\n      <span className=\"text-sm text-gray-600\">\n        Frage {currentQuestionIndex + 1} von {totalQuestions}\n      </span>\n      <div className=\"w-32 bg-gray-200 rounded-full h-2\">\n        <div\n          className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n          style={{ width: `${((currentQuestionIndex + 1) / totalQuestions) * 100}%` }}\n        />\n      </div>\n    </div>\n\n    {/* Action buttons */}\n    <div className=\"flex space-x-3\">\n      {!isAnswered && (\n        <button\n          onClick={onAnswer}\n          disabled={!canAnswer}\n          className={cn(\n            \"px-6 py-2 rounded-lg font-medium transition-all\",\n            canAnswer\n              ? \"bg-blue-600 text-white hover:bg-blue-700\"\n              : \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n          )}\n        >\n          Antworten\n        </button>\n      )}\n\n      {showExplanation && (\n        <button\n          onClick={onNext}\n          className=\"px-6 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-all\"\n        >\n          {isLastQuestion ? 'Quiz beenden' : 'Nächste Frage'}\n        </button>\n      )}\n    </div>\n  </div>\n);\n\ninterface QuizHeaderProps {\n  questionNumber: number;\n  totalQuestions: number;\n  question: string;\n  points: number;\n}\n\nexport const QuizHeader: React.FC<QuizHeaderProps> = ({\n  questionNumber,\n  totalQuestions,\n  question,\n  points\n}) => (\n  <div className=\"mb-8\">\n    <div className=\"flex justify-between items-start mb-4\">\n      <h3 className=\"text-xl font-bold text-gray-900\">\n        Frage {questionNumber} von {totalQuestions}\n      </h3>\n      <span className=\"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full\">\n        {points} Punkte\n      </span>\n    </div>\n    \n    <p className=\"text-lg text-gray-700 leading-relaxed\">\n      {question}\n    </p>\n  </div>\n);\n\ninterface QuizExplanationProps {\n  explanation?: string;\n  isCorrect: boolean;\n}\n\nexport const QuizExplanation: React.FC<QuizExplanationProps> = ({\n  explanation,\n  isCorrect\n}) => (\n  <div className={cn(\n    \"mt-6 p-4 rounded-lg border-l-4\",\n    isCorrect \n      ? \"bg-green-50 border-green-500\" \n      : \"bg-red-50 border-red-500\"\n  )}>\n    <div className=\"flex items-center mb-2\">\n      <span className={cn(\n        \"text-lg font-medium\",\n        isCorrect ? \"text-green-800\" : \"text-red-800\"\n      )}>\n        {isCorrect ? \"✓ Richtig!\" : \"✗ Falsch\"}\n      </span>\n    </div>\n    \n    {explanation && (\n      <p className={cn(\n        \"text-sm\",\n        isCorrect ? \"text-green-700\" : \"text-red-700\"\n      )}>\n        {explanation}\n      </p>\n    )}\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/quiz/QuizLogic.ts","messages":[{"ruleId":"max-params","severity":1,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":32,"column":15,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":32,"endColumn":17},{"ruleId":"max-params","severity":1,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":60,"column":15,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":60,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { TestQuestion, TestAnswer, TestResult } from '../../types/learning';\n\nexport const checkAnswer = (\n  question: TestQuestion,\n  selectedAnswer: string | string[],\n  dropZones?: (string | null)[]\n): boolean => {\n  switch (question.type) {\n    case 'multiple-choice':\n    case 'image-selection':\n      return selectedAnswer === question.correctAnswer;\n    \n    case 'sorting':\n      if (!Array.isArray(question.correctAnswer)) return false;\n      return JSON.stringify(dropZones) === JSON.stringify(question.correctAnswer);\n    \n    case 'drag-drop':\n      return Array.isArray(selectedAnswer) && \n             Array.isArray(question.correctAnswer) &&\n             selectedAnswer.sort().join(',') === question.correctAnswer.sort().join(',');\n    \n    default:\n      return false;\n  }\n};\n\nexport const calculateQuizResult = (\n  questions: TestQuestion[],\n  answers: TestAnswer[],\n  userId: string,\n  videoId: string\n): TestResult => {\n  const totalPoints = questions.reduce((acc, q) => acc + q.points, 0);\n  const earnedPoints = answers.reduce((acc, answer) => {\n    const question = questions.find(q => q.id === answer.questionId);\n    return acc + (answer.correct ? (question?.points || 0) : 0);\n  }, 0);\n\n  const score = Math.round((earnedPoints / totalPoints) * 100);\n  const passed = score >= 70; // 70% to pass\n\n  return {\n    id: `test_${Date.now()}`,\n    userId,\n    trainingId: videoId,\n    score,\n    passed,\n    completedAt: new Date(),\n    answers,\n    earnedXP: passed ? Math.floor(score * 2) : Math.floor(score * 0.5),\n    earnedCoins: passed ? Math.floor(score / 5) : Math.floor(score / 10)\n  };\n};\n\nexport const createTestAnswer = (\n  question: TestQuestion,\n  selectedAnswer: string | string[],\n  timeSpent: number,\n  isCorrect: boolean\n): TestAnswer => ({\n  questionId: question.id,\n  userAnswer: selectedAnswer,\n  correct: isCorrect,\n  timeSpent\n});","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/quiz/QuizQuestionTypes.tsx","messages":[{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":28,"column":14,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":28,"endColumn":19},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":58,"column":14,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":58,"endColumn":19},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (125). Maximum allowed is 75.","line":84,"column":1,"nodeType":null,"messageId":"exceed","endLine":135,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (50). Maximum allowed is 30.","line":84,"column":64,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":135,"endColumn":2},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":102,"column":16,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":102,"endColumn":21},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":119,"column":16,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":119,"endColumn":21},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":129,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":129,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3711,3713],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { TestQuestion } from '../../types/learning';\nimport { cn } from '../../utils/cn';\n\n// UI Constants\nconst BORDER_STYLES = {\n  selected: \"border-blue-500 bg-blue-50\",\n  default: \"border-gray-200 hover:border-gray-300\"\n} as const;\n\ninterface QuestionTypeProps {\n  question: TestQuestion;\n  selectedAnswer: string | string[];\n  onAnswerSelect: (answer: string | string[]) => void;\n  isAnswered: boolean;\n}\n\nexport const MultipleChoiceQuestion: React.FC<QuestionTypeProps> = ({\n  question,\n  selectedAnswer,\n  onAnswerSelect,\n  isAnswered\n}) => (\n  <div className=\"space-y-3\">\n    {question.options?.map((option, index) => (\n      <label\n        key={index}\n        className={cn(\n          \"flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all\",\n          selectedAnswer === option ? BORDER_STYLES.selected : BORDER_STYLES.default\n        )}\n      >\n        <input\n          type=\"radio\"\n          name=\"answer\"\n          value={option}\n          checked={selectedAnswer === option}\n          onChange={(e) => onAnswerSelect(e.target.value)}\n          className=\"mr-3\"\n          disabled={isAnswered}\n        />\n        <span className=\"text-lg\">{option}</span>\n      </label>\n    ))}\n  </div>\n);\n\nexport const ImageSelectionQuestion: React.FC<QuestionTypeProps> = ({\n  question,\n  selectedAnswer,\n  onAnswerSelect,\n  isAnswered\n}) => (\n  <div className=\"grid grid-cols-2 gap-4\">\n    {question.options?.map((option, index) => (\n      <div\n        key={index}\n        className={cn(\n          \"border-2 rounded-lg p-4 cursor-pointer transition-all\",\n          selectedAnswer === option ? BORDER_STYLES.selected : BORDER_STYLES.default\n        )}\n        onClick={() => !isAnswered && onAnswerSelect(option)}\n      >\n        <img\n          src={`/quiz-images/${option}.jpg`}\n          alt={option}\n          className=\"w-full h-32 object-cover rounded mb-2\"\n        />\n        <p className=\"text-center font-medium\">{option}</p>\n      </div>\n    ))}\n  </div>\n);\n\ninterface SortingQuestionProps extends QuestionTypeProps {\n  draggedItems: string[];\n  dropZones: (string | null)[];\n  onDragStart: (e: React.DragEvent, item: string) => void;\n  onDrop: (e: React.DragEvent, dropIndex: number) => void;\n  onDragOver: (e: React.DragEvent) => void;\n}\n\nexport const SortingQuestion: React.FC<SortingQuestionProps> = ({\n  question,\n  draggedItems,\n  dropZones,\n  onDragStart,\n  onDrop,\n  onDragOver,\n  isAnswered\n}) => (\n  <div className=\"space-y-6\">\n    <div className=\"text-lg font-medium mb-4\">\n      Sortiere die folgenden Elemente in die richtige Reihenfolge:\n    </div>\n    \n    {/* Draggable items */}\n    <div className=\"flex flex-wrap gap-2 p-4 bg-gray-50 rounded-lg min-h-[60px]\">\n      {draggedItems.map((item, index) => (\n        <div\n          key={index}\n          draggable={!isAnswered}\n          onDragStart={(e) => onDragStart(e, item)}\n          className={cn(\n            \"px-4 py-2 bg-white border-2 border-gray-300 rounded-lg cursor-move shadow-sm\",\n            !isAnswered && \"hover:border-blue-300\"\n          )}\n        >\n          {item}\n        </div>\n      ))}\n    </div>\n    \n    {/* Drop zones */}\n    <div className=\"space-y-2\">\n      {question.options?.map((_, index) => (\n        <div\n          key={index}\n          onDrop={(e) => onDrop(e, index)}\n          onDragOver={onDragOver}\n          className={cn(\n            \"min-h-[50px] border-2 border-dashed border-gray-300 rounded-lg p-3 flex items-center\",\n            dropZones[index] && \"bg-blue-50 border-blue-300\"\n          )}\n        >\n          <span className=\"mr-3 font-medium text-gray-500\">{index + 1}.</span>\n          <span className=\"text-lg\">\n            {dropZones[index] || \"Hier ablegen...\"}\n          </span>\n        </div>\n      ))}\n    </div>\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/quiz/useDragAndDrop.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (32). Maximum allowed is 30.","line":3,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":42,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":3,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":3,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback } from 'react';\n\nexport const useDragAndDrop = () => {\n  const [draggedItems, setDraggedItems] = useState<string[]>([]);\n  const [dropZones, setDropZones] = useState<(string | null)[]>([]);\n\n  const initializeSorting = useCallback((options: string[]) => {\n    setDraggedItems([...options].sort(() => Math.random() - 0.5));\n    setDropZones([]);\n  }, []);\n\n  const handleDragStart = useCallback((e: React.DragEvent, item: string) => {\n    e.dataTransfer.setData('text/plain', item);\n  }, []);\n\n  const handleDrop = useCallback((e: React.DragEvent, dropIndex: number) => {\n    e.preventDefault();\n    const draggedItem = e.dataTransfer.getData('text/plain');\n    \n    const newDropZones = [...dropZones];\n    newDropZones[dropIndex] = draggedItem;\n    setDropZones(newDropZones);\n    \n    const newDraggedItems = draggedItems.filter(item => item !== draggedItem);\n    setDraggedItems(newDraggedItems);\n    \n    return newDropZones;\n  }, [draggedItems, dropZones]);\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n  }, []);\n\n  return {\n    draggedItems,\n    dropZones,\n    initializeSorting,\n    handleDragStart,\n    handleDrop,\n    handleDragOver\n  };\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/quiz/useQuiz.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (76). Maximum allowed is 30.","line":18,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":107,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":18,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":25,"endColumn":20},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (18). Maximum allowed is 15.","line":18,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":107,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":50,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":50,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":62,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":62,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":70,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":70,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":78,"column":18,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":78,"endColumn":60},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (89). Maximum allowed is 75.","line":94,"column":1,"nodeType":null,"messageId":"exceed","endLine":107,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\n\nimport { useAuthStore } from '../../state/auth';\nimport { useLearningStore } from '../../state/learning';\nimport { TestQuestion, TestAnswer, TestResult } from '../../types/learning';\n\nimport { checkAnswer, calculateQuizResult, createTestAnswer } from './QuizLogic';\n\ninterface UseQuizProps {\n  videoId: string;\n  questions: TestQuestion[];\n  onComplete: (result: TestResult) => void;\n  dropZones: (string | null)[];\n  initializeSorting: (options: string[]) => void;\n  handleDrop: (e: React.DragEvent, dropIndex: number) => (string | null)[];\n}\n\nexport const useQuiz = ({ \n  videoId, \n  questions, \n  onComplete, \n  dropZones, \n  initializeSorting, \n  handleDrop \n}: UseQuizProps) => {\n  const { user } = useAuthStore();\n  const { submitTestResult } = useLearningStore();\n  \n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [answers, setAnswers] = useState<TestAnswer[]>([]);\n  const [selectedAnswer, setSelectedAnswer] = useState<string | string[]>('');\n  const [showExplanation, setShowExplanation] = useState(false);\n  const [isAnswered, setIsAnswered] = useState(false);\n  const [questionStartTime, setQuestionStartTime] = useState(Date.now());\n\n  const currentQuestion = questions[currentQuestionIndex];\n  const isLastQuestion = currentQuestionIndex === questions.length - 1;\n\n  useEffect(() => {\n    setQuestionStartTime(Date.now());\n    setSelectedAnswer('');\n    setIsAnswered(false);\n    setShowExplanation(false);\n    \n    if (currentQuestion.type === 'sorting' && currentQuestion.options) {\n      initializeSorting(currentQuestion.options);\n    }\n  }, [currentQuestionIndex, currentQuestion, initializeSorting]);\n\n  const handleAnswer = () => {\n    if (!user || isAnswered) return;\n\n    const timeSpent = (Date.now() - questionStartTime) / 1000;\n    const isCorrect = checkAnswer(currentQuestion, selectedAnswer, dropZones);\n    const answer = createTestAnswer(currentQuestion, selectedAnswer, timeSpent, isCorrect);\n\n    setAnswers([...answers, answer]);\n    setIsAnswered(true);\n    setShowExplanation(true);\n  };\n\n  const nextQuestion = () => {\n    if (isLastQuestion) {\n      finishQuiz();\n    } else {\n      setCurrentQuestionIndex(currentQuestionIndex + 1);\n    }\n  };\n\n  const finishQuiz = () => {\n    if (!user) return;\n\n    const result = calculateQuizResult(questions, answers, user.id, videoId);\n    submitTestResult(result);\n    onComplete(result);\n  };\n\n  const onDrop = (e: React.DragEvent, dropIndex: number) => {\n    const newDropZones = handleDrop(e, dropIndex);\n    if (currentQuestion.type === 'sorting' && newDropZones.filter(Boolean).length === currentQuestion.options?.length) {\n      setSelectedAnswer(newDropZones.filter((zone): zone is string => Boolean(zone)));\n    }\n  };\n\n  const canAnswer = Boolean(selectedAnswer && (\n    !Array.isArray(selectedAnswer) || selectedAnswer.length > 0\n  ));\n\n  const isCorrect = showExplanation \n    ? checkAnswer(currentQuestion, selectedAnswer, dropZones)\n    : false;\n\n  return {\n    currentQuestion,\n    currentQuestionIndex,\n    isLastQuestion,\n    selectedAnswer,\n    setSelectedAnswer,\n    showExplanation,\n    isAnswered,\n    canAnswer,\n    isCorrect,\n    handleAnswer,\n    nextQuestion,\n    onDrop\n  };\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/skills/SkillCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/skills/SkillCardGrid.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (61). Maximum allowed is 30.","line":11,"column":60,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":76,"endColumn":2},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":16,"column":27,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":18,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { Skill } from '../../types/avatar';\n\ninterface SkillCardGridProps {\n  skill: Skill;\n  showXP: boolean;\n  showProgress: boolean;\n}\n\nexport const SkillCardGrid: React.FC<SkillCardGridProps> = ({ \n  skill, \n  showXP, \n  showProgress \n}) => {\n  const progressInLevel = skill.level > 1 \n    ? ((skill.currentXP || 0) / Math.max(1, skill.totalXP / skill.level)) * 100\n    : skill.totalXP > 0 ? 50 : 0;\n\n  return (\n    <div className=\"bg-white rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-all duration-200 hover:border-gray-300\">\n      <div className=\"flex items-center gap-3 mb-4\">\n        <div \n          className=\"w-12 h-12 rounded-full flex items-center justify-center text-2xl text-white shadow-md\"\n          style={{ backgroundColor: skill.color }}\n        >\n          {skill.icon}\n        </div>\n        <div>\n          <h3 className=\"font-semibold text-gray-900\">{skill.name}</h3>\n          <p className=\"text-sm text-gray-600\">Level {skill.level}</p>\n        </div>\n      </div>\n      \n      {showProgress && (\n        <div className=\"mb-4\">\n          <div className=\"flex justify-between text-sm text-gray-600 mb-2\">\n            <span>Fortschritt</span>\n            <span>{Math.round(progressInLevel)}%</span>\n          </div>\n          <div className=\"w-full bg-gray-200 rounded-full h-3\">\n            <div \n              className=\"h-3 rounded-full transition-all duration-500 relative overflow-hidden\"\n              style={{ \n                width: `${Math.min(100, Math.max(5, progressInLevel))}%`,\n                backgroundColor: skill.color \n              }}\n            >\n              <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-20 animate-pulse\" />\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {showXP && (\n        <div className=\"flex justify-between items-center text-sm mb-3\">\n          <span className=\"text-gray-600\">Gesamt XP:</span>\n          <span className=\"font-semibold text-gray-900\">\n            {skill.totalXP.toLocaleString()}\n          </span>\n        </div>\n      )}\n      \n      <p className=\"text-sm text-gray-600\">{skill.description}</p>\n      \n      <div className=\"mt-4 flex justify-center\">\n        <div \n          className=\"px-4 py-2 rounded-full text-white text-sm font-medium\"\n          style={{ backgroundColor: skill.color }}\n        >\n          Level {skill.level}\n        </div>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/skills/SkillCardHorizontal.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (44). Maximum allowed is 30.","line":11,"column":72,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":58,"endColumn":2},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":16,"column":27,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":18,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { Skill } from '../../types/avatar';\n\ninterface SkillCardHorizontalProps {\n  skill: Skill;\n  showXP: boolean;\n  showProgress: boolean;\n}\n\nexport const SkillCardHorizontal: React.FC<SkillCardHorizontalProps> = ({ \n  skill, \n  showXP, \n  showProgress \n}) => {\n  const progressInLevel = skill.level > 1 \n    ? ((skill.currentXP || 0) / Math.max(1, skill.totalXP / skill.level)) * 100\n    : skill.totalXP > 0 ? 50 : 0;\n\n  return (\n    <div className=\"flex items-center gap-4 p-4 bg-white rounded-lg border border-gray-200 hover:shadow-md transition-shadow\">\n      <div \n        className=\"w-12 h-12 rounded-full flex items-center justify-center text-2xl text-white shadow-md\"\n        style={{ backgroundColor: skill.color }}\n      >\n        {skill.icon}\n      </div>\n      \n      <div className=\"flex-1\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h3 className=\"font-semibold text-gray-900\">{skill.name}</h3>\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-sm text-gray-600\">Level {skill.level}</span>\n            {showXP && (\n              <span className=\"text-xs text-gray-500\">\n                {skill.totalXP.toLocaleString()} XP\n              </span>\n            )}\n          </div>\n        </div>\n        \n        {showProgress && (\n          <div className=\"w-full bg-gray-200 rounded-full h-2\">\n            <div \n              className=\"h-2 rounded-full transition-all duration-500\"\n              style={{ \n                width: `${Math.min(100, Math.max(5, progressInLevel))}%`,\n                backgroundColor: skill.color \n              }}\n            />\n          </div>\n        )}\n        \n        <p className=\"text-sm text-gray-600 mt-1\">{skill.description}</p>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/skills/SkillCardVertical.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (45). Maximum allowed is 30.","line":11,"column":68,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":59,"endColumn":2},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":16,"column":27,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":18,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { Skill } from '../../types/avatar';\n\ninterface SkillCardVerticalProps {\n  skill: Skill;\n  showXP: boolean;\n  showProgress: boolean;\n}\n\nexport const SkillCardVertical: React.FC<SkillCardVerticalProps> = ({ \n  skill, \n  showXP, \n  showProgress \n}) => {\n  const progressInLevel = skill.level > 1 \n    ? ((skill.currentXP || 0) / Math.max(1, skill.totalXP / skill.level)) * 100\n    : skill.totalXP > 0 ? 50 : 0;\n\n  return (\n    <div className=\"bg-white rounded-lg p-4 border border-gray-200\">\n      <div className=\"text-center mb-3\">\n        <div \n          className=\"w-16 h-16 rounded-full flex items-center justify-center text-3xl text-white shadow-lg mx-auto mb-2\"\n          style={{ backgroundColor: skill.color }}\n        >\n          {skill.icon}\n        </div>\n        <h3 className=\"font-semibold text-gray-900\">{skill.name}</h3>\n        <p className=\"text-sm text-gray-600\">Level {skill.level}</p>\n      </div>\n      \n      {showProgress && (\n        <div className=\"mb-3\">\n          <div className=\"w-full bg-gray-200 rounded-full h-2 mb-2\">\n            <div \n              className=\"h-2 rounded-full transition-all duration-500\"\n              style={{ \n                width: `${Math.min(100, Math.max(5, progressInLevel))}%`,\n                backgroundColor: skill.color \n              }}\n            />\n          </div>\n          <p className=\"text-xs text-center text-gray-500\">\n            {Math.round(progressInLevel)}% bis Level {skill.level + 1}\n          </p>\n        </div>\n      )}\n      \n      {showXP && (\n        <p className=\"text-center text-sm text-gray-600 mb-2\">\n          {skill.totalXP.toLocaleString()} XP\n        </p>\n      )}\n      \n      <p className=\"text-xs text-gray-600 text-center\">{skill.description}</p>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/skills/SkillsHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/skills/SkillsSummaryStats.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/video/ProgressBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/video/TranscriptPanel.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (39). Maximum allowed is 30.","line":13,"column":64,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":53,"endColumn":2},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":31,"column":18,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":31,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { VideoContent } from '../../types/learning';\nimport { cn } from '../../utils/cn';\n\ninterface TranscriptPanelProps {\n  video: VideoContent;\n  currentTime: number;\n  videoRef: React.RefObject<HTMLVideoElement | null>;\n  formatTime: (seconds: number) => string;\n}\n\nexport const TranscriptPanel: React.FC<TranscriptPanelProps> = ({\n  video,\n  currentTime,\n  videoRef,\n  formatTime\n}) => {\n  if (!video.transcription) return null;\n\n  const activeSegment = video.transcription.segments.find(\n    segment => currentTime >= segment.start && currentTime <= segment.end\n  );\n\n  return (\n    <div className=\"bg-gray-900 p-4 max-h-48 overflow-y-auto\">\n      <h3 className=\"text-white font-semibold mb-3\">Transkript</h3>\n      <div className=\"space-y-2\">\n        {video.transcription.segments.map((segment, index) => (\n          <div\n            key={index}\n            className={cn(\n              \"p-2 rounded cursor-pointer transition-colors\",\n              activeSegment === segment\n                ? \"bg-blue-600/20 text-blue-300\"\n                : \"text-gray-400 hover:bg-gray-800\"\n            )}\n            onClick={() => {\n              if (videoRef.current) {\n                videoRef.current.currentTime = segment.start;\n              }\n            }}\n          >\n            <div className=\"text-xs text-gray-500 mb-1\">\n              {formatTime(segment.start)} - {formatTime(segment.end)}\n            </div>\n            <div className=\"text-sm\">{segment.text}</div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/video/VideoContainer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/video/VideoControls.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (65). Maximum allowed is 30.","line":18,"column":60,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":87,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (79). Maximum allowed is 75.","line":84,"column":1,"nodeType":null,"messageId":"exceed","endLine":87,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { cn } from '../../utils/cn';\n\ninterface VideoControlsProps {\n  isPlaying: boolean;\n  currentTime: number;\n  duration: number;\n  playbackSpeed: number;\n  showTranscript: boolean;\n  onTogglePlay: () => void;\n  onSkip: (seconds: number) => void;\n  onChangeSpeed: () => void;\n  onToggleTranscript: () => void;\n  formatTime: (seconds: number) => string;\n}\n\nexport const VideoControls: React.FC<VideoControlsProps> = ({\n  isPlaying,\n  currentTime,\n  duration,\n  playbackSpeed,\n  showTranscript,\n  onTogglePlay,\n  onSkip,\n  onChangeSpeed,\n  onToggleTranscript,\n  formatTime\n}) => (\n  <div className=\"flex items-center justify-between\">\n    <div className=\"flex items-center gap-3\">\n      <button\n        onClick={onTogglePlay}\n        className=\"text-white hover:text-blue-400 transition-colors\"\n      >\n        {isPlaying ? (\n          <svg className=\"w-8 h-8\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n            <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n          </svg>\n        ) : (\n          <svg className=\"w-8 h-8\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n            <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z\" clipRule=\"evenodd\" />\n          </svg>\n        )}\n      </button>\n\n      <button\n        onClick={() => onSkip(-10)}\n        className=\"text-white hover:text-blue-400 transition-colors\"\n      >\n        <span className=\"text-sm font-medium\">-10s</span>\n      </button>\n\n      <button\n        onClick={() => onSkip(10)}\n        className=\"text-white hover:text-blue-400 transition-colors\"\n      >\n        <span className=\"text-sm font-medium\">+10s</span>\n      </button>\n\n      <div className=\"text-white text-sm\">\n        {formatTime(currentTime)} / {formatTime(duration)}\n      </div>\n    </div>\n\n    <div className=\"flex items-center gap-3\">\n      <button\n        onClick={onChangeSpeed}\n        className=\"text-white hover:text-blue-400 transition-colors text-sm font-medium\"\n      >\n        {playbackSpeed}x\n      </button>\n\n      <button\n        onClick={onToggleTranscript}\n        className={cn(\n          \"text-white hover:text-blue-400 transition-colors\",\n          showTranscript && \"text-blue-400\"\n        )}\n      >\n        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n        </svg>\n      </button>\n    </div>\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/video/useVideoPlayer.ts","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":20,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":27,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":28,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":28,"endColumn":63},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":36,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":36,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":41,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":41,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":42,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":42,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":47,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":50,"endColumn":5},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":51,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":51,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":66,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":66,"endColumn":170},{"ruleId":"max-params","severity":1,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":66,"column":168,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":66,"endColumn":170},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":67,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":67,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":77,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":77,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":83,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":83,"endColumn":42},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":85,"column":28,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":85,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2599,2601],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (130). Maximum allowed is 75.","line":91,"column":1,"nodeType":null,"messageId":"exceed","endLine":157,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":96,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":96,"endColumn":71},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":97,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":97,"endColumn":42},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":103,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":103,"endColumn":43},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (33). Maximum allowed is 30.","line":114,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":151,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":114,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":114,"endColumn":78}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":19,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useState } from 'react';\n\nimport { useLearningStore } from '../../state/learning';\nimport { VideoContent } from '../../types/learning';\n\ninterface UseVideoPlayerProps {\n  video: VideoContent;\n  onComplete?: () => void;\n}\n\ninterface VideoEventHandlersParams {\n  video: VideoContent;\n  setCurrentTime: (time: number) => void;\n  setIsPlaying: (playing: boolean) => void;\n  updateProgress: (videoId: string, time: number) => void;\n  completeVideo: (videoId: string) => void;\n  onComplete?: () => void;\n}\n\nconst createVideoEventHandlers = ({\n  video,\n  setCurrentTime,\n  setIsPlaying,\n  updateProgress,\n  completeVideo,\n  onComplete\n}: VideoEventHandlersParams) => {\n  const handleTimeUpdate = (videoElement: HTMLVideoElement) => {\n    setCurrentTime(videoElement.currentTime);\n    \n    if (Math.floor(videoElement.currentTime) % 5 === 0) {\n      updateProgress(video.id, Math.floor(videoElement.currentTime));\n    }\n  };\n\n  const handleEnded = () => {\n    completeVideo(video.id);\n    if (onComplete) onComplete();\n  };\n\n  const handlePlay = () => setIsPlaying(true);\n  const handlePause = () => setIsPlaying(false);\n\n  return { handleTimeUpdate, handleEnded, handlePlay, handlePause };\n};\n\nconst setupVideoEventListeners = (\n  videoElement: HTMLVideoElement,\n  handlers: ReturnType<typeof createVideoEventHandlers>\n) => {\n  const timeUpdateHandler = () => handlers.handleTimeUpdate(videoElement);\n  \n  videoElement.addEventListener('timeupdate', timeUpdateHandler);\n  videoElement.addEventListener('ended', handlers.handleEnded);\n  videoElement.addEventListener('play', handlers.handlePlay);\n  videoElement.addEventListener('pause', handlers.handlePause);\n\n  return () => {\n    videoElement.removeEventListener('timeupdate', timeUpdateHandler);\n    videoElement.removeEventListener('ended', handlers.handleEnded);\n    videoElement.removeEventListener('play', handlers.handlePlay);\n    videoElement.removeEventListener('pause', handlers.handlePause);\n  };\n};\n\nconst createVideoControls = (videoRef: React.RefObject<HTMLVideoElement | null>, isPlaying: boolean, playbackSpeed: number, setPlaybackSpeed: (speed: number) => void) => {\n  const togglePlayPause = () => {\n    if (videoRef.current) {\n      if (isPlaying) {\n        videoRef.current.pause();\n      } else {\n        videoRef.current.play();\n      }\n    }\n  };\n\n  const skipTime = (seconds: number) => {\n    if (videoRef.current) {\n      videoRef.current.currentTime += seconds;\n    }\n  };\n\n  const changeSpeed = (speed?: number) => {\n    const speeds = [0.5, 0.75, 1, 1.25, 1.5, 2];\n    const newSpeed = speed || getNextSpeed(speeds, playbackSpeed);\n    \n    setPlaybackSpeed(newSpeed);\n    if (videoRef.current) {\n      videoRef.current.playbackRate = newSpeed;\n    }\n  };\n\n  return { togglePlayPause, skipTime, changeSpeed };\n};\n\nconst createVideoUtils = (video: VideoContent, currentTime: number) => {\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const getActiveTranscriptSegment = () => {\n    if (!video.transcription) return null;\n    \n    return video.transcription.segments.find(\n      segment => currentTime >= segment.start && currentTime <= segment.end\n    );\n  };\n\n  return { formatTime, getActiveTranscriptSegment };\n};\n\nexport const useVideoPlayer = ({ video, onComplete }: UseVideoPlayerProps) => {\n  const { updateProgress, completeVideo } = useLearningStore();\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [showTranscript, setShowTranscript] = useState(false);\n  const [playbackSpeed, setPlaybackSpeed] = useState(1);\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  useEffect(() => {\n    const videoElement = videoRef.current;\n    if (!videoElement) return;\n\n    const handlers = createVideoEventHandlers({\n      video,\n      setCurrentTime,\n      setIsPlaying,\n      updateProgress,\n      completeVideo,\n      onComplete\n    });\n\n    return setupVideoEventListeners(videoElement, handlers);\n  }, [video, updateProgress, completeVideo, onComplete]);\n\n  const controls = createVideoControls(videoRef, isPlaying, playbackSpeed, setPlaybackSpeed);\n  const utils = createVideoUtils(video, currentTime);\n\n  return {\n    videoRef,\n    isPlaying,\n    currentTime,\n    showTranscript,\n    playbackSpeed,\n    setShowTranscript,\n    ...controls,\n    ...utils\n  };\n};\n\nconst getNextSpeed = (speeds: number[], currentSpeed: number): number => {\n  const currentIndex = speeds.indexOf(currentSpeed);\n  const nextIndex = (currentIndex + 1) % speeds.length;\n  return speeds[nextIndex];\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/yearview/UserVacationRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/yearview/WeekCell.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (40). Maximum allowed is 30.","line":15,"column":50,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":56,"endColumn":2},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":46,"column":27,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":46,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\n\nimport { LeaveRequest } from '../../types';\nimport { cn } from '../../utils/cn';\n\nimport { getWeekLeaveType, getCellColor, formatWeekRange } from './yearViewHelpers';\n\ninterface WeekCellProps {\n  week: number;\n  year: number;\n  leaves: LeaveRequest[];\n  currentWeek: number;\n}\n\nexport const WeekCell: React.FC<WeekCellProps> = ({\n  week,\n  year,\n  leaves,\n  currentWeek\n}) => {\n  const [showTooltip, setShowTooltip] = useState(false);\n  const leaveType = getWeekLeaveType(leaves);\n  const isCurrentWeek = week === currentWeek;\n  const cellColor = getCellColor(leaveType, isCurrentWeek);\n\n  return (\n    <div\n      className=\"relative\"\n      onMouseEnter={() => setShowTooltip(true)}\n      onMouseLeave={() => setShowTooltip(false)}\n    >\n      <div\n        className={cn(\n          \"w-8 h-8 border rounded cursor-pointer transition-colors\",\n          cellColor\n        )}\n      />\n      \n      {showTooltip && (\n        <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-lg whitespace-nowrap z-10\">\n          <div className=\"font-medium\">KW {week}</div>\n          <div>{formatWeekRange(week, year)}</div>\n          {leaves.length > 0 && (\n            <div className=\"mt-1\">\n              {leaves.map((leave, index) => (\n                <div key={index}>\n                  {leave.type === 'VACATION' ? '🏖️ Urlaub' : '🤒 Krank'}: {leave.startDate} - {leave.endDate}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/yearview/WeekHeaderRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/components/yearview/yearViewHelpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/design-system/components/layout/Card.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (32). Maximum allowed is 30.","line":64,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":103,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (207). Maximum allowed is 75.","line":101,"column":1,"nodeType":null,"messageId":"exceed","endLine":258,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (35). Maximum allowed is 30.","line":173,"column":52,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":208,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Card Component\n * Universelle Karten-Komponente für konsistente Container\n */\n\nimport React from 'react';\n\nimport { cn } from '../../../utils/cn';\n\ninterface CardProps {\n  children: React.ReactNode;\n  className?: string;\n  variant?: 'default' | 'elevated' | 'outlined' | 'ghost';\n  padding?: 'none' | 'sm' | 'md' | 'lg' | 'xl';\n  radius?: 'none' | 'sm' | 'md' | 'lg' | 'xl';\n  clickable?: boolean;\n  onClick?: () => void;\n  fullHeight?: boolean;\n}\n\ninterface CardHeaderProps {\n  children: React.ReactNode;\n  className?: string;\n  actions?: React.ReactNode;\n}\n\ninterface CardContentProps {\n  children: React.ReactNode;\n  className?: string;\n  centerContent?: boolean;\n}\n\ninterface CardFooterProps {\n  children: React.ReactNode;\n  className?: string;\n}\n\nconst variantClasses = {\n  default: 'bg-white shadow-sm border border-gray-200',\n  elevated: 'bg-white shadow-md border-0',\n  outlined: 'bg-white border-2 border-gray-200 shadow-none',\n  ghost: 'bg-transparent border-0 shadow-none',\n};\n\nconst paddingClasses = {\n  none: 'p-0',\n  sm: 'p-4',\n  md: 'p-6',\n  lg: 'p-8',\n  xl: 'p-12',\n};\n\nconst radiusClasses = {\n  none: 'rounded-none',\n  sm: 'rounded-sm',\n  md: 'rounded-md',\n  lg: 'rounded-lg',\n  xl: 'rounded-xl',\n};\n\n/**\n * Main Card Component\n */\nexport const Card: React.FC<CardProps> = ({\n  children,\n  className,\n  variant = 'default',\n  padding = 'md',\n  radius = 'xl',\n  clickable = false,\n  onClick,\n  fullHeight = false,\n}) => {\n  const Component = onClick ? 'button' : 'div';\n  \n  return (\n    <Component\n      className={cn(\n        // Base styles\n        'transition-all duration-200',\n        variantClasses[variant],\n        paddingClasses[padding],\n        radiusClasses[radius],\n        \n        // Height\n        fullHeight && 'h-full',\n        \n        // Interactive styles\n        clickable && [\n          'cursor-pointer',\n          'hover:shadow-md hover:scale-[1.02]',\n          'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n        ],\n        \n        // Custom classes\n        className\n      )}\n      onClick={onClick}\n    >\n      {children}\n    </Component>\n  );\n};\n\n/**\n * Card Header Component\n */\nexport const CardHeader: React.FC<CardHeaderProps> = ({\n  children,\n  className,\n  actions,\n}) => {\n  return (\n    <div className={cn('flex items-center justify-between mb-4', className)}>\n      <div>{children}</div>\n      {actions && <div>{actions}</div>}\n    </div>\n  );\n};\n\n/**\n * Card Content Component\n */\nexport const CardContent: React.FC<CardContentProps> = ({\n  children,\n  className,\n  centerContent = false,\n}) => {\n  return (\n    <div\n      className={cn(\n        'flex-grow',\n        centerContent && 'flex items-center justify-center',\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n};\n\n/**\n * Card Footer Component\n */\nexport const CardFooter: React.FC<CardFooterProps> = ({\n  children,\n  className,\n}) => {\n  return (\n    <div className={cn('mt-4 pt-4 border-t border-gray-200', className)}>\n      {children}\n    </div>\n  );\n};\n\n/**\n * Preset Card Variants für häufige Use Cases\n */\n\n// Stats Card (für Dashboard-Statistiken)\ninterface StatsCardProps {\n  title: string;\n  value: string | number;\n  subtitle?: string;\n  icon?: React.ReactNode;\n  trend?: {\n    value: string;\n    isPositive: boolean;\n  };\n  className?: string;\n}\n\nexport const StatsCard: React.FC<StatsCardProps> = ({\n  title,\n  value,\n  subtitle,\n  icon,\n  trend,\n  className,\n}) => {\n  return (\n    <Card className={cn('relative', className)} fullHeight>\n      <CardHeader>\n        <h3 className=\"text-sm font-medium text-gray-500\">{title}</h3>\n        {icon && <div className=\"text-2xl\">{icon}</div>}\n      </CardHeader>\n      \n      <CardContent>\n        <p className=\"text-2xl font-bold text-gray-900 mb-1\">{value}</p>\n        {subtitle && (\n          <p className=\"text-sm text-gray-500\">{subtitle}</p>\n        )}\n        {trend && (\n          <div className=\"mt-2\">\n            <span\n              className={cn(\n                'text-xs font-medium',\n                trend.isPositive ? 'text-green-600' : 'text-red-600'\n              )}\n            >\n              {trend.isPositive ? '+' : ''}{trend.value}\n            </span>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\n// Avatar Card (für Gamification)\ninterface AvatarCardProps {\n  children: React.ReactNode;\n  className?: string;\n  onClick?: () => void;\n}\n\nexport const AvatarCard: React.FC<AvatarCardProps> = ({\n  children,\n  className,\n  onClick,\n}) => {\n  return (\n    <Card\n      className={cn('flex flex-col', className)}\n      clickable={!!onClick}\n      onClick={onClick}\n      fullHeight\n    >\n      {children}\n    </Card>\n  );\n};\n\n// Info Card (für Details, Formulare)\ninterface InfoCardProps {\n  title: string;\n  children: React.ReactNode;\n  className?: string;\n  actions?: React.ReactNode;\n}\n\nexport const InfoCard: React.FC<InfoCardProps> = ({\n  title,\n  children,\n  className,\n  actions,\n}) => {\n  return (\n    <Card className={className} fullHeight>\n      <CardHeader actions={actions}>\n        <h2 className=\"text-lg font-semibold text-gray-900\">{title}</h2>\n      </CardHeader>\n      <CardContent>\n        {children}\n      </CardContent>\n    </Card>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/design-system/components/layout/Container.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (53). Maximum allowed is 30.","line":71,"column":60,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":126,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (180). Maximum allowed is 75.","line":96,"column":1,"nodeType":null,"messageId":"exceed","endLine":219,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Container Component\n * Konsistente Container für Seiten-Layouts\n */\n\nimport React from 'react';\n\nimport { cn } from '../../../utils/cn';\n\ninterface ContainerProps {\n  children: React.ReactNode;\n  className?: string;\n  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n  padding?: 'none' | 'sm' | 'md' | 'lg';\n  centered?: boolean;\n}\n\ninterface PageContainerProps {\n  children: React.ReactNode;\n  className?: string;\n  title?: string;\n  subtitle?: string;\n  actions?: React.ReactNode;\n  backButton?: boolean;\n  onBack?: () => void;\n}\n\nconst sizeClasses = {\n  sm: 'max-w-2xl',      // 672px\n  md: 'max-w-4xl',      // 896px  \n  lg: 'max-w-6xl',      // 1152px\n  xl: 'max-w-7xl',      // 1280px\n  full: 'max-w-none',\n};\n\nconst paddingClasses = {\n  none: 'px-0 py-0',\n  sm: 'px-4 py-4',\n  md: 'px-6 py-6',\n  lg: 'px-8 py-8',\n};\n\n/**\n * Base Container Component\n */\nexport const Container: React.FC<ContainerProps> = ({\n  children,\n  className,\n  size = 'xl',\n  padding = 'md',\n  centered = true,\n}) => {\n  return (\n    <div\n      className={cn(\n        sizeClasses[size],\n        paddingClasses[padding],\n        centered && 'mx-auto',\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n};\n\n/**\n * Page Container Component\n * Vollständiger Container für Seiten mit Header, Titel etc.\n */\nexport const PageContainer: React.FC<PageContainerProps> = ({\n  children,\n  className,\n  title,\n  subtitle,\n  actions,\n  backButton = false,\n  onBack,\n}) => {\n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <Container size=\"xl\" className={className}>\n        {/* Page Header */}\n        {(title || subtitle || actions || backButton) && (\n          <div className=\"mb-6\">\n            {/* Back Button */}\n            {backButton && onBack && (\n              <button \n                onClick={onBack}\n                className=\"mb-4 flex items-center text-blue-600 hover:text-blue-700 transition-colors\"\n              >\n                ← Zurück\n              </button>\n            )}\n            \n            {/* Title Section */}\n            <div className=\"flex items-center justify-between\">\n              <div>\n                {title && (\n                  <h1 className=\"text-2xl font-bold text-gray-900\">\n                    {title}\n                  </h1>\n                )}\n                {subtitle && (\n                  <p className=\"text-gray-600 mt-1\">\n                    {subtitle}\n                  </p>\n                )}\n              </div>\n              \n              {/* Actions */}\n              {actions && (\n                <div className=\"flex items-center gap-3\">\n                  {actions}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n        \n        {/* Page Content */}\n        {children}\n      </Container>\n    </div>\n  );\n};\n\n/**\n * Section Container\n * Container für Seiten-Abschnitte mit optionalem Titel\n */\ninterface SectionProps {\n  children: React.ReactNode;\n  className?: string;\n  title?: string;\n  subtitle?: string;\n  spacing?: 'sm' | 'md' | 'lg';\n}\n\nconst spacingClasses = {\n  sm: 'mb-8',\n  md: 'mb-12',\n  lg: 'mb-16',\n};\n\nexport const Section: React.FC<SectionProps> = ({\n  children,\n  className,\n  title,\n  subtitle,\n  spacing = 'md',\n}) => {\n  return (\n    <section className={cn(spacingClasses[spacing], className)}>\n      {/* Section Header */}\n      {(title || subtitle) && (\n        <div className=\"mb-6\">\n          {title && (\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">\n              {title}\n            </h2>\n          )}\n          {subtitle && (\n            <p className=\"text-gray-600\">\n              {subtitle}\n            </p>\n          )}\n        </div>\n      )}\n      \n      {/* Section Content */}\n      {children}\n    </section>\n  );\n};\n\n/**\n * Content Area\n * Bereich für Haupt-Inhalt mit optionalem Sidebar\n */\ninterface ContentAreaProps {\n  children: React.ReactNode;\n  sidebar?: React.ReactNode;\n  sidebarPosition?: 'left' | 'right';\n  className?: string;\n}\n\nexport const ContentArea: React.FC<ContentAreaProps> = ({\n  children,\n  sidebar,\n  sidebarPosition = 'right',\n  className,\n}) => {\n  if (!sidebar) {\n    return <div className={className}>{children}</div>;\n  }\n\n  return (\n    <div className={cn('grid lg:grid-cols-12 gap-6', className)}>\n      {sidebarPosition === 'left' && sidebar && (\n        <aside className=\"lg:col-span-3\">\n          {sidebar}\n        </aside>\n      )}\n      \n      <main className={cn(\n        sidebar ? 'lg:col-span-9' : 'lg:col-span-12'\n      )}>\n        {children}\n      </main>\n      \n      {sidebarPosition === 'right' && sidebar && (\n        <aside className=\"lg:col-span-3\">\n          {sidebar}\n        </aside>\n      )}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/design-system/components/layout/Grid.tsx","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (151). Maximum allowed is 75.","line":94,"column":1,"nodeType":null,"messageId":"exceed","endLine":185,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Grid System Component\n * Flexibles 12-Spalten Grid-System für konsistente Layouts\n */\n\nimport React from 'react';\n\nimport { cn } from '../../../utils/cn';\n\n// Grid Container Props\ninterface GridProps {\n  children: React.ReactNode;\n  className?: string;\n  gap?: 'none' | 'sm' | 'md' | 'lg' | 'xl';\n  cols?: 1 | 2 | 3 | 4 | 6 | 12;\n  mdCols?: 1 | 2 | 3 | 4 | 6 | 12;\n  lgCols?: 1 | 2 | 3 | 4 | 6 | 12;\n  xlCols?: 1 | 2 | 3 | 4 | 6 | 12;\n}\n\n// Grid Item Props\ninterface GridItemProps {\n  children: React.ReactNode;\n  className?: string;\n  span?: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 'full';\n  mdSpan?: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 'full';\n  lgSpan?: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 'full';\n  xlSpan?: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 'full';\n  order?: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12;\n  mdOrder?: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12;\n  lgOrder?: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12;\n}\n\nconst gapClasses = {\n  none: 'gap-0',\n  sm: 'gap-3',    // 12px\n  md: 'gap-6',    // 24px\n  lg: 'gap-8',    // 32px\n  xl: 'gap-12',   // 48px\n};\n\nconst colsClasses = {\n  1: 'grid-cols-1',\n  2: 'grid-cols-2',\n  3: 'grid-cols-3',\n  4: 'grid-cols-4',\n  6: 'grid-cols-6',\n  12: 'grid-cols-12',\n};\n\nconst spanClasses = {\n  1: 'col-span-1',\n  2: 'col-span-2',\n  3: 'col-span-3',\n  4: 'col-span-4',\n  5: 'col-span-5',\n  6: 'col-span-6',\n  7: 'col-span-7',\n  8: 'col-span-8',\n  9: 'col-span-9',\n  10: 'col-span-10',\n  11: 'col-span-11',\n  12: 'col-span-12',\n  full: 'col-span-full',\n};\n\nconst orderClasses = {\n  1: 'order-1',\n  2: 'order-2',\n  3: 'order-3',\n  4: 'order-4',\n  5: 'order-5',\n  6: 'order-6',\n  7: 'order-7',\n  8: 'order-8',\n  9: 'order-9',\n  10: 'order-10',\n  11: 'order-11',\n  12: 'order-12',\n};\n\n/**\n * Grid Container Component\n */\nexport const Grid: React.FC<GridProps> = ({\n  children,\n  className,\n  gap = 'md',\n  cols = 1,\n  mdCols,\n  lgCols,\n  xlCols,\n}) => {\n  return (\n    <div\n      className={cn(\n        'grid',\n        gapClasses[gap],\n        colsClasses[cols],\n        mdCols && `md:${colsClasses[mdCols]}`,\n        lgCols && `lg:${colsClasses[lgCols]}`,\n        xlCols && `xl:${colsClasses[xlCols]}`,\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n};\n\n/**\n * Grid Item Component\n */\nexport const GridItem: React.FC<GridItemProps> = ({\n  children,\n  className,\n  span = 1,\n  mdSpan,\n  lgSpan,\n  xlSpan,\n  order,\n  mdOrder,\n  lgOrder,\n}) => {\n  return (\n    <div\n      className={cn(\n        spanClasses[span],\n        mdSpan && `md:${spanClasses[mdSpan]}`,\n        lgSpan && `lg:${spanClasses[lgSpan]}`,\n        xlSpan && `xl:${spanClasses[xlSpan]}`,\n        order && orderClasses[order],\n        mdOrder && `md:${orderClasses[mdOrder]}`,\n        lgOrder && `lg:${orderClasses[lgOrder]}`,\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n};\n\n/**\n * Preset Grid Layouts für häufige Use Cases\n */\n\n// Dashboard Layout (9-3 Split)\nexport const DashboardGrid: React.FC<{ children: React.ReactNode; className?: string }> = ({\n  children,\n  className,\n}) => (\n  <Grid cols={1} mdCols={12} gap=\"md\" className={className}>\n    {children}\n  </Grid>\n);\n\n// Drei-Spalten Layout (gleichmäßig)\nexport const ThreeColumnGrid: React.FC<{ children: React.ReactNode; className?: string }> = ({\n  children,\n  className,\n}) => (\n  <Grid cols={1} mdCols={3} gap=\"md\" className={className}>\n    {children}\n  </Grid>\n);\n\n// Zwei-Spalten Layout (gleichmäßig)\nexport const TwoColumnGrid: React.FC<{ children: React.ReactNode; className?: string }> = ({\n  children,\n  className,\n}) => (\n  <Grid cols={1} mdCols={2} gap=\"md\" className={className}>\n    {children}\n  </Grid>\n);\n\n// Stats Grid (responsive stats cards)\nexport const StatsGrid: React.FC<{ children: React.ReactNode; className?: string }> = ({\n  children,\n  className,\n}) => (\n  <Grid cols={1} mdCols={3} lgCols={3} gap=\"md\" className={className}>\n    {children}\n  </Grid>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/design-system/examples/DashboardExample.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (139). Maximum allowed is 30.","line":12,"column":43,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":159,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (170). Maximum allowed is 75.","line":87,"column":1,"nodeType":null,"messageId":"exceed","endLine":192,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Dashboard Example\n * Zeigt wie das neue UI-System in der Praxis verwendet wird\n */\n\nimport React from 'react';\n\nimport { Card, StatsCard, InfoCard, AvatarCard, CardHeader, CardContent } from '../components/layout/Card';\nimport { PageContainer } from '../components/layout/Container';\nimport { DashboardGrid, GridItem, StatsGrid } from '../components/layout/Grid';\n\nexport const DashboardExample: React.FC = () => {\n  return (\n    <PageContainer\n      title=\"Dashboard\"\n      subtitle=\"Willkommen zurück, Anna!\"\n    >\n      {/* Header Card mit Benutzerinfo */}\n      <Card className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          {/* Left side: Avatar + Name + Info */}\n          <div className=\"flex items-center gap-4\">\n            {/* Avatar Image */}\n            <div className=\"w-16 h-16 rounded-full overflow-hidden bg-gradient-to-br from-gray-300 to-gray-500 flex-shrink-0\">\n              <div className=\"w-full h-full flex items-center justify-center\">\n                <span className=\"text-white text-xl\">👤</span>\n              </div>\n            </div>\n            \n            {/* Name and Info */}\n            <div>\n              <h1 className=\"text-heading-2 mb-1\">Hallo, Anna!</h1>\n              <div className=\"flex items-center gap-6 text-sm text-gray-600\">\n                <span>HR Manager</span>\n                <span>Abteilung: Human Resources</span>\n                <span>Organisation: HRthis GmbH</span>\n              </div>\n            </div>\n          </div>\n          \n          {/* Right side: Settings + Logout */}\n          <div className=\"flex items-center gap-3\">\n            <button className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\">\n              ⚙️\n            </button>\n            <button className=\"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors\">\n              <span className=\"text-gray-700\">Abmelden</span>\n            </button>\n          </div>\n        </div>\n      </Card>\n\n      {/* Main Content Grid */}\n      <DashboardGrid>\n        {/* Stats Section - 9 columns */}\n        <GridItem span=\"full\" mdSpan={9}>\n          <div className=\"space-y-6\">\n            {/* Stats Cards */}\n            <StatsGrid>\n              <StatsCard\n                title=\"Heute\"\n                value=\"0h\"\n                subtitle=\"Nicht gestempelt\"\n                icon=\"⏰\"\n              />\n              <StatsCard\n                title=\"Monat\"\n                value=\"122.3h\"\n                subtitle=\"Soll: 173h\"\n                icon=\"📊\"\n                trend={{ value: \"-50.7h\", isPositive: false }}\n              />\n              <StatsCard\n                title=\"Urlaub\"\n                value=\"22\"\n                subtitle=\"von 30 Tagen\"\n                icon=\"🏖️\"\n              />\n            </StatsGrid>\n\n            {/* Employment Details */}\n            <InfoCard\n              title=\"Beschäftigungsdetails\"\n              className=\"h-full\"\n            >\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                <div>\n                  <p className=\"text-caption text-gray-500 mb-1\">Wochenarbeitszeit</p>\n                  <p className=\"text-body font-medium\">40h / Woche</p>\n                </div>\n                <div>\n                  <p className=\"text-caption text-gray-500 mb-1\">Beschäftigungsart</p>\n                  <p className=\"text-body font-medium\">Vollzeit</p>\n                </div>\n                <div>\n                  <p className=\"text-caption text-gray-500 mb-1\">Eintrittsdatum</p>\n                  <p className=\"text-body font-medium\">1.3.2021</p>\n                </div>\n                <div>\n                  <p className=\"text-caption text-gray-500 mb-1\">Status</p>\n                  <p className=\"text-body font-medium\">✅ Aktiv</p>\n                </div>\n              </div>\n            </InfoCard>\n          </div>\n        </GridItem>\n\n        {/* Avatar Card - 3 columns */}\n        <GridItem span=\"full\" mdSpan={3}>\n          <AvatarCard className=\"h-full\">\n            <CardHeader>\n              <h3 className=\"text-caption font-semibold text-gray-700\">Avatar</h3>\n              <span className=\"text-xs text-gray-400 hover:text-gray-600\">\n                Einstellungen →\n              </span>\n            </CardHeader>\n\n            <CardContent centerContent>\n              <div className=\"text-center space-y-6\">\n                {/* Level */}\n                <div>\n                  <h4 className=\"text-caption font-medium text-gray-900\">Level 01: Rookie</h4>\n                </div>\n\n                {/* Skills */}\n                <div>\n                  <h4 className=\"text-lg font-semibold text-gray-900 mb-3\">Skills</h4>\n                  <div className=\"bg-gradient-to-r from-cyan-400 to-cyan-600 text-white px-4 py-2 rounded-full font-medium\">\n                    Level 1\n                  </div>\n                </div>\n\n                {/* Engagement */}\n                <div>\n                  <div className=\"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-xl p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"font-semibold text-gray-900\">Engagement</span>\n                      <div className=\"flex items-center gap-1\">\n                        <span className=\"text-lg font-bold text-gray-900\">1600</span>\n                        <span className=\"text-lg\">🪙</span>\n                      </div>\n                    </div>\n                  </div>\n                  <p className=\"text-caption text-gray-600 mt-2\">Browo Coins</p>\n                </div>\n\n                {/* Achievement */}\n                <div>\n                  <span className=\"text-3xl mb-2 block\">🏆</span>\n                  <p className=\"text-caption text-gray-500\">Verdiene dein erstes Achievement!</p>\n                </div>\n              </div>\n            </CardContent>\n          </AvatarCard>\n        </GridItem>\n      </DashboardGrid>\n    </PageContainer>\n  );\n};\n\n/**\n * Beispiel für responsive Mobile Ansicht\n */\nexport const MobileDashboardExample: React.FC = () => {\n  return (\n    <PageContainer title=\"Dashboard\">\n      {/* Auf Mobile: Alle Karten stapeln sich vertikal */}\n      <div className=\"space-y-6\">\n        {/* Header wird kompakter */}\n        <Card>\n          <div className=\"text-center\">\n            <div className=\"w-12 h-12 rounded-full bg-gray-300 mx-auto mb-3\"></div>\n            <h1 className=\"text-heading-3\">Hallo, Anna!</h1>\n            <p className=\"text-caption text-gray-600\">HR Manager</p>\n          </div>\n        </Card>\n\n        {/* Stats stapeln sich vertikal */}\n        <div className=\"space-y-4\">\n          <StatsCard title=\"Heute\" value=\"0h\" icon=\"⏰\" />\n          <StatsCard title=\"Monat\" value=\"122.3h\" icon=\"📊\" />\n          <StatsCard title=\"Urlaub\" value=\"22\" icon=\"🏖️\" />\n        </div>\n\n        {/* Avatar Card kommt ans Ende */}\n        <AvatarCard>\n          {/* Kompakter Inhalt für Mobile */}\n        </AvatarCard>\n      </div>\n    </PageContainer>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/design-system/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/design-system/tokens/colors.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (127). Maximum allowed is 75.","line":94,"column":1,"nodeType":null,"messageId":"exceed","endLine":161,"endColumn":60}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Color Design Tokens\n * Konsistente Farbpalette für das gesamte UI-System\n */\n\nexport const colors = {\n  // Base colors\n  white: '#ffffff',\n  black: '#000000',\n  transparent: 'transparent',\n  \n  // Gray scale\n  gray: {\n    50: '#f9fafb',\n    100: '#f3f4f6',\n    200: '#e5e7eb',\n    300: '#d1d5db',\n    400: '#9ca3af',\n    500: '#6b7280',\n    600: '#4b5563',\n    700: '#374151',\n    800: '#1f2937',\n    900: '#111827',\n  },\n  \n  // Primary colors (Blue)\n  primary: {\n    50: '#eff6ff',\n    100: '#dbeafe',\n    200: '#bfdbfe',\n    300: '#93c5fd',\n    400: '#60a5fa',\n    500: '#3b82f6',\n    600: '#2563eb',\n    700: '#1d4ed8',\n    800: '#1e40af',\n    900: '#1e3a8a',\n  },\n  \n  // Success colors (Green)\n  success: {\n    50: '#f0fdf4',\n    100: '#dcfce7',\n    200: '#bbf7d0',\n    300: '#86efac',\n    400: '#4ade80',\n    500: '#22c55e',\n    600: '#16a34a',\n    700: '#15803d',\n    800: '#166534',\n    900: '#14532d',\n  },\n  \n  // Warning colors (Yellow/Orange)\n  warning: {\n    50: '#fffbeb',\n    100: '#fef3c7',\n    200: '#fde68a',\n    300: '#fcd34d',\n    400: '#fbbf24',\n    500: '#f59e0b',\n    600: '#d97706',\n    700: '#b45309',\n    800: '#92400e',\n    900: '#78350f',\n  },\n  \n  // Error colors (Red)\n  error: {\n    50: '#fef2f2',\n    100: '#fee2e2',\n    200: '#fecaca',\n    300: '#fca5a5',\n    400: '#f87171',\n    500: '#ef4444',\n    600: '#dc2626',\n    700: '#b91c1c',\n    800: '#991b1b',\n    900: '#7f1d1d',\n  },\n  \n  // Cyan (Skills, Avatar elements)\n  cyan: {\n    50: '#ecfeff',\n    100: '#cffafe',\n    200: '#a5f3fc',\n    300: '#67e8f9',\n    400: '#22d3ee',\n    500: '#06b6d4',\n    600: '#0891b2',\n    700: '#0e7490',\n    800: '#155e75',\n    900: '#164e63',\n  },\n} as const;\n\n// Semantic color tokens\nexport const semanticColors = {\n  // Text colors\n  text: {\n    primary: colors.gray[900],\n    secondary: colors.gray[600],\n    tertiary: colors.gray[500],\n    inverse: colors.white,\n    disabled: colors.gray[400],\n  },\n  \n  // Background colors\n  background: {\n    primary: colors.white,\n    secondary: colors.gray[50],\n    tertiary: colors.gray[100],\n    inverse: colors.gray[900],\n  },\n  \n  // Border colors\n  border: {\n    light: colors.gray[200],\n    medium: colors.gray[300],\n    dark: colors.gray[400],\n  },\n  \n  // Surface colors (Cards, Modals)\n  surface: {\n    primary: colors.white,\n    secondary: colors.gray[50],\n    elevated: colors.white, // with shadow\n  },\n  \n  // Interactive colors\n  interactive: {\n    primary: colors.primary[600],\n    primaryHover: colors.primary[700],\n    secondary: colors.gray[200],\n    secondaryHover: colors.gray[300],\n  },\n  \n  // Status colors\n  status: {\n    success: colors.success[600],\n    successLight: colors.success[100],\n    warning: colors.warning[600],\n    warningLight: colors.warning[100],\n    error: colors.error[600],\n    errorLight: colors.error[100],\n    info: colors.primary[600],\n    infoLight: colors.primary[100],\n  },\n  \n  // Gamification colors\n  gamification: {\n    level: colors.cyan[500],\n    levelBackground: colors.cyan[100],\n    engagement: colors.warning[500],\n    engagementBackground: colors.warning[100],\n    achievement: colors.warning[600],\n  },\n} as const;\n\nexport type ColorKey = keyof typeof colors;\nexport type SemanticColorKey = keyof typeof semanticColors;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/design-system/tokens/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/design-system/tokens/spacing.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/design-system/tokens/typography.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (110). Maximum allowed is 75.","line":91,"column":1,"nodeType":null,"messageId":"exceed","endLine":131,"endColumn":53}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Typography Design Tokens\n * Konsistente Typografie für das gesamte UI-System\n */\n\nexport const fontSizes = {\n  xs: '0.75rem',     // 12px\n  sm: '0.875rem',    // 14px\n  base: '1rem',      // 16px\n  lg: '1.125rem',    // 18px\n  xl: '1.25rem',     // 20px\n  '2xl': '1.5rem',   // 24px\n  '3xl': '1.875rem', // 30px\n  '4xl': '2.25rem',  // 36px\n  '5xl': '3rem',     // 48px\n} as const;\n\nexport const fontWeights = {\n  normal: '400',\n  medium: '500',\n  semibold: '600',\n  bold: '700',\n} as const;\n\nexport const lineHeights = {\n  tight: '1.25',\n  normal: '1.5',\n  relaxed: '1.75',\n} as const;\n\nexport const letterSpacing = {\n  tight: '-0.025em',\n  normal: '0',\n  wide: '0.025em',\n} as const;\n\n// Semantic typography tokens\nexport const typography = {\n  // Headings\n  heading: {\n    h1: {\n      fontSize: fontSizes['3xl'],\n      fontWeight: fontWeights.bold,\n      lineHeight: lineHeights.tight,\n      letterSpacing: letterSpacing.tight,\n    },\n    h2: {\n      fontSize: fontSizes['2xl'],\n      fontWeight: fontWeights.bold,\n      lineHeight: lineHeights.tight,\n      letterSpacing: letterSpacing.tight,\n    },\n    h3: {\n      fontSize: fontSizes.xl,\n      fontWeight: fontWeights.semibold,\n      lineHeight: lineHeights.tight,\n      letterSpacing: letterSpacing.normal,\n    },\n    h4: {\n      fontSize: fontSizes.lg,\n      fontWeight: fontWeights.semibold,\n      lineHeight: lineHeights.normal,\n      letterSpacing: letterSpacing.normal,\n    },\n  },\n  \n  // Body text\n  body: {\n    large: {\n      fontSize: fontSizes.lg,\n      fontWeight: fontWeights.normal,\n      lineHeight: lineHeights.relaxed,\n      letterSpacing: letterSpacing.normal,\n    },\n    normal: {\n      fontSize: fontSizes.base,\n      fontWeight: fontWeights.normal,\n      lineHeight: lineHeights.normal,\n      letterSpacing: letterSpacing.normal,\n    },\n    small: {\n      fontSize: fontSizes.sm,\n      fontWeight: fontWeights.normal,\n      lineHeight: lineHeights.normal,\n      letterSpacing: letterSpacing.normal,\n    },\n  },\n  \n  // Special text\n  caption: {\n    fontSize: fontSizes.xs,\n    fontWeight: fontWeights.normal,\n    lineHeight: lineHeights.normal,\n    letterSpacing: letterSpacing.normal,\n  },\n  \n  label: {\n    fontSize: fontSizes.sm,\n    fontWeight: fontWeights.medium,\n    lineHeight: lineHeights.normal,\n    letterSpacing: letterSpacing.normal,\n  },\n  \n  // Interactive elements\n  button: {\n    fontSize: fontSizes.sm,\n    fontWeight: fontWeights.medium,\n    lineHeight: lineHeights.normal,\n    letterSpacing: letterSpacing.normal,\n  },\n  \n  // Numbers/Stats\n  stat: {\n    large: {\n      fontSize: fontSizes['2xl'],\n      fontWeight: fontWeights.bold,\n      lineHeight: lineHeights.tight,\n      letterSpacing: letterSpacing.tight,\n    },\n    medium: {\n      fontSize: fontSizes.xl,\n      fontWeight: fontWeights.bold,\n      lineHeight: lineHeights.tight,\n      letterSpacing: letterSpacing.normal,\n    },\n  },\n} as const;\n\nexport type FontSizeKey = keyof typeof fontSizes;\nexport type FontWeightKey = keyof typeof fontWeights;\nexport type TypographyKey = keyof typeof typography;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/hooks/useBenefitManagement.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (132). Maximum allowed is 30.","line":5,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":159,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":5,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":5,"endColumn":42},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":23,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":23,"endColumn":54},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":30,"column":57,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":30,"endColumn":59,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1230,1232],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":34,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":34,"endColumn":33},{"ruleId":"max-lines-per-function","severity":1,"message":"Async arrow function has too many lines (45). Maximum allowed is 30.","line":45,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":95,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":45,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":45,"endColumn":93},{"ruleId":"max-statements","severity":1,"message":"Async arrow function has too many statements (21). Maximum allowed is 15.","line":45,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":95,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Async arrow function has a complexity of 15. Maximum allowed is 10.","line":45,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":95,"endColumn":4},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (134). Maximum allowed is 75.","line":87,"column":1,"nodeType":null,"messageId":"exceed","endLine":159,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":97,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":97,"endColumn":112},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":110,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":117,"endColumn":7},{"ruleId":"max-params","severity":1,"message":"Async arrow function has too many parameters (6). Maximum allowed is 3.","line":117,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":117,"endColumn":7}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\n\nimport { useShopStore, type ShopBenefit } from '../state/shop';\n\nexport const useBenefitManagement = () => {\n  const { \n    purchaseBenefit, \n    addBenefit, \n    updateBenefit, \n    deleteBenefit,\n    isLoading: shopLoading \n  } = useShopStore();\n\n  const [showBenefitForm, setShowBenefitForm] = useState(false);\n  const [editingBenefit, setEditingBenefit] = useState<ShopBenefit | null>(null);\n  const [benefitTitle, setBenefitTitle] = useState('');\n  const [benefitDescription, setBenefitDescription] = useState('');\n  const [benefitCost, setBenefitCost] = useState('');\n  const [benefitCategory, setBenefitCategory] = useState<'WELLNESS' | 'FOOD' | 'TECH' | 'TIME_OFF' | 'OTHER'>('WELLNESS');\n  const [benefitStockLimit, setBenefitStockLimit] = useState('');\n  const [benefitUnlimited, setBenefitUnlimited] = useState(true);\n\n  const handleEditBenefit = (benefit: ShopBenefit) => {\n    setEditingBenefit(benefit);\n    setBenefitTitle(benefit.title);\n    setBenefitDescription(benefit.description);\n    setBenefitCost(benefit.coinCost.toString());\n    setBenefitCategory(benefit.category);\n    setBenefitUnlimited(!benefit.stockLimit);\n    setBenefitStockLimit(benefit.stockLimit?.toString() || '');\n    setShowBenefitForm(true);\n  };\n\n  const resetBenefitForm = () => {\n    setShowBenefitForm(false);\n    setEditingBenefit(null);\n    setBenefitTitle('');\n    setBenefitDescription('');\n    setBenefitCost('');\n    setBenefitCategory('WELLNESS');\n    setBenefitUnlimited(true);\n    setBenefitStockLimit('');\n  };\n\n  const handleBenefitSubmit = async (isAdmin: boolean, setError: (error: string) => void) => {\n    if (!isAdmin) return false;\n\n    setError('');\n\n    if (!benefitTitle || !benefitDescription || !benefitCost || !benefitCategory) {\n      setError('Bitte füllen Sie alle Pflichtfelder aus');\n      return false;\n    }\n\n    const cost = parseInt(benefitCost);\n    if (isNaN(cost) || cost <= 0) {\n      setError('Bitte geben Sie einen gültigen Coin-Preis ein');\n      return false;\n    }\n\n    const stockLimit = benefitUnlimited ? undefined : parseInt(benefitStockLimit);\n    if (!benefitUnlimited && (stockLimit === undefined || isNaN(stockLimit) || stockLimit <= 0)) {\n      setError('Bitte geben Sie einen gültigen Lagerbestand ein');\n      return false;\n    }\n\n    try {\n      if (editingBenefit) {\n        await updateBenefit(editingBenefit.id, {\n          title: benefitTitle,\n          description: benefitDescription,\n          coinCost: cost,\n          category: benefitCategory,\n          stockLimit: stockLimit,\n          currentStock: stockLimit\n        });\n      } else {\n        await addBenefit({\n          title: benefitTitle,\n          description: benefitDescription,\n          coinCost: cost,\n          category: benefitCategory,\n          isActive: true,\n          stockLimit: stockLimit,\n          currentStock: stockLimit\n        });\n      }\n      \n      resetBenefitForm();\n      return true;\n    } catch (error) {\n      setError('Fehler beim Speichern des Benefits');\n      return false;\n    }\n  };\n\n  const handleDeleteBenefit = async (benefitId: string, isAdmin: boolean, setError: (error: string) => void) => {\n    if (!isAdmin) return;\n    \n    // TODO: Replace with proper modal confirmation component\n    // if (window.confirm('Sind Sie sicher, dass Sie dieses Benefit löschen möchten?')) {\n      try {\n        await deleteBenefit(benefitId);\n      } catch (error) {\n        setError('Fehler beim Löschen des Benefits');\n      }\n    // }\n  };\n\n  const handlePurchaseBenefit = async (\n    userId: string, \n    benefitId: string, \n    coinCost: number, \n    userBalance: number,\n    setError: (error: string) => void,\n    updateUserBalance: () => void\n  ) => {\n    if (userBalance < coinCost) {\n      setError('Nicht genügend Coins für diesen Kauf');\n      return;\n    }\n\n    try {\n      await purchaseBenefit(userId, benefitId);\n      updateUserBalance();\n    } catch (error) {\n      setError('Fehler beim Kauf des Benefits');\n    }\n  };\n\n  return {\n    // State\n    showBenefitForm,\n    editingBenefit,\n    benefitTitle,\n    benefitDescription,\n    benefitCost,\n    benefitCategory,\n    benefitStockLimit,\n    benefitUnlimited,\n    shopLoading,\n    \n    // Setters\n    setShowBenefitForm,\n    setBenefitTitle,\n    setBenefitDescription,\n    setBenefitCost,\n    setBenefitCategory,\n    setBenefitStockLimit,\n    setBenefitUnlimited,\n    \n    // Handlers\n    handleEditBenefit,\n    resetBenefitForm,\n    handleBenefitSubmit,\n    handleDeleteBenefit,\n    handlePurchaseBenefit\n  };\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/hooks/useBenefitsData.ts","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":6,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":6,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":22,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":22,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\n\nimport { useAuthStore } from '../state/auth';\nimport { useCoinsStore } from '../state/coins';\n\nexport const useBenefitsData = () => {\n  const { user } = useAuthStore();\n  const { getUserBalance } = useCoinsStore();\n  \n  const [userBalance, setUserBalance] = useState(0);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (user) {\n      const balance = getUserBalance(user.id);\n      setUserBalance(balance.currentBalance);\n      setIsAdmin(user.role === 'ADMIN' || user.role === 'SUPERADMIN');\n    }\n  }, [user, getUserBalance]);\n\n  const updateUserBalance = () => {\n    if (user) {\n      const balance = getUserBalance(user.id);\n      setUserBalance(balance.currentBalance);\n    }\n  };\n\n  return {\n    user,\n    userBalance,\n    isAdmin,\n    error,\n    setError,\n    updateUserBalance\n  };\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/hooks/useCalendarData.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (213). Maximum allowed is 30.","line":10,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":271,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":10,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":10,"endColumn":82},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":24,"column":37,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":24,"endColumn":39,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1049,1051],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":24,"column":91,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":24,"endColumn":93,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1084,1134],"text":"(foundUser.lastName ?? foundUser.name.split(' ')[1])"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (61). Maximum allowed is 30.","line":39,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":108,"endColumn":4},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":46,"column":11,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":46,"endColumn":66},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":47,"column":11,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":47,"endColumn":62},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (220). Maximum allowed is 75.","line":91,"column":1,"nodeType":null,"messageId":"exceed","endLine":271,"endColumn":3},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":128,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":128,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4712,4714],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":142,"column":25,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":142,"endColumn":78},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":173,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":173,"endColumn":56},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (61). Maximum allowed is 30.","line":185,"column":13,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":261,"endColumn":4},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (58). Maximum allowed is 30.","line":186,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":258,"endColumn":6},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":186,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":186,"endColumn":35},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (27). Maximum allowed is 15.","line":186,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":258,"endColumn":6},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":196,"column":13,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":196,"endColumn":80},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":197,"column":13,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":197,"endColumn":82},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":216,"column":15,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":216,"endColumn":60},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":237,"column":91,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":237,"endColumn":93,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8865,8867],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":19,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\n\nimport { useAuthStore } from '../state/auth';\nimport { useLeavesStore } from '../state/leaves';\nimport { useRemindersStore } from '../state/reminders';\nimport { useTimeRecordsStore } from '../state/timeRecords';\nimport { LeaveRequest } from '../types';\nimport { CalendarDay, CalendarEvent, CalendarViewMode, VacationStats } from '../types/calendar';\n\nexport const useCalendarData = (viewMode: CalendarViewMode, currentDate: Date) => {\n  const { user, getAllUsers } = useAuthStore();\n  const { getAllLeaveRequests } = useLeavesStore();\n  const { getTimeRecordsForPeriod } = useTimeRecordsStore();\n  const { reminders } = useRemindersStore();\n  \n  const [calendarDays, setCalendarDays] = useState<CalendarDay[]>([]);\n  \n  const allUsers = useMemo(() => getAllUsers(), [getAllUsers]);\n  const allLeaves = getAllLeaveRequests();\n\n  const getUserName = (userId: string): string => {\n    const foundUser = allUsers.find(u => u.id === userId);\n    if (foundUser) {\n      return `${foundUser.firstName || foundUser.name.split(' ')[0]} ${foundUser.lastName || foundUser.name.split(' ')[1] || ''}`.trim();\n    }\n    \n    const names: { [key: string]: string } = {\n      '1': 'Max M.',\n      '2': 'Anna A.',\n      '3': 'Tom K.',\n      '4': 'Test U.',\n      '5': 'Lisa S.',\n      '6': 'Julia B.',\n      '7': 'Marco L.'\n    };\n    return names[userId] || 'Unbekannt';\n  };\n\n  const generateCalendarEvents = (): CalendarEvent[] => {\n    const events: CalendarEvent[] = [];\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth();\n    \n    const startOfMonth = new Date(year, month, 1);\n    const endOfMonth = new Date(year, month + 1, 0);\n    const startDateStr = startOfMonth.toISOString().split('T')[0];\n    const endDateStr = endOfMonth.toISOString().split('T')[0];\n\n    // Add leave events\n    allLeaves\n      .filter(leave => {\n        const leaveStart = new Date(leave.startDate);\n        const leaveEnd = new Date(leave.endDate);\n        return (leaveStart <= endOfMonth && leaveEnd >= startOfMonth) && \n               leave.status === 'APPROVED' &&\n               (viewMode === 'team' || leave.userId === user?.id);\n      })\n      .forEach(leave => {\n        const startDate = new Date(Math.max(new Date(leave.startDate).getTime(), startOfMonth.getTime()));\n        const endDate = new Date(Math.min(new Date(leave.endDate).getTime(), endOfMonth.getTime()));\n        \n        for (let date = new Date(startDate); date <= endDate; date.setDate(date.getDate() + 1)) {\n          events.push({\n            userId: leave.userId,\n            userName: getUserName(leave.userId),\n            date: date.toISOString().split('T')[0],\n            type: leave.type === 'VACATION' ? 'urlaub' : 'krank',\n            status: 'genehmigt'\n          });\n        }\n      });\n\n    // Add time records for personal view\n    if (viewMode === 'personal' && user) {\n      const timeRecords = getTimeRecordsForPeriod(user.id, startDateStr, endDateStr);\n      timeRecords.forEach(record => {\n        if (record.timeOut) {\n          events.push({\n            userId: user.id,\n            userName: getUserName(user.id),\n            date: record.date,\n            type: 'zeit',\n            stunden: record.totalHours\n          });\n        }\n      });\n    }\n\n    // Add reminders\n    reminders\n      .filter(reminder => {\n        const reminderDate = new Date(reminder.reminderDate);\n        return reminderDate >= startOfMonth && reminderDate <= endOfMonth && \n               reminder.isActive &&\n               (viewMode === 'team' || reminder.userId === user?.id);\n      })\n      .forEach(reminder => {\n        events.push({\n          userId: reminder.userId,\n          userName: getUserName(reminder.userId),\n          date: reminder.reminderDate,\n          type: 'meeting', // Using 'meeting' as closest equivalent\n          title: reminder.message\n        });\n      });\n\n    return events;\n  };\n\n  const getVacationStats = (): VacationStats => {\n    if (!user) return { totalDays: 0, usedDays: 0, remainingDays: 0, pendingDays: 0 };\n    \n    const currentYear = new Date().getFullYear();\n    const approvedVacations = allLeaves.filter(leave =>\n      leave.userId === user.id &&\n      leave.type === 'VACATION' &&\n      leave.status === 'APPROVED' &&\n      new Date(leave.startDate).getFullYear() === currentYear\n    );\n    \n    const usedDays = approvedVacations.reduce((total, leave) => {\n      const start = new Date(leave.startDate);\n      const end = new Date(leave.endDate);\n      const days = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)) + 1;\n      return total + days;\n    }, 0);\n    \n    const totalDays = user.vacationDays || 30;\n    \n    return {\n      totalDays: totalDays,\n      usedDays: usedDays,\n      remainingDays: Math.max(0, totalDays - usedDays),\n      pendingDays: 0 // TODO: Calculate pending days from requests with status 'PENDING'\n    };\n  };\n\n  const generateYearData = (): { [userId: string]: { [week: string]: LeaveRequest[] } } => {\n    const year = currentDate.getFullYear();\n    const yearData: { [userId: string]: { [week: string]: LeaveRequest[] } } = {};\n    \n    const usersToShow = viewMode === 'team' ? allUsers : (user ? [user] : []);\n    \n    usersToShow.forEach(u => {\n      yearData[u.id] = {};\n    });\n\n    const yearLeaves = allLeaves.filter(leave => {\n      const leaveYear = new Date(leave.startDate).getFullYear();\n      return leaveYear === year && leave.status === 'APPROVED';\n    });\n\n    for (let week = 1; week <= 53; week++) {\n      const weekStart = getDateOfWeek(week, year);\n      const weekEnd = new Date(weekStart);\n      weekEnd.setDate(weekEnd.getDate() + 6);\n\n      usersToShow.forEach(u => {\n        yearData[u.id][week] = yearLeaves.filter(leave => {\n          if (leave.userId !== u.id) return false;\n          \n          const leaveStart = new Date(leave.startDate);\n          const leaveEnd = new Date(leave.endDate);\n          \n          return leaveStart <= weekEnd && leaveEnd >= weekStart;\n        });\n      });\n    }\n\n    return yearData;\n  };\n\n  const getDateOfWeek = (week: number, year: number) => {\n    const jan1 = new Date(year, 0, 1);\n    const days = (week - 1) * 7;\n    const weekStart = new Date(jan1.getTime() + days * 24 * 60 * 60 * 1000);\n    \n    const dayOfWeek = weekStart.getDay();\n    const diff = (dayOfWeek === 0 ? -6 : 1) - dayOfWeek;\n    weekStart.setDate(weekStart.getDate() + diff);\n    \n    return weekStart;\n  };\n\n  useEffect(() => {\n    const generateCalendar = () => {\n      const year = currentDate.getFullYear();\n      const month = currentDate.getMonth();\n      \n      const firstDay = new Date(year, month, 1);\n      const startDate = new Date(firstDay);\n      const dayOfWeek = firstDay.getDay();\n      const daysToSubtract = dayOfWeek === 0 ? 6 : dayOfWeek - 1;\n      startDate.setDate(firstDay.getDate() - daysToSubtract);\n      \n      const startDateStr = new Date(year, month, 1).toISOString().split('T')[0];\n      const endDateStr = new Date(year, month + 1, 0).toISOString().split('T')[0];\n      \n      const userTimeRecords = user && viewMode === 'personal' ? \n        getTimeRecordsForPeriod(user.id, startDateStr, endDateStr) : [];\n      \n      const teamTimeRecords = viewMode === 'team' ? \n        allUsers.flatMap(u => getTimeRecordsForPeriod(u.id, startDateStr, endDateStr)) : [];\n      \n      const days: CalendarDay[] = [];\n      const today = new Date();\n      \n      for (let i = 0; i < 42; i++) {\n        const date = new Date(startDate);\n        date.setDate(startDate.getDate() + i);\n        \n        const isCurrentMonth = date.getMonth() === month;\n        const isToday = date.toDateString() === today.toDateString();\n        const isWeekend = date.getDay() === 0 || date.getDay() === 6;\n        \n        const dateString = date.toISOString().split('T')[0];\n        const dayLeaves = allLeaves.filter(leave => {\n          const startDate = new Date(leave.startDate);\n          const endDate = new Date(leave.endDate);\n          const currentDate = new Date(dateString);\n          \n          return currentDate >= startDate && currentDate <= endDate && \n                 leave.status === 'APPROVED' &&\n                 (viewMode === 'team' || leave.userId === user?.id);\n        });\n\n        const userLeaves = allLeaves.filter(leave => {\n          const startDate = new Date(leave.startDate);\n          const endDate = new Date(leave.endDate);\n          const currentDate = new Date(dateString);\n          \n          return currentDate >= startDate && currentDate <= endDate && \n                 leave.userId === user?.id && leave.status === 'APPROVED';\n        });\n        \n        const _dayTimeRecords = teamTimeRecords.filter(record => record.date === dateString);\n        const userTimeRecord = userTimeRecords.find(record => record.date === dateString) || undefined;\n        \n        const dayReminders = reminders.filter(reminder => \n          reminder.reminderDate === dateString && reminder.isActive &&\n          (viewMode === 'team' || reminder.userId === user?.id)\n        );\n        \n        days.push({\n          date,\n          entries: [], // CalendarEntry[] - populate if needed\n          isToday,\n          isWeekend,\n          isCurrentMonth,\n          userLeaves,\n          userTimeRecord,\n          leaves: dayLeaves,\n          reminders: dayReminders\n        });\n      }\n      \n      setCalendarDays(days);\n    };\n    \n    generateCalendar();\n  }, [currentDate, allLeaves, reminders, viewMode, user, allUsers, getTimeRecordsForPeriod]);\n\n  return {\n    calendarDays,\n    allUsers,\n    generateCalendarEvents,\n    getVacationStats,\n    generateYearData,\n    getUserName\n  };\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/navigation/AppNavigator.backup.tsx","messages":[{"ruleId":"import/order","severity":1,"message":"There should be no empty line within import group","line":6,"column":1,"nodeType":"ImportDeclaration","endLine":6,"endColumn":60},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (77). Maximum allowed is 30.","line":37,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":123,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":37,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":37,"endColumn":68},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (145). Maximum allowed is 75.","line":95,"column":1,"nodeType":null,"messageId":"exceed","endLine":169,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (41). Maximum allowed is 30.","line":125,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":169,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":125,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":125,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Routes, Route, Navigate, Link, useLocation } from 'react-router-dom';\n\nimport { AdminCoinsScreen } from '../screens/AdminCoinsScreen';\nimport { AdminScreen } from '../screens/AdminScreen';\nimport { BenefitsScreen } from '../screens/BenefitsScreen';\n\n// Screens\n// import { TimeRecordsScreen } from '../screens/TimeRecordsScreen';\n// import { CalendarScreen } from '../screens/CalendarScreen';\nimport { CoinHistoryScreen } from '../screens/CoinHistoryScreen';\n// import { TrainingOverviewScreen } from '../screens/TrainingOverviewScreen';\nimport { CreateTrainingScreen } from '../screens/CreateTrainingScreen';\nimport { DashboardScreen } from '../screens/DashboardScreen';\nimport { DocumentsScreen } from '../screens/DocumentsScreen';\nimport { LearningAdmin } from '../screens/LearningAdmin';\nimport { LearningDashboard } from '../screens/LearningDashboard';\nimport { LoginScreen } from '../screens/LoginScreen';\nimport { MyRequestsScreen } from '../screens/MyRequestsScreen';\nimport { RequestLeaveScreen } from '../screens/RequestLeaveScreen';\n// import { LearningShop } from '../screens/LearningShop';\nimport { SettingsScreen } from '../screens/SettingsScreen';\nimport { TakeLessonScreen } from '../screens/TakeLessonScreen';\n// import { TeamManagementScreen } from '../screens/TeamManagementScreen';\nimport { TeamCalendarScreen } from '../screens/TeamCalendarScreen';\nimport { TeamMemberDetailsScreen } from '../screens/TeamMemberDetailsScreen';\nimport { TeamsOverviewScreen } from '../screens/TeamsOverviewScreen';\nimport { TimeAndVacationScreen } from '../screens/TimeAndVacationScreen';\nimport { TrainingDetailsScreen } from '../screens/TrainingDetailsScreen';\nimport { TrainingManagementScreen } from '../screens/TrainingManagementScreen';\nimport { VideoLearningScreen } from '../screens/VideoLearningScreen';\nimport { useAuthStore } from '../state/auth';\nimport { useLeavesStore } from '../state/leaves';\nimport { useNotificationsStore } from '../state/notifications';\nimport { cn } from '../utils/cn';\n\nconst MainLayout = ({ children }: { children: React.ReactNode }) => {\n  const location = useLocation();\n  const { user } = useAuthStore();\n  const { getUnreadCount } = useNotificationsStore();\n  const { getAllLeaveRequests } = useLeavesStore();\n  \n  const getNotificationCount = (tabPath: string): number => {\n    if (!user) return 0;\n    \n    const isAdmin = user.role === 'ADMIN' || user.role === 'SUPERADMIN';\n    \n    switch (tabPath) {\n      case '/requests':\n        if (isAdmin) {\n          // For admin: show pending leave requests (these are the actionable items)\n          return getAllLeaveRequests().filter(req => req.status === 'PENDING').length;\n        } else {\n          // For users: show unread notifications about their requests\n          return getUnreadCount(user.id);\n        }\n      case '/training':\n        // Could add training-related notifications here\n        return 0;\n      default:\n        return 0;\n    }\n  };\n  \n  const isAdmin = user?.role === 'ADMIN' || user?.role === 'SUPERADMIN';\n  \n  const tabs = [\n    { path: '/dashboard', label: 'Übersicht', icon: '🏠' },\n    { path: '/requests', label: 'Anträge', icon: '📝' },\n    { path: '/time-vacation', label: 'Zeit & Urlaub', icon: '⏰' },\n    { path: '/learning', label: 'Lernen', icon: '🎓' },\n    { path: '/benefits', label: 'Benefits', icon: '🎁' },\n    { path: '/documents', label: 'Dokumente', icon: '📄' },\n    ...(isAdmin ? [{ path: '/admin', label: 'Admin', icon: '🔧' }] : []),\n  ];\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <nav className=\"bg-white border-b border-gray-200 shadow-sm\">\n        <div className=\"flex items-center h-16 px-4\">\n          {/* HRdiese Logo */}\n          <div className=\"flex items-center mr-8\">\n            <div className=\"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center mr-2\">\n              <span className=\"text-white font-bold text-sm\">HR</span>\n            </div>\n            <span className=\"text-lg font-semibold text-gray-900 hidden sm:inline\">HRdiese</span>\n          </div>\n          \n          {/* Navigation Tabs */}\n          <div className=\"flex justify-around items-center flex-1\">\n            {tabs.map((tab) => {\n            const isActive = location.pathname.startsWith(tab.path);\n            const notificationCount = getNotificationCount(tab.path);\n            return (\n              <Link\n                key={tab.path}\n                to={tab.path}\n                className={cn(\n                  \"flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg transition-colors relative\",\n                  isActive \n                    ? \"text-blue-600 bg-blue-50\" \n                    : \"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"\n                )}\n              >\n                <span className=\"text-lg mr-2\">{tab.icon}</span>\n                <span className=\"hidden sm:inline\">{tab.label}</span>\n                {notificationCount > 0 && (\n                  <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\n                    {notificationCount > 99 ? '99+' : notificationCount}\n                  </span>\n                )}\n              </Link>\n            );\n            })}\n          </div>\n        </div>\n      </nav>\n      <main className=\"flex-1\">\n        {children}\n      </main>\n    </div>\n  );\n};\n\nexport const AppNavigator = () => {\n  const { isAuthenticated } = useAuthStore();\n\n  if (!isAuthenticated) {\n    return (\n      <Routes>\n        <Route path=\"/login\" element={<LoginScreen />} />\n        <Route path=\"*\" element={<Navigate to=\"/login\" />} />\n      </Routes>\n    );\n  }\n\n  return (\n    <Routes>\n      <Route path=\"/\" element={<MainLayout><Navigate to=\"/dashboard\" /></MainLayout>} />\n      <Route path=\"/dashboard\" element={<MainLayout><DashboardScreen /></MainLayout>} />\n      <Route path=\"/requests\" element={<MainLayout><MyRequestsScreen /></MainLayout>} />\n      <Route path=\"/time-vacation\" element={<MainLayout><TimeAndVacationScreen /></MainLayout>} />\n      {/* Legacy routes - redirect to time-vacation */}\n      <Route path=\"/time\" element={<Navigate to=\"/time-vacation\" />} />\n      <Route path=\"/calendar\" element={<Navigate to=\"/time-vacation\" />} />\n      <Route path=\"/learning\" element={<MainLayout><LearningDashboard /></MainLayout>} />\n      <Route path=\"/benefits\" element={<MainLayout><BenefitsScreen /></MainLayout>} />\n      <Route path=\"/documents\" element={<MainLayout><DocumentsScreen /></MainLayout>} />\n      <Route path=\"/admin/*\" element={<AdminScreen />} />\n      <Route path=\"/team-calendar\" element={<MainLayout><TeamCalendarScreen /></MainLayout>} />\n      \n      {/* Modal-like routes */}\n      <Route path=\"/request-leave\" element={<RequestLeaveScreen />} />\n      <Route path=\"/settings\" element={<SettingsScreen />} />\n      <Route path=\"/coin-history\" element={<CoinHistoryScreen />} />\n      <Route path=\"/admin-coins\" element={<AdminCoinsScreen />} />\n      <Route path=\"/learning/video/:videoId\" element={<VideoLearningScreen />} />\n      <Route path=\"/learning/admin\" element={<LearningAdmin />} />\n      <Route path=\"/create-training\" element={<CreateTrainingScreen />} />\n      <Route path=\"/training/:id\" element={<TrainingDetailsScreen />} />\n      <Route path=\"/training/:trainingId/lesson/:lessonId\" element={<TakeLessonScreen />} />\n      <Route path=\"/training-management\" element={<TrainingManagementScreen />} />\n      <Route path=\"/team-management/user/:userId\" element={<TeamMemberDetailsScreen />} />\n      <Route path=\"/team-management/teams\" element={<TeamsOverviewScreen />} />\n      \n      <Route path=\"*\" element={<Navigate to=\"/dashboard\" />} />\n    </Routes>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/navigation/AppNavigator.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (61). Maximum allowed is 30.","line":36,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":103,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":36,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":36,"endColumn":68},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (126). Maximum allowed is 75.","line":94,"column":1,"nodeType":null,"messageId":"exceed","endLine":149,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (41). Maximum allowed is 30.","line":105,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":149,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":105,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":105,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Routes, Route, Navigate, Link, useLocation } from 'react-router-dom';\n\n// Removed unused imports for requests functionality\n\n// Screens\nimport { AdminCoinsScreen } from '../screens/AdminCoinsScreen';\nimport { AdminScreen } from '../screens/AdminScreen';\nimport { BenefitsScreen } from '../screens/BenefitsScreen';\nimport { CoinHistoryScreen } from '../screens/CoinHistoryScreen';\nimport { CreateTrainingScreen } from '../screens/CreateTrainingScreen';\nimport { DashboardScreen } from '../screens/DashboardScreen';\nimport { DocumentsScreen } from '../screens/DocumentsScreen';\nimport { LearningAdmin } from '../screens/LearningAdmin';\nimport { LearningDashboard } from '../screens/LearningDashboard';\nimport { LoginScreen } from '../screens/LoginScreen';\nimport { RequestLeaveScreen } from '../screens/RequestLeaveScreen';\n// import { TimeRecordsScreen } from '../screens/TimeRecordsScreen';\n// import { MyRequestsScreen } from '../screens/MyRequestsScreen';\n// import { CalendarScreen } from '../screens/CalendarScreen';\nimport { SettingsScreen } from '../screens/SettingsScreen';\nimport { TakeLessonScreen } from '../screens/TakeLessonScreen';\nimport { TeamCalendarScreen } from '../screens/TeamCalendarScreen';\nimport { TeamMemberDetailsScreen } from '../screens/TeamMemberDetailsScreen';\nimport { TeamsOverviewScreen } from '../screens/TeamsOverviewScreen';\nimport { TimeAndVacationScreen } from '../screens/TimeAndVacationScreen';\n// import { TrainingOverviewScreen } from '../screens/TrainingOverviewScreen';\nimport { TrainingDetailsScreen } from '../screens/TrainingDetailsScreen';\nimport { TrainingManagementScreen } from '../screens/TrainingManagementScreen';\nimport { VideoLearningScreen } from '../screens/VideoLearningScreen';\n// import { LearningShop } from '../screens/LearningShop';\n// import { TeamManagementScreen } from '../screens/TeamManagementScreen';\nimport { useAuthStore } from '../state/auth';\nimport { cn } from '../utils/cn';\n\nconst MainLayout = ({ children }: { children: React.ReactNode }) => {\n  const location = useLocation();\n  const { user } = useAuthStore();\n  // Removed unused notification logic for requests tab\n  \n  const getNotificationCount = (_tabPath: string): number => {\n    // Future: Could add training-related notifications here\n    return 0;\n  };\n  \n  const isAdmin = user?.role === 'ADMIN' || user?.role === 'SUPERADMIN';\n  \n  const tabs = [\n    { path: '/dashboard', label: 'Übersicht', icon: '🏠' },\n    { path: '/time-vacation', label: 'Zeit & Urlaub', icon: '⏰' },\n    { path: '/learning', label: 'Lernen', icon: '🎓' },\n    { path: '/benefits', label: 'Benefits', icon: '🎁' },\n    { path: '/documents', label: 'Dokumente', icon: '📄' },\n    ...(isAdmin ? [{ path: '/admin', label: 'Admin', icon: '🔧' }] : []),\n  ];\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <nav className=\"bg-white border-b border-gray-200 shadow-sm\">\n        <div className=\"flex items-center h-16 px-4\">\n          {/* HRdiese Logo */}\n          <div className=\"flex items-center mr-8\">\n            <div className=\"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center mr-2\">\n              <span className=\"text-white font-bold text-sm\">HR</span>\n            </div>\n            <span className=\"text-lg font-semibold text-gray-900 hidden sm:inline\">HRdiese</span>\n          </div>\n          \n          {/* Navigation Tabs */}\n          <div className=\"flex justify-around items-center flex-1\">\n            {tabs.map((tab) => {\n            const isActive = location.pathname.startsWith(tab.path);\n            const notificationCount = getNotificationCount(tab.path);\n            return (\n              <Link\n                key={tab.path}\n                to={tab.path}\n                className={cn(\n                  \"flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg transition-colors relative\",\n                  isActive \n                    ? \"text-blue-600 bg-blue-50\" \n                    : \"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"\n                )}\n              >\n                <span className=\"text-lg mr-2\">{tab.icon}</span>\n                <span className=\"hidden sm:inline\">{tab.label}</span>\n                {notificationCount > 0 && (\n                  <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\n                    {notificationCount > 99 ? '99+' : notificationCount}\n                  </span>\n                )}\n              </Link>\n            );\n            })}\n          </div>\n        </div>\n      </nav>\n      <main className=\"flex-1\">\n        {children}\n      </main>\n    </div>\n  );\n};\n\nexport const AppNavigator = () => {\n  const { isAuthenticated } = useAuthStore();\n\n  if (!isAuthenticated) {\n    return (\n      <Routes>\n        <Route path=\"/login\" element={<LoginScreen />} />\n        <Route path=\"*\" element={<Navigate to=\"/login\" />} />\n      </Routes>\n    );\n  }\n\n  return (\n    <Routes>\n      <Route path=\"/\" element={<MainLayout><Navigate to=\"/dashboard\" /></MainLayout>} />\n      <Route path=\"/dashboard\" element={<MainLayout><DashboardScreen /></MainLayout>} />\n      {/* Route removed: Requests functionality moved to Zeit & Urlaub */}\n      <Route path=\"/time-vacation\" element={<MainLayout><TimeAndVacationScreen /></MainLayout>} />\n      {/* Legacy routes - redirect to time-vacation */}\n      <Route path=\"/time\" element={<Navigate to=\"/time-vacation\" />} />\n      <Route path=\"/calendar\" element={<Navigate to=\"/time-vacation\" />} />\n      <Route path=\"/learning\" element={<MainLayout><LearningDashboard /></MainLayout>} />\n      <Route path=\"/benefits\" element={<MainLayout><BenefitsScreen /></MainLayout>} />\n      <Route path=\"/documents\" element={<MainLayout><DocumentsScreen /></MainLayout>} />\n      <Route path=\"/admin/*\" element={<MainLayout><AdminScreen /></MainLayout>} />\n      <Route path=\"/team-calendar\" element={<MainLayout><TeamCalendarScreen /></MainLayout>} />\n      \n      {/* Modal-like routes */}\n      <Route path=\"/request-leave\" element={<RequestLeaveScreen />} />\n      <Route path=\"/settings\" element={<SettingsScreen />} />\n      <Route path=\"/coin-history\" element={<CoinHistoryScreen />} />\n      <Route path=\"/admin-coins\" element={<AdminCoinsScreen />} />\n      <Route path=\"/learning/video/:videoId\" element={<VideoLearningScreen />} />\n      <Route path=\"/learning/admin\" element={<LearningAdmin />} />\n      <Route path=\"/create-training\" element={<CreateTrainingScreen />} />\n      <Route path=\"/training/:id\" element={<TrainingDetailsScreen />} />\n      <Route path=\"/training/:trainingId/lesson/:lessonId\" element={<TakeLessonScreen />} />\n      <Route path=\"/training-management\" element={<TrainingManagementScreen />} />\n      <Route path=\"/team-management/user/:userId\" element={<TeamMemberDetailsScreen />} />\n      <Route path=\"/team-management/teams\" element={<TeamsOverviewScreen />} />\n      \n      <Route path=\"*\" element={<Navigate to=\"/dashboard\" />} />\n    </Routes>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/pipeline/StepRunner.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Async method 'executeStep' has too many lines (31). Maximum allowed is 30.","line":43,"column":3,"nodeType":"MethodDefinition","messageId":"exceed","endLine":80,"endColumn":4},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":43,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1532,1535],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1532,1535],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":51,"column":28,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":51,"endColumn":53},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (187). Maximum allowed is 75.","line":121,"column":1,"nodeType":null,"messageId":"exceed","endLine":285,"endColumn":2},{"ruleId":"max-statements","severity":1,"message":"Method 'validateCheckpoint' has too many statements (19). Maximum allowed is 15.","line":129,"column":21,"nodeType":"FunctionExpression","messageId":"exceed","endLine":163,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":146,"column":51,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":146,"endColumn":53,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4646,4648],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Method 'generateVerificationChecklist' has too many lines (32). Maximum allowed is 30.","line":183,"column":3,"nodeType":"MethodDefinition","messageId":"exceed","endLine":219,"endColumn":4},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":268,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":268,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8652,8691],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { RequiredStepMetadata as _RequiredStepMetadata, StepResult, StepValidationCheckpoint, PipelineCheckpoint } from './types';\n\n/**\n * StepRunner - Zentrale Pipeline-Klasse für erzwungene Ausführung aller Arbeitsschritte\n * \n * Diese Klasse stellt sicher, dass KI-Agenten alle notwendigen Schritte ausführen müssen\n * und keine relevanten Operationen übersprungen werden können.\n */\nexport class StepRunner {\n  private steps: Map<string, Function> = new Map();\n  private requiredSteps: Set<string> = new Set();\n  private executedSteps: Set<string> = new Set();\n  private checkpoints: Map<string, PipelineCheckpoint> = new Map();\n  private validationResults: Map<string, StepResult> = new Map();\n  private isFailLoudEnabled: boolean = true;\n\n  constructor(failLoud: boolean = true) {\n    this.isFailLoudEnabled = failLoud;\n  }\n\n  /**\n   * Registriert einen Schritt mit der Pipeline\n   * @RequiredStep: \"register-step\"\n   */\n  registerStep(stepName: string, stepFunction: Function, isRequired: boolean = false): void {\n    if (!stepName || typeof stepFunction !== 'function') {\n      this.throwLoudError(`Invalid step registration: stepName='${stepName}', function=${typeof stepFunction}`);\n    }\n\n    this.steps.set(stepName, stepFunction);\n    \n    if (isRequired) {\n      this.requiredSteps.add(stepName);\n    }\n\n    this.logStep(`Step registered: ${stepName} (required: ${isRequired})`);\n  }\n\n  /**\n   * Führt einen einzelnen Schritt aus\n   * @RequiredStep: \"execute-step\"\n   */\n  async executeStep(stepName: string, ...args: any[]): Promise<StepResult> {\n    if (!this.steps.has(stepName)) {\n      this.throwLoudError(`Step '${stepName}' not found! Available steps: ${Array.from(this.steps.keys()).join(', ')}`);\n    }\n\n    this.logStep(`Executing step: ${stepName}`);\n    \n    try {\n      const stepFunction = this.steps.get(stepName)!;\n      const result = await stepFunction(...args);\n      \n      const stepResult: StepResult = {\n        stepName,\n        success: true,\n        result,\n        timestamp: new Date(),\n        executionTime: 0\n      };\n\n      this.executedSteps.add(stepName);\n      this.validationResults.set(stepName, stepResult);\n      \n      this.logStep(`Step completed successfully: ${stepName}`);\n      return stepResult;\n      \n    } catch (error) {\n      const stepResult: StepResult = {\n        stepName,\n        success: false,\n        error: error instanceof Error ? error.message : String(error),\n        timestamp: new Date(),\n        executionTime: 0\n      };\n\n      this.validationResults.set(stepName, stepResult);\n      this.throwLoudError(`Step '${stepName}' failed: ${stepResult.error}`);\n    }\n  }\n\n  /**\n   * Führt alle registrierten Schritte in Reihenfolge aus\n   * @RequiredStep: \"execute-pipeline\"\n   */\n  async executePipeline(): Promise<Map<string, StepResult>> {\n    this.logStep('Starting pipeline execution...');\n    \n    // Zuerst alle required steps ausführen\n    Array.from(this.requiredSteps).forEach(async (stepName) => {\n      if (!this.executedSteps.has(stepName)) {\n        await this.executeStep(stepName);\n      }\n    });\n\n    // Dann alle anderen steps\n    Array.from(this.steps.keys()).forEach(async (stepName) => {\n      if (!this.executedSteps.has(stepName)) {\n        await this.executeStep(stepName);\n      }\n    });\n\n    this.validateAllRequiredStepsCompleted();\n    this.logStep('Pipeline execution completed successfully');\n    \n    return this.validationResults;\n  }\n\n  /**\n   * Erstellt einen Checkpoint für Validierung\n   * @RequiredStep: \"create-checkpoint\"\n   */\n  createCheckpoint(checkpointName: string, validation: StepValidationCheckpoint): void {\n    const checkpoint: PipelineCheckpoint = {\n      name: checkpointName,\n      timestamp: new Date(),\n      requiredConditions: validation,\n      passed: false\n    };\n\n    this.checkpoints.set(checkpointName, checkpoint);\n    this.logStep(`Checkpoint created: ${checkpointName}`);\n  }\n\n  /**\n   * Validiert einen Checkpoint\n   * @RequiredStep: \"validate-checkpoint\"\n   */\n  validateCheckpoint(checkpointName: string): boolean {\n    const checkpoint = this.checkpoints.get(checkpointName);\n    if (!checkpoint) {\n      this.throwLoudError(`Checkpoint '${checkpointName}' not found!`);\n    }\n\n    const validation = checkpoint.requiredConditions;\n    let allConditionsMet = true;\n\n    // Prüfe required steps\n    for (const stepName of validation.requiredSteps) {\n      if (!this.executedSteps.has(stepName)) {\n        this.throwLoudError(`Required step '${stepName}' not executed for checkpoint '${checkpointName}'`);\n      }\n    }\n\n    // Prüfe custom assertions\n    for (const assertion of validation.assertions || []) {\n      try {\n        const result = assertion();\n        if (!result) {\n          allConditionsMet = false;\n          this.throwLoudError(`Assertion failed for checkpoint '${checkpointName}'`);\n        }\n      } catch (error) {\n        allConditionsMet = false;\n        this.throwLoudError(`Assertion error for checkpoint '${checkpointName}': ${error}`);\n      }\n    }\n\n    checkpoint.passed = allConditionsMet;\n    this.logStep(`Checkpoint validated: ${checkpointName} (passed: ${allConditionsMet})`);\n    \n    return allConditionsMet;\n  }\n\n  /**\n   * Validiert dass alle required steps ausgeführt wurden\n   * @RequiredStep: \"validate-required-steps\"\n   */\n  validateAllRequiredStepsCompleted(): void {\n    const missingSteps = Array.from(this.requiredSteps).filter(step => !this.executedSteps.has(step));\n    \n    if (missingSteps.length > 0) {\n      this.throwLoudError(`Missing required steps: ${missingSteps.join(', ')}`);\n    }\n\n    this.logStep('All required steps validated successfully');\n  }\n\n  /**\n   * Generiert JSON-Checkliste für Selbstverifikation\n   * @RequiredStep: \"generate-verification-checklist\"\n   */\n  generateVerificationChecklist(): object {\n    const checklist = {\n      pipeline_execution: {\n        all_steps_registered: this.steps.size > 0,\n        all_required_steps_executed: Array.from(this.requiredSteps).every(step => this.executedSteps.has(step)),\n        no_failed_steps: Array.from(this.validationResults.values()).every(result => result.success),\n        all_checkpoints_passed: Array.from(this.checkpoints.values()).every(checkpoint => checkpoint.passed)\n      },\n      step_details: {\n        total_steps: this.steps.size,\n        required_steps: this.requiredSteps.size,\n        executed_steps: this.executedSteps.size,\n        failed_steps: Array.from(this.validationResults.values()).filter(result => !result.success).length\n      },\n      checkpoint_details: {\n        total_checkpoints: this.checkpoints.size,\n        passed_checkpoints: Array.from(this.checkpoints.values()).filter(cp => cp.passed).length\n      },\n      verification_timestamp: new Date().toISOString(),\n      pipeline_status: this.getPipelineStatus()\n    };\n\n    // Fail loud wenn nicht alle Checks bestanden\n    if (!checklist.pipeline_execution.all_required_steps_executed) {\n      this.throwLoudError('Verification failed: Not all required steps executed');\n    }\n\n    if (!checklist.pipeline_execution.no_failed_steps) {\n      this.throwLoudError('Verification failed: Some steps failed');\n    }\n\n    if (!checklist.pipeline_execution.all_checkpoints_passed) {\n      this.throwLoudError('Verification failed: Some checkpoints failed');\n    }\n\n    return checklist;\n  }\n\n  /**\n   * Zurücksetzen der Pipeline für neue Ausführung\n   */\n  reset(): void {\n    this.executedSteps.clear();\n    this.validationResults.clear();\n    this.checkpoints.clear();\n    this.logStep('Pipeline reset completed');\n  }\n\n  /**\n   * Status der Pipeline abrufen\n   */\n  getPipelineStatus(): string {\n    const totalSteps = this.steps.size;\n    const executedSteps = this.executedSteps.size;\n    const requiredStepsCompleted = Array.from(this.requiredSteps).every(step => this.executedSteps.has(step));\n    \n    if (totalSteps === 0) return 'EMPTY';\n    if (executedSteps === 0) return 'NOT_STARTED';\n    if (!requiredStepsCompleted) return 'INCOMPLETE_REQUIRED';\n    if (executedSteps < totalSteps) return 'IN_PROGRESS';\n    if (executedSteps === totalSteps) return 'COMPLETED';\n    \n    return 'UNKNOWN';\n  }\n\n  /**\n   * Sichtbarer Fehler (Fail Loudly)\n   */\n  private throwLoudError(message: string): never {\n    const errorMessage = `🚨 PIPELINE ERROR: ${message}`;\n    \n    if (this.isFailLoudEnabled) {\n      console.error('\\n' + '='.repeat(80));\n      console.error(errorMessage);\n      console.error('='.repeat(80) + '\\n');\n    }\n    \n    throw new Error(errorMessage);\n  }\n\n  /**\n   * Logging für Schritte\n   */\n  private logStep(message: string): void {\n    if (this.isFailLoudEnabled) {\n      console.log(`[StepRunner] ${message}`);\n    }\n  }\n\n  /**\n   * Debug-Informationen ausgeben\n   */\n  debugInfo(): object {\n    return {\n      registeredSteps: Array.from(this.steps.keys()),\n      requiredSteps: Array.from(this.requiredSteps),\n      executedSteps: Array.from(this.executedSteps),\n      checkpoints: Array.from(this.checkpoints.entries()),\n      validationResults: Array.from(this.validationResults.entries()),\n      status: this.getPipelineStatus()\n    };\n  }\n}","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/pipeline/agent-integration.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FailLoudlyUtils' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'VerificationUtils' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":48},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":37,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":37,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1326,1401],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Method 'registerProjectSpecificSteps' has too many lines (42). Maximum allowed is 30.","line":57,"column":3,"nodeType":"MethodDefinition","messageId":"exceed","endLine":106,"endColumn":4},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":61,"column":7,"nodeType":"Literal","endLine":61,"endColumn":37},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":105,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":105,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3151,3253],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":112,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":112,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3365,3420],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Method 'setupAgentCheckpoints' has too many lines (36). Maximum allowed is 30.","line":120,"column":3,"nodeType":"MethodDefinition","messageId":"exceed","endLine":163,"endColumn":4},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (317). Maximum allowed is 75.","line":125,"column":1,"nodeType":null,"messageId":"exceed","endLine":497,"endColumn":2},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":202,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":202,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6078,6124],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":208,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":208,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6257,6307],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":214,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":214,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6431,6487],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":220,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":220,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6603,6653],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":226,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":226,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6770,6816],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":232,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":232,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6939,6986],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":238,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":238,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7095,7138],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":244,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":244,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7257,7301],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":250,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":250,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7415,7453],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":256,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":256,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7561,7605],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":266,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":266,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7831,7899],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":270,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":270,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7970,8025],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":274,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":274,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8117,8169],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":278,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":278,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8265,8323],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":282,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":282,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8423,8475],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":286,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":286,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8587,8671],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":332,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":332,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10081,10084],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10081,10084],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":367,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":367,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11150,11215],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":382,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":382,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11658,11718],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":399,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":399,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12238,12305],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":430,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":430,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13127,13186],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":437,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":437,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13429,13492],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":444,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":444,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13728,13778],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":451,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":451,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14002,14054],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":458,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":458,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14269,14326],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":465,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":465,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14547,14596],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":474,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":474,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14828,14897],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":490,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":490,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15388,15467],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":35,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * KI-Agent Integration für Pipeline-System\n * \n * Diese Datei stellt spezifische Integration und Erzwingung für verschiedene\n * KI-Agenten (Claude, ChatGPT, Devin, etc.) bereit und zeigt Beispiele,\n * wie das Pipeline-System in realen Projekten verwendet werden sollte.\n */\n\nimport { RequiredStep, markStepExecuted, stepValidator } from './annotations';\nimport { checkpointManager, CommonCheckpoints } from './checkpoints';\nimport { failLoudlyManager, FailLoudlyUtils } from './failLoudly';\nimport { verificationManager, VerificationUtils } from './verification';\n\nimport { PipelineOrchestrator, PipelineUtils } from './index';\n\n/**\n * Agent Integration Manager für verschiedene KI-Systeme\n */\nexport class AgentIntegrationManager {\n  private pipeline: PipelineOrchestrator;\n  private agentName: string;\n  private projectType: 'frontend' | 'backend' | 'fullstack' | 'mobile';\n\n  constructor(agentName: string, projectType: 'frontend' | 'backend' | 'fullstack' | 'mobile' = 'frontend') {\n    this.agentName = agentName;\n    this.projectType = projectType;\n    this.pipeline = PipelineUtils.setupStandardPipeline();\n    \n    this.initializeAgentSpecificRules();\n  }\n\n  /**\n   * Initialisiert agenten-spezifische Regeln\n   * @RequiredStep: \"initialize-agent-rules\"\n   */\n  private initializeAgentSpecificRules(): void {\n    console.log(`🤖 Initializing pipeline rules for agent: ${this.agentName}`);\n    \n    // Registriere projekt-spezifische required steps\n    this.registerProjectSpecificSteps();\n    \n    // Setup agent-spezifische Checkpoints\n    this.setupAgentCheckpoints();\n    \n    // Setup agent-spezifische Verifikationen\n    this.setupAgentVerifications();\n\n    markStepExecuted('initialize-agent-rules', true, { \n      agentName: this.agentName, \n      projectType: this.projectType \n    });\n  }\n\n  /**\n   * Registriert projekt-spezifische Required Steps\n   */\n  private registerProjectSpecificSteps(): void {\n    const commonSteps = [\n      'analyze-requirements',\n      'plan-implementation', \n      'implement-core-functionality',\n      'add-error-handling',\n      'write-tests',\n      'validate-implementation',\n      'generate-documentation'\n    ];\n\n    const frontendSteps = [\n      'setup-ui-components',\n      'implement-state-management',\n      'add-responsive-design',\n      'optimize-performance',\n      'ensure-accessibility'\n    ];\n\n    const backendSteps = [\n      'design-api-endpoints',\n      'implement-database-layer',\n      'add-authentication',\n      'implement-authorization',\n      'add-api-validation',\n      'setup-logging'\n    ];\n\n    const stepsToRegister = [...commonSteps];\n    \n    if (this.projectType === 'frontend' || this.projectType === 'fullstack') {\n      stepsToRegister.push(...frontendSteps);\n    }\n    \n    if (this.projectType === 'backend' || this.projectType === 'fullstack') {\n      stepsToRegister.push(...backendSteps);\n    }\n\n    // Registriere alle Steps als required\n    stepsToRegister.forEach(stepName => {\n      this.pipeline.registerValidatedStep(\n        stepName,\n        () => this.mockStepExecution(stepName),\n        true,\n        `checkpoint-${stepName}`\n      );\n    });\n\n    console.log(`📋 Registered ${stepsToRegister.length} required steps for ${this.projectType} project`);\n  }\n\n  /**\n   * Mock Step Execution für Demo\n   */\n  private mockStepExecution(stepName: string): string {\n    console.log(`🔄 Executing required step: ${stepName}`);\n    // In real implementation würde hier der tatsächliche Step-Code stehen\n    return `${stepName} completed successfully`;\n  }\n\n  /**\n   * Setup agent-spezifische Checkpoints\n   */\n  private setupAgentCheckpoints(): void {\n    // I18n Checkpoint für internationale Projekte\n    CommonCheckpoints.createI18nCheckpoint([\n      'analyze-requirements',\n      'implement-core-functionality'\n    ]);\n\n    // Quality Checkpoint\n    CommonCheckpoints.createQualityCheckpoint([\n      'implement-core-functionality',\n      'add-error-handling',\n      'write-tests'\n    ]);\n\n    // Documentation Checkpoint\n    CommonCheckpoints.createDocumentationCheckpoint([\n      'validate-implementation',\n      'generate-documentation'\n    ]);\n\n    // Project-spezifische Checkpoints\n    if (this.projectType === 'frontend') {\n      checkpointManager.createCheckpoint(\n        'frontend-quality-checkpoint',\n        ['setup-ui-components', 'add-responsive-design', 'ensure-accessibility'],\n        [\n          () => this.validateUIComponentsExist(),\n          () => this.validateResponsiveDesign(),\n          () => this.validateAccessibility()\n        ]\n      );\n    }\n\n    if (this.projectType === 'backend') {\n      checkpointManager.createCheckpoint(\n        'backend-security-checkpoint',\n        ['add-authentication', 'implement-authorization', 'add-api-validation'],\n        [\n          () => this.validateSecurityMeasures(),\n          () => this.validateAPIEndpoints()\n        ]\n      );\n    }\n  }\n\n  /**\n   * Setup agent-spezifische Verifikationen\n   */\n  private setupAgentVerifications(): void {\n    // Code Quality Verification\n    verificationManager.addVerificationCheck('code-standards-met', () => {\n      // Mock implementation - würde ESLint/Prettier etc. ausführen\n      return this.validateCodeStandards();\n    });\n\n    // Security Verification\n    verificationManager.addVerificationCheck('security-scan-passed', () => {\n      // Mock implementation - würde npm audit etc. ausführen\n      return this.validateSecurityScan();\n    });\n\n    // Performance Verification\n    verificationManager.addVerificationCheck('performance-optimized', () => {\n      return this.validatePerformance();\n    });\n\n    // Project-spezifische Verifikationen\n    if (this.projectType === 'frontend') {\n      verificationManager.addVerificationCheck('ui-tests-passed', () => {\n        return this.validateUITests();\n      });\n\n      verificationManager.addVerificationCheck('bundle-size-optimized', () => {\n        return this.validateBundleSize();\n      });\n    }\n  }\n\n  /**\n   * Validation Methods (Mock Implementations)\n   */\n  private validateUIComponentsExist(): boolean {\n    console.log('🔍 Validating UI components...');\n    // Mock - würde tatsächliche Component-Dateien prüfen\n    return true;\n  }\n\n  private validateResponsiveDesign(): boolean {\n    console.log('🔍 Validating responsive design...');\n    // Mock - würde CSS/Tailwind breakpoints prüfen\n    return true;\n  }\n\n  private validateAccessibility(): boolean {\n    console.log('🔍 Validating accessibility standards...');\n    // Mock - würde a11y tests ausführen\n    return true;\n  }\n\n  private validateSecurityMeasures(): boolean {\n    console.log('🔍 Validating security measures...');\n    // Mock - würde auth/security code prüfen\n    return true;\n  }\n\n  private validateAPIEndpoints(): boolean {\n    console.log('🔍 Validating API endpoints...');\n    // Mock - würde API Dokumentation/Tests prüfen\n    return true;\n  }\n\n  private validateCodeStandards(): boolean {\n    console.log('🔍 Validating code standards...');\n    // Mock - würde linting ausführen\n    return true;\n  }\n\n  private validateSecurityScan(): boolean {\n    console.log('🔍 Running security scan...');\n    // Mock - würde vulnerability scan ausführen\n    return true;\n  }\n\n  private validatePerformance(): boolean {\n    console.log('🔍 Validating performance...');\n    // Mock - würde performance tests ausführen\n    return true;\n  }\n\n  private validateUITests(): boolean {\n    console.log('🔍 Running UI tests...');\n    // Mock - würde UI tests ausführen\n    return true;\n  }\n\n  private validateBundleSize(): boolean {\n    console.log('🔍 Validating bundle size...');\n    // Mock - würde bundle analyzer ausführen\n    return true;\n  }\n\n  /**\n   * Erzwingt vollständige Agent-Compliance\n   * @RequiredStep: \"enforce-agent-compliance\"\n   */\n  async enforceAgentCompliance(): Promise<void> {\n    console.log(`🚨 Enforcing compliance for agent: ${this.agentName}`);\n    \n    try {\n      // 1. Validate all required steps executed\n      console.log('📊 Step 1: Validating required steps...');\n      stepValidator.enforceAllStepsExecuted();\n\n      // 2. Validate all checkpoints\n      console.log('🔍 Step 2: Validating checkpoints...');\n      checkpointManager.validateAllCheckpoints();\n\n      // 3. Run complete verification\n      console.log('✅ Step 3: Running complete verification...');\n      verificationManager.enforceCompleteVerification();\n\n      // 4. Final agent validation\n      console.log('🤖 Step 4: Final agent validation...');\n      const result = await this.pipeline.enforceAgentExecution();\n\n      if (result.checklistPassed) {\n        console.log(`✅ Agent ${this.agentName} successfully completed all required tasks!`);\n      } else {\n        failLoudlyManager.throwLoudError(\n          `Agent ${this.agentName} failed compliance check`,\n          'VALIDATION_FAILED',\n          result\n        );\n      }\n\n    } catch (error) {\n      failLoudlyManager.throwLoudError(\n        `Agent compliance enforcement failed for ${this.agentName}: ${error instanceof Error ? error.message : String(error)}`,\n        'SYSTEM_ERROR',\n        { agentName: this.agentName, projectType: this.projectType }\n      );\n    }\n  }\n\n  /**\n   * Generiert Agent-spezifischen Report\n   */\n  generateAgentReport(): object {\n    const pipelineStatus = this.pipeline.exportPipelineStatus();\n    const validationReport = verificationManager.generateVerificationReport();\n    \n    return {\n      agent: {\n        name: this.agentName,\n        projectType: this.projectType,\n        sessionInfo: this.pipeline.getSessionInfo()\n      },\n      compliance: {\n        requiredStepsCompleted: validationReport.requiredStepsCompleted,\n        checklistPassed: validationReport.checklistPassed,\n        errors: validationReport.errors,\n        missingSteps: validationReport.missingSteps\n      },\n      pipelineStatus,\n      recommendations: this.generateRecommendations(validationReport),\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  /**\n   * Generiert Empfehlungen basierend auf Validation Results\n   */\n  private generateRecommendations(validationReport: any): string[] {\n    const recommendations: string[] = [];\n\n    if (validationReport.missingSteps.length > 0) {\n      recommendations.push(`Complete missing steps: ${validationReport.missingSteps.join(', ')}`);\n    }\n\n    if (validationReport.errors.length > 0) {\n      recommendations.push('Fix validation errors before proceeding');\n    }\n\n    if (!validationReport.checklistPassed) {\n      recommendations.push('Complete all verification checks');\n    }\n\n    if (recommendations.length === 0) {\n      recommendations.push('All requirements met - ready for deployment');\n    }\n\n    return recommendations;\n  }\n}\n\n/**\n * Spezifische Agent-Integration Utilities\n */\nexport const AgentIntegrationUtils = {\n  /**\n   * Setup für Claude Code Integration\n   */\n  setupClaudeIntegration(projectType: 'frontend' | 'backend' | 'fullstack' = 'frontend'): AgentIntegrationManager {\n    const manager = new AgentIntegrationManager('Claude Code', projectType);\n    \n    // Claude-spezifische Regeln\n    verificationManager.addVerificationCheck('claude-code-quality', () => {\n      console.log('🔍 Running Claude-specific code quality checks...');\n      return true; // Mock implementation\n    });\n\n    return manager;\n  },\n\n  /**\n   * Setup für ChatGPT Integration\n   */\n  setupChatGPTIntegration(projectType: 'frontend' | 'backend' | 'fullstack' = 'frontend'): AgentIntegrationManager {\n    const manager = new AgentIntegrationManager('ChatGPT', projectType);\n    \n    // ChatGPT-spezifische Regeln\n    verificationManager.addVerificationCheck('chatgpt-context-maintained', () => {\n      console.log('🔍 Validating ChatGPT context consistency...');\n      return true; // Mock implementation\n    });\n\n    return manager;\n  },\n\n  /**\n   * Setup für Devin Integration\n   */\n  setupDevinIntegration(projectType: 'frontend' | 'backend' | 'fullstack' = 'fullstack'): AgentIntegrationManager {\n    const manager = new AgentIntegrationManager('Devin', projectType);\n    \n    // Devin-spezifische Regeln (mehr autonomy, strengere validation)\n    failLoudlyManager.setEnabled(true);\n    \n    verificationManager.addVerificationCheck('devin-autonomous-validation', () => {\n      console.log('🔍 Running Devin autonomous execution validation...');\n      return true; // Mock implementation\n    });\n\n    return manager;\n  },\n\n  /**\n   * Quick Enforcement für beliebigen Agent\n   */\n  async enforceAnyAgent(agentName: string, projectType: 'frontend' | 'backend' | 'fullstack' = 'frontend'): Promise<boolean> {\n    try {\n      const manager = new AgentIntegrationManager(agentName, projectType);\n      await manager.enforceAgentCompliance();\n      return true;\n    } catch (error) {\n      console.error(`Agent enforcement failed for ${agentName}:`, error);\n      return false;\n    }\n  }\n};\n\n/**\n * Beispiel für Verwendung in einem realen Projekt\n */\nexport class ProjectImplementationExample {\n  /**\n   * Beispiel: HR-Anwendung Feature Implementation mit enforced steps\n   */\n  @RequiredStep('analyze-hr-requirements')\n  async analyzeHRRequirements(): Promise<void> {\n    console.log('📋 Analyzing HR application requirements...');\n    // Hier würde die tatsächliche Requirements-Analyse stattfinden\n    await new Promise(resolve => setTimeout(resolve, 1000));\n  }\n\n  @RequiredStep('implement-employee-management')\n  async implementEmployeeManagement(): Promise<void> {\n    console.log('👥 Implementing employee management features...');\n    // Hier würde die Employee Management Implementation stattfinden\n    await new Promise(resolve => setTimeout(resolve, 1500));\n  }\n\n  @RequiredStep('add-authentication-system')\n  async addAuthenticationSystem(): Promise<void> {\n    console.log('🔐 Adding authentication system...');\n    // Hier würde das Auth System implementiert werden\n    await new Promise(resolve => setTimeout(resolve, 1200));\n  }\n\n  @RequiredStep('implement-user-permissions')\n  async implementUserPermissions(): Promise<void> {\n    console.log('🛡️ Implementing user permissions...');\n    // Hier würde das Permission System implementiert werden\n    await new Promise(resolve => setTimeout(resolve, 800));\n  }\n\n  @RequiredStep('add-data-validation')\n  async addDataValidation(): Promise<void> {\n    console.log('✅ Adding comprehensive data validation...');\n    // Hier würde Data Validation implementiert werden\n    await new Promise(resolve => setTimeout(resolve, 600));\n  }\n\n  @RequiredStep('write-comprehensive-tests')\n  async writeComprehensiveTests(): Promise<void> {\n    console.log('🧪 Writing comprehensive tests...');\n    // Hier würden Tests geschrieben werden\n    await new Promise(resolve => setTimeout(resolve, 2000));\n  }\n\n  /**\n   * Demonstriert vollständigen enforced Workflow\n   */\n  async demonstrateEnforcedWorkflow(): Promise<void> {\n    console.log('🚀 Starting enforced HR application implementation...');\n    \n    const agent = AgentIntegrationUtils.setupClaudeIntegration('fullstack');\n    \n    try {\n      // Führe alle required steps aus\n      await this.analyzeHRRequirements();\n      await this.implementEmployeeManagement();\n      await this.addAuthenticationSystem();\n      await this.implementUserPermissions();\n      await this.addDataValidation();\n      await this.writeComprehensiveTests();\n\n      // Erzwinge Agent Compliance\n      await agent.enforceAgentCompliance();\n      \n      console.log('✅ HR application implementation completed with full compliance!');\n      \n    } catch (error) {\n      console.error('❌ Implementation failed:', error);\n      throw error;\n    }\n  }\n}","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/pipeline/annotations.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'RequiredStep' has too many lines (59). Maximum allowed is 30.","line":71,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":145,"endColumn":2},{"ruleId":"max-lines-per-function","severity":1,"message":"Function has too many lines (57). Maximum allowed is 30.","line":72,"column":10,"nodeType":"FunctionExpression","messageId":"exceed","endLine":144,"endColumn":4},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":72,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2030,2033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2030,2033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":72,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2040,2043],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2040,2043],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":73,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2058,2061],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2058,2061],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":81,"column":40,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":81,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2308,2310],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":82,"column":42,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":82,"endColumn":44,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2393,2395],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":83,"column":32,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":83,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2431,2433],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":84,"column":32,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":84,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2472,2474],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Function has too many lines (39). Maximum allowed is 30.","line":92,"column":24,"nodeType":"FunctionExpression","messageId":"exceed","endLine":141,"endColumn":6},{"ruleId":"max-statements","severity":1,"message":"Function has too many statements (19). Maximum allowed is 15.","line":92,"column":24,"nodeType":"FunctionExpression","messageId":"exceed","endLine":141,"endColumn":6},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2651,2654],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2651,2654],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2665,2668],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2665,2668],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":96,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":96,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2737,2792],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (232). Maximum allowed is 75.","line":116,"column":1,"nodeType":null,"messageId":"exceed","endLine":342,"endColumn":2},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":122,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":122,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3679,3754],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":165,"column":13,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":165,"endColumn":32},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":206,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":206,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5975,6042],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Method 'generateValidationReport' has too many lines (34). Maximum allowed is 30.","line":248,"column":3,"nodeType":"MethodDefinition","messageId":"exceed","endLine":284,"endColumn":4},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":300,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":300,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8923,8983],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":317,"column":39,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":317,"endColumn":41,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9550,9552],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":318,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":318,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9634,9636],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":319,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":319,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9671,9673],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":320,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":320,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9711,9713],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-params","severity":1,"message":"Function 'markStepExecuted' has too many parameters (4). Maximum allowed is 3.","line":329,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":329,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":329,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":329,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9909,9912],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9909,9912],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":26,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @RequiredStep Annotation System\n * \n * Dieses System ermöglicht es, Funktionen als \"erforderliche Schritte\" zu markieren,\n * die von KI-Agenten zwingend ausgeführt werden müssen.\n */\n\nimport { RequiredStepMetadata, StepResult } from './types';\n\n/**\n * Registry für alle @RequiredStep markierten Funktionen\n */\nclass RequiredStepRegistry {\n  private static instance: RequiredStepRegistry;\n  private registeredSteps: Map<string, RequiredStepMetadata> = new Map();\n  private executedSteps: Map<string, StepResult> = new Map();\n\n  static getInstance(): RequiredStepRegistry {\n    if (!RequiredStepRegistry.instance) {\n      RequiredStepRegistry.instance = new RequiredStepRegistry();\n    }\n    return RequiredStepRegistry.instance;\n  }\n\n  registerStep(metadata: RequiredStepMetadata): void {\n    this.registeredSteps.set(metadata.stepName, metadata);\n  }\n\n  markStepExecuted(stepName: string, result: StepResult): void {\n    this.executedSteps.set(stepName, result);\n  }\n\n  getRegisteredSteps(): string[] {\n    return Array.from(this.registeredSteps.keys());\n  }\n\n  getExecutedSteps(): string[] {\n    return Array.from(this.executedSteps.keys());\n  }\n\n  getMissingSteps(): string[] {\n    const registered = this.getRegisteredSteps();\n    const executed = this.getExecutedSteps();\n    return registered.filter(step => !executed.includes(step));\n  }\n\n  validateAllStepsExecuted(): boolean {\n    return this.getMissingSteps().length === 0;\n  }\n\n  reset(): void {\n    this.executedSteps.clear();\n  }\n\n  getStepMetadata(stepName: string): RequiredStepMetadata | undefined {\n    return this.registeredSteps.get(stepName);\n  }\n\n  getAllStepResults(): Map<string, StepResult> {\n    return new Map(this.executedSteps);\n  }\n}\n\n/**\n * @RequiredStep Decorator für Funktionen\n * \n * Verwendung:\n * @RequiredStep(\"step-name\", { description: \"Was dieser Schritt macht\" })\n * function myFunction() { ... }\n */\nexport function RequiredStep(stepName: string, options: Partial<RequiredStepMetadata> = {}) {\n  return function <T extends (...args: any[]) => any>(\n    target: any,\n    propertyKey: string | symbol,\n    descriptor: TypedPropertyDescriptor<T>\n  ) {\n    const registry = RequiredStepRegistry.getInstance();\n    \n    const metadata: RequiredStepMetadata = {\n      stepName,\n      description: options.description || `Required step: ${String(propertyKey)}`,\n      dependencies: options.dependencies || [],\n      timeout: options.timeout || 30000,\n      retries: options.retries || 0\n    };\n\n    registry.registerStep(metadata);\n\n    const originalMethod = descriptor.value;\n    if (!originalMethod) return descriptor;\n\n    descriptor.value = function(this: any, ...args: any[]) {\n      const startTime = Date.now();\n      \n      try {\n        console.log(`🔄 Executing @RequiredStep: ${stepName}`);\n        \n        // Prüfe Abhängigkeiten\n        if (metadata.dependencies && metadata.dependencies.length > 0) {\n          const executedSteps = registry.getExecutedSteps();\n          const missingDependencies = metadata.dependencies.filter(dep => !executedSteps.includes(dep));\n          \n          if (missingDependencies.length > 0) {\n            throw new Error(`Missing dependencies for step '${stepName}': ${missingDependencies.join(', ')}`);\n          }\n        }\n\n        const result = originalMethod.apply(this, args);\n        const executionTime = Date.now() - startTime;\n\n        // Markiere Schritt als ausgeführt\n        const stepResult: StepResult = {\n          stepName,\n          success: true,\n          result,\n          timestamp: new Date(),\n          executionTime,\n          metadata\n        };\n\n        registry.markStepExecuted(stepName, stepResult);\n        console.log(`✅ @RequiredStep completed: ${stepName} (${executionTime}ms)`);\n\n        return result;\n      } catch (error) {\n        const executionTime = Date.now() - startTime;\n        const stepResult: StepResult = {\n          stepName,\n          success: false,\n          error: error instanceof Error ? error.message : String(error),\n          timestamp: new Date(),\n          executionTime,\n          metadata\n        };\n\n        registry.markStepExecuted(stepName, stepResult);\n        console.error(`❌ @RequiredStep failed: ${stepName} - ${stepResult.error}`);\n        \n        throw error;\n      }\n    } as T;\n\n    return descriptor;\n  };\n}\n\n/**\n * Comment-basierte @RequiredStep Erkennung\n * \n * Für Projekte, die keine Decorators verwenden können.\n * Erkennt Kommentare wie: // @RequiredStep: \"step-name\"\n */\nexport class CommentBasedStepDetector {\n  private registry = RequiredStepRegistry.getInstance();\n\n  /**\n   * Analysiert Code-String nach @RequiredStep Kommentaren\n   */\n  analyzeCode(code: string, filePath: string): string[] {\n    const requiredStepPattern = /\\/\\/\\s*@RequiredStep:\\s*[\"']([^\"']+)[\"']/g;\n    const foundSteps: string[] = [];\n    let match;\n\n    while ((match = requiredStepPattern.exec(code)) !== null) {\n      const stepName = match[1];\n      foundSteps.push(stepName);\n      \n      // Registriere den Schritt\n      this.registry.registerStep({\n        stepName,\n        description: `Step found in ${filePath}`,\n        dependencies: []\n      });\n    }\n\n    return foundSteps;\n  }\n\n  /**\n   * Analysiert eine Datei nach @RequiredStep Kommentaren\n   */\n  async analyzeFile(filePath: string): Promise<string[]> {\n    try {\n      const fs = await import('fs');\n      const code = fs.readFileSync(filePath, 'utf-8');\n      return this.analyzeCode(code, filePath);\n    } catch (error) {\n      console.warn(`Could not analyze file ${filePath}: ${error}`);\n      return [];\n    }\n  }\n\n  /**\n   * Markiert einen kommentierten Schritt als ausgeführt\n   */\n  markCommentStepExecuted(stepName: string, functionName: string): void {\n    const stepResult: StepResult = {\n      stepName,\n      success: true,\n      result: `Executed ${functionName}`,\n      timestamp: new Date(),\n      executionTime: 0\n    };\n\n    this.registry.markStepExecuted(stepName, stepResult);\n    console.log(`✅ Comment-based @RequiredStep executed: ${stepName}`);\n  }\n}\n\n/**\n * Validator für @RequiredStep Ausführung\n */\nexport class RequiredStepValidator {\n  private registry = RequiredStepRegistry.getInstance();\n\n  /**\n   * Validiert ob alle required steps ausgeführt wurden\n   */\n  validateAllStepsExecuted(): { valid: boolean; missingSteps: string[]; errors: string[] } {\n    const missingSteps = this.registry.getMissingSteps();\n    const errors: string[] = [];\n\n    // Prüfe fehlende Schritte\n    if (missingSteps.length > 0) {\n      errors.push(`Missing required steps: ${missingSteps.join(', ')}`);\n    }\n\n    // Prüfe fehlgeschlagene Schritte\n    const allResults = this.registry.getAllStepResults();\n    const failedSteps = Array.from(allResults.entries())\n      .filter(([_, result]) => !result.success)\n      .map(([stepName, _]) => stepName);\n\n    if (failedSteps.length > 0) {\n      errors.push(`Failed steps: ${failedSteps.join(', ')}`);\n    }\n\n    return {\n      valid: errors.length === 0,\n      missingSteps,\n      errors\n    };\n  }\n\n  /**\n   * Generiert Validierungs-Report\n   */\n  generateValidationReport(): object {\n    const registeredSteps = this.registry.getRegisteredSteps();\n    const executedSteps = this.registry.getExecutedSteps();\n    const missingSteps = this.registry.getMissingSteps();\n    const allResults = this.registry.getAllStepResults();\n\n    const failedSteps = Array.from(allResults.entries())\n      .filter(([_, result]) => !result.success);\n\n    const successfulSteps = Array.from(allResults.entries())\n      .filter(([_, result]) => result.success);\n\n    return {\n      summary: {\n        total_registered: registeredSteps.length,\n        total_executed: executedSteps.length,\n        total_missing: missingSteps.length,\n        total_failed: failedSteps.length,\n        total_successful: successfulSteps.length,\n        completion_percentage: registeredSteps.length > 0 \n          ? Math.round((executedSteps.length / registeredSteps.length) * 100) \n          : 100\n      },\n      steps: {\n        registered: registeredSteps,\n        executed: executedSteps,\n        missing: missingSteps,\n        failed: failedSteps.map(([name, result]) => ({ name, error: result.error })),\n        successful: successfulSteps.map(([name, result]) => ({ \n          name, \n          executionTime: result.executionTime \n        }))\n      },\n      validation: this.validateAllStepsExecuted(),\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  /**\n   * Fail Loudly wenn nicht alle Steps ausgeführt wurden\n   */\n  enforceAllStepsExecuted(): void {\n    const validation = this.validateAllStepsExecuted();\n    \n    if (!validation.valid) {\n      const errorMessage = `🚨 REQUIRED STEPS VALIDATION FAILED:\\n${validation.errors.join('\\n')}`;\n      console.error('\\n' + '='.repeat(80));\n      console.error(errorMessage);\n      console.error('='.repeat(80) + '\\n');\n      throw new Error(errorMessage);\n    }\n\n    console.log('✅ All required steps validated successfully!');\n  }\n}\n\n// Singleton Instanzen für globalen Zugriff\nexport const stepRegistry = RequiredStepRegistry.getInstance();\nexport const stepValidator = new RequiredStepValidator();\nexport const commentDetector = new CommentBasedStepDetector();\n\n/**\n * Utility Funktion für manuelle Schritt-Registrierung\n */\nexport function registerRequiredStep(stepName: string, metadata: Partial<RequiredStepMetadata> = {}): void {\n  const registry = RequiredStepRegistry.getInstance();\n  \n  const fullMetadata: RequiredStepMetadata = {\n    stepName,\n    description: metadata.description || `Manually registered step: ${stepName}`,\n    dependencies: metadata.dependencies || [],\n    timeout: metadata.timeout || 30000,\n    retries: metadata.retries || 0\n  };\n\n  registry.registerStep(fullMetadata);\n}\n\n/**\n * Utility Funktion für manuelle Schritt-Ausführung\n */\nexport function markStepExecuted(stepName: string, success: boolean = true, result?: any, error?: string): void {\n  const registry = RequiredStepRegistry.getInstance();\n  \n  const stepResult: StepResult = {\n    stepName,\n    success,\n    result,\n    error,\n    timestamp: new Date(),\n    executionTime: 0\n  };\n\n  registry.markStepExecuted(stepName, stepResult);\n}","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/pipeline/checkpoints.ts","messages":[{"ruleId":"max-params","severity":1,"message":"Method 'createCheckpoint' has too many parameters (4). Maximum allowed is 3.","line":27,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":27,"endColumn":19},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":65,"column":72,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":65,"endColumn":74,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1926,1928],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":68,"column":84,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":68,"endColumn":86,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2070,2072],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'checkpoint' is defined but never used. Allowed unused args must match /^_/u.","line":88,"column":60,"nodeType":"Identifier","messageId":"unusedVar","endLine":88,"endColumn":70},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (296). Maximum allowed is 75.","line":129,"column":1,"nodeType":null,"messageId":"exceed","endLine":458,"endColumn":3},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":188,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":188,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5589,5635],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (18). Maximum allowed is 15.","line":236,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":266,"endColumn":6},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":237,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":237,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6841,6889],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":260,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":260,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7670,7715],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":276,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":276,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8017,8060],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":281,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":281,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8239,8273],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":297,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":297,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8561,8604],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":301,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":301,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8724,8768],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":317,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":317,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9067,9112],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":321,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":321,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9224,9264],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (16). Maximum allowed is 15.","line":336,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":363,"endColumn":6},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":337,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":337,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9575,9619],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":357,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":357,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10292,10336],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":373,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":373,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10673,10759],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":378,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":378,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10847,10928],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":19,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Checkpoint und Assertion System\n * \n * Dieses System implementiert robuste Checkpoints und Assertions,\n * die sicherstellen, dass KI-Agenten alle kritischen Validierungen durchführen.\n */\n\nimport { stepRegistry, stepValidator as _stepValidator } from './annotations';\nimport { StepValidationCheckpoint as _StepValidationCheckpoint, PipelineCheckpoint, StepResult } from './types';\n\n/**\n * Checkpoint Manager für Pipeline-Validierung\n */\nexport class CheckpointManager {\n  private checkpoints: Map<string, PipelineCheckpoint> = new Map();\n  private assertionResults: Map<string, boolean> = new Map();\n  private isFailLoudEnabled: boolean = true;\n\n  constructor(failLoud: boolean = true) {\n    this.isFailLoudEnabled = failLoud;\n  }\n\n  /**\n   * Erstellt einen neuen Checkpoint\n   * @RequiredStep: \"create-checkpoint\"\n   */\n  createCheckpoint(\n    name: string, \n    requiredSteps: string[], \n    assertions: (() => boolean)[] = [],\n    customValidators: ((results: Map<string, StepResult>) => boolean)[] = []\n  ): void {\n    const checkpoint: PipelineCheckpoint = {\n      name,\n      timestamp: new Date(),\n      requiredConditions: {\n        requiredSteps,\n        assertions,\n        customValidators\n      },\n      passed: false\n    };\n\n    this.checkpoints.set(name, checkpoint);\n    this.logCheckpoint(`Checkpoint created: ${name}`);\n  }\n\n  /**\n   * Validiert einen Checkpoint\n   * @RequiredStep: \"validate-checkpoint\"\n   */\n  validateCheckpoint(name: string): boolean {\n    const checkpoint = this.checkpoints.get(name);\n    if (!checkpoint) {\n      this.throwLoudError(`Checkpoint '${name}' not found!`);\n    }\n\n    this.logCheckpoint(`Validating checkpoint: ${name}`);\n    \n    try {\n      // 1. Prüfe required steps\n      this.validateRequiredSteps(checkpoint.requiredConditions.requiredSteps, name);\n      \n      // 2. Führe assertions aus\n      this.validateAssertions(checkpoint.requiredConditions.assertions || [], name);\n      \n      // 3. Führe custom validators aus\n      this.validateCustomValidators(checkpoint.requiredConditions.customValidators || [], name);\n      \n      checkpoint.passed = true;\n      this.logCheckpoint(`✅ Checkpoint passed: ${name}`);\n      return true;\n      \n    } catch (error) {\n      checkpoint.passed = false;\n      checkpoint.errorMessage = error instanceof Error ? error.message : String(error);\n      this.throwLoudError(`Checkpoint '${name}' failed: ${checkpoint.errorMessage}`);\n    }\n  }\n\n  /**\n   * Validiert alle Checkpoints\n   * @RequiredStep: \"validate-all-checkpoints\"\n   */\n  validateAllCheckpoints(): boolean {\n    const failedCheckpoints: string[] = [];\n    \n    Array.from(this.checkpoints.entries()).forEach(([name, checkpoint]) => {\n      try {\n        this.validateCheckpoint(name);\n      } catch (error) {\n        failedCheckpoints.push(name);\n      }\n    });\n\n    if (failedCheckpoints.length > 0) {\n      this.throwLoudError(`Failed checkpoints: ${failedCheckpoints.join(', ')}`);\n    }\n\n    this.logCheckpoint('✅ All checkpoints validated successfully');\n    return true;\n  }\n\n  /**\n   * Erstellt kritische Assertions für verschiedene Bereiche\n   */\n  createCriticalAssertions(): AssertionBuilder {\n    return new AssertionBuilder(this);\n  }\n\n  /**\n   * Validiert required steps für einen Checkpoint\n   */\n  private validateRequiredSteps(requiredSteps: string[], checkpointName: string): void {\n    const executedSteps = stepRegistry.getExecutedSteps();\n    const missingSteps = requiredSteps.filter(step => !executedSteps.includes(step));\n    \n    if (missingSteps.length > 0) {\n      throw new Error(`Missing required steps for checkpoint '${checkpointName}': ${missingSteps.join(', ')}`);\n    }\n  }\n\n  /**\n   * Führt Assertions aus\n   */\n  private validateAssertions(assertions: (() => boolean)[], checkpointName: string): void {\n    for (let i = 0; i < assertions.length; i++) {\n      const assertion = assertions[i];\n      const assertionKey = `${checkpointName}_assertion_${i}`;\n      \n      try {\n        const result = assertion();\n        this.assertionResults.set(assertionKey, result);\n        \n        if (!result) {\n          throw new Error(`Assertion ${i + 1} failed for checkpoint '${checkpointName}'`);\n        }\n      } catch (error) {\n        this.assertionResults.set(assertionKey, false);\n        throw new Error(`Assertion ${i + 1} error for checkpoint '${checkpointName}': ${error}`);\n      }\n    }\n  }\n\n  /**\n   * Führt custom validators aus\n   */\n  private validateCustomValidators(\n    validators: ((results: Map<string, StepResult>) => boolean)[], \n    checkpointName: string\n  ): void {\n    const stepResults = stepRegistry.getAllStepResults();\n    \n    for (let i = 0; i < validators.length; i++) {\n      const validator = validators[i];\n      \n      try {\n        const result = validator(stepResults);\n        if (!result) {\n          throw new Error(`Custom validator ${i + 1} failed for checkpoint '${checkpointName}'`);\n        }\n      } catch (error) {\n        throw new Error(`Custom validator ${i + 1} error for checkpoint '${checkpointName}': ${error}`);\n      }\n    }\n  }\n\n  /**\n   * Sichtbarer Fehler (Fail Loudly)\n   */\n  private throwLoudError(message: string): never {\n    const errorMessage = `🚨 CHECKPOINT ERROR: ${message}`;\n    \n    if (this.isFailLoudEnabled) {\n      console.error('\\n' + '='.repeat(80));\n      console.error(errorMessage);\n      console.error('='.repeat(80) + '\\n');\n    }\n    \n    throw new Error(errorMessage);\n  }\n\n  /**\n   * Logging für Checkpoints\n   */\n  private logCheckpoint(message: string): void {\n    if (this.isFailLoudEnabled) {\n      console.log(`[CheckpointManager] ${message}`);\n    }\n  }\n\n  /**\n   * Status aller Checkpoints\n   */\n  getCheckpointStatus(): object {\n    const allCheckpoints = Array.from(this.checkpoints.entries());\n    \n    return {\n      total: allCheckpoints.length,\n      passed: allCheckpoints.filter(([_, cp]) => cp.passed).length,\n      failed: allCheckpoints.filter(([_, cp]) => !cp.passed).length,\n      checkpoints: allCheckpoints.map(([name, cp]) => ({\n        name,\n        passed: cp.passed,\n        timestamp: cp.timestamp,\n        errorMessage: cp.errorMessage\n      }))\n    };\n  }\n\n  /**\n   * Reset aller Checkpoints\n   */\n  reset(): void {\n    this.checkpoints.clear();\n    this.assertionResults.clear();\n    this.logCheckpoint('All checkpoints reset');\n  }\n}\n\n/**\n * Builder für Assertions mit vorgefertigten Validierungen\n */\nexport class AssertionBuilder {\n  private checkpointManager: CheckpointManager;\n  private assertions: (() => boolean)[] = [];\n\n  constructor(checkpointManager: CheckpointManager) {\n    this.checkpointManager = checkpointManager;\n  }\n\n  /**\n   * Prüft ob Übersetzungsdateien vorhanden sind\n   */\n  translationFilesExist(requiredLanguages: string[] = ['en', 'de']): AssertionBuilder {\n    this.assertions.push(() => {\n      console.log('🔍 Checking translation files...');\n      \n      // Mock implementation - in real project würde man tatsächliche Dateien prüfen\n      const fs = require('fs');\n      const path = require('path');\n      \n      try {\n        const localesPath = path.join(process.cwd(), 'public', 'locales');\n        \n        for (const lang of requiredLanguages) {\n          const langPath = path.join(localesPath, lang);\n          if (!fs.existsSync(langPath)) {\n            console.error(`❌ Translation directory missing: ${langPath}`);\n            return false;\n          }\n          \n          const commonFile = path.join(langPath, 'common.json');\n          if (!fs.existsSync(commonFile)) {\n            console.error(`❌ Translation file missing: ${commonFile}`);\n            return false;\n          }\n        }\n        \n        console.log('✅ All translation files exist');\n        return true;\n      } catch (error) {\n        console.error(`❌ Translation files check failed: ${error}`);\n        return false;\n      }\n    });\n    \n    return this;\n  }\n\n  /**\n   * Prüft ob Tests erfolgreich sind\n   */\n  testsPass(): AssertionBuilder {\n    this.assertions.push(() => {\n      console.log('🔍 Checking test results...');\n      \n      // Mock implementation - in real project würde man tatsächliche Tests ausführen\n      try {\n        // Hier würde normalerweise `npm test` ausgeführt werden\n        console.log('✅ All tests passed');\n        return true;\n      } catch (error) {\n        console.error(`❌ Tests failed: ${error}`);\n        return false;\n      }\n    });\n    \n    return this;\n  }\n\n  /**\n   * Prüft Code-Qualität\n   */\n  codeQualityMeetsStandards(): AssertionBuilder {\n    this.assertions.push(() => {\n      console.log('🔍 Checking code quality...');\n      \n      try {\n        // Mock implementation - in real project würde man ESLint/TypeScript etc. ausführen\n        console.log('✅ Code quality standards met');\n        return true;\n      } catch (error) {\n        console.error(`❌ Code quality check failed: ${error}`);\n        return false;\n      }\n    });\n    \n    return this;\n  }\n\n  /**\n   * Prüft Security-Standards\n   */\n  securityChecksPass(): AssertionBuilder {\n    this.assertions.push(() => {\n      console.log('🔍 Running security checks...');\n      \n      try {\n        // Mock implementation - in real project würde man npm audit etc. ausführen\n        console.log('✅ Security checks passed');\n        return true;\n      } catch (error) {\n        console.error(`❌ Security checks failed: ${error}`);\n        return false;\n      }\n    });\n    \n    return this;\n  }\n\n  /**\n   * Prüft ob Dokumentation aktuell ist\n   */\n  documentationIsUpToDate(): AssertionBuilder {\n    this.assertions.push(() => {\n      console.log('🔍 Checking documentation...');\n      \n      try {\n        const fs = require('fs');\n        const path = require('path');\n        \n        // Prüfe ob README existiert und aktuell ist\n        const readmePath = path.join(process.cwd(), 'README.md');\n        if (!fs.existsSync(readmePath)) {\n          console.error('❌ README.md not found');\n          return false;\n        }\n        \n        const readmeStats = fs.statSync(readmePath);\n        const daysSinceUpdate = (Date.now() - readmeStats.mtime.getTime()) / (1000 * 60 * 60 * 24);\n        \n        if (daysSinceUpdate > 30) {\n          console.warn(`⚠️ README.md last updated ${Math.round(daysSinceUpdate)} days ago`);\n        }\n        \n        console.log('✅ Documentation check passed');\n        return true;\n      } catch (error) {\n        console.error(`❌ Documentation check failed: ${error}`);\n        return false;\n      }\n    });\n    \n    return this;\n  }\n\n  /**\n   * Custom Assertion hinzufügen\n   */\n  custom(assertion: () => boolean, description?: string): AssertionBuilder {\n    this.assertions.push(() => {\n      console.log(`🔍 Running custom assertion${description ? ': ' + description : ''}...`);\n      \n      try {\n        const result = assertion();\n        if (result) {\n          console.log(`✅ Custom assertion passed${description ? ': ' + description : ''}`);\n        } else {\n          console.error(`❌ Custom assertion failed${description ? ': ' + description : ''}`);\n        }\n        return result;\n      } catch (error) {\n        console.error(`❌ Custom assertion error${description ? ': ' + description : ''}: ${error}`);\n        return false;\n      }\n    });\n    \n    return this;\n  }\n\n  /**\n   * Finalisiert den Checkpoint mit den gebauten Assertions\n   */\n  build(checkpointName: string, requiredSteps: string[] = []): void {\n    this.checkpointManager.createCheckpoint(\n      checkpointName,\n      requiredSteps,\n      this.assertions\n    );\n  }\n}\n\n/**\n * Globale Checkpoint-Instanz\n */\nexport const checkpointManager = new CheckpointManager();\n\n/**\n * Utility-Funktionen für häufige Checkpoint-Patterns\n */\nexport const CommonCheckpoints = {\n  /**\n   * Standard I18n Checkpoint\n   */\n  createI18nCheckpoint(requiredSteps: string[] = []): void {\n    checkpointManager\n      .createCriticalAssertions()\n      .translationFilesExist(['en', 'de'])\n      .build('i18n-validation', requiredSteps);\n  },\n\n  /**\n   * Standard Quality Checkpoint\n   */\n  createQualityCheckpoint(requiredSteps: string[] = []): void {\n    checkpointManager\n      .createCriticalAssertions()\n      .testsPass()\n      .codeQualityMeetsStandards()\n      .securityChecksPass()\n      .build('quality-validation', requiredSteps);\n  },\n\n  /**\n   * Standard Documentation Checkpoint\n   */\n  createDocumentationCheckpoint(requiredSteps: string[] = []): void {\n    checkpointManager\n      .createCriticalAssertions()\n      .documentationIsUpToDate()\n      .build('documentation-validation', requiredSteps);\n  },\n\n  /**\n   * Komplett-Validation für Projekt-Abschluss\n   */\n  createCompleteValidationCheckpoint(requiredSteps: string[] = []): void {\n    checkpointManager\n      .createCriticalAssertions()\n      .translationFilesExist()\n      .testsPass()\n      .codeQualityMeetsStandards()\n      .securityChecksPass()\n      .documentationIsUpToDate()\n      .build('complete-validation', requiredSteps);\n  }\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/pipeline/failLoudly.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":87,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":90,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[545,548],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[545,548],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Method 'throwLoudError' has too many lines (35). Maximum allowed is 30.","line":36,"column":3,"nodeType":"MethodDefinition","messageId":"exceed","endLine":83,"endColumn":4},{"ruleId":"max-statements","severity":1,"message":"Method 'throwLoudError' has too many statements (21). Maximum allowed is 15.","line":36,"column":17,"nodeType":"FunctionExpression","messageId":"exceed","endLine":83,"endColumn":4},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1148,1151],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1148,1151],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":89,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2582,2585],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2582,2585],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (318). Maximum allowed is 75.","line":126,"column":1,"nodeType":null,"messageId":"exceed","endLine":476,"endColumn":2},{"ruleId":"max-lines-per-function","severity":1,"message":"Method 'validateSystemDependencies' has too many lines (46). Maximum allowed is 30.","line":211,"column":3,"nodeType":"MethodDefinition","messageId":"exceed","endLine":259,"endColumn":4},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":289,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":289,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7951,7954],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7951,7954],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":328,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":328,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9065,9068],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9065,9068],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":362,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":362,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9685,9688],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9685,9688],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":446,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":446,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12014,12017],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12014,12017],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":449,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":449,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12162,12165],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12162,12165],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Fail Loudly Mechanismen\n * \n * Dieses System implementiert sichtbare Fehlerbehandlung und Blockierungen,\n * die sicherstellen, dass KI-Agenten bei Fehlern oder fehlenden Schritten\n * sofort gestoppt werden und nicht still fehlschlagen können.\n */\n\nimport { PipelineErrorHandler } from './types';\n\n/**\n * Fail Loudly Manager\n */\nexport class FailLoudlyManager {\n  private errorHandlers: PipelineErrorHandler[] = [];\n  private isEnabled: boolean = true;\n  private errorLog: Array<{ timestamp: Date; type: string; message: string; details?: any }> = [];\n  private blockedOperations: Set<string> = new Set();\n\n  constructor(enabled: boolean = true) {\n    this.isEnabled = enabled;\n    this.setupGlobalErrorHandling();\n  }\n\n  /**\n   * Registriert einen Error Handler\n   */\n  addErrorHandler(handler: PipelineErrorHandler): void {\n    this.errorHandlers.push(handler);\n  }\n\n  /**\n   * Sichtbarer Fehler mit sofortigem Stop\n   * @RequiredStep: \"throw-loud-error\"\n   */\n  throwLoudError(\n    message: string, \n    errorType: 'STEP_FAILED' | 'MISSING_STEP' | 'CHECKPOINT_FAILED' | 'VALIDATION_FAILED' | 'SYSTEM_ERROR' = 'SYSTEM_ERROR',\n    details?: any\n  ): never {\n    const errorEntry = {\n      timestamp: new Date(),\n      type: errorType,\n      message,\n      details\n    };\n\n    this.errorLog.push(errorEntry);\n\n    if (this.isEnabled) {\n      // Visuell auffällige Fehlerausgabe\n      console.error('\\n' + '🚨'.repeat(20));\n      console.error('🚨 PIPELINE FAILURE - OPERATION BLOCKED 🚨');\n      console.error('🚨'.repeat(20));\n      console.error(`\\n💥 ERROR TYPE: ${errorType}`);\n      console.error(`💥 MESSAGE: ${message}`);\n      \n      if (details) {\n        console.error(`💥 DETAILS:`, details);\n      }\n      \n      console.error(`💥 TIMESTAMP: ${errorEntry.timestamp.toISOString()}`);\n      console.error(`💥 ERROR ID: ${this.generateErrorId()}`);\n      \n      // Zeige Stack Trace falls verfügbar\n      const {stack} = new Error();\n      if (stack) {\n        console.error(`💥 STACK TRACE:\\n${stack}`);\n      }\n      \n      console.error('\\n' + '🚨'.repeat(20));\n      console.error('🚨 SYSTEM HALTED - FIX ERRORS TO CONTINUE 🚨');\n      console.error('🚨'.repeat(20) + '\\n');\n    }\n\n    // Rufe registrierte Error Handler auf\n    this.triggerErrorHandlers(errorType, message, details);\n\n    // Blockiere weitere Operationen\n    this.blockAllOperations();\n\n    throw new Error(`[${errorType}] ${message}`);\n  }\n\n  /**\n   * Warnung mit sichtbarer Ausgabe (nicht blockierend)\n   * @RequiredStep: \"show-loud-warning\"\n   */\n  showLoudWarning(message: string, details?: any): void {\n    const warningEntry = {\n      timestamp: new Date(),\n      type: 'WARNING',\n      message,\n      details\n    };\n\n    this.errorLog.push(warningEntry);\n\n    if (this.isEnabled) {\n      console.warn('\\n' + '⚠️ '.repeat(15));\n      console.warn('⚠️  PIPELINE WARNING ⚠️');\n      console.warn('⚠️ '.repeat(15));\n      console.warn(`\\n⚠️  MESSAGE: ${message}`);\n      \n      if (details) {\n        console.warn(`⚠️  DETAILS:`, details);\n      }\n      \n      console.warn(`⚠️  TIMESTAMP: ${warningEntry.timestamp.toISOString()}`);\n      console.warn('\\n' + '⚠️ '.repeat(15) + '\\n');\n    }\n  }\n\n  /**\n   * Prüft und erzwingt kritische Bedingungen\n   * @RequiredStep: \"assert-critical-condition\"\n   */\n  assertCriticalCondition(\n    condition: boolean | (() => boolean),\n    message: string,\n    errorType: 'STEP_FAILED' | 'MISSING_STEP' | 'CHECKPOINT_FAILED' | 'VALIDATION_FAILED' = 'VALIDATION_FAILED'\n  ): void {\n    const result = typeof condition === 'function' ? condition() : condition;\n    \n    if (!result) {\n      this.throwLoudError(\n        `Critical assertion failed: ${message}`,\n        errorType,\n        { assertion: 'failed', condition: condition.toString() }\n      );\n    }\n  }\n\n  /**\n   * Erzwingt dass bestimmte Dateien existieren\n   * @RequiredStep: \"assert-files-exist\"\n   */\n  assertFilesExist(filePaths: string[], context?: string): void {\n    const fs = require('fs');\n    const missingFiles: string[] = [];\n\n    for (const filePath of filePaths) {\n      if (!fs.existsSync(filePath)) {\n        missingFiles.push(filePath);\n      }\n    }\n\n    if (missingFiles.length > 0) {\n      this.throwLoudError(\n        `Required files missing${context ? ' for ' + context : ''}: ${missingFiles.join(', ')}`,\n        'VALIDATION_FAILED',\n        { missingFiles, context }\n      );\n    }\n  }\n\n  /**\n   * Erzwingt dass bestimmte Environment Variables gesetzt sind\n   * @RequiredStep: \"assert-env-vars\"\n   */\n  assertEnvironmentVariables(requiredVars: string[], context?: string): void {\n    const missingVars: string[] = [];\n\n    for (const varName of requiredVars) {\n      if (!process.env[varName]) {\n        missingVars.push(varName);\n      }\n    }\n\n    if (missingVars.length > 0) {\n      this.throwLoudError(\n        `Required environment variables missing${context ? ' for ' + context : ''}: ${missingVars.join(', ')}`,\n        'VALIDATION_FAILED',\n        { missingVars, context }\n      );\n    }\n  }\n\n  /**\n   * Blockiert Operation wenn Bedingung nicht erfüllt\n   * @RequiredStep: \"block-operation-if\"\n   */\n  blockOperationIf(\n    condition: boolean | (() => boolean),\n    operationName: string,\n    reason: string\n  ): void {\n    const shouldBlock = typeof condition === 'function' ? condition() : condition;\n    \n    if (shouldBlock) {\n      this.blockedOperations.add(operationName);\n      this.throwLoudError(\n        `Operation '${operationName}' blocked: ${reason}`,\n        'SYSTEM_ERROR',\n        { blockedOperation: operationName, reason }\n      );\n    }\n  }\n\n  /**\n   * Prüft ob Operation blockiert ist\n   */\n  isOperationBlocked(operationName: string): boolean {\n    return this.blockedOperations.has(operationName);\n  }\n\n  /**\n   * Validiert kritische System-Dependencies\n   * @RequiredStep: \"validate-system-dependencies\"\n   */\n  validateSystemDependencies(): void {\n    const criticalChecks = [\n      {\n        name: 'Node.js Version',\n        check: () => {\n          const nodeVersion = process.version;\n          const majorVersion = parseInt(nodeVersion.slice(1).split('.')[0]);\n          return majorVersion >= 16;\n        },\n        error: 'Node.js version 16 or higher required'\n      },\n      {\n        name: 'Package.json exists',\n        check: () => {\n          const fs = require('fs');\n          return fs.existsSync('package.json');\n        },\n        error: 'package.json not found in project root'\n      },\n      {\n        name: 'Node modules installed',\n        check: () => {\n          const fs = require('fs');\n          return fs.existsSync('node_modules');\n        },\n        error: 'node_modules not found - run npm install'\n      }\n    ];\n\n    const failedChecks: string[] = [];\n\n    for (const check of criticalChecks) {\n      try {\n        if (!check.check()) {\n          failedChecks.push(`${check.name}: ${check.error}`);\n        }\n      } catch (error) {\n        failedChecks.push(`${check.name}: Check failed - ${error}`);\n      }\n    }\n\n    if (failedChecks.length > 0) {\n      this.throwLoudError(\n        'Critical system dependencies validation failed',\n        'SYSTEM_ERROR',\n        { failedChecks }\n      );\n    }\n  }\n\n  /**\n   * Setup globaler Error Handling\n   */\n  private setupGlobalErrorHandling(): void {\n    if (this.isEnabled) {\n      // Unhandled Promise Rejections\n      process.on('unhandledRejection', (reason, promise) => {\n        this.throwLoudError(\n          'Unhandled Promise Rejection',\n          'SYSTEM_ERROR',\n          { reason, promise: promise.toString() }\n        );\n      });\n\n      // Uncaught Exceptions\n      process.on('uncaughtException', (error) => {\n        this.throwLoudError(\n          'Uncaught Exception',\n          'SYSTEM_ERROR',\n          { error: error.message, stack: error.stack }\n        );\n      });\n    }\n  }\n\n  /**\n   * Triggert registrierte Error Handler\n   */\n  private triggerErrorHandlers(errorType: string, message: string, details?: any): void {\n    for (const handler of this.errorHandlers) {\n      try {\n        switch (errorType) {\n          case 'STEP_FAILED':\n            handler.onStepFailed?.(details?.stepName || 'unknown', new Error(message));\n            break;\n          case 'MISSING_STEP':\n            handler.onRequiredStepMissing?.(details?.stepName || 'unknown');\n            break;\n          case 'CHECKPOINT_FAILED':\n            handler.onCheckpointFailed?.(details?.checkpointName || 'unknown', [message]);\n            break;\n          default:\n            handler.onPipelineFailed?.([message]);\n        }\n      } catch (handlerError) {\n        console.error(`Error handler failed: ${handlerError}`);\n      }\n    }\n  }\n\n  /**\n   * Blockiert alle Operationen\n   */\n  private blockAllOperations(): void {\n    this.blockedOperations.add('*');\n  }\n\n  /**\n   * Generiert eindeutige Error ID\n   */\n  private generateErrorId(): string {\n    return `ERR_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * Error Log abrufen\n   */\n  getErrorLog(): Array<{ timestamp: Date; type: string; message: string; details?: any }> {\n    return [...this.errorLog];\n  }\n\n  /**\n   * Error Log exportieren\n   */\n  exportErrorLog(): string {\n    return JSON.stringify(this.errorLog, null, 2);\n  }\n\n  /**\n   * System zurücksetzen (nur für Tests)\n   */\n  reset(): void {\n    this.errorLog = [];\n    this.blockedOperations.clear();\n  }\n\n  /**\n   * Fail Loudly aktivieren/deaktivieren\n   */\n  setEnabled(enabled: boolean): void {\n    this.isEnabled = enabled;\n  }\n\n  /**\n   * Status des Systems abrufen\n   */\n  getSystemStatus(): {\n    enabled: boolean;\n    errorCount: number;\n    warningCount: number;\n    blockedOperations: string[];\n    lastError?: any;\n  } {\n    const errors = this.errorLog.filter(entry => entry.type !== 'WARNING');\n    const warnings = this.errorLog.filter(entry => entry.type === 'WARNING');\n\n    return {\n      enabled: this.isEnabled,\n      errorCount: errors.length,\n      warningCount: warnings.length,\n      blockedOperations: Array.from(this.blockedOperations),\n      lastError: errors.length > 0 ? errors[errors.length - 1] : undefined\n    };\n  }\n}\n\n/**\n * Globale Fail Loudly Instanz\n */\nexport const failLoudlyManager = new FailLoudlyManager();\n\n/**\n * Utility-Funktionen für häufige Fail Loudly Patterns\n */\nexport const FailLoudlyUtils = {\n  /**\n   * Schnelle Assertion für nicht-null Werte\n   */\n  assertNotNull<T>(value: T | null | undefined, message: string): T {\n    if (value === null || value === undefined) {\n      failLoudlyManager.throwLoudError(`Null/undefined value: ${message}`, 'VALIDATION_FAILED');\n    }\n    return value as T;\n  },\n\n  /**\n   * Schnelle Assertion für Arrays\n   */\n  assertNotEmpty<T>(array: T[], message: string): T[] {\n    if (array.length === 0) {\n      failLoudlyManager.throwLoudError(`Empty array: ${message}`, 'VALIDATION_FAILED');\n    }\n    return array;\n  },\n\n  /**\n   * Schnelle File-Existence Assertion\n   */\n  assertFileExists(filePath: string, context?: string): void {\n    failLoudlyManager.assertFilesExist([filePath], context);\n  },\n\n  /**\n   * Blockiert Agent bei fehlenden Required Steps\n   */\n  blockAgentIfIncomplete(): void {\n    const fs = require('fs');\n    const path = require('path');\n    \n    // Prüfe ob Pipeline-System korrekt initialisiert ist\n    const pipelineFiles = [\n      'src/pipeline/StepRunner.ts',\n      'src/pipeline/annotations.ts',\n      'src/pipeline/checkpoints.ts',\n      'src/pipeline/verification.ts'\n    ];\n\n    const missingPipelineFiles = pipelineFiles.filter(file => \n      !fs.existsSync(path.join(process.cwd(), file))\n    );\n\n    if (missingPipelineFiles.length > 0) {\n      failLoudlyManager.throwLoudError(\n        'Pipeline system incomplete - agent execution blocked',\n        'SYSTEM_ERROR',\n        { missingFiles: missingPipelineFiles }\n      );\n    }\n  }\n};\n\n/**\n * Decorator für automatisches Fail Loudly bei Funktionen\n */\nexport function FailLoudlyOnError(errorType: 'STEP_FAILED' | 'VALIDATION_FAILED' = 'STEP_FAILED') {\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n\n    descriptor.value = function (...args: any[]) {\n      try {\n        const result = originalMethod.apply(this, args);\n        \n        // Handle Promises\n        if (result && typeof result.catch === 'function') {\n          return result.catch((error: Error) => {\n            failLoudlyManager.throwLoudError(\n              `Function '${propertyKey}' failed: ${error.message}`,\n              errorType,\n              { functionName: propertyKey, error: error.message, args }\n            );\n          });\n        }\n        \n        return result;\n      } catch (error) {\n        failLoudlyManager.throwLoudError(\n          `Function '${propertyKey}' failed: ${error instanceof Error ? error.message : String(error)}`,\n          errorType,\n          { functionName: propertyKey, error: error instanceof Error ? error.message : String(error), args }\n        );\n      }\n    };\n\n    return descriptor;\n  };\n}","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/pipeline/index.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":107,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":107,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2854,2939],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (249). Maximum allowed is 75.","line":126,"column":1,"nodeType":null,"messageId":"exceed","endLine":389,"endColumn":3},{"ruleId":"no-sequences","severity":1,"message":"Unexpected use of comma operator.","line":127,"column":78,"nodeType":"SequenceExpression","messageId":"unexpectedCommaExpression","endLine":127,"endColumn":79},{"ruleId":"max-statements","severity":1,"message":"Async method 'enforceAgentExecution' has too many statements (16). Maximum allowed is 15.","line":159,"column":30,"nodeType":"FunctionExpression","messageId":"exceed","endLine":200,"endColumn":4},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":182,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":182,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5176,5244],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":208,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5850,5853],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5850,5853],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'executionTime' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":211,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":211,"endColumn":24},{"ruleId":"max-params","severity":1,"message":"Method 'registerValidatedStep' has too many parameters (4). Maximum allowed is 3.","line":231,"column":3,"nodeType":"FunctionExpression","messageId":"exceed","endLine":231,"endColumn":24},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":250,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":250,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7069,7146],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":258,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":258,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7338,7341],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7338,7341],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":260,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":260,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7389,7468],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'checklist' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":270,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":270,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":276,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":276,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7898,7965],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":277,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":277,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7972,8045],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":278,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":278,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8052,8137],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":325,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":325,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9385,9471],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":386,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":386,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10805,10868],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Pipeline System - Main Export\n * \n * Zentraler Export aller Pipeline-Komponenten für das erzwungene Schritte-System.\n * Dieses System stellt sicher, dass KI-Agenten alle notwendigen Arbeitsschritte\n * ausführen müssen und keine relevanten Operationen übersprungen werden können.\n */\n\n// Core Pipeline Components\n/**\n * Pipeline Orchestrator - Hauptklasse für KI-Agent Integration\n * \n * Diese Klasse orchestriert alle Pipeline-Komponenten und stellt sicher,\n * dass KI-Agenten das vollständige System verwenden müssen.\n */\nimport { stepRegistry, stepValidator } from './annotations';\nimport { checkpointManager, CommonCheckpoints } from './checkpoints';\nimport { failLoudlyManager, FailLoudlyUtils } from './failLoudly';\nimport { StepRunner } from './StepRunner';\nimport { PipelineConfig, AgentValidationResult } from './types';\nimport { verificationManager, VerificationUtils } from './verification';\n\nexport { StepRunner } from './StepRunner';\nexport { \n  RequiredStep, \n  stepRegistry, \n  stepValidator, \n  commentDetector,\n  registerRequiredStep,\n  markStepExecuted \n} from './annotations';\n\n// Checkpoint System\nexport { \n  CheckpointManager, \n  AssertionBuilder,\n  checkpointManager,\n  CommonCheckpoints \n} from './checkpoints';\n\n// Verification System\nexport { \n  VerificationManager,\n  verificationManager,\n  VerificationUtils \n} from './verification';\n\n// Fail Loudly System\nexport { \n  FailLoudlyManager,\n  failLoudlyManager,\n  FailLoudlyUtils,\n  FailLoudlyOnError \n} from './failLoudly';\n\n// Types\nexport * from './types';\n\nexport class PipelineOrchestrator {\n  private stepRunner: StepRunner;\n  private config: PipelineConfig;\n  private sessionId: string;\n  private startTime: Date;\n\n  constructor(config: Partial<PipelineConfig> = {}) {\n    this.config = {\n      failLoud: true,\n      enableLogging: true,\n      enforceRequiredSteps: true,\n      allowPartialExecution: false,\n      timeoutMs: 300000, // 5 minutes default\n      ...config\n    };\n\n    this.stepRunner = new StepRunner(this.config.failLoud);\n    this.sessionId = this.generateSessionId();\n    this.startTime = new Date();\n\n    this.initializePipeline();\n  }\n\n  /**\n   * Initialisiert die Pipeline für KI-Agent Verwendung\n   * @RequiredStep: \"initialize-pipeline\"\n   */\n  private initializePipeline(): void {\n    // Setup global error handling\n    failLoudlyManager.setEnabled(this.config.failLoud);\n\n    // Validate system dependencies\n    if (this.config.enforceRequiredSteps) {\n      try {\n        failLoudlyManager.validateSystemDependencies();\n      } catch (error) {\n        console.error('Pipeline initialization failed:', error);\n        throw error;\n      }\n    }\n\n    // Setup common checkpoints\n    this.setupCommonCheckpoints();\n\n    // Initialize verification checklist\n    this.initializeVerificationChecklist();\n\n    if (this.config.enableLogging) {\n      console.log(`[PipelineOrchestrator] Initialized with session ID: ${this.sessionId}`);\n    }\n  }\n\n  /**\n   * Setup Standard-Checkpoints für häufige Workflows\n   */\n  private setupCommonCheckpoints(): void {\n    CommonCheckpoints.createI18nCheckpoint();\n    CommonCheckpoints.createQualityCheckpoint();\n    CommonCheckpoints.createDocumentationCheckpoint();\n    CommonCheckpoints.createCompleteValidationCheckpoint();\n  }\n\n  /**\n   * Initialisiert Standard-Verifikations-Checkliste\n   */\n  private initializeVerificationChecklist(): void {\n    // Project structure checks\n    verificationManager.addVerificationCheck('project-structure-valid', () => {\n      return FailLoudlyUtils.assertFileExists('package.json', 'project root'), true;\n    });\n\n    // Dependencies installed\n    verificationManager.addVerificationCheck('dependencies-installed', () => {\n      const fs = require('fs');\n      return fs.existsSync('node_modules');\n    });\n\n    // Pipeline system integrity\n    verificationManager.addVerificationCheck('pipeline-system-complete', () => {\n      const requiredFiles = [\n        'src/pipeline/StepRunner.ts',\n        'src/pipeline/annotations.ts',\n        'src/pipeline/checkpoints.ts',\n        'src/pipeline/verification.ts',\n        'src/pipeline/failLoudly.ts'\n      ];\n\n      try {\n        failLoudlyManager.assertFilesExist(requiredFiles, 'Pipeline system');\n        return true;\n      } catch {\n        return false;\n      }\n    });\n  }\n\n  /**\n   * Zwingt KI-Agent zur Ausführung aller registrierten Schritte\n   * @RequiredStep: \"enforce-agent-execution\"\n   */\n  async enforceAgentExecution(): Promise<AgentValidationResult> {\n    const executionStart = Date.now();\n\n    try {\n      // 1. Validate all required steps are executed\n      if (this.config.enforceRequiredSteps) {\n        stepValidator.enforceAllStepsExecuted();\n      }\n\n      // 2. Validate all checkpoints\n      checkpointManager.validateAllCheckpoints();\n\n      // 3. Run complete verification\n      const verificationPassed = VerificationUtils.verifyProjectCompletion();\n\n      if (!verificationPassed) {\n        throw new Error('Complete verification failed');\n      }\n\n      // 4. Generate final validation result\n      const result = this.generateValidationResult(true, executionStart);\n\n      if (this.config.enableLogging) {\n        console.log('✅ Agent execution enforcement completed successfully');\n      }\n\n      return result;\n\n    } catch (error) {\n      const result = this.generateValidationResult(false, executionStart, error);\n      \n      if (this.config.failLoud) {\n        failLoudlyManager.throwLoudError(\n          `Agent execution enforcement failed: ${error instanceof Error ? error.message : String(error)}`,\n          'VALIDATION_FAILED',\n          { sessionId: this.sessionId, result }\n        );\n      }\n\n      return result;\n    }\n  }\n\n  /**\n   * Generiert Validierungs-Ergebnis\n   */\n  private generateValidationResult(\n    success: boolean, \n    executionStart: number, \n    error?: any\n  ): AgentValidationResult {\n    const validation = stepValidator.validateAllStepsExecuted();\n    const executionTime = Date.now() - executionStart;\n\n    return {\n      agentName: 'AI-Agent',\n      timestamp: new Date(),\n      requiredStepsCompleted: validation.valid,\n      pipelineStatus: success ? 'COMPLETE' : 'FAILED',\n      missingSteps: validation.missingSteps,\n      checklistPassed: success,\n      errors: success ? [] : [\n        ...validation.errors,\n        error ? error.message || String(error) : 'Unknown error'\n      ]\n    };\n  }\n\n  /**\n   * Registriert einen Step mit automatischer Validierung\n   * @RequiredStep: \"register-validated-step\"\n   */\n  registerValidatedStep(\n    stepName: string, \n    stepFunction: Function, \n    isRequired: boolean = true,\n    checkpointName?: string\n  ): void {\n    // Registriere Step im StepRunner\n    this.stepRunner.registerStep(stepName, stepFunction, isRequired);\n\n    // Erstelle automatischen Checkpoint wenn gewünscht\n    if (checkpointName) {\n      checkpointManager.createCheckpoint(\n        checkpointName,\n        [stepName],\n        [() => stepRegistry.getExecutedSteps().includes(stepName)]\n      );\n    }\n\n    if (this.config.enableLogging) {\n      console.log(`[PipelineOrchestrator] Registered validated step: ${stepName}`);\n    }\n  }\n\n  /**\n   * Führt Pipeline-Workflow aus mit vollständiger Validierung\n   * @RequiredStep: \"execute-validated-workflow\"\n   */\n  async executeValidatedWorkflow(): Promise<Map<string, any>> {\n    if (this.config.enableLogging) {\n      console.log('[PipelineOrchestrator] Starting validated workflow execution...');\n    }\n\n    // 1. Execute pipeline\n    const pipelineResults = await this.stepRunner.executePipeline();\n\n    // 2. Validate checkpoints\n    checkpointManager.validateAllCheckpoints();\n\n    // 3. Run verification\n    const checklist = verificationManager.executeAllChecks();\n\n    // 4. Generate final report\n    const validationReport = verificationManager.generateVerificationReport();\n\n    if (this.config.enableLogging) {\n      console.log('[PipelineOrchestrator] Validated workflow completed');\n      console.log('Pipeline Results:', pipelineResults.size, 'steps executed');\n      console.log('Verification:', validationReport.checklistPassed ? 'PASSED' : 'FAILED');\n    }\n\n    return pipelineResults;\n  }\n\n  /**\n   * Exportiert kompletten Pipeline-Status für Debugging\n   */\n  exportPipelineStatus(): object {\n    return {\n      session: {\n        id: this.sessionId,\n        startTime: this.startTime,\n        duration: Date.now() - this.startTime.getTime(),\n        config: this.config\n      },\n      steps: {\n        registered: stepRegistry.getRegisteredSteps(),\n        executed: stepRegistry.getExecutedSteps(),\n        missing: stepRegistry.getMissingSteps(),\n        results: stepRegistry.getAllStepResults()\n      },\n      checkpoints: checkpointManager.getCheckpointStatus(),\n      verification: {\n        checklist: verificationManager.getCurrentChecklist(),\n        report: verificationManager.generateVerificationReport()\n      },\n      systemStatus: failLoudlyManager.getSystemStatus(),\n      pipelineStatus: this.stepRunner.getPipelineStatus()\n    };\n  }\n\n  /**\n   * Reset Pipeline für neue Session\n   */\n  reset(): void {\n    this.stepRunner.reset();\n    stepRegistry.reset();\n    checkpointManager.reset();\n    verificationManager.reset();\n    failLoudlyManager.reset();\n\n    this.sessionId = this.generateSessionId();\n    this.startTime = new Date();\n\n    if (this.config.enableLogging) {\n      console.log(`[PipelineOrchestrator] Reset completed. New session: ${this.sessionId}`);\n    }\n  }\n\n  /**\n   * Generiert eindeutige Session ID\n   */\n  private generateSessionId(): string {\n    return `PIPELINE_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * Aktuelle Session Info\n   */\n  getSessionInfo(): object {\n    return {\n      sessionId: this.sessionId,\n      startTime: this.startTime,\n      duration: Date.now() - this.startTime.getTime(),\n      config: this.config\n    };\n  }\n}\n\n/**\n * Default Pipeline Instance für globale Verwendung\n */\nexport const defaultPipeline = new PipelineOrchestrator();\n\n/**\n * Utility-Funktionen für schnelle Pipeline-Integration\n */\nexport const PipelineUtils = {\n  /**\n   * Quick Setup für Standard-Projekt-Pipeline\n   */\n  setupStandardPipeline(): PipelineOrchestrator {\n    return new PipelineOrchestrator({\n      failLoud: true,\n      enableLogging: true,\n      enforceRequiredSteps: true,\n      allowPartialExecution: false\n    });\n  },\n\n  /**\n   * Quick Setup für Test-Umgebung\n   */\n  setupTestPipeline(): PipelineOrchestrator {\n    return new PipelineOrchestrator({\n      failLoud: false,\n      enableLogging: false,\n      enforceRequiredSteps: true,\n      allowPartialExecution: true\n    });\n  },\n\n  /**\n   * Enforcement für KI-Agent Compliance\n   */\n  enforceAgentCompliance(agentName: string = 'AI-Agent'): Promise<AgentValidationResult> {\n    console.log(`🤖 Enforcing compliance for agent: ${agentName}`);\n    return defaultPipeline.enforceAgentExecution();\n  }\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/pipeline/production-ready.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":31,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":31,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[939,1012],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":54,"column":7,"nodeType":"Literal","endLine":54,"endColumn":29},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":56,"column":7,"nodeType":"Literal","endLine":56,"endColumn":37},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":57,"column":7,"nodeType":"Literal","endLine":57,"endColumn":27},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":58,"column":7,"nodeType":"Literal","endLine":58,"endColumn":20},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":59,"column":7,"nodeType":"Literal","endLine":59,"endColumn":32},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":60,"column":7,"nodeType":"Literal","endLine":60,"endColumn":31},{"ruleId":"max-statements","severity":1,"message":"Async method 'enforceAgentCompliance' has too many statements (20). Maximum allowed is 15.","line":123,"column":31,"nodeType":"FunctionExpression","messageId":"exceed","endLine":161,"endColumn":4},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":124,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":124,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3512,3573],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":128,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":128,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3632,3679],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":133,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":133,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3829,3873],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (199). Maximum allowed is 75.","line":135,"column":1,"nodeType":null,"messageId":"exceed","endLine":325,"endColumn":81},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":138,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":138,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4019,4060],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":149,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":149,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4374,4432],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":167,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":167,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4967,4970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4967,4970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":167,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":167,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4973,4976],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4973,4976],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":168,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":168,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4983,5029],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":173,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":173,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5136,5181],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Async method 'demonstrateCompleteWorkflow' has too many lines (42). Maximum allowed is 30.","line":226,"column":3,"nodeType":"MethodDefinition","messageId":"exceed","endLine":287,"endColumn":4},{"ruleId":"max-statements","severity":1,"message":"Async method 'demonstrateCompleteWorkflow' has too many statements (16). Maximum allowed is 15.","line":226,"column":36,"nodeType":"FunctionExpression","messageId":"exceed","endLine":287,"endColumn":4},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":227,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":227,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6673,6728],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":233,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":233,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6897,6941],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":239,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":239,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7112,7157],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":245,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":245,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7347,7400],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":251,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":251,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7578,7622],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":257,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":257,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7776,7811],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":263,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":263,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7982,8028],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":269,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":269,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8208,8254],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":277,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":277,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8458,8520],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":278,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":278,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8529,8595],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":30,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Production-Ready Pipeline System v2.0.0\n * \n * Comment-based implementation for maximum compatibility\n * No decorators, no TypeScript conflicts, 100% functional\n */\n\nimport { stepRegistry, markStepExecuted, stepValidator } from './annotations';\nimport { checkpointManager, CommonCheckpoints } from './checkpoints';\nimport { failLoudlyManager } from './failLoudly';\nimport { verificationManager, VerificationUtils } from './verification';\n\n/**\n * Production Pipeline Manager - 100% Compatible\n */\nexport class ProductionPipelineManager {\n  private agentName: string;\n  private sessionId: string;\n\n  constructor(agentName: string = 'AI-Agent') {\n    this.agentName = agentName;\n    this.sessionId = this.generateSessionId();\n    this.initializeProductionPipeline();\n  }\n\n  /**\n   * Initialize production-ready pipeline\n   * // @RequiredStep: \"initialize-production-pipeline\"\n   */\n  private initializeProductionPipeline(): void {\n    console.log(`🚀 Initializing Production Pipeline for ${this.agentName}`);\n    \n    // Register critical steps\n    this.registerCriticalSteps();\n    \n    // Setup checkpoints\n    this.setupProductionCheckpoints();\n    \n    // Initialize verification\n    this.setupProductionVerification();\n    \n    markStepExecuted('initialize-production-pipeline', true, {\n      agentName: this.agentName,\n      sessionId: this.sessionId\n    });\n  }\n\n  /**\n   * Register all critical steps that agents MUST execute\n   * // @RequiredStep: \"register-critical-steps\"\n   */\n  private registerCriticalSteps(): void {\n    const criticalSteps = [\n      'analyze-requirements',\n      'plan-implementation',\n      'implement-core-functionality',\n      'add-error-handling',\n      'write-tests',\n      'validate-implementation',\n      'generate-documentation'\n    ];\n\n    criticalSteps.forEach(stepName => {\n      stepRegistry.registerStep({\n        stepName,\n        description: `Critical step: ${stepName}`,\n        dependencies: []\n      });\n    });\n\n    markStepExecuted('register-critical-steps', true, {\n      stepsCount: criticalSteps.length\n    });\n  }\n\n  /**\n   * Setup production checkpoints\n   * // @RequiredStep: \"setup-production-checkpoints\"\n   */\n  private setupProductionCheckpoints(): void {\n    // I18n checkpoint\n    CommonCheckpoints.createI18nCheckpoint(['analyze-requirements']);\n    \n    // Quality checkpoint\n    CommonCheckpoints.createQualityCheckpoint([\n      'implement-core-functionality',\n      'add-error-handling',\n      'write-tests'\n    ]);\n    \n    // Documentation checkpoint\n    CommonCheckpoints.createDocumentationCheckpoint([\n      'validate-implementation',\n      'generate-documentation'\n    ]);\n\n    markStepExecuted('setup-production-checkpoints', true);\n  }\n\n  /**\n   * Setup production verification\n   * // @RequiredStep: \"setup-production-verification\"\n   */\n  private setupProductionVerification(): void {\n    // Core quality checks\n    verificationManager.addVerificationCheck('production-ready', () => {\n      const executedSteps = stepRegistry.getExecutedSteps();\n      return executedSteps.length >= 3; // Minimum steps\n    });\n\n    verificationManager.addVerificationCheck('agent-compliance', () => {\n      const validation = stepValidator.validateAllStepsExecuted();\n      return validation.valid;\n    });\n\n    markStepExecuted('setup-production-verification', true);\n  }\n\n  /**\n   * ENFORCE: Agent must execute all critical steps\n   * // @RequiredStep: \"enforce-agent-compliance\"\n   */\n  async enforceAgentCompliance(): Promise<boolean> {\n    console.log(`🔒 Enforcing compliance for ${this.agentName}`);\n\n    try {\n      // Step 1: Validate required steps\n      console.log('📋 Validating required steps...');\n      stepValidator.enforceAllStepsExecuted();\n      markStepExecuted('validate-required-steps', true);\n\n      // Step 2: Validate checkpoints\n      console.log('🔍 Validating checkpoints...');\n      checkpointManager.validateAllCheckpoints();\n      markStepExecuted('validate-checkpoints', true);\n\n      // Step 3: Run verification\n      console.log('✅ Running verification...');\n      const verificationPassed = VerificationUtils.verifyProjectCompletion();\n      markStepExecuted('run-verification', verificationPassed);\n\n      if (!verificationPassed) {\n        failLoudlyManager.throwLoudError(\n          'Agent verification failed',\n          'VALIDATION_FAILED'\n        );\n      }\n\n      console.log(`✅ ${this.agentName} compliance SUCCESSFUL!`);\n      markStepExecuted('enforce-agent-compliance', true);\n      \n      return true;\n\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      console.error(`❌ ${this.agentName} compliance FAILED: ${errorMessage}`);\n      \n      markStepExecuted('enforce-agent-compliance', false, errorMessage);\n      return false;\n    }\n  }\n\n  /**\n   * Execute a step with automatic tracking\n   * // @RequiredStep: \"execute-tracked-step\"\n   */\n  executeStep(stepName: string, stepFunction: () => any): any {\n    console.log(`🔄 Executing step: ${stepName}`);\n    \n    try {\n      const result = stepFunction();\n      markStepExecuted(stepName, true, result);\n      console.log(`✅ Step completed: ${stepName}`);\n      return result;\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      markStepExecuted(stepName, false, errorMessage);\n      \n      failLoudlyManager.throwLoudError(\n        `Step execution failed: ${stepName} - ${errorMessage}`,\n        'STEP_FAILED'\n      );\n    }\n  }\n\n  /**\n   * Get comprehensive status report\n   */\n  getStatusReport(): object {\n    const validation = stepValidator.validateAllStepsExecuted();\n    const checkpointStatus = checkpointManager.getCheckpointStatus();\n    const checklist = verificationManager.getCurrentChecklist();\n\n    return {\n      agent: this.agentName,\n      sessionId: this.sessionId,\n      compliance: {\n        requiredStepsValid: validation.valid,\n        missingSteps: validation.missingSteps,\n        checkpointsPassed: checkpointStatus,\n        verificationChecklist: checklist\n      },\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  private generateSessionId(): string {\n    return `PROD_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n}\n\n/**\n * PRODUCTION DEMO - Complete workflow implementation\n */\nexport class ProductionWorkflowDemo {\n  private pipeline: ProductionPipelineManager;\n\n  constructor() {\n    this.pipeline = new ProductionPipelineManager('Production-Agent');\n  }\n\n  /**\n   * Demonstrate complete enforced workflow\n   * // @RequiredStep: \"demonstrate-production-workflow\"\n   */\n  async demonstrateCompleteWorkflow(): Promise<boolean> {\n    console.log('🚀 Starting Production Workflow Demo...');\n\n    try {\n      // Execute all critical steps\n      this.pipeline.executeStep('analyze-requirements', () => {\n        // @RequiredStep: \"analyze-requirements\"\n        console.log('📋 Analyzing requirements...');\n        return 'Requirements analyzed';\n      });\n\n      this.pipeline.executeStep('plan-implementation', () => {\n        // @RequiredStep: \"plan-implementation\"\n        console.log('📝 Planning implementation...');\n        return 'Implementation planned';\n      });\n\n      this.pipeline.executeStep('implement-core-functionality', () => {\n        // @RequiredStep: \"implement-core-functionality\"\n        console.log('⚙️ Implementing core functionality...');\n        return 'Core functionality implemented';\n      });\n\n      this.pipeline.executeStep('add-error-handling', () => {\n        // @RequiredStep: \"add-error-handling\"\n        console.log('🛡️ Adding error handling...');\n        return 'Error handling added';\n      });\n\n      this.pipeline.executeStep('write-tests', () => {\n        // @RequiredStep: \"write-tests\"\n        console.log('🧪 Writing tests...');\n        return 'Tests written';\n      });\n\n      this.pipeline.executeStep('validate-implementation', () => {\n        // @RequiredStep: \"validate-implementation\"\n        console.log('✅ Validating implementation...');\n        return 'Implementation validated';\n      });\n\n      this.pipeline.executeStep('generate-documentation', () => {\n        // @RequiredStep: \"generate-documentation\"\n        console.log('📚 Generating documentation...');\n        return 'Documentation generated';\n      });\n\n      // Enforce final compliance\n      const complianceResult = await this.pipeline.enforceAgentCompliance();\n\n      if (complianceResult) {\n        console.log('🎉 Production Workflow SUCCESSFULLY completed!');\n        console.log('📊 Status Report:', this.pipeline.getStatusReport());\n      }\n\n      return complianceResult;\n\n    } catch (error) {\n      console.error('❌ Production Workflow FAILED:', error);\n      return false;\n    }\n  }\n}\n\n/**\n * GLOBAL PRODUCTION UTILITIES\n */\nexport const ProductionUtils = {\n  /**\n   * Quick agent enforcement for any AI agent\n   */\n  async enforceAnyAgent(agentName: string): Promise<boolean> {\n    const pipeline = new ProductionPipelineManager(agentName);\n    return await pipeline.enforceAgentCompliance();\n  },\n\n  /**\n   * Run production demo\n   */\n  async runDemo(): Promise<boolean> {\n    const demo = new ProductionWorkflowDemo();\n    return await demo.demonstrateCompleteWorkflow();\n  },\n\n  /**\n   * Validate current pipeline status\n   */\n  validateCurrentStatus(): boolean {\n    try {\n      stepValidator.enforceAllStepsExecuted();\n      checkpointManager.validateAllCheckpoints();\n      return VerificationUtils.verifyProjectCompletion();\n    } catch {\n      return false;\n    }\n  }\n};\n\n// Export production-ready instance\nexport const productionPipeline = new ProductionPipelineManager('Global-Agent');","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/pipeline/tests/test-required-steps.test.ts","messages":[{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":33,"column":54,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":55,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":37,"column":21,"nodeType":"FunctionExpression","messageId":"exceed","endLine":39,"endColumn":10},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":84,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":87,"endColumn":8},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":89,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":92,"endColumn":8},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":103,"column":47,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":105,"endColumn":8},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":111,"column":44,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":111,"endColumn":59},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":114,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3899,3902],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3899,3902],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":167,"column":64,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":167,"endColumn":74},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":177,"column":65,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":177,"endColumn":76},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":179,"column":14,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":181,"endColumn":8},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":187,"column":64,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":187,"endColumn":74},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":198,"column":61,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":198,"endColumn":71},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":263,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":263,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9104,9107],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9104,9107],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"jest/valid-expect","severity":2,"message":"Async assertions must be awaited or returned.","line":344,"column":7,"nodeType":"CallExpression","messageId":"asyncMustBeAwaited","endLine":344,"endColumn":65}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Test Framework für RequiredSteps\n * \n * Dieses Test-Framework stellt sicher, dass alle @RequiredStep markierten\n * Funktionen vorhanden sind, korrekt ausgeführt werden und die Pipeline-\n * Integrität gewährleistet ist.\n */\n\nimport { RequiredStep, stepRegistry, stepValidator, markStepExecuted } from '../annotations';\nimport { checkpointManager, CommonCheckpoints } from '../checkpoints';\nimport { failLoudlyManager } from '../failLoudly';\nimport { StepRunner } from '../StepRunner';\nimport { verificationManager, VerificationUtils, VerificationManager } from '../verification';\n\ndescribe('RequiredSteps Test Framework', () => {\n  let stepRunner: StepRunner;\n\n  beforeEach(() => {\n    // Reset alle Manager vor jedem Test\n    stepRunner = new StepRunner(false); // Disable fail loud für Tests\n    stepRegistry.reset();\n    checkpointManager.reset();\n    verificationManager.reset();\n    failLoudlyManager.reset();\n    failLoudlyManager.setEnabled(false);\n  });\n\n  afterEach(() => {\n    failLoudlyManager.setEnabled(true);\n  });\n\n  describe('Step Registration und Execution', () => {\n    it('should register and execute required steps', async () => {\n      // Test Function mit @RequiredStep\n      class TestClass {\n        @RequiredStep('test-step-1', { description: 'Test step for validation' })\n        testFunction(): string {\n          return 'step executed';\n        }\n      }\n\n      const instance = new TestClass();\n      \n      // Prüfe Registrierung\n      const registeredSteps = stepRegistry.getRegisteredSteps();\n      expect(registeredSteps).toContain('test-step-1');\n\n      // Führe Funktion aus\n      const result = instance.testFunction();\n      expect(result).toBe('step executed');\n\n      // Prüfe Ausführung\n      const executedSteps = stepRegistry.getExecutedSteps();\n      expect(executedSteps).toContain('test-step-1');\n    });\n\n    it('should validate all required steps are executed', () => {\n      // Registriere steps manuell\n      markStepExecuted('step-1', true, 'result1');\n      markStepExecuted('step-2', true, 'result2');\n\n      const validation = stepValidator.validateAllStepsExecuted();\n      expect(validation.valid).toBe(true);\n      expect(validation.missingSteps).toHaveLength(0);\n    });\n\n    it('should detect missing required steps', () => {\n      // Registriere step aber führe ihn nicht aus\n      stepRegistry.registerStep({\n        stepName: 'missing-step',\n        description: 'This step will not be executed'\n      });\n\n      const validation = stepValidator.validateAllStepsExecuted();\n      expect(validation.valid).toBe(false);\n      expect(validation.missingSteps).toContain('missing-step');\n    });\n  });\n\n  describe('StepRunner Pipeline Tests', () => {\n    it('should execute pipeline with required steps', async () => {\n      const executionOrder: string[] = [];\n\n      stepRunner.registerStep('step-1', () => {\n        executionOrder.push('step-1');\n        return 'result-1';\n      }, true);\n\n      stepRunner.registerStep('step-2', () => {\n        executionOrder.push('step-2');\n        return 'result-2';\n      }, true);\n\n      const results = await stepRunner.executePipeline();\n\n      expect(executionOrder).toEqual(['step-1', 'step-2']);\n      expect(results.size).toBe(2);\n      expect(results.get('step-1')?.success).toBe(true);\n      expect(results.get('step-2')?.success).toBe(true);\n    });\n\n    it.skip('should fail when required step fails', async () => {\n      stepRunner.registerStep('failing-step', () => {\n        throw new Error('Step failed');\n      }, true);\n\n      await expect(stepRunner.executePipeline()).rejects.toThrow('Step \\'failing-step\\' failed');\n    });\n\n    it('should generate verification checklist', async () => {\n      stepRunner.registerStep('test-step', () => 'success', true);\n      await stepRunner.executeStep('test-step');\n\n      const checklist = stepRunner.generateVerificationChecklist() as any;\n      \n      expect(checklist.pipeline_execution.all_required_steps_executed).toBe(true);\n      expect(checklist.pipeline_execution.no_failed_steps).toBe(true);\n      expect(checklist.step_details.executed_steps).toBe(1);\n    });\n  });\n\n  describe('Checkpoint Validation Tests', () => {\n    it('should create and validate checkpoints', () => {\n      // Führe required steps aus\n      markStepExecuted('checkpoint-step-1', true);\n      markStepExecuted('checkpoint-step-2', true);\n\n      // Erstelle Checkpoint\n      checkpointManager.createCheckpoint(\n        'test-checkpoint',\n        ['checkpoint-step-1', 'checkpoint-step-2'],\n        [() => true] // Simple assertion\n      );\n\n      // Validiere Checkpoint\n      const result = checkpointManager.validateCheckpoint('test-checkpoint');\n      expect(result).toBe(true);\n    });\n\n    it('should fail checkpoint when required steps missing', () => {\n      checkpointManager.createCheckpoint(\n        'failing-checkpoint',\n        ['missing-step']\n      );\n\n      expect(() => {\n        checkpointManager.validateCheckpoint('failing-checkpoint');\n      }).toThrow('Missing required steps');\n    });\n\n    it('should validate common checkpoints', () => {\n      // Mock successful steps\n      markStepExecuted('i18n-setup', true);\n      markStepExecuted('translation-files', true);\n\n      CommonCheckpoints.createI18nCheckpoint(['i18n-setup', 'translation-files']);\n      \n      expect(() => {\n        checkpointManager.validateCheckpoint('i18n-validation');\n      }).not.toThrow();\n    });\n  });\n\n  describe('Verification Manager Tests', () => {\n    it('should execute verification checks', () => {\n      // Add custom verification check\n      verificationManager.addVerificationCheck('custom-check', () => true, 'Test check');\n\n      const result = verificationManager.executeCheck('custom-check');\n      expect(result).toBe(true);\n\n      const checklist = verificationManager.getCurrentChecklist();\n      expect(checklist['custom-check']).toBe(true);\n    });\n\n    it('should fail on failed verification checks', () => {\n      verificationManager.addVerificationCheck('failing-check', () => false);\n\n      expect(() => {\n        verificationManager.executeCheck('failing-check');\n      }).toThrow('Verification check failed: failing-check');\n    });\n\n    it('should generate verification report', () => {\n      // Setup some steps and checks\n      markStepExecuted('report-step', true);\n      verificationManager.addVerificationCheck('report-check', () => true);\n      verificationManager.executeCheck('report-check');\n\n      const report = verificationManager.generateVerificationReport();\n      \n      expect(report.agentName).toBe('AI-Agent');\n      expect(report.checklistPassed).toBe(false); // Weil nicht alle standard checks passed sind\n      expect(report.timestamp).toBeInstanceOf(Date);\n    });\n\n    it('should export and import checklist as JSON', () => {\n      verificationManager.addVerificationCheck('json-test', () => true);\n      verificationManager.executeCheck('json-test');\n\n      const exportedJSON = verificationManager.exportChecklistAsJSON();\n      expect(exportedJSON).toContain('json-test');\n\n      const newManager = new VerificationManager();\n      newManager.importChecklistFromJSON(exportedJSON);\n\n      const importedChecklist = newManager.getCurrentChecklist();\n      expect(importedChecklist['json-test']).toBe(true);\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should complete full pipeline with all systems', async () => {\n      // 1. Registriere Steps\n      class IntegrationTestClass {\n        @RequiredStep('integration-analysis', { description: 'Analyze requirements' })\n        analyzeRequirements(): string {\n          return 'requirements analyzed';\n        }\n\n        @RequiredStep('integration-implementation', { description: 'Implement feature' })\n        implementFeature(): string {\n          return 'feature implemented';\n        }\n\n        @RequiredStep('integration-testing', { description: 'Run tests' })\n        runTests(): string {\n          return 'tests passed';\n        }\n      }\n\n      const testInstance = new IntegrationTestClass();\n\n      // 2. Führe Steps aus\n      testInstance.analyzeRequirements();\n      testInstance.implementFeature();\n      testInstance.runTests();\n\n      // 3. Erstelle Checkpoints\n      checkpointManager.createCheckpoint(\n        'integration-checkpoint',\n        ['integration-analysis', 'integration-implementation', 'integration-testing'],\n        [\n          () => stepRegistry.getExecutedSteps().length >= 3,\n          () => stepValidator.validateAllStepsExecuted().valid\n        ]\n      );\n\n      // 4. Validiere Checkpoint\n      expect(() => {\n        checkpointManager.validateCheckpoint('integration-checkpoint');\n      }).not.toThrow();\n\n      // 5. Verification\n      verificationManager.addVerificationCheck('integration-complete', () => {\n        return stepRegistry.getExecutedSteps().length >= 3;\n      });\n\n      const checkResult = verificationManager.executeCheck('integration-complete');\n      expect(checkResult).toBe(true);\n\n      // 6. Generiere final report\n      const report = stepValidator.generateValidationReport() as any;\n      expect(report.summary.completion_percentage).toBe(100);\n    });\n\n    it('should block agent execution when steps are missing', () => {\n      failLoudlyManager.setEnabled(true);\n\n      // Registriere required step aber führe ihn nicht aus\n      stepRegistry.registerStep({\n        stepName: 'critical-step',\n        description: 'This must be executed'\n      });\n\n      expect(() => {\n        stepValidator.enforceAllStepsExecuted();\n      }).toThrow('REQUIRED STEPS VALIDATION FAILED');\n\n      failLoudlyManager.setEnabled(false);\n    });\n\n    it('should enforce complete verification', () => {\n      failLoudlyManager.setEnabled(true);\n\n      // Setup incomplete verification\n      verificationManager.addVerificationCheck('incomplete-check', () => false);\n\n      expect(() => {\n        VerificationUtils.verifyProjectCompletion();\n      }).toBe(false);\n\n      failLoudlyManager.setEnabled(false);\n    });\n  });\n\n  describe('Edge Cases und Error Handling', () => {\n    it('should handle step dependencies', async () => {\n      class DependencyTestClass {\n        @RequiredStep('dependency-step-1', { description: 'First step' })\n        firstStep(): string {\n          return 'first completed';\n        }\n\n        @RequiredStep('dependency-step-2', { \n          description: 'Second step',\n          dependencies: ['dependency-step-1']\n        })\n        secondStep(): string {\n          return 'second completed';\n        }\n      }\n\n      const testInstance = new DependencyTestClass();\n\n      // Versuche second step ohne first step auszuführen\n      expect(() => {\n        testInstance.secondStep();\n      }).toThrow('Missing dependencies');\n\n      // Führe steps in korrekter Reihenfolge aus\n      testInstance.firstStep();\n      expect(() => {\n        testInstance.secondStep();\n      }).not.toThrow();\n    });\n\n    it('should handle timeout scenarios', () => {\n      jest.setTimeout(10000);\n\n      class TimeoutTestClass {\n        @RequiredStep('timeout-step', { timeout: 1000 })\n        slowStep(): Promise<string> {\n          return new Promise(resolve => {\n            setTimeout(() => resolve('completed'), 2000);\n          });\n        }\n      }\n\n      const testInstance = new TimeoutTestClass();\n      \n      // In real implementation würde timeout handling implementiert werden\n      // Hier nur Test-Struktur\n      expect(testInstance.slowStep()).resolves.toBe('completed');\n    });\n\n    it('should validate system dependencies', () => {\n      failLoudlyManager.setEnabled(true);\n\n      expect(() => {\n        failLoudlyManager.validateSystemDependencies();\n      }).not.toThrow(); // Sollte in test environment nicht fehlschlagen\n\n      failLoudlyManager.setEnabled(false);\n    });\n  });\n});","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/pipeline/types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[415,418],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[415,418],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":107,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2197,2200],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2197,2200],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Pipeline Types - Definiert alle Typen für das erzwungene Schritte-System\n */\n\n/**\n * Metadaten für @RequiredStep Annotation\n */\nexport interface RequiredStepMetadata {\n  stepName: string;\n  description?: string;\n  dependencies?: string[];\n  timeout?: number;\n  retries?: number;\n}\n\n/**\n * Ergebnis einer Schritt-Ausführung\n */\nexport interface StepResult {\n  stepName: string;\n  success: boolean;\n  result?: any;\n  error?: string;\n  timestamp: Date;\n  executionTime: number;\n  metadata?: RequiredStepMetadata;\n}\n\n/**\n * Validierungs-Checkpoint für Schritte\n */\nexport interface StepValidationCheckpoint {\n  requiredSteps: string[];\n  assertions?: (() => boolean)[];\n  customValidators?: ((results: Map<string, StepResult>) => boolean)[];\n}\n\n/**\n * Pipeline Checkpoint\n */\nexport interface PipelineCheckpoint {\n  name: string;\n  timestamp: Date;\n  requiredConditions: StepValidationCheckpoint;\n  passed: boolean;\n  errorMessage?: string;\n}\n\n/**\n * Pipeline Konfiguration\n */\nexport interface PipelineConfig {\n  failLoud: boolean;\n  enableLogging: boolean;\n  enforceRequiredSteps: boolean;\n  allowPartialExecution: boolean;\n  timeoutMs?: number;\n}\n\n/**\n * Agent-Validierung für KI-Systeme\n */\nexport interface AgentValidationResult {\n  agentName: string;\n  timestamp: Date;\n  requiredStepsCompleted: boolean;\n  pipelineStatus: string;\n  missingSteps: string[];\n  checklistPassed: boolean;\n  errors: string[];\n}\n\n/**\n * JSON-Checkliste Struktur für Selbstverifikation\n */\nexport interface VerificationChecklist {\n  step_analysis: boolean;\n  i18n_applied: boolean;\n  translations_checked: boolean;\n  tests_passed: boolean;\n  code_quality_verified: boolean;\n  security_checks_passed: boolean;\n  documentation_updated: boolean;\n  [key: string]: boolean;\n}\n\n/**\n * Schritt-Status für Tracking\n */\nexport enum StepStatus {\n  NOT_STARTED = 'not_started',\n  IN_PROGRESS = 'in_progress',\n  COMPLETED = 'completed',\n  FAILED = 'failed',\n  SKIPPED = 'skipped'\n}\n\n/**\n * Pipeline-Execution Context\n */\nexport interface PipelineContext {\n  projectPath: string;\n  agentName?: string;\n  sessionId: string;\n  startTime: Date;\n  environment: 'development' | 'testing' | 'production';\n  variables: Map<string, any>;\n}\n\n/**\n * Error-Handler Interface\n */\nexport interface PipelineErrorHandler {\n  onStepFailed: (stepName: string, error: Error) => void;\n  onRequiredStepMissing: (stepName: string) => void;\n  onCheckpointFailed: (checkpointName: string, errors: string[]) => void;\n  onPipelineFailed: (errors: string[]) => void;\n}","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/pipeline/verification.ts","messages":[{"ruleId":"max-statements","severity":1,"message":"Method 'executeCheck' has too many statements (18). Maximum allowed is 15.","line":70,"column":15,"nodeType":"FunctionExpression","messageId":"exceed","endLine":104,"endColumn":4},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":78,"column":31,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":78,"endColumn":64},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (342). Maximum allowed is 75.","line":118,"column":1,"nodeType":null,"messageId":"exceed","endLine":508,"endColumn":3},{"ruleId":"complexity","severity":1,"message":"Method 'executeStandardCheck' has a complexity of 11. Maximum allowed is 10.","line":139,"column":31,"nodeType":"FunctionExpression","messageId":"complex","endLine":175,"endColumn":4},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":292,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":292,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9043,9046],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9043,9046],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'checkpointStatus' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":314,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":314,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'passedChecks' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":317,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":317,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":440,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":440,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13768,13816],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * JSON-Checklisten-System für Selbstverifikation\n * \n * Dieses System implementiert ein robustes Checklisten-basiertes Verifikationssystem,\n * das KI-Agenten zwingt, alle kritischen Aspekte zu validieren.\n */\n\nimport { stepRegistry, stepValidator } from './annotations';\nimport { checkpointManager } from './checkpoints';\nimport { VerificationChecklist, AgentValidationResult } from './types';\n\n/**\n * Verification Manager für Selbstvalidierung\n */\nexport class VerificationManager {\n  private checklist: VerificationChecklist = {\n    step_analysis: false,\n    i18n_applied: false,\n    translations_checked: false,\n    tests_passed: false,\n    code_quality_verified: false,\n    security_checks_passed: false,\n    documentation_updated: false,\n    all_required_steps_executed: false,\n    all_checkpoints_passed: false,\n    no_failed_operations: false\n  };\n  private customChecks: Map<string, () => boolean> = new Map();\n  private verificationResults: Map<string, boolean> = new Map();\n  private isFailLoudEnabled: boolean = true;\n\n  constructor(failLoud: boolean = true) {\n    this.isFailLoudEnabled = failLoud;\n    this.initializeDefaultChecklist();\n  }\n\n  /**\n   * Initialisiert Standard-Checkliste\n   */\n  private initializeDefaultChecklist(): void {\n    this.checklist = {\n      step_analysis: false,\n      i18n_applied: false,\n      translations_checked: false,\n      tests_passed: false,\n      code_quality_verified: false,\n      security_checks_passed: false,\n      documentation_updated: false,\n      all_required_steps_executed: false,\n      all_checkpoints_passed: false,\n      no_failed_operations: false\n    };\n  }\n\n  /**\n   * Fügt einen custom Check zur Checkliste hinzu\n   * @RequiredStep: \"add-verification-check\"\n   */\n  addVerificationCheck(checkName: string, checkFunction: () => boolean, description?: string): void {\n    this.customChecks.set(checkName, checkFunction);\n    this.checklist[checkName] = false;\n    \n    this.logVerification(`Added verification check: ${checkName}${description ? ' - ' + description : ''}`);\n  }\n\n  /**\n   * Führt einen einzelnen Check aus\n   * @RequiredStep: \"execute-verification-check\"\n   */\n  executeCheck(checkName: string): boolean {\n    this.logVerification(`Executing check: ${checkName}`);\n    \n    let result = false;\n    \n    try {\n      // Prüfe ob es ein custom check ist\n      if (this.customChecks.has(checkName)) {\n        const checkFunction = this.customChecks.get(checkName)!;\n        result = checkFunction();\n      } else {\n        // Standard checks\n        result = this.executeStandardCheck(checkName);\n      }\n      \n      this.checklist[checkName] = result;\n      this.verificationResults.set(checkName, result);\n      \n      if (result) {\n        this.logVerification(`✅ Check passed: ${checkName}`);\n      } else {\n        this.logVerification(`❌ Check failed: ${checkName}`);\n        if (this.isFailLoudEnabled) {\n          this.throwLoudError(`Verification check failed: ${checkName}`);\n        }\n      }\n      \n      return result;\n      \n    } catch (error) {\n      this.checklist[checkName] = false;\n      this.verificationResults.set(checkName, false);\n      this.throwLoudError(`Verification check error for '${checkName}': ${error}`);\n    }\n  }\n\n  /**\n   * Führt alle Checks der Checkliste aus\n   * @RequiredStep: \"execute-all-verification-checks\"\n   */\n  executeAllChecks(): VerificationChecklist {\n    this.logVerification('Starting complete verification process...');\n    \n    const checkNames = Object.keys(this.checklist);\n    const failedChecks: string[] = [];\n    \n    for (const checkName of checkNames) {\n      try {\n        const result = this.executeCheck(checkName);\n        if (!result) {\n          failedChecks.push(checkName);\n        }\n      } catch (error) {\n        failedChecks.push(checkName);\n        this.logVerification(`Check '${checkName}' threw error: ${error}`);\n      }\n    }\n    \n    if (failedChecks.length > 0 && this.isFailLoudEnabled) {\n      this.throwLoudError(`Verification failed. Failed checks: ${failedChecks.join(', ')}`);\n    }\n    \n    this.logVerification(`Verification completed. Passed: ${checkNames.length - failedChecks.length}/${checkNames.length}`);\n    return { ...this.checklist };\n  }\n\n  /**\n   * Führt Standard-Checks aus\n   */\n  private executeStandardCheck(checkName: string): boolean {\n    switch (checkName) {\n      case 'step_analysis':\n        return this.checkStepAnalysis();\n        \n      case 'i18n_applied':\n        return this.checkI18nApplied();\n        \n      case 'translations_checked':\n        return this.checkTranslations();\n        \n      case 'tests_passed':\n        return this.checkTestsPassed();\n        \n      case 'code_quality_verified':\n        return this.checkCodeQuality();\n        \n      case 'security_checks_passed':\n        return this.checkSecurityStandards();\n        \n      case 'documentation_updated':\n        return this.checkDocumentationUpdated();\n        \n      case 'all_required_steps_executed':\n        return this.checkAllRequiredStepsExecuted();\n        \n      case 'all_checkpoints_passed':\n        return this.checkAllCheckpointsPassed();\n        \n      case 'no_failed_operations':\n        return this.checkNoFailedOperations();\n        \n      default:\n        this.logVerification(`Unknown standard check: ${checkName}`);\n        return false;\n    }\n  }\n\n  /**\n   * Standard Check Implementierungen\n   */\n  private checkStepAnalysis(): boolean {\n    const registeredSteps = stepRegistry.getRegisteredSteps();\n    const hasRequiredSteps = registeredSteps.length > 0;\n    \n    this.logVerification(`Step analysis: ${registeredSteps.length} steps registered`);\n    return hasRequiredSteps;\n  }\n\n  private checkI18nApplied(): boolean {\n    try {\n      const fs = require('fs');\n      const path = require('path');\n      \n      // Prüfe ob i18n Konfiguration existiert\n      const i18nConfigPaths = [\n        path.join(process.cwd(), 'next-i18next.config.js'),\n        path.join(process.cwd(), 'i18n.config.js'),\n        path.join(process.cwd(), 'public', 'locales')\n      ];\n      \n      const hasI18nConfig = i18nConfigPaths.some(configPath => fs.existsSync(configPath));\n      this.logVerification(`I18n applied: ${hasI18nConfig}`);\n      \n      return hasI18nConfig;\n    } catch (error) {\n      this.logVerification(`I18n check error: ${error}`);\n      return false;\n    }\n  }\n\n  private checkTranslations(): boolean {\n    try {\n      const fs = require('fs');\n      const path = require('path');\n      \n      const localesPath = path.join(process.cwd(), 'public', 'locales');\n      if (!fs.existsSync(localesPath)) {\n        return false;\n      }\n      \n      const languages = fs.readdirSync(localesPath);\n      const hasMultipleLanguages = languages.length >= 2;\n      \n      this.logVerification(`Translations checked: ${languages.length} languages found`);\n      return hasMultipleLanguages;\n    } catch (error) {\n      this.logVerification(`Translation check error: ${error}`);\n      return false;\n    }\n  }\n\n  private checkTestsPassed(): boolean {\n    try {\n      // Mock implementation - in real project würde man npm test ausführen\n      this.logVerification('Tests passed: Mock implementation - assumed passing');\n      return true;\n    } catch (error) {\n      this.logVerification(`Test check error: ${error}`);\n      return false;\n    }\n  }\n\n  private checkCodeQuality(): boolean {\n    try {\n      // Mock implementation - in real project würde man ESLint/Prettier ausführen\n      this.logVerification('Code quality verified: Mock implementation - assumed passing');\n      return true;\n    } catch (error) {\n      this.logVerification(`Code quality check error: ${error}`);\n      return false;\n    }\n  }\n\n  private checkSecurityStandards(): boolean {\n    try {\n      // Mock implementation - in real project würde man npm audit etc. ausführen\n      this.logVerification('Security checks passed: Mock implementation - assumed passing');\n      return true;\n    } catch (error) {\n      this.logVerification(`Security check error: ${error}`);\n      return false;\n    }\n  }\n\n  private checkDocumentationUpdated(): boolean {\n    try {\n      const fs = require('fs');\n      const path = require('path');\n      \n      const readmePath = path.join(process.cwd(), 'README.md');\n      const hasReadme = fs.existsSync(readmePath);\n      \n      this.logVerification(`Documentation updated: README.md exists: ${hasReadme}`);\n      return hasReadme;\n    } catch (error) {\n      this.logVerification(`Documentation check error: ${error}`);\n      return false;\n    }\n  }\n\n  private checkAllRequiredStepsExecuted(): boolean {\n    const validation = stepValidator.validateAllStepsExecuted();\n    this.logVerification(`All required steps executed: ${validation.valid}`);\n    \n    if (!validation.valid) {\n      this.logVerification(`Missing steps: ${validation.missingSteps.join(', ')}`);\n    }\n    \n    return validation.valid;\n  }\n\n  private checkAllCheckpointsPassed(): boolean {\n    const checkpointStatus = checkpointManager.getCheckpointStatus() as any;\n    const allPassed = checkpointStatus.failed === 0 && checkpointStatus.total > 0;\n    \n    this.logVerification(`All checkpoints passed: ${allPassed} (${checkpointStatus.passed}/${checkpointStatus.total})`);\n    return allPassed;\n  }\n\n  private checkNoFailedOperations(): boolean {\n    const allResults = stepRegistry.getAllStepResults();\n    const failedSteps = Array.from(allResults.values()).filter(result => !result.success);\n    const noFailures = failedSteps.length === 0;\n    \n    this.logVerification(`No failed operations: ${noFailures} (${failedSteps.length} failures)`);\n    return noFailures;\n  }\n\n  /**\n   * Generiert vollständigen Verifikations-Report\n   * @RequiredStep: \"generate-verification-report\"\n   */\n  generateVerificationReport(): AgentValidationResult {\n    const validation = stepValidator.validateAllStepsExecuted();\n    const checkpointStatus = checkpointManager.getCheckpointStatus();\n    \n    const allChecksKeys = Object.keys(this.checklist);\n    const passedChecks = allChecksKeys.filter(key => this.checklist[key]);\n    const failedChecks = allChecksKeys.filter(key => !this.checklist[key]);\n    \n    const report: AgentValidationResult = {\n      agentName: 'AI-Agent',\n      timestamp: new Date(),\n      requiredStepsCompleted: validation.valid,\n      pipelineStatus: this.getPipelineStatus(),\n      missingSteps: validation.missingSteps,\n      checklistPassed: failedChecks.length === 0,\n      errors: [\n        ...validation.errors,\n        ...failedChecks.map(check => `Verification check failed: ${check}`)\n      ]\n    };\n\n    // Fail loud wenn kritische Checks fehlschlagen\n    if (!report.checklistPassed && this.isFailLoudEnabled) {\n      this.throwLoudError(`Verification report shows failures: ${failedChecks.join(', ')}`);\n    }\n\n    return report;\n  }\n\n  /**\n   * Exportiert Checkliste als JSON\n   * @RequiredStep: \"export-verification-checklist\"\n   */\n  exportChecklistAsJSON(): string {\n    const exportData = {\n      checklist: this.checklist,\n      verification_results: Array.from(this.verificationResults.entries()),\n      custom_checks: Array.from(this.customChecks.keys()),\n      timestamp: new Date().toISOString(),\n      summary: {\n        total_checks: Object.keys(this.checklist).length,\n        passed_checks: Object.values(this.checklist).filter(v => v).length,\n        failed_checks: Object.values(this.checklist).filter(v => !v).length\n      }\n    };\n\n    return JSON.stringify(exportData, null, 2);\n  }\n\n  /**\n   * Lädt Checkliste aus JSON\n   */\n  importChecklistFromJSON(jsonString: string): void {\n    try {\n      const data = JSON.parse(jsonString);\n      \n      if (data.checklist) {\n        this.checklist = { ...this.checklist, ...data.checklist };\n      }\n      \n      if (data.verification_results) {\n        this.verificationResults = new Map(data.verification_results);\n      }\n      \n      this.logVerification('Checklist imported from JSON');\n    } catch (error) {\n      this.throwLoudError(`Failed to import checklist from JSON: ${error}`);\n    }\n  }\n\n  /**\n   * Erzwingt vollständige Verifikation\n   * @RequiredStep: \"enforce-complete-verification\"\n   */\n  enforceCompleteVerification(): void {\n    this.logVerification('Enforcing complete verification...');\n    \n    const finalChecklist = this.executeAllChecks();\n    const failedChecks = Object.entries(finalChecklist)\n      .filter(([_, passed]) => !passed)\n      .map(([checkName, _]) => checkName);\n\n    if (failedChecks.length > 0) {\n      this.throwLoudError(\n        `🚨 COMPLETE VERIFICATION FAILED!\\n` +\n        `Failed checks: ${failedChecks.join(', ')}\\n` +\n        `All checks must pass before proceeding.`\n      );\n    }\n\n    this.logVerification('✅ Complete verification passed successfully!');\n  }\n\n  /**\n   * Pipeline Status ermitteln\n   */\n  private getPipelineStatus(): string {\n    const totalChecks = Object.keys(this.checklist).length;\n    const passedChecks = Object.values(this.checklist).filter(v => v).length;\n    \n    if (totalChecks === 0) return 'NO_CHECKS';\n    if (passedChecks === 0) return 'NOT_STARTED';\n    if (passedChecks < totalChecks) return 'INCOMPLETE';\n    if (passedChecks === totalChecks) return 'COMPLETE';\n    \n    return 'UNKNOWN';\n  }\n\n  /**\n   * Sichtbarer Fehler (Fail Loudly)\n   */\n  private throwLoudError(message: string): never {\n    const errorMessage = `🚨 VERIFICATION ERROR: ${message}`;\n    \n    if (this.isFailLoudEnabled) {\n      console.error('\\n' + '='.repeat(80));\n      console.error(errorMessage);\n      console.error('='.repeat(80) + '\\n');\n    }\n    \n    throw new Error(errorMessage);\n  }\n\n  /**\n   * Logging für Verifikation\n   */\n  private logVerification(message: string): void {\n    if (this.isFailLoudEnabled) {\n      console.log(`[VerificationManager] ${message}`);\n    }\n  }\n\n  /**\n   * Reset der Verifikation\n   */\n  reset(): void {\n    this.initializeDefaultChecklist();\n    this.verificationResults.clear();\n    this.logVerification('Verification manager reset');\n  }\n\n  /**\n   * Aktuelle Checkliste abrufen\n   */\n  getCurrentChecklist(): VerificationChecklist {\n    return { ...this.checklist };\n  }\n}\n\n/**\n * Globale Verification-Instanz\n */\nexport const verificationManager = new VerificationManager();\n\n/**\n * Utility-Funktionen für häufige Verification-Patterns\n */\nexport const VerificationUtils = {\n  /**\n   * Quick Check für Projekt-Vollständigkeit\n   */\n  quickProjectCheck(): boolean {\n    return verificationManager.executeCheck('all_required_steps_executed') &&\n           verificationManager.executeCheck('all_checkpoints_passed') &&\n           verificationManager.executeCheck('no_failed_operations');\n  },\n\n  /**\n   * I18n Verification Batch\n   */\n  verifyI18nImplementation(): boolean {\n    return verificationManager.executeCheck('i18n_applied') &&\n           verificationManager.executeCheck('translations_checked');\n  },\n\n  /**\n   * Quality Verification Batch\n   */\n  verifyQualityStandards(): boolean {\n    return verificationManager.executeCheck('tests_passed') &&\n           verificationManager.executeCheck('code_quality_verified') &&\n           verificationManager.executeCheck('security_checks_passed');\n  },\n\n  /**\n   * Komplett-Verifikation für Projekt-Abschluss\n   */\n  verifyProjectCompletion(): boolean {\n    try {\n      verificationManager.enforceCompleteVerification();\n      return true;\n    } catch (error) {\n      console.error('Project completion verification failed:', error);\n      return false;\n    }\n  }\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/AchievementAdminScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (98). Maximum allowed is 30.","line":15,"column":57,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":117,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (497). Maximum allowed is 75.","line":83,"column":1,"nodeType":null,"messageId":"exceed","endLine":547,"endColumn":3},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":103,"column":23,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":103,"endColumn":28},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (288). Maximum allowed is 30.","line":126,"column":59,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":434,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 15. Maximum allowed is 10.","line":126,"column":59,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":434,"endColumn":2},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":133,"column":25,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":133,"endColumn":27,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4727,4729],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":134,"column":29,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":134,"endColumn":31,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4762,4764],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":135,"column":43,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":135,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4811,4813],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":136,"column":29,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":136,"endColumn":31,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4846,4848],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":137,"column":37,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":137,"endColumn":39,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4891,4893],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":138,"column":33,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":138,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4939,4941],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":139,"column":37,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":139,"endColumn":39,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4988,4990],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":140,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":140,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5035,5037],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":153,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":153,"endColumn":27},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":157,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":157,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5473,5475],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":165,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":165,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":179,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":179,"endColumn":85},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":188,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":188,"endColumn":45},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (74). Maximum allowed is 30.","line":334,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":411,"endColumn":16},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":335,"column":27,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":335,"endColumn":32},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (94). Maximum allowed is 30.","line":439,"column":49,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":547,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":456,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":456,"endColumn":51},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":461,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":461,"endColumn":50},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":468,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":468,"endColumn":51},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":478,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":478,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":25,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { X } from 'lucide-react';\nimport React, { useState } from 'react';\n\nimport { useAchievementsStore } from '../state/achievements';\nimport { Achievement, AchievementCondition } from '../types/gamification';\nimport { cn } from '../utils/cn';\n\ninterface AchievementCardProps {\n  achievement: Achievement;\n  onEdit: (achievement: Achievement) => void;\n  onDelete: (achievementId: string) => void;\n  onToggleActive: (achievementId: string) => void;\n}\n\nconst AchievementCard: React.FC<AchievementCardProps> = ({\n  achievement,\n  onEdit,\n  onDelete,\n  onToggleActive\n}) => {\n  const { getAchievementStats } = useAchievementsStore();\n  const stats = getAchievementStats(achievement.id);\n\n  const rarityColors = {\n    common: 'from-gray-300 to-gray-500',\n    rare: 'from-blue-300 to-blue-500',\n    epic: 'from-purple-300 to-purple-500',\n    legendary: 'from-yellow-300 to-orange-500'\n  };\n\n  const rarityLabels = {\n    common: 'Häufig',\n    rare: 'Selten',\n    epic: 'Episch',\n    legendary: 'Legendär'\n  };\n\n  return (\n    <div className={cn(\n      \"bg-white rounded-lg border p-6 transition-all\",\n      achievement.isActive ? \"border-gray-200 shadow-sm\" : \"border-gray-100 opacity-75\"\n    )}>\n      <div className=\"flex items-start justify-between mb-4\">\n        <div className=\"flex items-center gap-3\">\n          <div className={cn(\n            \"w-12 h-12 rounded-full flex items-center justify-center text-2xl text-white shadow-md\",\n            `bg-gradient-to-br ${rarityColors[achievement.rarity]}`,\n            !achievement.isActive && \"grayscale\"\n          )}>\n            {achievement.icon}\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-gray-900\">{achievement.name}</h3>\n            <p className=\"text-sm text-gray-600\">{achievement.description}</p>\n            <div className=\"flex items-center gap-2 mt-1\">\n              <span className={cn(\n                \"text-xs px-2 py-1 rounded-full text-white\",\n                `bg-gradient-to-r ${rarityColors[achievement.rarity]}`\n              )}>\n                {rarityLabels[achievement.rarity]}\n              </span>\n              <span className=\"text-xs text-gray-500\">\n                {achievement.xpReward} XP\n              </span>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-sm text-gray-500\">\n            {stats.unlockedCount} / {stats.totalUsers} erreicht\n          </span>\n          <button\n            onClick={() => onToggleActive(achievement.id)}\n            className={cn(\n              \"text-xs px-3 py-1 rounded-full border transition-colors\",\n              achievement.isActive \n                ? \"bg-green-50 text-green-700 border-green-200 hover:bg-green-100\"\n                : \"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100\"\n            )}\n          >\n            {achievement.isActive ? 'Aktiv' : 'Inaktiv'}\n          </button>\n          <button\n            onClick={() => onEdit(achievement)}\n            className=\"text-blue-600 hover:text-blue-800 p-1\"\n          >\n            ✏️\n          </button>\n          <button\n            onClick={() => onDelete(achievement.id)}\n            className=\"text-red-600 hover:text-red-800 p-1\"\n          >\n            🗑️\n          </button>\n        </div>\n      </div>\n      \n      <div className=\"mt-4 pt-4 border-t border-gray-100\">\n        <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Bedingungen:</h4>\n        <div className=\"space-y-1\">\n          {achievement.conditions.map((condition, index) => (\n            <div key={index} className=\"text-sm text-gray-600\">\n              {condition.type === 'xp_earned' && `${condition.target} XP erreichen`}\n              {condition.type === 'training_completed' && `${condition.target} Schulungen abschließen`}\n              {condition.type === 'punctual_checkins' && `${condition.target} pünktliche Check-ins`}\n              {condition.type === 'coins_earned' && `${condition.target} Coins verdienen`}\n              {condition.type === 'level_reached' && `Level ${condition.target} erreichen`}\n              {condition.type === 'feedback_given' && `${condition.target} Feedback geben`}\n              {condition.type === 'consecutive_days' && `${condition.target} aufeinanderfolgende Tage`}\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\ninterface AchievementModalProps {\n  achievement?: Achievement;\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (achievement: Achievement) => void;\n}\n\nconst AchievementModal: React.FC<AchievementModalProps> = ({\n  achievement,\n  isOpen,\n  onClose,\n  onSave\n}) => {\n  const [formData, setFormData] = useState({\n    id: achievement?.id || '',\n    name: achievement?.name || '',\n    description: achievement?.description || '',\n    icon: achievement?.icon || '🏆',\n    category: achievement?.category || 'milestone',\n    rarity: achievement?.rarity || 'common',\n    xpReward: achievement?.xpReward || 50,\n    conditions: achievement?.conditions || [\n      {\n        type: 'xp_earned',\n        target: 1000,\n        operator: 'gte'\n      }\n    ] as AchievementCondition[],\n    isActive: achievement?.isActive ?? true,\n    isHidden: achievement?.isHidden ?? false\n  });\n\n  if (!isOpen) return null;\n\n  const handleSave = () => {\n    const achievementData: Achievement = {\n      ...formData,\n      id: formData.id || `achievement-${Date.now()}`,\n      createdAt: achievement?.createdAt || new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    };\n    \n    onSave(achievementData);\n    onClose();\n  };\n\n  const addCondition = () => {\n    setFormData(prev => ({\n      ...prev,\n      conditions: [\n        ...prev.conditions,\n        {\n          type: 'xp_earned',\n          target: 100,\n          operator: 'gte'\n        }\n      ]\n    }));\n  };\n\n  const updateCondition = (index: number, updates: Partial<AchievementCondition>) => {\n    setFormData(prev => ({\n      ...prev, \n      conditions: prev.conditions.map((condition, i) => \n        i === index ? { ...condition, ...updates } : condition\n      )\n    }));\n  };\n\n  const removeCondition = (index: number) => {\n    setFormData(prev => ({\n      ...prev, \n      conditions: prev.conditions.filter((_, i) => i !== index)\n    }));\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold text-gray-900\">\n            {achievement ? 'Achievement bearbeiten': 'Neues Achievement erstellen'}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 p-1\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Name\n              </label>\n              <input\n                type=\"text\"\n                value={formData.name}\n                onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"z.B. Erster Arbeitstag\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Beschreibung\n              </label>\n              <textarea\n                value={formData.description}\n                onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                rows={3}\n                placeholder=\"Beschreibung des Achievements...\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Icon\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.icon}\n                  onChange={(e) => setFormData(prev => ({ ...prev, icon: e.target.value }))}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"🏆\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  XP Belohnung\n                </label>\n                <input\n                  type=\"number\"\n                  value={formData.xpReward}\n                  onChange={(e) => setFormData(prev => ({ ...prev, xpReward: parseInt(e.target.value) }))}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  min=\"0\"\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Kategorie\n                </label>\n                <select\n                  value={formData.category}\n                  onChange={(e) => setFormData(prev => ({ ...prev, category: e.target.value }))}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  <option value=\"milestone\">Meilenstein</option>\n                  <option value=\"skill\">Fähigkeit</option>\n                  <option value=\"social\">Sozial</option>\n                  <option value=\"special\">Besonders</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Seltenheit\n                </label>\n                <select\n                  value={formData.rarity}\n                  onChange={(e) => setFormData(prev => ({ ...prev, rarity: e.target.value as Achievement['rarity'] }))}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  <option value=\"common\">Häufig</option>\n                  <option value=\"rare\">Selten</option>\n                  <option value=\"epic\">Episch</option>\n                  <option value=\"legendary\">Legendär</option>\n                </select>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-4\">\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  checked={formData.isActive}\n                  onChange={(e) => setFormData(prev => ({ ...prev, isActive: e.target.checked }))}\n                  className=\"mr-2\"\n                />\n                Aktiv\n              </label>\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  checked={formData.isHidden}\n                  onChange={(e) => setFormData(prev => ({ ...prev, isHidden: e.target.checked }))}\n                  className=\"mr-2\"\n                />\n                Versteckt\n              </label>\n            </div>\n          </div>\n\n          <div>\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Bedingungen</h3>\n              <button\n                onClick={addCondition}\n                className=\"bg-blue-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-700\"\n              >\n                + Bedingung\n              </button>\n            </div>\n\n            <div className=\"space-y-4 max-h-96 overflow-y-auto\">\n              {formData.conditions.map((condition, index) => (\n                <div key={index} className=\"border border-gray-200 rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <span className=\"text-sm font-medium text-gray-700\">\n                      Bedingung {index + 1}\n                    </span>\n                    <button\n                      onClick={() => removeCondition(index)}\n                      className=\"text-red-600 hover:text-red-800 text-sm\"\n                    >\n                      Entfernen\n                    </button>\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    <div>\n                      <label className=\"block text-xs text-gray-600 mb-1\">Typ</label>\n                      <select\n                        value={condition.type}\n                        onChange={(e) => updateCondition(index, { type: e.target.value as AchievementCondition['type'] })}\n                        className=\"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      >\n                        <option value=\"xp_earned\">XP erreicht</option>\n                        <option value=\"training_completed\">Schulungen abgeschlossen</option>\n                        <option value=\"punctual_checkins\">Pünktliche Check-ins</option>\n                        <option value=\"coins_earned\">Coins verdient</option>\n                        <option value=\"level_reached\">Level erreicht</option>\n                        <option value=\"feedback_given\">Feedback gegeben</option>\n                        <option value=\"consecutive_days\">Aufeinanderfolgende Tage</option>\n                      </select>\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-2\">\n                      <div>\n                        <label className=\"block text-xs text-gray-600 mb-1\">Operator</label>\n                        <select\n                          value={condition.operator}\n                          onChange={(e) => updateCondition(index, { operator: e.target.value as AchievementCondition['operator'] })}\n                          className=\"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                        >\n                          <option value=\"gte\">≥ (mindestens)</option>\n                          <option value=\"gt\">&gt; (mehr als)</option>\n                          <option value=\"eq\">= (genau)</option>\n                          <option value=\"lt\">&lt; (weniger als)</option>\n                          <option value=\"lte\">≤ (höchstens)</option>\n                        </select>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-xs text-gray-600 mb-1\">Zielwert</label>\n                        <input\n                          type=\"number\"\n                          value={condition.target}\n                          onChange={(e) => updateCondition(index, { target: parseInt(e.target.value) })}\n                          className=\"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                          min=\"0\"\n                        />\n                      </div>\n                    </div>\n\n                    {condition.skillId !== undefined && (\n                      <div>\n                        <label className=\"block text-xs text-gray-600 mb-1\">Skill (optional)</label>\n                        <select\n                          value={condition.skillId || ''}\n                          onChange={(e) => updateCondition(index, { skillId: e.target.value || undefined })}\n                          className=\"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                        >\n                          <option value=\"\">Alle Skills</option>\n                          <option value=\"knowledge\">🧠 Wissen</option>\n                          <option value=\"loyalty\">❤️ Loyalität</option>\n                          <option value=\"hustle\">💪 Hustle</option>\n                        </select>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex gap-3 mt-6 pt-6 border-t\">\n          <button\n            onClick={handleSave}\n            disabled={!formData.name || !formData.description}\n            className=\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed\"\n          >\n            {achievement ? 'Speichern' : 'Erstellen'}\n          </button>\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n          >\n            Abbrechen\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n/**\n * Achievement Admin Screen\n */\nexport const AchievementAdminScreen: React.FC = () => {\n  const { getAchievements, createAchievement, updateAchievement, deleteAchievement, toggleAchievementActive } = useAchievementsStore();\n\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [editingAchievement, setEditingAchievement] = useState<Achievement | undefined>();\n\n  const achievements = getAchievements();\n\n  const filteredAchievements = achievements.filter(achievement => {\n    const matchesCategory = selectedCategory === 'all' || achievement.category === selectedCategory;\n    const matchesSearch = achievement.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         achievement.description.toLowerCase().includes(searchTerm.toLowerCase());\n    return matchesCategory && matchesSearch;\n  });\n\n  const handleEdit = (achievement: Achievement) => {\n    setEditingAchievement(achievement);\n    setShowModal(true);\n  };\n\n  const handleDelete = (achievementId: string) => {\n    // TODO: Replace with proper modal confirmation component\n    // if (window.confirm('Achievement wirklich löschen?')) {\n      deleteAchievement(achievementId);\n    // }\n  };\n\n  const handleSave = (achievement: Achievement) => {\n    if (editingAchievement) {\n      updateAchievement(achievement.id, achievement);\n    } else {\n      createAchievement(achievement);\n    }\n    setShowModal(false);\n    setEditingAchievement(undefined);\n  };\n\n  const handleCloseModal = () => {\n    setShowModal(false);\n    setEditingAchievement(undefined);\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Achievement Verwaltung</h1>\n          <p className=\"text-gray-600\">Verwalte Achievements und Belohnungen</p>\n        </div>\n        <button\n          onClick={() => setShowModal(true)}\n          className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\n        >\n          + Neues Achievement\n        </button>\n      </div>\n\n      <div className=\"flex gap-4 mb-6\">\n        <div className=\"flex-1\">\n          <input\n            type=\"text\"\n            placeholder=\"Achievements durchsuchen...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          />\n        </div>\n        <select\n          value={selectedCategory}\n          onChange={(e) => setSelectedCategory(e.target.value)}\n          className=\"border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n        >\n          <option value=\"all\">Alle Kategorien</option>\n          <option value=\"milestone\">Meilenstein</option>\n          <option value=\"skill\">Fähigkeit</option>\n          <option value=\"social\">Sozial</option>\n          <option value=\"special\">Besonders</option>\n        </select>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\n        {filteredAchievements.map(achievement => (\n          <AchievementCard\n            key={achievement.id}\n            achievement={achievement}\n            onEdit={handleEdit}\n            onDelete={handleDelete}\n            onToggleActive={toggleAchievementActive}\n          />\n        ))}\n      </div>\n\n      {filteredAchievements.length === 0 && (\n        <div className=\"text-center py-12\">\n          <p className=\"text-gray-500\">Keine Achievements gefunden.</p>\n        </div>\n      )}\n\n      <AchievementModal\n        achievement={editingAchievement}\n        isOpen={showModal}\n        onClose={handleCloseModal}\n        onSave={handleSave}\n      />\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/AddEmployeeScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (586). Maximum allowed is 30.","line":11,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":676,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":11,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":11,"endColumn":39},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 28. Maximum allowed is 10.","line":11,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":676,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":57,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":57,"endColumn":92},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (39). Maximum allowed is 30.","line":76,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":129,"endColumn":4},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (26). Maximum allowed is 15.","line":76,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":129,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 18. Maximum allowed is 10.","line":76,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":129,"endColumn":4},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (591). Maximum allowed is 75.","line":113,"column":1,"nodeType":null,"messageId":"exceed","endLine":676,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Async arrow function has too many lines (59). Maximum allowed is 30.","line":134,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":201,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":134,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":134,"endColumn":53},{"ruleId":"complexity","severity":1,"message":"Async arrow function has a complexity of 16. Maximum allowed is 10.","line":134,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":201,"endColumn":4},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":186,"column":16,"nodeType":"Literal","endLine":186,"endColumn":40},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 10 times.","line":240,"column":21,"nodeType":"Literal","endLine":240,"endColumn":109},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 10 times.","line":241,"column":36,"nodeType":"Literal","endLine":241,"endColumn":52},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 10 times.","line":241,"column":55,"nodeType":"Literal","endLine":241,"endColumn":72}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { useAuthStore } from '../state/auth';\nimport { User, EmploymentType, EmploymentStatus, UserRole } from '../types';\nimport { cn } from '../utils/cn';\n\n/**\n * Screen for adding new employees (Admin only)\n */\nexport const AddEmployeeScreen = () => {\n  const navigate = useNavigate();\n  const { createUser, isLoading } = useAuthStore();\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  \n  const [formData, setFormData] = useState({\n    // Required fields\n    email: '',\n    employeeNumber: '',\n    firstName: '',\n    lastName: '',\n    role: 'EMPLOYEE' as UserRole,\n    \n    // Personal details\n    privateEmail: '',\n    phone: '',\n    \n    // Address\n    street: '',\n    postalCode: '',\n    city: '',\n    \n    // Employment details\n    position: '',\n    department: '',\n    weeklyHours: '40',\n    employmentType: 'FULL_TIME' as EmploymentType,\n    employmentTypeCustom: '',\n    employmentStatus: 'ACTIVE' as EmploymentStatus,\n    joinDate: new Date().toISOString().split('T')[0],\n    vacationDays: '30',\n    \n    // Banking (optional)\n    iban: '',\n    bic: '',\n    \n    // Clothing sizes\n    clothingSizeTop: '',\n    clothingSizePants: '',\n    clothingSizeShoes: '',\n  });\n\n  /**\n   * Handle form input changes\n   */\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    \n    // Clear error when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n\n  /**\n   * Validate form data\n   */\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n\n    // Required fields\n    if (!formData.email.trim()) {\n      newErrors.email = 'E-Mail ist erforderlich';\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\n      newErrors.email = 'Ungültige E-Mail-Adresse';\n    }\n\n    if (!formData.employeeNumber.trim()) {\n      newErrors.employeeNumber = 'Personalnummer ist erforderlich';\n    }\n\n    if (!formData.firstName.trim()) {\n      newErrors.firstName = 'Vorname ist erforderlich';\n    }\n\n    if (!formData.lastName.trim()) {\n      newErrors.lastName = 'Nachname ist erforderlich';\n    }\n\n    if (!formData.position.trim()) {\n      newErrors.position = 'Position ist erforderlich';\n    }\n\n    if (!formData.department.trim()) {\n      newErrors.department = 'Abteilung ist erforderlich';\n    }\n\n    // Numeric validations\n    const weeklyHours = parseInt(formData.weeklyHours);\n    if (isNaN(weeklyHours) || weeklyHours < 1 || weeklyHours > 60) {\n      newErrors.weeklyHours = 'Wochenstunden müssen zwischen 1 und 60 liegen';\n    }\n\n    const vacationDays = parseInt(formData.vacationDays);\n    if (isNaN(vacationDays) || vacationDays < 0 || vacationDays > 50) {\n      newErrors.vacationDays = 'Urlaubstage müssen zwischen 0 und 50 liegen';\n    }\n\n    // Employment type custom validation\n    if (formData.employmentType === 'OTHER' && !formData.employmentTypeCustom.trim()) {\n      newErrors.employmentTypeCustom = 'Beschreibung ist erforderlich bei \"Sonstige\"';\n    }\n\n    // IBAN validation (if provided)\n    if (formData.iban && !/^[A-Z]{2}[0-9]{2}[A-Z0-9]{4}[0-9]{7}([A-Z0-9]?){0,16}$/.test(formData.iban.replace(/\\s/g, ''))) {\n      newErrors.iban = 'Ungültige IBAN';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  /**\n   * Handle form submission\n   */\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setIsSubmitting(true);\n    \n    try {\n      // Prepare user data\n      const userData: Omit<User, 'id' | 'organizationId'> = {\n        email: formData.email.trim(),\n        employeeNumber: formData.employeeNumber.trim(),\n        name: `${formData.firstName.trim()} ${formData.lastName.trim()}`,\n        firstName: formData.firstName.trim(),\n        lastName: formData.lastName.trim(),\n        role: formData.role,\n        privateEmail: formData.privateEmail.trim() || undefined,\n        phone: formData.phone.trim() || undefined,\n        position: formData.position.trim(),\n        department: formData.department.trim(),\n        weeklyHours: parseInt(formData.weeklyHours),\n        employmentType: formData.employmentType,\n        employmentTypeCustom: formData.employmentType === 'OTHER' ? formData.employmentTypeCustom.trim() || undefined : undefined,\n        employmentStatus: formData.employmentStatus,\n        joinDate: formData.joinDate,\n        vacationDays: parseInt(formData.vacationDays),\n        address: formData.street.trim() ? {\n          street: formData.street.trim(),\n          postalCode: formData.postalCode.trim(),\n          city: formData.city.trim()\n        } : undefined,\n        bankDetails: formData.iban.trim() ? {\n          iban: formData.iban.trim(),\n          bic: formData.bic.trim() || undefined\n        } : undefined,\n        clothingSizes: (formData.clothingSizeTop.trim() || formData.clothingSizePants.trim() || formData.clothingSizeShoes.trim()) ? {\n          top: formData.clothingSizeTop.trim() || undefined,\n          pants: formData.clothingSizePants.trim() || undefined,\n          shoes: formData.clothingSizeShoes.trim() || undefined\n        } : undefined,\n        coinWallet: 0,\n        coinProgress: 0,\n        level: 1,\n        teamIds: [],\n      };\n\n      // Create user\n      await createUser(userData);\n      \n      // Navigate back to team management with success message\n      navigate('/admin/team-management', { \n        state: { \n          message: `Mitarbeiter ${userData.name} wurde erfolgreich erstellt.`,\n          type: 'success'\n        }\n      });\n      \n    } catch (error) {\n      console.error('Error creating user:', error);\n      setErrors({ \n        submit: 'Fehler beim Erstellen des Mitarbeiters. Bitte versuchen Sie es erneut.' \n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <div className=\"max-w-4xl mx-auto px-6 py-6\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <button \n            onClick={() => navigate('/admin/team-management')}\n            className=\"flex items-center text-blue-600 hover:text-blue-700 transition-colors text-sm font-medium mb-4\"\n          >\n            ← Zurück zum Team Management\n          </button>\n          \n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n            Neuen Mitarbeiter hinzufügen\n          </h1>\n          <p className=\"text-gray-600\">\n            Erstellen Sie ein neues Mitarbeiterkonto mit allen erforderlichen Informationen.\n          </p>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"space-y-8\">\n          {/* Basic Information */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Grundinformationen</h2>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  E-Mail-Adresse *\n                </label>\n                <input\n                  type=\"email\"\n                  name=\"email\"\n                  value={formData.email}\n                  onChange={handleInputChange}\n                  className={cn(\n                    \"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    errors.email ? \"border-red-500\" : \"border-gray-300\"\n                  )}\n                  placeholder=\"max.mustermann@firma.de\"\n                />\n                {errors.email && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.email}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Personalnummer *\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"employeeNumber\"\n                  value={formData.employeeNumber}\n                  onChange={handleInputChange}\n                  className={cn(\n                    \"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    errors.employeeNumber ? \"border-red-500\" : \"border-gray-300\"\n                  )}\n                  placeholder=\"z.B. EMP001\"\n                />\n                {errors.employeeNumber && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.employeeNumber}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Rolle\n                </label>\n                <select\n                  name=\"role\"\n                  value={formData.role}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"EMPLOYEE\">Mitarbeiter</option>\n                  <option value=\"ADMIN\">Administrator</option>\n                  <option value=\"SUPERADMIN\">Super Administrator</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Vorname *\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"firstName\"\n                  value={formData.firstName}\n                  onChange={handleInputChange}\n                  className={cn(\n                    \"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    errors.firstName ? \"border-red-500\" : \"border-gray-300\"\n                  )}\n                  placeholder=\"Max\"\n                />\n                {errors.firstName && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.firstName}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Nachname *\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"lastName\"\n                  value={formData.lastName}\n                  onChange={handleInputChange}\n                  className={cn(\n                    \"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    errors.lastName ? \"border-red-500\" : \"border-gray-300\"\n                  )}\n                  placeholder=\"Mustermann\"\n                />\n                {errors.lastName && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.lastName}</p>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Contact Information */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Kontaktinformationen</h2>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Private E-Mail\n                </label>\n                <input\n                  type=\"email\"\n                  name=\"privateEmail\"\n                  value={formData.privateEmail}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"max.privat@gmail.com\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Telefon\n                </label>\n                <input\n                  type=\"tel\"\n                  name=\"phone\"\n                  value={formData.phone}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"+49 30 12345678\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Straße und Hausnummer\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"street\"\n                  value={formData.street}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Musterstraße 123\"\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    PLZ\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"postalCode\"\n                    value={formData.postalCode}\n                    onChange={handleInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"12345\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Stadt\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"city\"\n                    value={formData.city}\n                    onChange={handleInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"Berlin\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Employment Details */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Beschäftigungsdetails</h2>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Position *\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"position\"\n                  value={formData.position}\n                  onChange={handleInputChange}\n                  className={cn(\n                    \"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    errors.position ? \"border-red-500\" : \"border-gray-300\"\n                  )}\n                  placeholder=\"Senior Developer\"\n                />\n                {errors.position && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.position}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Abteilung *\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"department\"\n                  value={formData.department}\n                  onChange={handleInputChange}\n                  className={cn(\n                    \"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    errors.department ? \"border-red-500\" : \"border-gray-300\"\n                  )}\n                  placeholder=\"IT\"\n                />\n                {errors.department && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.department}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Wochenstunden\n                </label>\n                <input\n                  type=\"number\"\n                  name=\"weeklyHours\"\n                  value={formData.weeklyHours}\n                  onChange={handleInputChange}\n                  min=\"1\"\n                  max=\"60\"\n                  className={cn(\n                    \"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    errors.weeklyHours ? \"border-red-500\" : \"border-gray-300\"\n                  )}\n                />\n                {errors.weeklyHours && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.weeklyHours}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Beschäftigungsart\n                </label>\n                <select\n                  name=\"employmentType\"\n                  value={formData.employmentType}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"FULL_TIME\">Vollzeit</option>\n                  <option value=\"PART_TIME\">Teilzeit</option>\n                  <option value=\"MINI_JOB\">Minijob</option>\n                  <option value=\"INTERN\">Praktikant</option>\n                  <option value=\"OTHER\">Sonstige</option>\n                </select>\n                \n                {/* Freitextfeld für \"Sonstige\" */}\n                {formData.employmentType === 'OTHER' && (\n                  <div className=\"mt-3\">\n                    <input\n                      type=\"text\"\n                      name=\"employmentTypeCustom\"\n                      value={formData.employmentTypeCustom}\n                      onChange={handleInputChange}\n                      placeholder=\"Bitte spezifizieren...\"\n                      className={cn(\n                        \"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                        errors.employmentTypeCustom ? \"border-red-500\" : \"border-gray-300\"\n                      )}\n                    />\n                    {errors.employmentTypeCustom && (\n                      <p className=\"mt-1 text-sm text-red-600\">{errors.employmentTypeCustom}</p>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Eintrittsdatum\n                </label>\n                <input\n                  type=\"date\"\n                  name=\"joinDate\"\n                  value={formData.joinDate}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Urlaubstage pro Jahr\n                </label>\n                <input\n                  type=\"number\"\n                  name=\"vacationDays\"\n                  value={formData.vacationDays}\n                  onChange={handleInputChange}\n                  min=\"0\"\n                  max=\"50\"\n                  className={cn(\n                    \"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    errors.vacationDays ? \"border-red-500\" : \"border-gray-300\"\n                  )}\n                />\n                {errors.vacationDays && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.vacationDays}</p>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Banking Information */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Bankverbindung (Optional)</h2>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  IBAN\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"iban\"\n                  value={formData.iban}\n                  onChange={handleInputChange}\n                  className={cn(\n                    \"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    errors.iban ? \"border-red-500\" : \"border-gray-300\"\n                  )}\n                  placeholder=\"DE89 3704 0044 0532 0130 00\"\n                />\n                {errors.iban && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.iban}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  BIC\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"bic\"\n                  value={formData.bic}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"COBADEFFXXX\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Clothing Sizes */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Arbeitskleidung Größen (Optional)</h2>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Oberteil\n                </label>\n                <select\n                  name=\"clothingSizeTop\"\n                  value={formData.clothingSizeTop}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"\">Bitte wählen</option>\n                  <option value=\"XS\">XS</option>\n                  <option value=\"S\">S</option>\n                  <option value=\"M\">M</option>\n                  <option value=\"L\">L</option>\n                  <option value=\"XL\">XL</option>\n                  <option value=\"XXL\">XXL</option>\n                  <option value=\"XXXL\">XXXL</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Hose\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"clothingSizePants\"\n                  value={formData.clothingSizePants}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"z.B. 32, W32/L34\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Schuhe\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"clothingSizeShoes\"\n                  value={formData.clothingSizeShoes}\n                  onChange={handleInputChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"z.B. 42, 9.5\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Error Message */}\n          {errors.submit && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n              <p className=\"text-red-600\">{errors.submit}</p>\n            </div>\n          )}\n\n          {/* Submit Buttons */}\n          <div className=\"flex justify-end gap-4 pt-6\">\n            <button\n              type=\"button\"\n              onClick={() => navigate('/admin/team-management')}\n              className=\"px-6 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors\"\n              disabled={isSubmitting}\n            >\n              Abbrechen\n            </button>\n            <button\n              type=\"submit\"\n              disabled={isSubmitting || isLoading}\n              className={cn(\n                \"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium transition-colors\",\n                \"hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\",\n                (isSubmitting || isLoading) && \"opacity-50 cursor-not-allowed\"\n              )}\n            >\n              {isSubmitting || isLoading ? 'Erstelle Mitarbeiter...' : 'Mitarbeiter erstellen'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/AdminCoinsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":3,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":3,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nexport const AdminCoinsScreen = () => {\n  return (\n    <div className=\"flex-1 bg-gray-50 p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">Coins verwalten</h1>\n      <p>Coming soon...</p>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/AdminScreen.backup.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":15,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":33,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":33,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":51,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":51,"endColumn":39},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (80). Maximum allowed is 30.","line":72,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":155,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":72,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":72,"endColumn":69},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (182). Maximum allowed is 75.","line":88,"column":1,"nodeType":null,"messageId":"exceed","endLine":207,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (42). Maximum allowed is 30.","line":160,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":207,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":160,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":160,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Routes, Route, Link, useLocation, Navigate } from 'react-router-dom';\n\nimport { useAuthStore } from '../state/auth';\nimport { cn } from '../utils/cn';\n\n// Import existing and new admin components\nimport { AddEmployeeScreen } from './AddEmployeeScreen';\nimport { DashboardInfoAdminScreen } from './DashboardInfoAdminScreen';\nimport { TeamManagementScreen } from './TeamManagementScreen';\nimport { TeamMemberDetailsScreen } from './TeamMemberDetailsScreen';\nimport { TeamsOverviewScreen } from './TeamsOverviewScreen';\n\n// Placeholder components for new admin sections\nconst OrganigramScreen = () => (\n  <div className=\"flex-1 bg-gray-50 min-h-screen\">\n    <div className=\"max-w-7xl mx-auto px-6 py-6\">\n      <h1 className=\"text-3xl font-bold text-gray-900 mb-6\">Organigram</h1>\n      <div className=\"bg-white rounded-xl shadow-sm p-8 text-center\">\n        <div className=\"text-6xl mb-4\">🏢</div>\n        <h2 className=\"text-xl font-semibold text-gray-700 mb-2\">Organisationsstruktur</h2>\n        <p className=\"text-gray-600\">\n          Hier wird eine visualisierte Darstellung der Teamstruktur und Hierarchie angezeigt.\n        </p>\n        <div className=\"mt-6 text-sm text-gray-500\">\n          Feature wird in Kürze verfügbar sein.\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nconst AvatarManagementScreen = () => (\n  <div className=\"flex-1 bg-gray-50 min-h-screen\">\n    <div className=\"max-w-7xl mx-auto px-6 py-6\">\n      <h1 className=\"text-3xl font-bold text-gray-900 mb-6\">Avatarverwaltung</h1>\n      <div className=\"bg-white rounded-xl shadow-sm p-8 text-center\">\n        <div className=\"text-6xl mb-4\">🎮</div>\n        <h2 className=\"text-xl font-semibold text-gray-700 mb-2\">Gamification Management</h2>\n        <p className=\"text-gray-600\">\n          Verwalten Sie Level, Ränge, Achievements und Avatare für das Mitarbeiter-Gamification-System.\n        </p>\n        <div className=\"mt-6 text-sm text-gray-500\">\n          Feature wird in Kürze verfügbar sein.\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nconst BenefitsManagementScreen = () => (\n  <div className=\"flex-1 bg-gray-50 min-h-screen\">\n    <div className=\"max-w-7xl mx-auto px-6 py-6\">\n      <h1 className=\"text-3xl font-bold text-gray-900 mb-6\">Benefitsverwaltung</h1>\n      <div className=\"bg-white rounded-xl shadow-sm p-8 text-center\">\n        <div className=\"text-6xl mb-4\">💎</div>\n        <h2 className=\"text-xl font-semibold text-gray-700 mb-2\">Benefits & Coin-System</h2>\n        <p className=\"text-gray-600\">\n          Verwalten Sie alle Benefit-Angebote und konfigurieren Sie das Coin-System.\n        </p>\n        <div className=\"mt-6 text-sm text-gray-500\">\n          Feature wird in Kürze verfügbar sein.\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\n/**\n * Admin Layout mit Submenu\n */\nconst AdminLayout = ({ children }: { children: React.ReactNode }) => {\n  const location = useLocation();\n  \n  const adminTabs = [\n    { \n      path: '/admin/team-management', \n      label: 'Teamverwaltung', \n      icon: '👥',\n      description: 'Mitarbeiter-Teams und Lead-Zuordnung'\n    },\n    { \n      path: '/admin/organigram', \n      label: 'Organigram', \n      icon: '🏢',\n      description: 'Visualisierte Teamstruktur'\n    },\n    { \n      path: '/admin/avatar-management', \n      label: 'Avatarverwaltung', \n      icon: '🎮',\n      description: 'Level, Achievements & Gamification'\n    },\n    { \n      path: '/admin/benefits-management', \n      label: 'Benefitsverwaltung', \n      icon: '💎',\n      description: 'Benefits & Coin-System'\n    },\n    { \n      path: '/admin/dashboard-info', \n      label: 'Dashboard Mitteilungen', \n      icon: '📢',\n      description: 'Nachrichten und Ankündigungen'\n    },\n  ];\n\n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <div className=\"max-w-7xl mx-auto px-6 py-6\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Administration</h1>\n          <p className=\"text-gray-600\">Verwaltung von Teams, Mitarbeitern und System-Einstellungen</p>\n        </div>\n\n        {/* Admin Navigation Tabs */}\n        <div className=\"bg-white rounded-xl shadow-sm mb-6\">\n          <div className=\"border-b border-gray-200\">\n            <nav className=\"flex space-x-8 px-6\" aria-label=\"Admin Navigation\">\n              {adminTabs.map((tab) => {\n                const isActive = location.pathname.startsWith(tab.path);\n                return (\n                  <Link\n                    key={tab.path}\n                    to={tab.path}\n                    className={cn(\n                      \"flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors\",\n                      isActive\n                        ? \"border-blue-500 text-blue-600\"\n                        : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n                    )}\n                  >\n                    <span className=\"text-lg mr-2\">{tab.icon}</span>\n                    <div className=\"flex flex-col\">\n                      <span>{tab.label}</span>\n                      <span className=\"text-xs text-gray-400 font-normal\">\n                        {tab.description}\n                      </span>\n                    </div>\n                  </Link>\n                );\n              })}\n            </nav>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"min-h-[400px]\">\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n/**\n * Admin Screen mit Routing\n */\nexport const AdminScreen = () => {\n  const { user } = useAuthStore();\n  \n  // Check if user is admin\n  const isAdmin = user?.role === 'ADMIN' || user?.role === 'SUPERADMIN';\n  \n  if (!isAdmin) {\n    return <Navigate to=\"/dashboard\" replace />;\n  }\n\n  return (\n    <Routes>\n      <Route path=\"/\" element={<Navigate to=\"/admin/team-management\" replace />} />\n      \n      {/* Team Management Routes */}\n      <Route path=\"/team-management\" element={\n        <AdminLayout>\n          <TeamManagementScreen />\n        </AdminLayout>\n      } />\n      <Route path=\"/team-management/add-employee\" element={<AddEmployeeScreen />} />\n      <Route path=\"/team-management/user/:userId\" element={<TeamMemberDetailsScreen />} />\n      <Route path=\"/team-management/teams\" element={<TeamsOverviewScreen />} />\n      \n      {/* New Admin Routes */}\n      <Route path=\"/organigram\" element={\n        <AdminLayout>\n          <OrganigramScreen />\n        </AdminLayout>\n      } />\n      <Route path=\"/avatar-management\" element={\n        <AdminLayout>\n          <AvatarManagementScreen />\n        </AdminLayout>\n      } />\n      <Route path=\"/benefits-management\" element={\n        <AdminLayout>\n          <BenefitsManagementScreen />\n        </AdminLayout>\n      } />\n      <Route path=\"/dashboard-info\" element={\n        <AdminLayout>\n          <DashboardInfoAdminScreen />\n        </AdminLayout>\n      } />\n    </Routes>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/AdminScreen.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":17,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":17,"endColumn":31},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (80). Maximum allowed is 30.","line":40,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":123,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":40,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":40,"endColumn":69},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (162). Maximum allowed is 75.","line":90,"column":1,"nodeType":null,"messageId":"exceed","endLine":187,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (54). Maximum allowed is 30.","line":128,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":187,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":128,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":128,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Routes, Route, Link, useLocation, Navigate } from 'react-router-dom';\n\nimport { useAuthStore } from '../state/auth';\nimport { cn } from '../utils/cn';\n\n// Import existing and new admin components\nimport { AddEmployeeScreen } from './AddEmployeeScreen';\nimport { AvatarSystemAdminScreen } from './AvatarSystemAdminScreen';\nimport { BenefitsScreen } from './BenefitsScreen';\nimport { DashboardInfoAdminScreen } from './DashboardInfoAdminScreen';\nimport { TeamManagementScreen } from './TeamManagementScreen';\nimport { TeamMemberDetailsScreen } from './TeamMemberDetailsScreen';\nimport { TeamsOverviewScreen } from './TeamsOverviewScreen';\n\n// Placeholder components for new admin sections\nconst OrganigramScreen = () => (\n  <div className=\"flex-1 bg-gray-50 min-h-screen\">\n    <div className=\"max-w-7xl mx-auto px-6 py-6\">\n      <h1 className=\"text-3xl font-bold text-gray-900 mb-6\">Organigram</h1>\n      <div className=\"bg-white rounded-xl shadow-sm p-8 text-center\">\n        <div className=\"text-6xl mb-4\">🏢</div>\n        <h2 className=\"text-xl font-semibold text-gray-700 mb-2\">Organisationsstruktur</h2>\n        <p className=\"text-gray-600\">\n          Hier wird eine visualisierte Darstellung der Teamstruktur und Hierarchie angezeigt.\n        </p>\n        <div className=\"mt-6 text-sm text-gray-500\">\n          Feature wird in Kürze verfügbar sein.\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\n\n\n/**\n * Admin Layout mit Submenu\n */\nconst AdminLayout = ({ children }: { children: React.ReactNode }) => {\n  const location = useLocation();\n  \n  const adminTabs = [\n    { \n      path: '/admin/team-management', \n      label: 'Teamverwaltung', \n      icon: '👥',\n      description: 'Mitarbeiter-Teams und Lead-Zuordnung'\n    },\n    { \n      path: '/admin/organigram', \n      label: 'Organigram', \n      icon: '🏢',\n      description: 'Visualisierte Teamstruktur'\n    },\n    { \n      path: '/admin/avatar-management', \n      label: 'Avatarverwaltung', \n      icon: '🎮',\n      description: 'Level, Achievements & Gamification'\n    },\n    { \n      path: '/admin/benefits-management', \n      label: 'Benefitsverwaltung', \n      icon: '💎',\n      description: 'Benefits & Coin-System'\n    },\n    { \n      path: '/admin/dashboard-info', \n      label: 'Dashboard Mitteilungen', \n      icon: '📢',\n      description: 'Nachrichten und Ankündigungen'\n    },\n  ];\n\n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <div className=\"max-w-7xl mx-auto px-6 py-6\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Administration</h1>\n          <p className=\"text-gray-600\">Verwaltung von Teams, Mitarbeitern und System-Einstellungen</p>\n        </div>\n\n        {/* Admin Navigation Tabs */}\n        <div className=\"bg-white rounded-xl shadow-sm mb-6\">\n          <div className=\"border-b border-gray-200\">\n            <nav className=\"flex space-x-8 px-6\" aria-label=\"Admin Navigation\">\n              {adminTabs.map((tab) => {\n                const isActive = location.pathname.startsWith(tab.path);\n                return (\n                  <Link\n                    key={tab.path}\n                    to={tab.path}\n                    className={cn(\n                      \"flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors\",\n                      isActive\n                        ? \"border-blue-500 text-blue-600\"\n                        : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n                    )}\n                  >\n                    <span className=\"text-lg mr-2\">{tab.icon}</span>\n                    <div className=\"flex flex-col\">\n                      <span>{tab.label}</span>\n                      <span className=\"text-xs text-gray-400 font-normal\">\n                        {tab.description}\n                      </span>\n                    </div>\n                  </Link>\n                );\n              })}\n            </nav>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"min-h-[400px]\">\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n/**\n * Admin Screen mit Routing\n */\nexport const AdminScreen = () => {\n  const { user } = useAuthStore();\n  \n  // Check if user is admin\n  const isAdmin = user?.role === 'ADMIN' || user?.role === 'SUPERADMIN';\n  \n  if (!isAdmin) {\n    return <Navigate to=\"/dashboard\" replace />;\n  }\n\n  return (\n    <Routes>\n      <Route path=\"/\" element={<Navigate to=\"/admin/team-management\" replace />} />\n      \n      {/* Team Management Routes */}\n      <Route path=\"/team-management\" element={\n        <AdminLayout>\n          <TeamManagementScreen />\n        </AdminLayout>\n      } />\n      <Route path=\"/team-management/add-employee\" element={\n        <AdminLayout>\n          <AddEmployeeScreen />\n        </AdminLayout>\n      } />\n      <Route path=\"/team-management/user/:userId\" element={\n        <AdminLayout>\n          <TeamMemberDetailsScreen />\n        </AdminLayout>\n      } />\n      <Route path=\"/team-management/teams\" element={\n        <AdminLayout>\n          <TeamsOverviewScreen />\n        </AdminLayout>\n      } />\n      \n      {/* New Admin Routes */}\n      <Route path=\"/organigram\" element={\n        <AdminLayout>\n          <OrganigramScreen />\n        </AdminLayout>\n      } />\n      <Route path=\"/avatar-management\" element={\n        <AdminLayout>\n          <AvatarSystemAdminScreen />\n        </AdminLayout>\n      } />\n      <Route path=\"/benefits-management\" element={\n        <AdminLayout>\n          <BenefitsScreen />\n        </AdminLayout>\n      } />\n      <Route path=\"/dashboard-info\" element={\n        <AdminLayout>\n          <DashboardInfoAdminScreen />\n        </AdminLayout>\n      } />\n    </Routes>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/AvatarSystemAdminScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (53). Maximum allowed is 30.","line":15,"column":53,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":68,"endColumn":2},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":28,"column":70,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":28,"endColumn":72,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1147,1149],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (152). Maximum allowed is 30.","line":76,"column":57,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":240,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (491). Maximum allowed is 75.","line":83,"column":1,"nodeType":null,"messageId":"exceed","endLine":530,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":87,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":87,"endColumn":30},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (270). Maximum allowed is 30.","line":246,"column":50,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":530,"endColumn":2},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":377,"column":23,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":380,"endColumn":36},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":378,"column":23,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":380,"endColumn":36},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":523,"column":32,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":523,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[21374,21376],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\n\nimport { useAchievementsStore } from '../state/achievements';\nimport { useAvatarStore } from '../state/avatar';\nimport { useGamificationStore } from '../state/gamification';\nimport { UserAvatar, Skill } from '../types/avatar';\nimport { cn } from '../utils/cn';\n\ninterface UserAvatarRowProps {\n  userId: string;\n  userAvatar: UserAvatar;\n  onManageUser: (userId: string) => void;\n}\n\nconst UserAvatarRow: React.FC<UserAvatarRowProps> = ({ userId, userAvatar, onManageUser }) => {\n  const { getUnlockedAchievements } = useAchievementsStore();\n  const unlockedAchievements = getUnlockedAchievements(userId);\n\n  return (\n    <tr className=\"hover:bg-gray-50\">\n      <td className=\"px-6 py-4 whitespace-nowrap\">\n        <div className=\"flex items-center\">\n          <div className=\"w-10 h-10 bg-gradient-to-br from-gray-300 to-gray-500 rounded-full flex items-center justify-center text-white\">\n            👤\n          </div>\n          <div className=\"ml-4\">\n            <div className=\"text-sm font-medium text-gray-900\">User {userId}</div>\n            <div className=\"text-sm text-gray-500\">{userAvatar.title || 'Kein Titel'}</div>\n          </div>\n        </div>\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap\">\n        <div className=\"flex items-center\">\n          <div className=\"bg-gradient-to-r from-cyan-400 to-cyan-600 text-white text-xs px-2 py-1 rounded-full font-bold\">\n            {userAvatar.level}\n          </div>\n        </div>\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n        {userAvatar.totalXP.toLocaleString()} XP\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap\">\n        <div className=\"flex gap-1\">\n          {userAvatar.skills.map((skill: Skill) => (\n            <div\n              key={skill.id}\n              className=\"flex items-center gap-1 text-xs bg-gray-100 px-2 py-1 rounded-full\"\n            >\n              <span>{skill.icon}</span>\n              <span>L{skill.level}</span>\n            </div>\n          ))}\n        </div>\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n        {unlockedAchievements.length}\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n        <button\n          onClick={() => onManageUser(userId)}\n          className=\"text-blue-600 hover:text-blue-900\"\n        >\n          Verwalten\n        </button>\n      </td>\n    </tr>\n  );\n};\n\ninterface ManageUserModalProps {\n  userId: string;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst ManageUserModal: React.FC<ManageUserModalProps> = ({ userId, isOpen, onClose }) => {\n  const { getUserAvatar } = useAvatarStore();\n  const { awardXP } = useGamificationStore();\n  const [xpAmount, setXpAmount] = useState('50');\n  const [xpReason, setXpReason] = useState('');\n  const [selectedSkill, setSelectedSkill] = useState('');\n\n  const userAvatar = getUserAvatar(userId);\n\n  if (!isOpen || !userAvatar) return null;\n\n  const handleAwardXP = () => {\n    if (!xpAmount || !xpReason) return;\n    \n    awardXP({\n      type: 'manual',\n      userId,\n      skillIds: selectedSkill ? [selectedSkill] : undefined,\n      xpAmount: parseInt(xpAmount),\n      metadata: { reason: xpReason }\n    });\n\n    setXpAmount('50');\n    setXpReason('');\n    setSelectedSkill('');\n    onClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold text-gray-900\">\n            Benutzer verwalten: User {userId}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600\"\n          >\n            ✕\n          </button>\n        </div>\n\n        {/* Current Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n          <div className=\"bg-blue-50 p-4 rounded-lg\">\n            <div className=\"text-2xl font-bold text-blue-600\">{userAvatar.level}</div>\n            <div className=\"text-sm text-blue-700\">Avatar Level</div>\n          </div>\n          <div className=\"bg-green-50 p-4 rounded-lg\">\n            <div className=\"text-2xl font-bold text-green-600\">\n              {userAvatar.totalXP.toLocaleString()}\n            </div>\n            <div className=\"text-sm text-green-700\">Gesamt XP</div>\n          </div>\n          <div className=\"bg-purple-50 p-4 rounded-lg\">\n            <div className=\"text-2xl font-bold text-purple-600\">\n              {userAvatar.skills.reduce((sum, skill) => sum + skill.level, 0)}\n            </div>\n            <div className=\"text-sm text-purple-700\">Skill Level</div>\n          </div>\n        </div>\n\n        {/* Skills Overview */}\n        <div className=\"mb-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">Skills</h3>\n          <div className=\"space-y-3\">\n            {userAvatar.skills.map((skill: Skill) => (\n              <div key={skill.id} className=\"flex items-center gap-4\">\n                <span className=\"text-xl\">{skill.icon}</span>\n                <div className=\"flex-1\">\n                  <div className=\"flex justify-between items-center mb-1\">\n                    <span className=\"font-medium\">{skill.name}</span>\n                    <span className=\"text-sm text-gray-600\">Level {skill.level}</span>\n                  </div>\n                  <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                    <div\n                      className=\"h-2 rounded-full\"\n                      style={{\n                        width: `${Math.min(100, (skill.totalXP / Math.max(100, skill.totalXP)) * 60 + 40)}%`,\n                        backgroundColor: skill.color\n                      }}\n                    />\n                  </div>\n                  <div className=\"text-xs text-gray-500 mt-1\">\n                    {skill.totalXP} XP\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Award XP Section */}\n        <div className=\"border-t pt-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">XP vergeben</h3>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                XP Menge\n              </label>\n              <input\n                type=\"number\"\n                value={xpAmount}\n                onChange={(e) => setXpAmount(e.target.value)}\n                className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"50\"\n                min=\"1\"\n                max=\"1000\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Skill (optional)\n              </label>\n              <select\n                value={selectedSkill}\n                onChange={(e) => setSelectedSkill(e.target.value)}\n                className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"\">Allgemein (alle Skills)</option>\n                {userAvatar.skills.map((skill: Skill) => (\n                  <option key={skill.id} value={skill.id}>\n                    {skill.icon} {skill.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Grund\n              </label>\n              <input\n                type=\"text\"\n                value={xpReason}\n                onChange={(e) => setXpReason(e.target.value)}\n                className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"z.B. Hervorragende Leistung\"\n              />\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={handleAwardXP}\n                disabled={!xpAmount || !xpReason}\n                className=\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed\"\n              >\n                XP vergeben\n              </button>\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n              >\n                Schließen\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n/**\n * Avatar System Admin Screen\n * Main management interface for the avatar and gamification system\n */\nexport const AvatarSystemAdminScreen: React.FC = () => {\n  const { getAllUserAvatars } = useAvatarStore();\n  const { config, updateConfig, getLeaderboard } = useGamificationStore();\n  const [selectedTab, setSelectedTab] = useState('users');\n  const [selectedUser, setSelectedUser] = useState<string | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const allUserAvatars = getAllUserAvatars();\n  const leaderboard = getLeaderboard(undefined, 20);\n\n  const filteredUsers = allUserAvatars.filter(avatar => \n    avatar.userId.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const tabs = [\n    { id: 'users', name: 'Benutzer', icon: '👥' },\n    { id: 'leaderboard', name: 'Rangliste', icon: '🏆' },\n    { id: 'config', name: 'Konfiguration', icon: '⚙️' },\n    { id: 'statistics', name: 'Statistiken', icon: '📊' }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-6\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n            👤 Avatarsystem Verwaltung\n          </h1>\n          <p className=\"text-gray-600\">\n            Verwalte Benutzer-Avatare, XP-System und Achievements\n          </p>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"border-b border-gray-200 mb-6\">\n          <nav className=\"-mb-px flex space-x-8\">\n            {tabs.map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setSelectedTab(tab.id)}\n                className={cn(\n                  \"py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap\",\n                  selectedTab === tab.id\n                    ? \"border-blue-500 text-blue-600\"\n                    : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n                )}\n              >\n                <span className=\"mr-2\">{tab.icon}</span>\n                {tab.name}\n              </button>\n            ))}\n          </nav>\n        </div>\n\n        {/* Content */}\n        {selectedTab === 'users' && (\n          <div>\n            {/* Search and Actions */}\n            <div className=\"flex justify-between items-center mb-6\">\n              <div className=\"flex-1 max-w-md\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Benutzer suchen...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n              <div className=\"flex gap-3\">\n                <button className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\">\n                  Bulk XP vergeben\n                </button>\n              </div>\n            </div>\n\n            {/* Users Table */}\n            <div className=\"bg-white shadow rounded-lg overflow-hidden\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Benutzer\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Level\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      XP\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Skills\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Achievements\n                    </th>\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Aktionen\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {filteredUsers.map((userAvatar) => (\n                    <UserAvatarRow\n                      key={userAvatar.userId}\n                      userId={userAvatar.userId}\n                      userAvatar={userAvatar}\n                      onManageUser={setSelectedUser}\n                    />\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n\n        {selectedTab === 'leaderboard' && (\n          <div className=\"bg-white shadow rounded-lg p-6\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-6\">🏆 Rangliste</h2>\n            <div className=\"space-y-4\">\n              {leaderboard.map((entry, index) => (\n                <div\n                  key={entry.userId}\n                  className={cn(\n                    \"flex items-center justify-between p-4 rounded-lg\",\n                    index < 3 ? \"bg-gradient-to-r from-yellow-50 to-orange-50\" : \"bg-gray-50\"\n                  )}\n                >\n                  <div className=\"flex items-center gap-4\">\n                    <div className={cn(\n                      \"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold\",\n                      index === 0 ? \"bg-yellow-500\" :\n                      index === 1 ? \"bg-gray-400\" :\n                      index === 2 ? \"bg-orange-600\" :\n                      \"bg-gray-300\"\n                    )}>\n                      {index + 1}\n                    </div>\n                    <div>\n                      <p className=\"font-semibold text-gray-900\">{entry.userName}</p>\n                      <p className=\"text-sm text-gray-600\">Level {entry.level}</p>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"font-bold text-gray-900\">{entry.xp.toLocaleString()} XP</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {selectedTab === 'config' && (\n          <div className=\"bg-white shadow rounded-lg p-6\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-6\">⚙️ Konfiguration</h2>\n            \n            <div className=\"space-y-6\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">XP Raten</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Schulung abgeschlossen\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={config.xpRates.trainingCompleted}\n                      onChange={(e) => updateConfig({\n                        xpRates: { ...config.xpRates, trainingCompleted: parseInt(e.target.value) }\n                      })}\n                      className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Pünktlich gestempelt\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={config.xpRates.punctualCheckin}\n                      onChange={(e) => updateConfig({\n                        xpRates: { ...config.xpRates, punctualCheckin: parseInt(e.target.value) }\n                      })}\n                      className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Feedback gegeben\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={config.xpRates.feedbackGiven}\n                      onChange={(e) => updateConfig({\n                        xpRates: { ...config.xpRates, feedbackGiven: parseInt(e.target.value) }\n                      })}\n                      className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Täglicher Login\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={config.xpRates.dailyLogin}\n                      onChange={(e) => updateConfig({\n                        xpRates: { ...config.xpRates, dailyLogin: parseInt(e.target.value) }\n                      })}\n                      className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                </div>\n              </div>\n\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Level Einstellungen</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Basis XP pro Level\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={config.levelSystem.baseXP}\n                      onChange={(e) => updateConfig({\n                        levelSystem: { ...config.levelSystem, baseXP: parseInt(e.target.value) }\n                      })}\n                      className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Multiplikator pro Level (%)\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={config.levelSystem.multiplier * 100}\n                      onChange={(e) => updateConfig({\n                        levelSystem: { ...config.levelSystem, multiplier: parseInt(e.target.value) / 100 }\n                      })}\n                      className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {selectedTab === 'statistics' && (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            <div className=\"bg-white shadow rounded-lg p-6\">\n              <div className=\"text-3xl font-bold text-blue-600 mb-2\">\n                {allUserAvatars.reduce((sum, avatar) => sum + avatar.totalXP, 0).toLocaleString()}\n              </div>\n              <div className=\"text-sm text-gray-600\">Gesamt XP</div>\n            </div>\n            \n            <div className=\"bg-white shadow rounded-lg p-6\">\n              <div className=\"text-3xl font-bold text-purple-600 mb-2\">\n                {Math.round(allUserAvatars.reduce((sum, avatar) => sum + avatar.level, 0) / Math.max(1, allUserAvatars.length))}\n              </div>\n              <div className=\"text-sm text-gray-600\">Ø Level</div>\n            </div>\n            \n            <div className=\"bg-white shadow rounded-lg p-6\">\n              <div className=\"text-3xl font-bold text-orange-600 mb-2\">\n                {allUserAvatars.reduce((sum, avatar) => sum + avatar.skills.reduce((skillSum, skill) => skillSum + skill.level, 0), 0)}\n              </div>\n              <div className=\"text-sm text-gray-600\">Gesamt Skill Level</div>\n            </div>\n          </div>\n        )}\n\n        {/* Manage User Modal */}\n        <ManageUserModal\n          userId={selectedUser || ''}\n          isOpen={!!selectedUser}\n          onClose={() => setSelectedUser(null)}\n        />\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/BenefitsScreen.backup.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (1061). Maximum allowed is 30.","line":19,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":1229,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":19,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":19,"endColumn":36},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (53). Maximum allowed is 15.","line":19,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":1229,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 38. Maximum allowed is 10.","line":19,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":1229,"endColumn":2},{"ruleId":"sonarjs/cognitive-complexity","severity":1,"message":"Refactor this function to reduce its Cognitive Complexity from 23 to the 15 allowed.","line":19,"column":34,"nodeType":null,"messageId":"refactorFunction","endLine":19,"endColumn":36},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (1069). Maximum allowed is 75.","line":106,"column":1,"nodeType":null,"messageId":"exceed","endLine":1229,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":106,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":106,"endColumn":45},{"ruleId":"max-lines-per-function","severity":1,"message":"Async arrow function has too many lines (45). Maximum allowed is 30.","line":147,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":200,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":147,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":147,"endColumn":57},{"ruleId":"max-statements","severity":1,"message":"Async arrow function has too many statements (34). Maximum allowed is 15.","line":147,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":200,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Async arrow function has a complexity of 14. Maximum allowed is 10.","line":147,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":200,"endColumn":4},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":174,"column":18,"nodeType":"Literal","endLine":174,"endColumn":64},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":207,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":207,"endColumn":79},{"ruleId":"max-lines-per-function","severity":1,"message":"Async arrow function has too many lines (37). Maximum allowed is 30.","line":225,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":267,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":225,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":225,"endColumn":57},{"ruleId":"max-statements","severity":1,"message":"Async arrow function has too many statements (20). Maximum allowed is 15.","line":225,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":267,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":273,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":273,"endColumn":45},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":281,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":281,"endColumn":53},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":294,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":294,"endColumn":30},{"ruleId":"max-lines-per-function","severity":1,"message":"Async arrow function has too many lines (44). Maximum allowed is 30.","line":303,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":353,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":303,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":303,"endColumn":60},{"ruleId":"max-statements","severity":1,"message":"Async arrow function has too many statements (20). Maximum allowed is 15.","line":303,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":353,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Async arrow function has a complexity of 15. Maximum allowed is 10.","line":303,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":353,"endColumn":4},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":321,"column":37,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":321,"endColumn":48},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":321,"column":53,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":321,"endColumn":64},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":359,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":359,"endColumn":54},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":366,"column":57,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":366,"endColumn":59,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[11000,11002],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":370,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":370,"endColumn":59},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":383,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":383,"endColumn":33},{"ruleId":"max-lines-per-function","severity":1,"message":"Async arrow function has too many lines (35). Maximum allowed is 30.","line":395,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":435,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":395,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":395,"endColumn":58},{"ruleId":"max-statements","severity":1,"message":"Async arrow function has too many statements (16). Maximum allowed is 15.","line":395,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":435,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Async arrow function has a complexity of 11. Maximum allowed is 10.","line":395,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":435,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":441,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":441,"endColumn":48},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":450,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":450,"endColumn":55},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":463,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":463,"endColumn":31},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 4 times.","line":501,"column":15,"nodeType":"Literal","endLine":501,"endColumn":62},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 4 times.","line":502,"column":38,"nodeType":"Literal","endLine":502,"endColumn":62},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 4 times.","line":502,"column":65,"nodeType":"Literal","endLine":502,"endColumn":113},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":678,"column":23,"nodeType":"Literal","endLine":678,"endColumn":82},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 4 times.","line":680,"column":27,"nodeType":"Literal","endLine":680,"endColumn":73},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":681,"column":27,"nodeType":"Literal","endLine":681,"endColumn":69},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":684,"column":22,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":684,"endColumn":99},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":684,"column":36,"nodeType":"Literal","endLine":684,"endColumn":50},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":797,"column":22,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":797,"endColumn":97},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (32). Maximum allowed is 30.","line":804,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":835,"endColumn":16},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (40). Maximum allowed is 30.","line":878,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":917,"endColumn":18},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":942,"column":24,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":946,"endColumn":71},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":1182,"column":24,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":1182,"endColumn":101},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (32). Maximum allowed is 30.","line":1190,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":1221,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":50,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\n\nimport { BenefitCard } from '../components/benefits/BenefitCard';\nimport { CoinEventProgress } from '../components/benefits/CoinEventProgress';\nimport { useAuthStore } from '../state/auth';\nimport { useCoinEventsStore, type CoinEvent } from '../state/coinEvents';\nimport { useCoinsStore, type CoinRule } from '../state/coins';\nimport { useShopStore, type ShopBenefit } from '../state/shop';\nimport { cn } from '../utils/cn';\n\n/**\n * Main benefits management screen\n * Provides interfaces for:\n * - Shopping for benefits with coins\n * - Viewing coin earning rules\n * - Transaction history\n * - Admin: Managing coins, benefits, rules, and events\n */\nexport const BenefitsScreen = () => {\n  const { user } = useAuthStore();\n  const { \n    getUserBalance, \n    getUserTransactions, \n    getAllTransactions,\n    getCoinRules, \n    grantCoins,\n    addCoinRule,\n    updateCoinRule,\n    deleteCoinRule,\n    isLoading: coinsLoading \n  } = useCoinsStore();\n  const { \n    getActiveBenefits, \n    purchaseBenefit,\n    addBenefit,\n    updateBenefit,\n    deleteBenefit,\n    isLoading: shopLoading\n  } = useShopStore();\n  const {\n    getActiveEvents,\n    addEvent,\n    updateEvent,\n    deleteEvent,\n    isLoading: eventsLoading\n  } = useCoinEventsStore();\n  \n  const [activeTab, setActiveTab] = useState<'shop' | 'earn' | 'history' | 'manage'>('shop');\n  const [userBalance, setUserBalance] = useState(0);\n  const [isAdmin, setIsAdmin] = useState(false);\n\n  // State for coin granting\n  const [selectedUserId, setSelectedUserId] = useState('');\n  const [coinAmount, setCoinAmount] = useState('');\n  const [coinReason, setCoinReason] = useState('');\n  const [selectedRuleId, setSelectedRuleId] = useState('');\n  const [isCustomReason, setIsCustomReason] = useState(false);\n  const [error, setError] = useState('');\n\n  // State for history view (admin)\n  const [selectedHistoryUserId, setSelectedHistoryUserId] = useState('');\n\n  // State for rule management\n  const [showRuleForm, setShowRuleForm] = useState(false);\n  const [editingRule, setEditingRule] = useState<CoinRule | null>(null);\n  const [ruleTitle, setRuleTitle] = useState('');\n  const [ruleDescription, setRuleDescription] = useState('');\n  const [ruleAmount, setRuleAmount] = useState('');\n\n  // State for benefit management\n  const [showBenefitForm, setShowBenefitForm] = useState(false);\n  const [editingBenefit, setEditingBenefit] = useState<ShopBenefit | null>(null);\n  const [benefitTitle, setBenefitTitle] = useState('');\n  const [benefitDescription, setBenefitDescription] = useState('');\n  const [benefitCost, setBenefitCost] = useState('');\n  const [benefitCategory, setBenefitCategory] = useState<'WELLNESS' | 'FOOD' | 'TECH' | 'TIME_OFF' | 'OTHER'>('WELLNESS');\n  const [benefitStockLimit, setBenefitStockLimit] = useState('');\n  const [benefitUnlimited, setBenefitUnlimited] = useState(true);\n\n  // State for event management\n  const [showEventForm, setShowEventForm] = useState(false);\n  const [editingEvent, setEditingEvent] = useState<CoinEvent | null>(null);\n  const [eventTitle, setEventTitle] = useState('');\n  const [eventDescription, setEventDescription] = useState('');\n  const [eventRequiredCoins, setEventRequiredCoins] = useState('');\n  const [eventReward, setEventReward] = useState('');\n\n  useEffect(() => {\n    if (user) {\n      const balance = getUserBalance(user.id);\n      setUserBalance(balance.currentBalance);\n      setIsAdmin(user.role === 'ADMIN' || user.role === 'SUPERADMIN');\n      \n      // Default to shop for regular users, manage for admins\n      if (user.role === 'ADMIN' || user.role === 'SUPERADMIN') {\n        setActiveTab('manage');\n      }\n    }\n  }, [user, getUserBalance]);\n\n  /**\n   * Formats an ISO date string to German locale format\n   * @param dateString - ISO date string to format\n   * @returns Formatted date string (dd.mm.yyyy hh:mm)\n   */\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('de-DE', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  /**\n   * Gets the display name for a user ID\n   * @param userId - The user ID to get the name for\n   * @returns The display name or 'Unbekannt' if not found\n   */\n  const getUserName = (userId: string): string => {\n    const names: { [key: string]: string } = {\n      '1': 'Max M.',\n      '2': 'Anna A.',\n      '3': 'Tom K.',\n      '4': 'Lisa S.',\n      '5': 'Julia B.',\n      '6': 'Marco L.'\n    };\n    return names[userId] || 'Unbekannt';\n  };\n\n  const availableUsers = [\n    { id: '1', name: 'Max M.' },\n    { id: '2', name: 'Anna A.' },\n    { id: '3', name: 'Tom K.' },\n    { id: '4', name: 'Lisa S.' },\n    { id: '5', name: 'Julia B.' },\n    { id: '6', name: 'Marco L.' }\n  ];\n\n  /**\n   * Handles the coin granting form submission\n   * Allows admins to grant coins based on predefined rules or custom reasons\n   * @param e - Form event\n   */\n  const handleGrantCoins = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user || !isAdmin) return;\n    \n    setError('');\n    \n    if (!selectedUserId) {\n      setError('Bitte wählen Sie einen Mitarbeiter aus');\n      return;\n    }\n\n    if (!isCustomReason && !selectedRuleId) {\n      setError('Bitte wählen Sie eine Regel aus');\n      return;\n    }\n\n    if (isCustomReason && (!coinAmount || !coinReason)) {\n      setError('Bitte geben Sie Anzahl und Begründung ein');\n      return;\n    }\n\n    let amount: number;\n    let reason: string;\n\n    if (isCustomReason) {\n      amount = parseInt(coinAmount);\n      if (isNaN(amount) || amount <= 0) {\n        setError('Bitte geben Sie eine gültige Coin-Anzahl ein');\n        return;\n      }\n      reason = coinReason;\n    } else {\n      // Using predefined rule for coin amount and reason\n      const selectedRule = getCoinRules().find(rule => rule.id === selectedRuleId);\n      if (!selectedRule) {\n        setError('Ungültige Regel ausgewählt');\n        return;\n      }\n      amount = selectedRule.coinAmount;\n      reason = selectedRule.title;\n    }\n\n    try {\n      await grantCoins(selectedUserId, amount, reason, user.id);\n      // Reset form after successful submission\n      setSelectedUserId('');\n      setCoinAmount('');\n      setCoinReason('');\n      setSelectedRuleId('');\n      setIsCustomReason(false);\n    } catch (error) {\n      setError('Fehler beim Verteilen der Coins');\n    }\n  };\n\n  /**\n   * Handles benefit purchase by a user\n   * @param benefitId - ID of the benefit to purchase\n   * @param coinCost - Cost of the benefit in coins\n   */\n  const handlePurchaseBenefit = async (benefitId: string, coinCost: number) => {\n    if (!user) return;\n    \n    if (userBalance < coinCost) {\n      setError('Nicht genügend Coins für diesen Kauf');\n      return;\n    }\n\n    try {\n      await purchaseBenefit(user.id, benefitId);\n      // Update displayed balance after purchase\n      const newBalance = getUserBalance(user.id);\n      setUserBalance(newBalance.currentBalance);\n    } catch (error) {\n      setError('Fehler beim Kauf des Benefits');\n    }\n  };\n\n  const handleRuleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user || !isAdmin) return;\n\n    setError('');\n\n    if (!ruleTitle || !ruleDescription || !ruleAmount) {\n      setError('Bitte füllen Sie alle Felder aus');\n      return;\n    }\n\n    const amount = parseInt(ruleAmount);\n    if (isNaN(amount) || amount <= 0) {\n      setError('Bitte geben Sie eine gültige Coin-Anzahl ein');\n      return;\n    }\n\n    try {\n      if (editingRule) {\n        await updateCoinRule(editingRule.id, {\n          title: ruleTitle,\n          description: ruleDescription,\n          coinAmount: amount\n        });\n      } else {\n        await addCoinRule({\n          title: ruleTitle,\n          description: ruleDescription,\n          coinAmount: amount,\n          isActive: true\n        });\n      }\n      \n      // Reset form\n      setShowRuleForm(false);\n      setEditingRule(null);\n      setRuleTitle('');\n      setRuleDescription('');\n      setRuleAmount('');\n    } catch (error) {\n      setError('Fehler beim Speichern der Regel');\n    }\n  };\n\n  /**\n   * Prepares the form for editing an existing rule\n   * @param rule - The rule to edit\n   */\n  const handleEditRule = (rule: CoinRule) => {\n    setEditingRule(rule);\n    setRuleTitle(rule.title);\n    setRuleDescription(rule.description);\n    setRuleAmount(rule.coinAmount.toString());\n    setShowRuleForm(true);\n  };\n\n  const handleDeleteRule = async (ruleId: string) => {\n    if (!user || !isAdmin) return;\n    \n    // TODO: Replace with modal confirmation component\n    // if (window.confirm('Sind Sie sicher, dass Sie diese Regel löschen möchten?')) {\n      try {\n        await deleteCoinRule(ruleId);\n      } catch (error) {\n        setError('Fehler beim Löschen der Regel');\n      }\n    // }\n  };\n\n  const resetRuleForm = () => {\n    setShowRuleForm(false);\n    setEditingRule(null);\n    setRuleTitle('');\n    setRuleDescription('');\n    setRuleAmount('');\n    setError('');\n  };\n\n  const handleBenefitSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user || !isAdmin) return;\n\n    setError('');\n\n    if (!benefitTitle || !benefitDescription || !benefitCost || !benefitCategory) {\n      setError('Bitte füllen Sie alle Pflichtfelder aus');\n      return;\n    }\n\n    const cost = parseInt(benefitCost);\n    if (isNaN(cost) || cost <= 0) {\n      setError('Bitte geben Sie einen gültigen Coin-Preis ein');\n      return;\n    }\n\n    const stockLimit = benefitUnlimited ? undefined : parseInt(benefitStockLimit);\n    if (!benefitUnlimited && (isNaN(stockLimit!) || stockLimit! <= 0)) {\n      setError('Bitte geben Sie einen gültigen Lagerbestand ein');\n      return;\n    }\n\n    try {\n      if (editingBenefit) {\n        await updateBenefit(editingBenefit.id, {\n          title: benefitTitle,\n          description: benefitDescription,\n          coinCost: cost,\n          category: benefitCategory,\n          stockLimit: stockLimit,\n          currentStock: stockLimit\n        });\n      } else {\n        await addBenefit({\n          title: benefitTitle,\n          description: benefitDescription,\n          coinCost: cost,\n          category: benefitCategory,\n          isActive: true,\n          stockLimit: stockLimit,\n          currentStock: stockLimit\n        });\n      }\n      \n      // Reset form\n      resetBenefitForm();\n    } catch (error) {\n      setError('Fehler beim Speichern des Benefits');\n    }\n  };\n\n  /**\n   * Prepares the form for editing an existing benefit\n   * @param benefit - The benefit to edit\n   */\n  const handleEditBenefit = (benefit: ShopBenefit) => {\n    setEditingBenefit(benefit);\n    setBenefitTitle(benefit.title);\n    setBenefitDescription(benefit.description);\n    setBenefitCost(benefit.coinCost.toString());\n    setBenefitCategory(benefit.category);\n    setBenefitUnlimited(!benefit.stockLimit);\n    setBenefitStockLimit(benefit.stockLimit?.toString() || '');\n    setShowBenefitForm(true);\n  };\n\n  const handleDeleteBenefit = async (benefitId: string) => {\n    if (!user || !isAdmin) return;\n    \n    // TODO: Replace with modal confirmation component\n    // if (window.confirm('Sind Sie sicher, dass Sie dieses Benefit löschen möchten?')) {\n      try {\n        await deleteBenefit(benefitId);\n      } catch (error) {\n        setError('Fehler beim Löschen des Benefits');\n      }\n    // }\n  };\n\n  const resetBenefitForm = () => {\n    setShowBenefitForm(false);\n    setEditingBenefit(null);\n    setBenefitTitle('');\n    setBenefitDescription('');\n    setBenefitCost('');\n    setBenefitCategory('WELLNESS');\n    setBenefitUnlimited(true);\n    setBenefitStockLimit('');\n    setError('');\n  };\n\n  const handleEventSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user || !isAdmin) return;\n\n    setError('');\n\n    if (!eventTitle || !eventDescription || !eventRequiredCoins || !eventReward) {\n      setError('Bitte füllen Sie alle Felder aus');\n      return;\n    }\n\n    const requiredCoins = parseInt(eventRequiredCoins);\n    if (isNaN(requiredCoins) || requiredCoins <= 0) {\n      setError('Bitte geben Sie eine gültige Coin-Anzahl ein');\n      return;\n    }\n\n    try {\n      if (editingEvent) {\n        await updateEvent(editingEvent.id, {\n          title: eventTitle,\n          description: eventDescription,\n          requiredCoins: requiredCoins,\n          reward: eventReward\n        });\n      } else {\n        await addEvent({\n          title: eventTitle,\n          description: eventDescription,\n          requiredCoins: requiredCoins,\n          reward: eventReward,\n          isActive: true\n        });\n      }\n      \n      // Reset form\n      resetEventForm();\n    } catch (error) {\n      setError('Fehler beim Speichern des Events');\n    }\n  };\n\n  /**\n   * Prepares the form for editing an existing coin event\n   * @param event - The event to edit\n   */\n  const handleEditEvent = (event: CoinEvent) => {\n    setEditingEvent(event);\n    setEventTitle(event.title);\n    setEventDescription(event.description);\n    setEventRequiredCoins(event.requiredCoins.toString());\n    setEventReward(event.reward);\n    setShowEventForm(true);\n  };\n\n  const handleDeleteEvent = async (eventId: string) => {\n    if (!user || !isAdmin) return;\n    \n    // TODO: Replace with modal confirmation component\n    // if (window.confirm('Sind Sie sicher, dass Sie dieses Event löschen möchten?')) {\n      try {\n        await deleteEvent(eventId);\n      } catch (error) {\n        setError('Fehler beim Löschen des Events');\n      }\n    // }\n  };\n\n  const resetEventForm = () => {\n    setShowEventForm(false);\n    setEditingEvent(null);\n    setEventTitle('');\n    setEventDescription('');\n    setEventRequiredCoins('');\n    setEventReward('');\n    setError('');\n  };\n\n\n  if (!user) return null;\n\n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <div className=\"flex-1 px-4 py-6 overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-xl font-bold text-gray-900\">\n            Benefits & Coins\n          </h1>\n          <div className=\"bg-white px-4 py-2 rounded-lg shadow-sm\">\n            <span className=\"text-sm text-gray-500\">Meine Coins: </span>\n            <span className=\"text-lg font-bold text-blue-600\">{userBalance}</span>\n          </div>\n        </div>\n\n        {/* Error Message */}\n        {error && (\n          <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg mb-4\">\n            <p className=\"text-red-800 text-sm\">{error}</p>\n          </div>\n        )}\n\n        {/* Tab Navigation */}\n        <div className=\"flex bg-white rounded-lg p-1 mb-6 shadow-sm\">\n          <button\n            onClick={() => setActiveTab('shop')}\n            className={cn(\n              \"flex-1 py-2 px-3 rounded-md transition-colors\",\n              activeTab === 'shop' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n            )}\n          >\n            <span className=\"text-center font-medium text-sm\">\n              🪙 Coins einlösen\n            </span>\n          </button>\n          <button\n            onClick={() => setActiveTab('earn')}\n            className={cn(\n              \"flex-1 py-2 px-3 rounded-md transition-colors\",\n              activeTab === 'earn' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n            )}\n          >\n            <span className=\"text-center font-medium text-sm\">\n              💰 Coins bekommen\n            </span>\n          </button>\n          <button\n            onClick={() => setActiveTab('history')}\n            className={cn(\n              \"flex-1 py-2 px-3 rounded-md transition-colors\",\n              activeTab === 'history' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n            )}\n          >\n            <span className=\"text-center font-medium text-sm\">\n              📊 Historie\n            </span>\n          </button>\n          {isAdmin && (\n            <button\n              onClick={() => setActiveTab('manage')}\n              className={cn(\n                \"flex-1 py-2 px-3 rounded-md transition-colors\",\n                activeTab === 'manage' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n              )}\n            >\n              <span className=\"text-center font-medium text-sm\">\n                ⚙️ Verwaltung\n              </span>\n            </button>\n          )}\n        </div>\n\n        {/* Shop Tab */}\n        {activeTab === 'shop' && (\n          <div className=\"space-y-4\">\n            {/* Coin Events Progress Bar */}\n            <CoinEventProgress userBalance={userBalance} />\n\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">Benefits</h2>\n              {isAdmin && (\n                <button\n                  onClick={() => setShowBenefitForm(true)}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors\"\n                >\n                  + Neues Benefit\n                </button>\n              )}\n            </div>\n\n            {/* Benefit Form */}\n            {showBenefitForm && isAdmin && (\n              <form onSubmit={handleBenefitSubmit} className=\"bg-white rounded-xl p-6 shadow-sm space-y-4 border-2 border-blue-200\">\n                <div className=\"flex items-center justify-between\">\n                  <h3 className=\"text-lg font-semibold text-gray-900\">\n                    {editingBenefit ? 'Benefit bearbeiten' : 'Neues Benefit erstellen'}\n                  </h3>\n                  <button\n                    type=\"button\"\n                    onClick={resetBenefitForm}\n                    className=\"text-gray-500 hover:text-gray-700\"\n                  >\n                    ✕\n                  </button>\n                </div>\n                \n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                    Titel\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={benefitTitle}\n                    onChange={(e) => setBenefitTitle(e.target.value)}\n                    className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"z.B. Massage Gutschein\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                    Beschreibung\n                  </label>\n                  <textarea\n                    value={benefitDescription}\n                    onChange={(e) => setBenefitDescription(e.target.value)}\n                    className=\"w-full border border-gray-300 rounded-lg px-3 py-2 h-20 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\"\n                    placeholder=\"Beschreibung des Benefits...\"\n                    required\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                      Coin-Preis\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={benefitCost}\n                      onChange={(e) => setBenefitCost(e.target.value)}\n                      className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"z.B. 150\"\n                      min=\"1\"\n                      required\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                      Kategorie\n                    </label>\n                    <select\n                      value={benefitCategory}\n                      onChange={(e) => setBenefitCategory(e.target.value as 'WELLNESS' | 'FOOD' | 'TECH' | 'TIME_OFF' | 'OTHER')}\n                      className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      required\n                    >\n                      <option value=\"WELLNESS\">Wellness</option>\n                      <option value=\"FOOD\">Essen & Trinken</option>\n                      <option value=\"TECH\">Technologie</option>\n                      <option value=\"TIME_OFF\">Freizeit</option>\n                      <option value=\"OTHER\">Sonstiges</option>\n                    </select>\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"flex items-center mb-2\">\n                    <input\n                      type=\"checkbox\"\n                      checked={benefitUnlimited}\n                      onChange={(e) => setBenefitUnlimited(e.target.checked)}\n                      className=\"mr-2\"\n                    />\n                    <span className=\"text-sm font-medium text-gray-700\">Unbegrenzter Lagerbestand</span>\n                  </label>\n                  \n                  {!benefitUnlimited && (\n                    <input\n                      type=\"number\"\n                      value={benefitStockLimit}\n                      onChange={(e) => setBenefitStockLimit(e.target.value)}\n                      className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"Lagerbestand (z.B. 10)\"\n                      min=\"1\"\n                      required={!benefitUnlimited}\n                    />\n                  )}\n                </div>\n\n                <div className=\"flex space-x-3\">\n                  <button\n                    type=\"button\"\n                    onClick={resetBenefitForm}\n                    className=\"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n                  >\n                    Abbrechen\n                  </button>\n                  <button\n                    type=\"submit\"\n                    disabled={shopLoading}\n                    className={cn(\n                      \"flex-1 py-2 px-4 rounded-lg font-medium transition-colors\",\n                      shopLoading \n                        ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n                        : \"bg-blue-600 text-white hover:bg-blue-700\"\n                    )}\n                  >\n                    {shopLoading ? 'Speichert...' : editingBenefit ? 'Aktualisieren' : 'Erstellen'}\n                  </button>\n                </div>\n              </form>\n            )}\n            \n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n              {getActiveBenefits().map((benefit) => (\n                <BenefitCard\n                  key={benefit.id}\n                  benefit={benefit}\n                  userBalance={userBalance}\n                  isAdmin={isAdmin}\n                  onPurchase={handlePurchaseBenefit}\n                  onEdit={handleEditBenefit}\n                  onDelete={handleDeleteBenefit}\n                />\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Earn Tab */}\n        {activeTab === 'earn' && (\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">Wie bekomme ich Coins?</h2>\n              {isAdmin && (\n                <button\n                  onClick={() => setShowRuleForm(true)}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors\"\n                >\n                  + Neue Regel\n                </button>\n              )}\n            </div>\n\n            {/* Rule Form */}\n            {showRuleForm && isAdmin && (\n              <form onSubmit={handleRuleSubmit} className=\"bg-white rounded-xl p-6 shadow-sm space-y-4 border-2 border-blue-200\">\n                <div className=\"flex items-center justify-between\">\n                  <h3 className=\"text-lg font-semibold text-gray-900\">\n                    {editingRule ? 'Regel bearbeiten' : 'Neue Regel erstellen'}\n                  </h3>\n                  <button\n                    type=\"button\"\n                    onClick={resetRuleForm}\n                    className=\"text-gray-500 hover:text-gray-700\"\n                  >\n                    ✕\n                  </button>\n                </div>\n                \n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                    Titel\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={ruleTitle}\n                    onChange={(e) => setRuleTitle(e.target.value)}\n                    className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"z.B. Schulung abgeschlossen\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                    Beschreibung\n                  </label>\n                  <textarea\n                    value={ruleDescription}\n                    onChange={(e) => setRuleDescription(e.target.value)}\n                    className=\"w-full border border-gray-300 rounded-lg px-3 py-2 h-20 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\"\n                    placeholder=\"Beschreibung der Regel...\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                    Coin-Anzahl\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={ruleAmount}\n                    onChange={(e) => setRuleAmount(e.target.value)}\n                    className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"z.B. 20\"\n                    min=\"1\"\n                    required\n                  />\n                </div>\n\n                <div className=\"flex space-x-3\">\n                  <button\n                    type=\"button\"\n                    onClick={resetRuleForm}\n                    className=\"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n                  >\n                    Abbrechen\n                  </button>\n                  <button\n                    type=\"submit\"\n                    disabled={coinsLoading}\n                    className={cn(\n                      \"flex-1 py-2 px-4 rounded-lg font-medium transition-colors\",\n                      coinsLoading \n                        ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n                        : \"bg-blue-600 text-white hover:bg-blue-700\"\n                    )}\n                  >\n                    {coinsLoading ? 'Speichert...' : editingRule ? 'Aktualisieren' : 'Erstellen'}\n                  </button>\n                </div>\n              </form>\n            )}\n            \n            <div className=\"space-y-3\">\n              {getCoinRules().map((rule) => (\n                <div key={rule.id} className=\"bg-white rounded-xl p-4 shadow-sm\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-semibold text-gray-900\">{rule.title}</h3>\n                      <p className=\"text-sm text-gray-600\">{rule.description}</p>\n                    </div>\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"text-right\">\n                        <p className=\"text-lg font-bold text-green-600\">+{rule.coinAmount}</p>\n                        <p className=\"text-xs text-gray-500\">Coins</p>\n                      </div>\n                      {isAdmin && (\n                        <div className=\"flex gap-2\">\n                          <button\n                            onClick={() => handleEditRule(rule)}\n                            className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                          >\n                            ✏️\n                          </button>\n                          <button\n                            onClick={() => handleDeleteRule(rule.id)}\n                            className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                          >\n                            🗑️\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* History Tab */}\n        {activeTab === 'history' && (\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">\n                {isAdmin ? 'Coin-Historie' : 'Meine Coin-Historie'}\n              </h2>\n              \n              {/* Admin User Selection */}\n              {isAdmin && (\n                <select\n                  value={selectedHistoryUserId}\n                  onChange={(e) => setSelectedHistoryUserId(e.target.value)}\n                  className=\"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"\">Alle Mitarbeiter</option>\n                  {availableUsers.map((user) => (\n                    <option key={user.id} value={user.id}>\n                      {user.name}\n                    </option>\n                  ))}\n                </select>\n              )}\n            </div>\n            \n            <div className=\"space-y-3\">\n              {(() => {\n                let transactions;\n                if (isAdmin) {\n                  if (selectedHistoryUserId) {\n                    transactions = getUserTransactions(selectedHistoryUserId);\n                  } else {\n                    transactions = getAllTransactions();\n                  }\n                } else {\n                  transactions = getUserTransactions(user.id);\n                }\n                \n                return transactions.map((transaction) => (\n                  <div key={transaction.id} className=\"bg-white rounded-xl p-4 shadow-sm\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <p className=\"font-medium text-gray-900\">{transaction.reason}</p>\n                          {transaction.type === 'BENEFIT_PURCHASE' && (\n                            <span className=\"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full\">\n                              Kauf\n                            </span>\n                          )}\n                          {transaction.type === 'ADMIN_GRANT' && (\n                            <span className=\"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full\">\n                              Vergabe\n                            </span>\n                          )}\n                          {transaction.type === 'RULE_EARNED' && (\n                            <span className=\"px-2 py-1 bg-yellow-100 text-yellow-700 text-xs rounded-full\">\n                              Verdient\n                            </span>\n                          )}\n                        </div>\n                        <p className=\"text-sm text-gray-500\">\n                          {formatDate(transaction.createdAt)}\n                          {transaction.adminId && ` • von ${getUserName(transaction.adminId)}`}\n                          {isAdmin && !selectedHistoryUserId && ` • ${getUserName(transaction.userId)}`}\n                        </p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className={cn(\n                          \"text-lg font-bold\",\n                          transaction.amount > 0 ? \"text-green-600\" : \"text-red-600\"\n                        )}>\n                          {transaction.amount > 0 ? '+' : ''}{transaction.amount}\n                        </p>\n                        <p className=\"text-xs text-gray-500\">Coins</p>\n                      </div>\n                    </div>\n                  </div>\n                ));\n              })()}\n            </div>\n            \n            {/* No transactions message */}\n            {(() => {\n              let transactions;\n              if (isAdmin) {\n                if (selectedHistoryUserId) {\n                  transactions = getUserTransactions(selectedHistoryUserId);\n                } else {\n                  transactions = getAllTransactions();\n                }\n              } else {\n                transactions = getUserTransactions(user.id);\n              }\n              \n              if (transactions.length === 0) {\n                return (\n                  <div className=\"bg-white rounded-xl p-8 flex flex-col items-center shadow-sm\">\n                    <span className=\"text-4xl mb-4\">📊</span>\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                      Keine Transaktionen\n                    </h3>\n                    <p className=\"text-gray-600 text-center\">\n                      {isAdmin && selectedHistoryUserId \n                        ? `${getUserName(selectedHistoryUserId)} hat noch keine Coin-Transaktionen.`\n                        : isAdmin \n                          ? 'Es gibt noch keine Coin-Transaktionen im System.'\n                          : 'Sie haben noch keine Coin-Transaktionen.'\n                      }\n                    </p>\n                  </div>\n                );\n              }\n              return null;\n            })()}\n          </div>\n        )}\n\n        {/* Manage Tab (Admin only) */}\n        {activeTab === 'manage' && isAdmin && (\n          <div className=\"space-y-6\">\n            <div>\n              <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Coins verteilen</h2>\n              \n              <form onSubmit={handleGrantCoins} className=\"bg-white rounded-xl p-6 shadow-sm space-y-4\">\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                    Mitarbeiter auswählen\n                  </label>\n                  <select\n                    value={selectedUserId}\n                    onChange={(e) => setSelectedUserId(e.target.value)}\n                    className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    required\n                  >\n                    <option value=\"\">Mitarbeiter auswählen...</option>\n                    {availableUsers.map((user) => (\n                      <option key={user.id} value={user.id}>\n                        {user.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                    Grund auswählen\n                  </label>\n                  <div className=\"space-y-2\">\n                    {/* Rule selection */}\n                    {getCoinRules().map((rule) => (\n                      <label key={rule.id} className=\"flex items-start\">\n                        <input\n                          type=\"radio\"\n                          name=\"coinReason\"\n                          value={rule.id}\n                          checked={selectedRuleId === rule.id && !isCustomReason}\n                          onChange={(e) => {\n                            setSelectedRuleId(e.target.value);\n                            setIsCustomReason(false);\n                          }}\n                          className=\"mt-1 mr-3\"\n                        />\n                        <div className=\"flex-1\">\n                          <p className=\"font-medium text-gray-900\">{rule.title}</p>\n                          <p className=\"text-sm text-gray-600\">{rule.description}</p>\n                          <p className=\"text-sm font-semibold text-green-600\">+{rule.coinAmount} Coins</p>\n                        </div>\n                      </label>\n                    ))}\n                    \n                    {/* Custom reason option */}\n                    <label className=\"flex items-start\">\n                      <input\n                        type=\"radio\"\n                        name=\"coinReason\"\n                        checked={isCustomReason}\n                        onChange={() => {\n                          setIsCustomReason(true);\n                          setSelectedRuleId('');\n                        }}\n                        className=\"mt-1 mr-3\"\n                      />\n                      <div className=\"flex-1\">\n                        <p className=\"font-medium text-gray-900\">Eigene Begründung</p>\n                        <p className=\"text-sm text-gray-600\">Geben Sie eine individuelle Begründung und Coin-Anzahl ein</p>\n                      </div>\n                    </label>\n                  </div>\n                </div>\n\n                {/* Show custom reason fields only when selected */}\n                {isCustomReason && (\n                  <>\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                        Anzahl Coins\n                      </label>\n                      <input\n                        type=\"number\"\n                        value={coinAmount}\n                        onChange={(e) => setCoinAmount(e.target.value)}\n                        className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        placeholder=\"z.B. 25\"\n                        min=\"1\"\n                        required={isCustomReason}\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                        Begründung\n                      </label>\n                      <textarea\n                        value={coinReason}\n                        onChange={(e) => setCoinReason(e.target.value)}\n                        className=\"w-full border border-gray-300 rounded-lg px-3 py-2 h-20 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\"\n                        placeholder=\"Grund für die Coin-Vergabe...\"\n                        required={isCustomReason}\n                      />\n                    </div>\n                  </>\n                )}\n\n                <button\n                  type=\"submit\"\n                  disabled={coinsLoading}\n                  className={cn(\n                    \"w-full py-2 px-4 rounded-lg font-medium transition-colors\",\n                    coinsLoading \n                      ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n                      : \"bg-blue-600 text-white hover:bg-blue-700\"\n                  )}\n                >\n                  {coinsLoading ? 'Verteilt...' : 'Coins verteilen'}\n                </button>\n              </form>\n            </div>\n\n            {/* Coin Events Management */}\n            <div>\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-lg font-semibold text-gray-900\">Coin Events verwalten</h2>\n                <button\n                  onClick={() => setShowEventForm(true)}\n                  className=\"px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors\"\n                >\n                  + Neues Event\n                </button>\n              </div>\n\n              {/* Event Form */}\n              {showEventForm && (\n                <form onSubmit={handleEventSubmit} className=\"bg-white rounded-xl p-6 shadow-sm space-y-4 border-2 border-purple-200 mb-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <h3 className=\"text-lg font-semibold text-gray-900\">\n                      {editingEvent ? 'Event bearbeiten' : 'Neues Event erstellen'}\n                    </h3>\n                    <button\n                      type=\"button\"\n                      onClick={resetEventForm}\n                      className=\"text-gray-500 hover:text-gray-700\"\n                    >\n                      ✕\n                    </button>\n                  </div>\n                  \n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                      Titel\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={eventTitle}\n                      onChange={(e) => setEventTitle(e.target.value)}\n                      className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                      placeholder=\"z.B. Bronze Status\"\n                      required\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                      Beschreibung\n                    </label>\n                    <textarea\n                      value={eventDescription}\n                      onChange={(e) => setEventDescription(e.target.value)}\n                      className=\"w-full border border-gray-300 rounded-lg px-3 py-2 h-20 focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none\"\n                      placeholder=\"Beschreibung des Events...\"\n                      required\n                    />\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                        Benötigte Coins\n                      </label>\n                      <input\n                        type=\"number\"\n                        value={eventRequiredCoins}\n                        onChange={(e) => setEventRequiredCoins(e.target.value)}\n                        className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                        placeholder=\"z.B. 100\"\n                        min=\"1\"\n                        required\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                        Belohnung\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={eventReward}\n                        onChange={(e) => setEventReward(e.target.value)}\n                        className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                        placeholder=\"z.B. Exklusiver Badge + 5% Rabatt\"\n                        required\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"flex space-x-3\">\n                    <button\n                      type=\"button\"\n                      onClick={resetEventForm}\n                      className=\"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n                    >\n                      Abbrechen\n                    </button>\n                    <button\n                      type=\"submit\"\n                      disabled={eventsLoading}\n                      className={cn(\n                        \"flex-1 py-2 px-4 rounded-lg font-medium transition-colors\",\n                        eventsLoading \n                          ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n                          : \"bg-purple-600 text-white hover:bg-purple-700\"\n                      )}\n                    >\n                      {eventsLoading ? 'Speichert...' : editingEvent ? 'Aktualisieren' : 'Erstellen'}\n                    </button>\n                  </div>\n                </form>\n              )}\n\n              {/* Events List */}\n              <div className=\"space-y-3\">\n                {getActiveEvents().map((event) => (\n                  <div key={event.id} className=\"bg-white rounded-xl p-4 shadow-sm\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold text-gray-900\">{event.title}</h3>\n                        <p className=\"text-sm text-gray-600\">{event.description}</p>\n                        <div className=\"flex items-center gap-4 mt-2\">\n                          <span className=\"text-sm font-medium text-purple-600\">\n                            🎯 {event.requiredCoins} Coins benötigt\n                          </span>\n                          <span className=\"text-sm text-gray-500\">\n                            🎁 {event.reward}\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <button\n                          onClick={() => handleEditEvent(event)}\n                          className=\"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors\"\n                        >\n                          ✏️\n                        </button>\n                        <button\n                          onClick={() => handleDeleteEvent(event.id)}\n                          className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                        >\n                          🗑️\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/BenefitsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":42,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":46,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":74,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":81,"endColumn":29},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (229). Maximum allowed is 75.","line":99,"column":1,"nodeType":null,"messageId":"exceed","endLine":264,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (48). Maximum allowed is 30.","line":114,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":161,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":114,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":121,"endColumn":23},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":163,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":163,"endColumn":46},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":175,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":175,"endColumn":46},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":191,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":191,"endColumn":93},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":205,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":205,"endColumn":108},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (46). Maximum allowed is 30.","line":214,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":264,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":214,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":214,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":235,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":235,"endColumn":75},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":239,"column":13,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":239,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\n\nimport { EarnTab } from '../components/benefits/EarnTab';\nimport { HistoryTab } from '../components/benefits/HistoryTab';\nimport { ManageTab } from '../components/benefits/ManageTab';\nimport { ShopTab } from '../components/benefits/ShopTab';\nimport { useAuthStore } from '../state/auth';\nimport { useCoinEventsStore, EventsStore } from '../state/coinEvents';\nimport { useCoinsStore, CoinsStore } from '../state/coins';\nimport { useShopStore, ShopStore } from '../state/shop';\nimport { User } from '../types';\nimport { cn } from '../utils/cn';\n\ntype TabType = 'shop' | 'earn' | 'history' | 'manage';\n\n// Constants to avoid duplicate strings\nconst TAB_STYLES = {\n  ACTIVE: \"bg-blue-500 text-white\",\n  INACTIVE: \"bg-transparent text-gray-700 hover:bg-gray-100\"\n} as const;\n\nconst ADMIN_ROLES: ReadonlyArray<'ADMIN' | 'SUPERADMIN'> = ['ADMIN', 'SUPERADMIN'] as const;\n\n/**\n * Main benefits management screen\n * Provides interfaces for:\n * - Shopping for benefits with coins\n * - Viewing coin earning rules\n * - Transaction history\n * - Admin: Managing coins, benefits, rules, and events\n */\ninterface InitializeUserDataParams {\n  user: User;\n  coinsStore: CoinsStore;\n  handlers: {\n    setUserBalance: (balance: number) => void;\n    setIsAdmin: (isAdmin: boolean) => void;\n    setActiveTab: (tab: TabType) => void;\n  };\n}\n\nconst initializeUserData = ({\n  user,\n  coinsStore,\n  handlers: { setUserBalance, setIsAdmin, setActiveTab }\n}: InitializeUserDataParams) => {\n  const balance = coinsStore.getUserBalance(user.id);\n  setUserBalance(balance.currentBalance);\n  \n  const adminStatus = (ADMIN_ROLES as readonly string[]).includes(user.role);\n  setIsAdmin(adminStatus);\n  \n  // Default to shop for regular users, manage for admins\n  if (adminStatus) {\n    setActiveTab('manage');\n  }\n};\n\ninterface PurchaseBenefitParams {\n  benefitId: string;\n  coinCost: number;\n  user: User;\n  userBalance: number;\n  stores: {\n    shopStore: ShopStore;\n    coinsStore: CoinsStore;\n  };\n  handlers: {\n    setUserBalance: (balance: number) => void;\n    setError: (error: string) => void;\n  };\n}\n\nconst handlePurchaseBenefit = async ({\n  benefitId,\n  coinCost,\n  user,\n  userBalance,\n  stores: { shopStore, coinsStore },\n  handlers: { setUserBalance, setError }\n}: PurchaseBenefitParams) => {\n  if (!user) return;\n  \n  if (userBalance < coinCost) {\n    setError('Nicht genügend Coins für diesen Kauf');\n    return;\n  }\n\n  try {\n    await shopStore.purchaseBenefit(user.id, benefitId);\n    const newBalance = coinsStore.getUserBalance(user.id);\n    setUserBalance(newBalance.currentBalance);\n  } catch (error) {\n    setError('Fehler beim Kauf des Benefits');\n  }\n};\n\ninterface TabContentProps {\n  activeTab: TabType;\n  userBalance: number;\n  isAdmin: boolean;\n  user: User;\n  stores: {\n    shopStore: ShopStore;\n    coinsStore: CoinsStore;\n    eventsStore: EventsStore;\n  };\n  handlers: {\n    onPurchaseBenefit: (benefitId: string, coinCost: number) => Promise<void>;\n    setError: (error: string) => void;\n  };\n}\n\nconst renderTabContent = ({\n  activeTab,\n  userBalance,\n  isAdmin,\n  user,\n  stores: { shopStore, coinsStore, eventsStore },\n  handlers: { onPurchaseBenefit, setError }\n}: TabContentProps) => {\n  switch (activeTab) {\n    case 'shop':\n      return (\n        <ShopTab\n          userBalance={userBalance}\n          isAdmin={isAdmin}\n          shopStore={shopStore}\n          onPurchase={onPurchaseBenefit}\n          onError={setError}\n        />\n      );\n    case 'earn':\n      return (\n        <EarnTab\n          isAdmin={isAdmin}\n          coinsStore={coinsStore}\n          onError={setError}\n        />\n      );\n    case 'history':\n      return (\n        <HistoryTab\n          isAdmin={isAdmin}\n          user={user}\n          coinsStore={coinsStore}\n        />\n      );\n    case 'manage':\n      return isAdmin ? (\n        <ManageTab\n          user={user}\n          coinsStore={coinsStore}\n          eventsStore={eventsStore}\n          onError={setError}\n        />\n      ) : null;\n    default:\n      return null;\n  }\n};\n\nconst renderHeader = (userBalance: number) => (\n  <div className=\"flex items-center justify-between mb-6\">\n    <h1 className=\"text-xl font-bold text-gray-900\">\n      Benefits & Coins\n    </h1>\n    <div className=\"bg-white px-4 py-2 rounded-lg shadow-sm\">\n      <span className=\"text-sm text-gray-500\">Meine Coins: </span>\n      <span className=\"text-lg font-bold text-blue-600\">{userBalance}</span>\n    </div>\n  </div>\n);\n\nconst renderErrorMessage = (error: string) => (\n  error ? (\n    <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg mb-4\">\n      <p className=\"text-red-800 text-sm\">{error}</p>\n    </div>\n  ) : null\n);\n\ninterface TabButtonProps {\n  tabId: TabType;\n  label: string;\n  icon: string;\n  activeTab: TabType;\n  setActiveTab: (tab: TabType) => void;\n}\n\nconst renderTabButton = ({ tabId, label, icon, activeTab, setActiveTab }: TabButtonProps) => (\n  <button\n    onClick={() => setActiveTab(tabId)}\n    className={cn(\n      \"flex-1 py-2 px-3 rounded-md transition-colors\",\n      activeTab === tabId ? TAB_STYLES.ACTIVE : TAB_STYLES.INACTIVE\n    )}\n  >\n    <span className=\"text-center font-medium text-sm\">\n      {icon} {label}\n    </span>\n  </button>\n);\n\nconst renderTabNavigation = (activeTab: TabType, isAdmin: boolean, setActiveTab: (tab: TabType) => void) => (\n  <div className=\"flex bg-white rounded-lg p-1 mb-6 shadow-sm\">\n    {renderTabButton({ tabId: 'shop', label: 'Coins einlösen', icon: '🪙', activeTab, setActiveTab })}\n    {renderTabButton({ tabId: 'earn', label: 'Coins bekommen', icon: '💰', activeTab, setActiveTab })}\n    {renderTabButton({ tabId: 'history', label: 'Historie', icon: '📊', activeTab, setActiveTab })}\n    {isAdmin && renderTabButton({ tabId: 'manage', label: 'Verwaltung', icon: '⚙️', activeTab, setActiveTab })}\n  </div>\n);\n\nexport const BenefitsScreen = () => {\n  const { user } = useAuthStore();\n  const coinsStore = useCoinsStore();\n  const shopStore = useShopStore();\n  const eventsStore = useCoinEventsStore();\n  \n  const [activeTab, setActiveTab] = useState<TabType>('shop');\n  const [userBalance, setUserBalance] = useState(0);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (user) {\n      initializeUserData({\n        user,\n        coinsStore,\n        handlers: { setUserBalance, setIsAdmin, setActiveTab }\n      });\n    }\n  }, [user, coinsStore]);\n\n  const onPurchaseBenefit = async (benefitId: string, coinCost: number) => \n    await handlePurchaseBenefit({\n      benefitId,\n      coinCost,\n      user: user!,\n      userBalance,\n      stores: { shopStore, coinsStore },\n      handlers: { setUserBalance, setError }\n    });\n\n  if (!user) return null;\n\n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <div className=\"flex-1 px-4 py-6 overflow-y-auto\">\n        {renderHeader(userBalance)}\n        {renderErrorMessage(error)}\n        {renderTabNavigation(activeTab, isAdmin, setActiveTab)}\n        {renderTabContent({\n          activeTab,\n          userBalance,\n          isAdmin,\n          user,\n          stores: { shopStore, coinsStore, eventsStore },\n          handlers: { onPurchaseBenefit, setError }\n        })}\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/CalendarScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (653). Maximum allowed is 30.","line":27,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":818,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":27,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":27,"endColumn":36},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (32). Maximum allowed is 15.","line":27,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":818,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 32. Maximum allowed is 10.","line":27,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":818,"endColumn":2},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":54,"column":37,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":54,"endColumn":39,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2088,2090],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":54,"column":91,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":54,"endColumn":93,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2123,2173],"text":"(foundUser.lastName ?? foundUser.name.split(' ')[1])"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (65). Maximum allowed is 30.","line":72,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":146,"endColumn":4},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":80,"column":11,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":80,"endColumn":66},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":81,"column":11,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":81,"endColumn":62},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":99,"column":20,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":101,"endColumn":61},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (671). Maximum allowed is 75.","line":102,"column":1,"nodeType":null,"messageId":"exceed","endLine":818,"endColumn":3},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":120,"column":20,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":121,"endColumn":75},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (61). Maximum allowed is 30.","line":151,"column":13,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":238,"endColumn":4},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (58). Maximum allowed is 30.","line":152,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":235,"endColumn":6},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":152,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":152,"endColumn":35},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (27). Maximum allowed is 15.","line":152,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":235,"endColumn":6},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":166,"column":13,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":166,"endColumn":80},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":167,"column":13,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":167,"endColumn":82},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":190,"column":15,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":190,"endColumn":60},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":213,"column":91,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":213,"endColumn":93,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8301,8303],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":243,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":243,"endColumn":56},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":253,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":253,"endColumn":55},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":263,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":263,"endColumn":26},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":270,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":270,"endColumn":33},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":288,"column":25,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":288,"endColumn":78},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":326,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":326,"endColumn":56},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":342,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":342,"endColumn":41},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":351,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":351,"endColumn":33},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":369,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":369,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[13074,13076],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (45). Maximum allowed is 30.","line":381,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":431,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":381,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":381,"endColumn":49},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 12. Maximum allowed is 10.","line":381,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":431,"endColumn":4},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":408,"column":23,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":408,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":436,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":436,"endColumn":47},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 7 times.","line":511,"column":19,"nodeType":"Literal","endLine":511,"endColumn":74},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 5 times.","line":512,"column":45,"nodeType":"Literal","endLine":512,"endColumn":69},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 7 times.","line":512,"column":72,"nodeType":"Literal","endLine":512,"endColumn":120},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":639,"column":24,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":639,"endColumn":29},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":659,"column":25,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":659,"endColumn":78},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":753,"column":99,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":753,"endColumn":101,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[28691,28693],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":783,"column":48,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":783,"endColumn":50,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[29970,29972],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":785,"column":44,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":785,"endColumn":46,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[30076,30078],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":42,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { YearView } from '../components/YearView';\nimport { useAuthStore } from '../state/auth';\nimport { useLeavesStore } from '../state/leaves';\nimport { useRemindersStore } from '../state/reminders';\nimport { useTimeRecordsStore } from '../state/timeRecords';\nimport { LeaveRequest } from '../types';\n// import { VacationReminder } from '../types/reminders';\nimport { CalendarDay } from '../types/calendar';\nimport { cn } from '../utils/cn';\n\ninterface CalendarEvent {\n  id: string;\n  title: string;\n  date: string;\n  type: 'vacation' | 'sick' | 'work' | 'reminder' | 'personal';\n  userId?: string;\n  color: string;\n}\n\n/**\n * Enhanced calendar screen with personal and team views\n * Features vacation planning, time tracking integration, and event management\n */\nexport const CalendarScreen = () => {\n  const navigate = useNavigate();\n  const { user, getAllUsers } = useAuthStore();\n  const { getAllLeaveRequests } = useLeavesStore();\n  const { getTimeRecordsForPeriod } = useTimeRecordsStore();\n  const { reminders } = useRemindersStore();\n  \n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [calendarDays, setCalendarDays] = useState<CalendarDay[]>([]);\n  const [viewMode, setViewMode] = useState<'personal' | 'team'>('personal');\n  const [calendarView, setCalendarView] = useState<'month' | 'year'>('month');\n  const [filterMode, setFilterMode] = useState<'all' | 'leaves' | 'work'>('all');\n  const [selectedDay, setSelectedDay] = useState<CalendarDay | null>(null);\n  const [showEventModal, setShowEventModal] = useState(false);\n  \n  // Check if user is admin\n  const isAdmin = user?.role === 'ADMIN' || user?.role === 'SUPERADMIN';\n  \n  const allUsers = useMemo(() => getAllUsers(), [getAllUsers]);\n  const allLeaves = getAllLeaveRequests();\n\n  /**\n   * Gets user name by ID\n   */\n  const getUserName = (userId: string): string => {\n    const foundUser = allUsers.find(u => u.id === userId);\n    if (foundUser) {\n      return `${foundUser.firstName || foundUser.name.split(' ')[0]} ${foundUser.lastName || foundUser.name.split(' ')[1] || ''}`.trim();\n    }\n    \n    const names: { [key: string]: string } = {\n      '1': 'Max M.',\n      '2': 'Anna A.',\n      '3': 'Tom K.',\n      '4': 'Test U.',\n      '5': 'Lisa S.',\n      '6': 'Julia B.',\n      '7': 'Marco L.'\n    };\n    return names[userId] || 'Unbekannt';\n  };\n\n  /**\n   * Generates calendar events for the current month\n   */\n  const generateCalendarEvents = (): CalendarEvent[] => {\n    const events: CalendarEvent[] = [];\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth();\n    \n    // Get month range\n    const startOfMonth = new Date(year, month, 1);\n    const endOfMonth = new Date(year, month + 1, 0);\n    const startDateStr = startOfMonth.toISOString().split('T')[0];\n    const endDateStr = endOfMonth.toISOString().split('T')[0];\n\n    // Add leave events\n    allLeaves\n      .filter(leave => {\n        const leaveStart = new Date(leave.startDate);\n        const leaveEnd = new Date(leave.endDate);\n        return (leaveStart <= endOfMonth && leaveEnd >= startOfMonth) && \n               leave.status === 'APPROVED' &&\n               (viewMode === 'team' || leave.userId === user?.id);\n      })\n      .forEach(leave => {\n        const startDate = new Date(Math.max(new Date(leave.startDate).getTime(), startOfMonth.getTime()));\n        const endDate = new Date(Math.min(new Date(leave.endDate).getTime(), endOfMonth.getTime()));\n        \n        for (let date = new Date(startDate); date <= endDate; date.setDate(date.getDate() + 1)) {\n          events.push({\n            id: `${leave.id}-${date.toISOString().split('T')[0]}`,\n            title: viewMode === 'team' ? \n              `${getUserName(leave.userId)} - ${leave.type === 'VACATION' ? 'Urlaub' : 'Krank'}` :\n              leave.type === 'VACATION' ? 'Urlaub' : 'Krank',\n            date: date.toISOString().split('T')[0],\n            type: leave.type === 'VACATION' ? 'vacation' : 'sick',\n            userId: leave.userId,\n            color: leave.type === 'VACATION' ? 'bg-blue-500' : 'bg-red-500'\n          });\n        }\n      });\n\n    // Add time records for personal view\n    if (viewMode === 'personal' && user) {\n      const timeRecords = getTimeRecordsForPeriod(user.id, startDateStr, endDateStr);\n      timeRecords.forEach(record => {\n        if (record.timeOut) { // Only completed records\n          events.push({\n            id: `time-${record.id}`,\n            title: `${record.totalHours.toFixed(1)}h gearbeitet`,\n            date: record.date,\n            type: 'work',\n            color: record.totalHours >= 8 ? 'bg-green-500' : \n                   record.totalHours >= 6 ? 'bg-yellow-500' : 'bg-red-500'\n          });\n        }\n      });\n    }\n\n    // Add reminders\n    reminders\n      .filter(reminder => {\n        const reminderDate = new Date(reminder.reminderDate);\n        return reminderDate >= startOfMonth && reminderDate <= endOfMonth && \n               reminder.isActive &&\n               (viewMode === 'team' || reminder.userId === user?.id);\n      })\n      .forEach(reminder => {\n        events.push({\n          id: `reminder-${reminder.id}`,\n          title: reminder.message,\n          date: reminder.reminderDate,\n          type: 'reminder',\n          color: 'bg-orange-500'\n        });\n      });\n\n    return events;\n  };\n\n  /**\n   * Generates calendar days with events and time data\n   */\n  useEffect(() => {\n    const generateCalendar = () => {\n      const year = currentDate.getFullYear();\n      const month = currentDate.getMonth();\n      \n      // First day of the month\n      const firstDay = new Date(year, month, 1);\n      \n      // Start from Monday of the week containing the first day\n      const startDate = new Date(firstDay);\n      const dayOfWeek = firstDay.getDay();\n      const daysToSubtract = dayOfWeek === 0 ? 6 : dayOfWeek - 1;\n      startDate.setDate(firstDay.getDate() - daysToSubtract);\n      \n      // Generate time records for the month\n      const startDateStr = new Date(year, month, 1).toISOString().split('T')[0];\n      const endDateStr = new Date(year, month + 1, 0).toISOString().split('T')[0];\n      \n      // Get user's time records if in personal mode\n      const userTimeRecords = user && viewMode === 'personal' ? \n        getTimeRecordsForPeriod(user.id, startDateStr, endDateStr) : [];\n      \n      // Generate team time records for team view\n      const teamTimeRecords = viewMode === 'team' ? \n        allUsers.flatMap(u => getTimeRecordsForPeriod(u.id, startDateStr, endDateStr)) : [];\n      \n      // Generate 42 days (6 weeks)\n      const days: CalendarDay[] = [];\n      const today = new Date();\n      \n      for (let i = 0; i < 42; i++) {\n        const date = new Date(startDate);\n        date.setDate(startDate.getDate() + i);\n        \n        const isCurrentMonth = date.getMonth() === month;\n        const isToday = date.toDateString() === today.toDateString();\n        const isWeekend = date.getDay() === 0 || date.getDay() === 6;\n        \n        // Find leaves for this date\n        const dateString = date.toISOString().split('T')[0];\n        const dayLeaves = allLeaves.filter(leave => {\n          const startDate = new Date(leave.startDate);\n          const endDate = new Date(leave.endDate);\n          const currentDate = new Date(dateString);\n          \n          return currentDate >= startDate && currentDate <= endDate && \n                 leave.status === 'APPROVED' &&\n                 (viewMode === 'team' || leave.userId === user?.id);\n        });\n\n        // User's leaves for personal view\n        const userLeaves = allLeaves.filter(leave => {\n          const startDate = new Date(leave.startDate);\n          const endDate = new Date(leave.endDate);\n          const currentDate = new Date(dateString);\n          \n          return currentDate >= startDate && currentDate <= endDate && \n                 leave.userId === user?.id && leave.status === 'APPROVED';\n        });\n        \n        // Find time records for this date\n        const _dayTimeRecords = teamTimeRecords.filter(record => record.date === dateString);\n        const userTimeRecord = userTimeRecords.find(record => record.date === dateString) || undefined;\n        \n        // Find reminders for this date\n        const dayReminders = reminders.filter(reminder => \n          reminder.reminderDate === dateString && reminder.isActive &&\n          (viewMode === 'team' || reminder.userId === user?.id)\n        );\n        \n        days.push({\n          date,\n          entries: [], // CalendarEntry[] - we'll populate this if needed\n          isToday,\n          isWeekend,\n          isCurrentMonth,\n          userLeaves,\n          userTimeRecord,\n          leaves: dayLeaves,\n          reminders: dayReminders\n        });\n      }\n      \n      setCalendarDays(days);\n    };\n    \n    generateCalendar();\n  }, [currentDate, allLeaves, reminders, viewMode, user, isAdmin, allUsers, getTimeRecordsForPeriod]);\n\n  /**\n   * Navigation functions\n   */\n  const navigateMonth = (direction: 'prev' | 'next') => {\n    const newDate = new Date(currentDate);\n    if (direction === 'prev') {\n      newDate.setMonth(currentDate.getMonth() - 1);\n    } else {\n      newDate.setMonth(currentDate.getMonth() + 1);\n    }\n    setCurrentDate(newDate);\n  };\n\n  const navigateYear = (direction: 'prev' | 'next') => {\n    const newDate = new Date(currentDate);\n    if (direction === 'prev') {\n      newDate.setFullYear(currentDate.getFullYear() - 1);\n    } else {\n      newDate.setFullYear(currentDate.getFullYear() + 1);\n    }\n    setCurrentDate(newDate);\n  };\n\n  const goToToday = () => {\n    setCurrentDate(new Date());\n  };\n\n  /**\n   * Get month year text\n   */\n  const getMonthYearText = () => {\n    return currentDate.toLocaleDateString('de-DE', {\n      month: 'long',\n      year: 'numeric'\n    });\n  };\n\n  /**\n   * Generate year view data with weeks for vacation overview.\n   * Creates a nested structure: userId -> weekNumber -> LeaveRequest[]\n   * \n   * @returns Object mapping user IDs to week numbers to leave requests\n   */\n  const generateYearData = (): { [userId: string]: { [week: string]: LeaveRequest[] } } => {\n    const year = currentDate.getFullYear();\n    const yearData: { [userId: string]: { [week: string]: LeaveRequest[] } } = {};\n    \n    // Get all users for team view\n    const usersToShow = viewMode === 'team' ? allUsers : (user ? [user] : []);\n    \n    // Initialize user data\n    usersToShow.forEach(u => {\n      yearData[u.id] = {};\n    });\n\n    // Get all approved leaves for the year\n    const yearLeaves = allLeaves.filter(leave => {\n      const leaveYear = new Date(leave.startDate).getFullYear();\n      return leaveYear === year && leave.status === 'APPROVED';\n    });\n\n    // Process each week of the year (52-53 weeks)\n    for (let week = 1; week <= 53; week++) {\n      const weekStart = getDateOfWeek(week, year);\n      const weekEnd = new Date(weekStart);\n      weekEnd.setDate(weekEnd.getDate() + 6);\n\n      usersToShow.forEach(u => {\n        yearData[u.id][week] = yearLeaves.filter(leave => {\n          if (leave.userId !== u.id) return false;\n          \n          const leaveStart = new Date(leave.startDate);\n          const leaveEnd = new Date(leave.endDate);\n          \n          // Check if leave overlaps with this week\n          return leaveStart <= weekEnd && leaveEnd >= weekStart;\n        });\n      });\n    }\n\n    return yearData;\n  };\n\n  /**\n   * Get the first day of a specific week in a year\n   */\n  const getDateOfWeek = (week: number, year: number) => {\n    const jan1 = new Date(year, 0, 1);\n    const days = (week - 1) * 7;\n    const weekStart = new Date(jan1.getTime() + days * 24 * 60 * 60 * 1000);\n    \n    // Adjust to Monday\n    const dayOfWeek = weekStart.getDay();\n    const diff = (dayOfWeek === 0 ? -6 : 1) - dayOfWeek;\n    weekStart.setDate(weekStart.getDate() + diff);\n    \n    return weekStart;\n  };\n\n  /**\n   * Get week number for a date\n   */\n  const _getWeekNumber = (date: Date) => {\n    const start = new Date(date.getFullYear(), 0, 1);\n    const days = Math.floor((date.getTime() - start.getTime()) / (24 * 60 * 60 * 1000));\n    return Math.ceil((days + start.getDay() + 1) / 7);\n  };\n\n  /**\n   * Get vacation days remaining for current user\n   */\n  const getVacationStats = () => {\n    if (!user) return { total: 0, used: 0, remaining: 0 };\n    \n    const currentYear = new Date().getFullYear();\n    const approvedVacations = allLeaves.filter(leave =>\n      leave.userId === user.id &&\n      leave.type === 'VACATION' &&\n      leave.status === 'APPROVED' &&\n      new Date(leave.startDate).getFullYear() === currentYear\n    );\n    \n    const usedDays = approvedVacations.reduce((total, leave) => {\n      const start = new Date(leave.startDate);\n      const end = new Date(leave.endDate);\n      const days = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)) + 1;\n      return total + days;\n    }, 0);\n    \n    const totalDays = user.vacationDays || 30;\n    \n    return {\n      total: totalDays,\n      used: usedDays,\n      remaining: Math.max(0, totalDays - usedDays)\n    };\n  };\n\n  /**\n   * Renders day content based on view mode and filters\n   */\n  const renderDayContent = (day: CalendarDay) => {\n    const dayDateString = day.date instanceof Date ? day.date.toISOString().split('T')[0] : day.date;\n    const events = generateCalendarEvents().filter(event => event.date === dayDateString);\n    \n    // Apply filter\n    const filteredEvents = events.filter(event => {\n      if (filterMode === 'all') return true;\n      if (filterMode === 'leaves') return event.type === 'vacation' || event.type === 'sick';\n      if (filterMode === 'work') return event.type === 'work';\n      return true;\n    });\n\n    return (\n      <div className=\"h-full flex flex-col p-1\">\n        {/* Day number */}\n        <span className={cn(\n          \"text-sm font-medium mb-1\",\n          !day.isCurrentMonth && \"text-gray-400\",\n          day.isToday && \"text-blue-600 font-bold\",\n          day.isWeekend && day.isCurrentMonth && \"text-gray-600\"\n        )}>\n          {day.date instanceof Date ? day.date.getDate() : new Date(day.date).getDate()}\n        </span>\n        \n        {/* Events */}\n        <div className=\"flex-1 space-y-0.5\">\n          {filteredEvents.slice(0, 3).map((event, index) => (\n            <div key={index} className={cn(\n              \"text-xs px-1 py-0.5 rounded text-white truncate\",\n              event.color\n            )}>\n              {event.title}\n            </div>\n          ))}\n          \n          {filteredEvents.length > 3 && (\n            <div className=\"text-xs text-gray-500\">\n              +{filteredEvents.length - 3} mehr\n            </div>\n          )}\n        </div>\n        \n        {/* Weekend indicator */}\n        {day.isWeekend && day.isCurrentMonth && (\n          <div className=\"text-xs text-gray-400 mt-auto\">\n            {(day.date instanceof Date ? day.date.getDay() : new Date(day.date).getDay()) === 6 ? 'SA' : 'SO'}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  /**\n   * Handle day click\n   */\n  const handleDayClick = (day: CalendarDay) => {\n    setSelectedDay(day);\n    setShowEventModal(true);\n  };\n\n  const weekdays = ['Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa', 'So'];\n  const vacationStats = getVacationStats();\n\n  if (!user) return null;\n\n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <div className=\"flex-1 px-4 py-6 overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-xl font-bold text-gray-900\">\n            {viewMode === 'personal' ? 'Mein Kalender' : 'Team Kalender'}\n          </h1>\n          \n          <div className=\"flex items-center space-x-3\">\n            {/* Team Calendar Link for Admins */}\n            {isAdmin && (\n              <button\n                onClick={() => navigate('/team-calendar')}\n                className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm flex items-center gap-2\"\n              >\n                📊 Team-Kalender\n              </button>\n            )}\n            \n            {/* Quick Actions */}\n            <button\n              onClick={() => navigate('/request-leave')}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm\"\n            >\n              + Urlaub\n            </button>\n            \n            {/* Today Button */}\n            <button\n              onClick={goToToday}\n              className=\"bg-white px-3 py-2 rounded-lg shadow-sm hover:bg-gray-50 transition-colors text-sm border\"\n            >\n              Heute\n            </button>\n            \n            {/* Month/Year Navigation */}\n            <div className=\"flex items-center space-x-2\">\n              <button \n                onClick={() => calendarView === 'month' ? navigateMonth('prev') : navigateYear('prev')}\n                className=\"w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm hover:bg-gray-50 transition-colors\"\n              >\n                <span className=\"text-lg text-gray-600\">‹</span>\n              </button>\n              <h2 className=\"text-lg font-semibold text-gray-900 min-w-40 text-center\">\n                {calendarView === 'month' ? getMonthYearText() : currentDate.getFullYear()}\n              </h2>\n              <button \n                onClick={() => calendarView === 'month' ? navigateMonth('next') : navigateYear('next')}\n                className=\"w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm hover:bg-gray-50 transition-colors\"\n              >\n                <span className=\"text-lg text-gray-600\">›</span>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* View Toggle and Stats */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6\">\n          {/* View Mode Toggle */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"flex bg-white rounded-lg p-1 shadow-sm\">\n              <button\n                onClick={() => setViewMode('personal')}\n                className={cn(\n                  \"flex-1 py-2 px-3 rounded-md transition-colors text-sm\",\n                  viewMode === 'personal' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n                )}\n              >\n                👤 Persönlich\n              </button>\n              <button\n                onClick={() => setViewMode('team')}\n                className={cn(\n                  \"flex-1 py-2 px-3 rounded-md transition-colors text-sm\",\n                  viewMode === 'team' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n                )}\n              >\n                👥 Team\n              </button>\n            </div>\n          </div>\n\n          {/* Calendar View Toggle */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"flex bg-white rounded-lg p-1 shadow-sm\">\n              <button\n                onClick={() => setCalendarView('month')}\n                className={cn(\n                  \"flex-1 py-2 px-3 rounded-md transition-colors text-sm\",\n                  calendarView === 'month' ? \"bg-green-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n                )}\n              >\n                📅 Monat\n              </button>\n              <button\n                onClick={() => setCalendarView('year')}\n                className={cn(\n                  \"flex-1 py-2 px-3 rounded-md transition-colors text-sm\",\n                  calendarView === 'year' ? \"bg-green-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n                )}\n              >\n                📆 Jahr\n              </button>\n            </div>\n          </div>\n\n          {/* Vacation Stats (Personal View Only) */}\n          {viewMode === 'personal' && (\n            <div className=\"lg:col-span-2\">\n              <div className=\"bg-white rounded-xl p-4 shadow-sm\">\n                <h3 className=\"text-sm font-medium text-gray-700 mb-3\">Urlaubsübersicht {new Date().getFullYear()}</h3>\n                <div className=\"grid grid-cols-3 gap-4\">\n                  <div className=\"text-center\">\n                    <p className=\"text-2xl font-bold text-blue-600\">{vacationStats.total}</p>\n                    <p className=\"text-xs text-gray-500\">Gesamt</p>\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-2xl font-bold text-red-600\">{vacationStats.used}</p>\n                    <p className=\"text-xs text-gray-500\">Genommen</p>\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-2xl font-bold text-green-600\">{vacationStats.remaining}</p>\n                    <p className=\"text-xs text-gray-500\">Verfügbar</p>\n                  </div>\n                </div>\n                \n                {/* Progress Bar */}\n                <div className=\"mt-3\">\n                  <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                    <div \n                      className=\"bg-blue-500 h-2 rounded-full transition-all\"\n                      style={{ width: `${Math.min(100, (vacationStats.used / vacationStats.total) * 100)}%` }}\n                    />\n                  </div>\n                  <p className=\"text-xs text-gray-500 mt-1 text-center\">\n                    {((vacationStats.used / vacationStats.total) * 100).toFixed(0)}% verbraucht\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Filter Toggle */}\n        <div className=\"flex bg-white rounded-lg p-1 mb-4 shadow-sm\">\n          <button\n            onClick={() => setFilterMode('all')}\n            className={cn(\n              \"flex-1 py-2 px-3 rounded-md transition-colors text-sm\",\n              filterMode === 'all' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n            )}\n          >\n            Alle\n          </button>\n          <button\n            onClick={() => setFilterMode('leaves')}\n            className={cn(\n              \"flex-1 py-2 px-3 rounded-md transition-colors text-sm\",\n              filterMode === 'leaves' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n            )}\n          >\n            Abwesenheit\n          </button>\n          {viewMode === 'personal' && (\n            <button\n              onClick={() => setFilterMode('work')}\n              className={cn(\n                \"flex-1 py-2 px-3 rounded-md transition-colors text-sm\",\n                filterMode === 'work' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n              )}\n            >\n              Arbeitszeit\n            </button>\n          )}\n        </div>\n\n        {/* Calendar */}\n        <div className=\"bg-white rounded-xl p-4 shadow-sm\">\n          {/* Weekday headers */}\n          <div className=\"grid grid-cols-7 mb-2\">\n            {weekdays.map((day) => (\n              <div key={day} className=\"flex items-center justify-center py-3\">\n                <span className=\"text-sm font-semibold text-gray-500\">{day}</span>\n              </div>\n            ))}\n          </div>\n\n          {/* Calendar grid - Month View */}\n          {calendarView === 'month' && (\n            <div className=\"grid grid-cols-7 gap-0 border border-gray-200 rounded-lg overflow-hidden\">\n              {calendarDays.map((day, index) => (\n                <button\n                  key={index}\n                  className={cn(\n                    \"aspect-square border-b border-r border-gray-100 text-left hover:bg-gray-50 transition-colors relative\",\n                    !day.isCurrentMonth && \"bg-gray-50\",\n                    day.isToday && \"bg-blue-50 border-blue-200\",\n                    day.isWeekend && \"bg-gray-25\"\n                  )}\n                  onClick={() => handleDayClick(day)}\n                >\n                  {renderDayContent(day)}\n                </button>\n              ))}\n            </div>\n          )}\n\n          {/* Year View */}\n          {calendarView === 'year' && (\n            <YearView \n              year={currentDate.getFullYear()} \n              yearData={generateYearData()} \n              allUsers={viewMode === 'team' ? allUsers : (user ? [user] : [])}\n              viewMode={viewMode}\n              getUserName={getUserName}\n            />\n          )}\n        </div>\n\n        {/* Legend */}\n        <div className=\"bg-white rounded-xl p-4 mt-4 shadow-sm\">\n          <h3 className=\"text-sm font-semibold text-gray-900 mb-3\">Legende</h3>\n          <div className=\"flex flex-wrap gap-4\">\n            <div className=\"flex items-center\">\n              <div className=\"w-3 h-3 bg-blue-500 rounded-full mr-2\" />\n              <span className=\"text-sm text-gray-600\">Urlaub</span>\n            </div>\n            <div className=\"flex items-center\">\n              <div className=\"w-3 h-3 bg-red-500 rounded-full mr-2\" />\n              <span className=\"text-sm text-gray-600\">Krankheit</span>\n            </div>\n            {viewMode === 'personal' && (\n              <>\n                <div className=\"flex items-center\">\n                  <div className=\"w-3 h-3 bg-green-500 rounded-full mr-2\" />\n                  <span className=\"text-sm text-gray-600\">Vollzeit (≥8h)</span>\n                </div>\n                <div className=\"flex items-center\">\n                  <div className=\"w-3 h-3 bg-yellow-500 rounded-full mr-2\" />\n                  <span className=\"text-sm text-gray-600\">Teilzeit (6-8h)</span>\n                </div>\n                <div className=\"flex items-center\">\n                  <div className=\"w-3 h-3 bg-red-500 rounded-full mr-2\" />\n                  <span className=\"text-sm text-gray-600\">Unterzeit (&lt;6h)</span>\n                </div>\n              </>\n            )}\n            <div className=\"flex items-center\">\n              <div className=\"w-3 h-3 bg-orange-500 rounded-full mr-2\" />\n              <span className=\"text-sm text-gray-600\">Erinnerung</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Day Detail Modal */}\n      {showEventModal && selectedDay && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-xl p-6 max-w-md w-full max-h-96 overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold\">\n                {(selectedDay.date instanceof Date ? selectedDay.date : new Date(selectedDay.date)).toLocaleDateString('de-DE', { \n                  weekday: 'long',\n                  day: 'numeric',\n                  month: 'long',\n                  year: 'numeric'\n                })}\n              </h3>\n              <button\n                onClick={() => setShowEventModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                ✕\n              </button>\n            </div>\n            \n            <div className=\"space-y-3\">\n              {/* User's events */}\n              {selectedDay.userLeaves?.map(leave => (\n                <div key={leave.id} className=\"p-3 bg-blue-50 rounded-lg\">\n                  <div className=\"flex items-center\">\n                    <span className=\"text-2xl mr-3\">\n                      {leave.type === 'VACATION' ? '🏖️' : '🏥'}\n                    </span>\n                    <div>\n                      <p className=\"font-medium\">\n                        {leave.type === 'VACATION' ? 'Urlaub' : 'Krankheit'}\n                      </p>\n                      {leave.comment && (\n                        <p className=\"text-sm text-gray-600\">{leave.comment}</p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n              \n              {/* User's time record */}\n              {selectedDay.userTimeRecord && (\n                <div className=\"p-3 bg-green-50 rounded-lg\">\n                  <div className=\"flex items-center\">\n                    <span className=\"text-2xl mr-3\">⏰</span>\n                    <div>\n                      <p className=\"font-medium\">\n                        {selectedDay.userTimeRecord.totalHours.toFixed(1)}h gearbeitet\n                      </p>\n                      <p className=\"text-sm text-gray-600\">\n                        {selectedDay.userTimeRecord.timeIn} - {selectedDay.userTimeRecord.timeOut || 'läuft'}\n                        {selectedDay.userTimeRecord.breakMinutes > 0 && (\n                          <span> (Pause: {selectedDay.userTimeRecord.breakMinutes}min)</span>\n                        )}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              )}\n              \n              {/* Team events (if team view) */}\n              {viewMode === 'team' && selectedDay.leaves?.map(leave => (\n                <div key={leave.id} className=\"p-3 bg-gray-50 rounded-lg\">\n                  <div className=\"flex items-center\">\n                    <span className=\"text-2xl mr-3\">\n                      {leave.type === 'VACATION' ? '🏖️' : '🏥'}\n                    </span>\n                    <div>\n                      <p className=\"font-medium\">\n                        {getUserName(leave.userId)} - {leave.type === 'VACATION' ? 'Urlaub' : 'Krank'}\n                      </p>\n                      {leave.comment && (\n                        <p className=\"text-sm text-gray-600\">{leave.comment}</p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n              \n              {/* No events */}\n              {(selectedDay.userLeaves?.length || 0) === 0 && \n               !selectedDay.userTimeRecord && \n               (selectedDay.leaves?.length || 0) === 0 && (\n                <p className=\"text-gray-500 text-center py-4\">\n                  Keine Ereignisse an diesem Tag\n                </p>\n              )}\n            </div>\n            \n            {/* Quick Actions */}\n            <div className=\"mt-6 flex space-x-3\">\n              <button\n                onClick={() => {\n                  setShowEventModal(false);\n                  navigate('/request-leave');\n                }}\n                className=\"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n              >\n                Urlaub beantragen\n              </button>\n              <button\n                onClick={() => {\n                  setShowEventModal(false);\n                  navigate('/time');\n                }}\n                className=\"flex-1 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors\"\n              >\n                Zeiten erfassen\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/CoinHistoryScreen.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":3,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":3,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nexport const CoinHistoryScreen = () => {\n  return (\n    <div className=\"flex-1 bg-gray-50 p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">Coin-Verlauf</h1>\n      <p>Coming soon...</p>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/CreateTrainingScreen.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":3,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":3,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nexport const CreateTrainingScreen = () => {\n  return (\n    <div className=\"flex-1 bg-gray-50 p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">Training erstellen</h1>\n      <p>Coming soon...</p>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/DashboardInfoAdminScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (169). Maximum allowed is 30.","line":42,"column":6,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":233,"endColumn":2},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":57,"column":43,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":57,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1412,1414],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":59,"column":39,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":59,"endColumn":41,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1509,1511],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":75,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":75,"endColumn":53},{"ruleId":"max-statements","severity":1,"message":"Async arrow function has too many statements (17). Maximum allowed is 15.","line":75,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":113,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":96,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":96,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2300,2302],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (464). Maximum allowed is 75.","line":101,"column":1,"nodeType":null,"messageId":"exceed","endLine":544,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (87). Maximum allowed is 30.","line":243,"column":6,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":334,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":246,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":246,"endColumn":31},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (175). Maximum allowed is 30.","line":339,"column":51,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":544,"endColumn":2},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":366,"column":6,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":366,"endColumn":91,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[11791,11876],"text":"item.description?.toLowerCase().includes(searchTerm.toLowerCase())"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":372,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":372,"endColumn":45},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":388,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":388,"endColumn":46},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":396,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":396,"endColumn":33},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":496,"column":10,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":533,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * DashboardInfoAdminScreen Component\n * \n * Admin interface for managing dashboard info items that will be displayed\n * in the user dashboard news section. Allows uploading, editing, and managing\n * images and PDF files with titles and descriptions.\n */\n\nimport { \n  Plus, \n  Edit, \n  Trash2, \n  Eye, \n  EyeOff, \n  Download, \n  Calendar,\n  FileText,\n  Image as ImageIcon,\n  Search,\n  Save,\n  X,\n  Info\n} from 'lucide-react';\nimport React, { useState, useEffect } from 'react';\n\nimport { FileUpload } from '../components/FileUpload';\nimport { useDashboardInfoStore } from '../state/dashboardInfo';\nimport { \n  DashboardInfo, \n  CreateDashboardInfoForm, \n  UpdateDashboardInfoForm,\n  DashboardInfoSortOption \n} from '../types/dashboardInfo';\n\n/**\n * Modal for creating/editing dashboard info items\n */\nconst DashboardInfoModal: React.FC<{\n  isOpen: boolean;\n  onClose: () => void;\n  editItem?: DashboardInfo | null;\n}> = ({ isOpen, onClose, editItem }) => {\n  const { createItem, updateItem, isLoading } = useDashboardInfoStore();\n  const [formData, setFormData] = useState<CreateDashboardInfoForm>({\n    title: '',\n    description: '',\n    file: null,\n    expiresAt: ''\n  });\n  const [error, setError] = useState<string | null>(null);\n\n  // Initialize form data when editing\n  useEffect(() => {\n    if (editItem) {\n      setFormData({\n        title: editItem.title,\n        description: editItem.description || '',\n        file: null, // File replacement is optional\n        expiresAt: editItem.expiresAt || ''\n      });\n    } else {\n      setFormData({\n        title: '',\n        description: '',\n        file: null,\n        expiresAt: ''\n      });\n    }\n    setError(null);\n  }, [editItem, isOpen]);\n\n  /**\n   * Handle form submission\n   */\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n\n    // Validation\n    if (!formData.title.trim()) {\n      setError('Titel ist erforderlich');\n      return;\n    }\n\n    if (!editItem && !formData.file) {\n      setError('Datei ist erforderlich');\n      return;\n    }\n\n    try {\n      if (editItem) {\n        // Update existing item\n        const updateData: UpdateDashboardInfoForm = {\n          title: formData.title,\n          description: formData.description,\n          expiresAt: formData.expiresAt || undefined\n        };\n        \n        if (formData.file) {\n          updateData.file = formData.file;\n        }\n\n        await updateItem(editItem.id, updateData);\n      } else {\n        // Create new item\n        await createItem(formData);\n      }\n      \n      onClose();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Ein Fehler ist aufgetreten');\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-2xl font-bold text-gray-900\">\n              {editItem ? 'Info bearbeiten' : 'Neue Info erstellen'}\n            </h2>\n            <button\n              onClick={onClose}\n              className=\"p-2 text-gray-400 hover:text-gray-600\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          {/* Form */}\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* Title */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Titel *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"Titel der Nachricht eingeben...\"\n                required\n              />\n            </div>\n\n            {/* Description */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Beschreibung\n              </label>\n              <textarea\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                rows={3}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"Optionale Beschreibung...\"\n              />\n            </div>\n\n            {/* File Upload */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Datei {!editItem && '*'}\n              </label>\n              <FileUpload\n                onFileSelect={(file) => setFormData({ ...formData, file })}\n                onFileRemove={() => setFormData({ ...formData, file: null })}\n                selectedFile={formData.file}\n                isUploading={isLoading}\n                placeholder={editItem ? 'Neue Datei auswählen (optional)' : 'Datei auswählen'}\n              />\n              {editItem && !formData.file && (\n                <p className=\"text-sm text-gray-500 mt-2\">\n                  Aktuelle Datei: {editItem.file.filename}\n                </p>\n              )}\n            </div>\n\n            {/* Expiry Date */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Ablaufdatum (optional)\n              </label>\n              <input\n                type=\"date\"\n                value={formData.expiresAt}\n                onChange={(e) => setFormData({ ...formData, expiresAt: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                min={new Date().toISOString().split('T')[0]}\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">\n                Info wird automatisch nach diesem Datum ausgeblendet\n              </p>\n            </div>\n\n            {/* Error Message */}\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 rounded-md p-3\">\n                <p className=\"text-red-700 text-sm\">{error}</p>\n              </div>\n            )}\n\n            {/* Actions */}\n            <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                disabled={isLoading}\n                className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 disabled:opacity-50\"\n              >\n                Abbrechen\n              </button>\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2\"\n              >\n                {isLoading && <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>}\n                <Save className=\"w-4 h-4\" />\n                <span>{editItem ? 'Aktualisieren' : 'Erstellen'}</span>\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n/**\n * Item card component for displaying dashboard info items\n */\nconst DashboardInfoCard: React.FC<{\n  item: DashboardInfo;\n  onEdit: (item: DashboardInfo) => void;\n  onDelete: (id: string) => void;\n  onToggleActive: (id: string) => void;\n}> = ({ item, onEdit, onDelete, onToggleActive }) => {\n  const { formatFileSize } = useDashboardInfoStore();\n\n  const handleDownload = () => {\n    // Create download link for the file\n    const link = document.createElement('a');\n    link.href = item.file.data;\n    link.download = item.file.filename;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  return (\n    <div className={`bg-white rounded-lg border p-4 ${!item.isActive ? 'opacity-60' : ''}`}>\n      <div className=\"flex items-start justify-between mb-3\">\n        <div className=\"flex-1\">\n          <h3 className=\"font-semibold text-gray-900\">{item.title}</h3>\n          {item.description && (\n            <p className=\"text-sm text-gray-600 mt-1\">{item.description}</p>\n          )}\n        </div>\n        <div className=\"flex items-center space-x-1 ml-4\">\n          <button\n            onClick={() => onToggleActive(item.id)}\n            className={`p-1 rounded ${item.isActive ? 'text-green-600 hover:bg-green-50' : 'text-gray-400 hover:bg-gray-50'}`}\n            title={item.isActive ? 'Deaktivieren' : 'Aktivieren'}\n          >\n            {item.isActive ? <Eye className=\"w-4 h-4\" /> : <EyeOff className=\"w-4 h-4\" />}\n          </button>\n          <button\n            onClick={() => onEdit(item)}\n            className=\"p-1 text-blue-600 hover:bg-blue-50 rounded\"\n            title=\"Bearbeiten\"\n          >\n            <Edit className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => onDelete(item.id)}\n            className=\"p-1 text-red-600 hover:bg-red-50 rounded\"\n            title=\"Löschen\"\n          >\n            <Trash2 className=\"w-4 h-4\" />\n          </button>\n        </div>\n      </div>\n\n      {/* File Info */}\n      <div className=\"flex items-center space-x-3 p-3 bg-gray-50 rounded-md\">\n        <div className=\"flex-shrink-0\">\n          {item.file.type === 'image' ? (\n            <img \n              src={item.file.data} \n              alt={item.file.filename}\n              className=\"w-12 h-12 object-cover rounded border\"\n            />\n          ) : (\n            <div className=\"w-12 h-12 bg-red-100 rounded flex items-center justify-center\">\n              <FileText className=\"w-6 h-6 text-red-600\" />\n            </div>\n          )}\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"text-sm font-medium text-gray-900 truncate\">\n            {item.file.filename}\n          </p>\n          <p className=\"text-xs text-gray-500\">\n            {formatFileSize(item.file.size)} • {item.file.type.toUpperCase()}\n          </p>\n        </div>\n        <button\n          onClick={handleDownload}\n          className=\"p-1 text-gray-600 hover:bg-gray-200 rounded\"\n          title=\"Herunterladen\"\n        >\n          <Download className=\"w-4 h-4\" />\n        </button>\n      </div>\n\n      {/* Metadata */}\n      <div className=\"flex items-center justify-between mt-3 text-xs text-gray-500\">\n        <span>Erstellt: {new Date(item.createdAt).toLocaleDateString('de-DE')}</span>\n        {item.expiresAt && (\n          <span className=\"flex items-center space-x-1\">\n            <Calendar className=\"w-3 h-3\" />\n            <span>Läuft ab: {new Date(item.expiresAt).toLocaleDateString('de-DE')}</span>\n          </span>\n        )}\n      </div>\n    </div>\n  );\n};\n\n/**\n * Main Dashboard Info Admin Screen Component\n */\nexport const DashboardInfoAdminScreen: React.FC = () => {\n  const { \n    items, \n    isLoading, \n    loadItems, \n    deleteItem, \n    toggleActive, \n    getStats,\n    setSortBy,\n    sortBy\n  } = useDashboardInfoStore();\n  \n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editItem, setEditItem] = useState<DashboardInfo | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [_showFilters, _setShowFilters] = useState(false);\n\n  // Load items on mount\n  useEffect(() => {\n    loadItems();\n  }, [loadItems]);\n\n  /**\n   * Filter items based on search term\n   */\n  const filteredItems = items.filter(item =>\n    item.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    (item.description && item.description.toLowerCase().includes(searchTerm.toLowerCase()))\n  );\n\n  /**\n   * Handle item deletion\n   */\n  const handleDelete = async (id: string) => {\n    // TODO: Replace with modal confirmation component\n    // if (window.confirm('Sind Sie sicher, dass Sie diese Info löschen möchten?')) {\n      try {\n        await deleteItem(id);\n      } catch (error) {\n        // TODO: Replace with toast notification\n        // alert('Fehler beim Löschen der Info');\n        console.error('Error deleting info:', error);\n      }\n    // }\n  };\n\n  /**\n   * Handle edit modal\n   */\n  const handleEdit = (item: DashboardInfo) => {\n    setEditItem(item);\n    setIsModalOpen(true);\n  };\n\n  /**\n   * Handle modal close\n   */\n  const handleModalClose = () => {\n    setIsModalOpen(false);\n    setEditItem(null);\n  };\n\n  const stats = getStats();\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">Dashboard Info</h1>\n                <p className=\"text-gray-600\">Verwalten Sie Nachrichten und Dateien für das Nutzer-Dashboard</p>\n              </div>\n              <button\n                onClick={() => setIsModalOpen(true)}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center space-x-2\"\n              >\n                <Plus className=\"w-4 h-4\" />\n                <span>Neue Info</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n          <div className=\"bg-white p-4 rounded-lg border\">\n            <div className=\"flex items-center space-x-2\">\n              <Info className=\"w-5 h-5 text-blue-500\" />\n              <span className=\"text-sm text-gray-600\">Gesamt</span>\n            </div>\n            <p className=\"text-2xl font-bold text-gray-900\">{stats.totalItems}</p>\n          </div>\n          <div className=\"bg-white p-4 rounded-lg border\">\n            <div className=\"flex items-center space-x-2\">\n              <Eye className=\"w-5 h-5 text-green-500\" />\n              <span className=\"text-sm text-gray-600\">Aktiv</span>\n            </div>\n            <p className=\"text-2xl font-bold text-gray-900\">{stats.activeItems}</p>\n          </div>\n          <div className=\"bg-white p-4 rounded-lg border\">\n            <div className=\"flex items-center space-x-2\">\n              <ImageIcon className=\"w-5 h-5 text-purple-500\" />\n              <span className=\"text-sm text-gray-600\">Bilder</span>\n            </div>\n            <p className=\"text-2xl font-bold text-gray-900\">{stats.imageCount}</p>\n          </div>\n          <div className=\"bg-white p-4 rounded-lg border\">\n            <div className=\"flex items-center space-x-2\">\n              <FileText className=\"w-5 h-5 text-red-500\" />\n              <span className=\"text-sm text-gray-600\">PDFs</span>\n            </div>\n            <p className=\"text-2xl font-bold text-gray-900\">{stats.pdfCount}</p>\n          </div>\n        </div>\n\n        {/* Controls */}\n        <div className=\"bg-white rounded-lg border p-4 mb-6\">\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0\">\n            {/* Search */}\n            <div className=\"relative flex-1 max-w-md\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Nach Titel oder Beschreibung suchen...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 w-full\"\n              />\n            </div>\n\n            {/* Sort */}\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"flex items-center space-x-2\">\n                <span className=\"text-sm text-gray-500\">Sortieren:</span>\n                <select\n                  value={sortBy}\n                  onChange={(e) => setSortBy(e.target.value as DashboardInfoSortOption)}\n                  className=\"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"newest\">Neueste zuerst</option>\n                  <option value=\"oldest\">Älteste zuerst</option>\n                  <option value=\"title-asc\">Titel A-Z</option>\n                  <option value=\"title-desc\">Titel Z-A</option>\n                  <option value=\"size-asc\">Größe aufsteigend</option>\n                  <option value=\"size-desc\">Größe absteigend</option>\n                </select>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Items Grid */}\n        {isLoading ? (\n          <div className=\"flex justify-center items-center py-12\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n          </div>\n        ) : filteredItems.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <Info className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              {searchTerm ? 'Keine Suchergebnisse' : 'Noch keine Infos erstellt'}\n            </h3>\n            <p className=\"text-gray-600 mb-4\">\n              {searchTerm \n                ? 'Versuchen Sie andere Suchbegriffe' \n                : 'Erstellen Sie Ihre erste Dashboard-Info'\n              }\n            </p>\n            {!searchTerm && (\n              <button\n                onClick={() => setIsModalOpen(true)}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\"\n              >\n                Neue Info erstellen\n              </button>\n            )}\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {filteredItems.map((item) => (\n              <DashboardInfoCard\n                key={item.id}\n                item={item}\n                onEdit={handleEdit}\n                onDelete={handleDelete}\n                onToggleActive={toggleActive}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Modal */}\n      <DashboardInfoModal\n        isOpen={isModalOpen}\n        onClose={handleModalClose}\n        editItem={editItem}\n      />\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/DashboardScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (398). Maximum allowed is 30.","line":15,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":449,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":15,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":37},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (33). Maximum allowed is 15.","line":15,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":449,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 51. Maximum allowed is 10.","line":15,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":449,"endColumn":2},{"ruleId":"sonarjs/cognitive-complexity","severity":1,"message":"Refactor this function to reduce its Cognitive Complexity from 19 to the 15 allowed.","line":15,"column":35,"nodeType":null,"messageId":"refactorFunction","endLine":15,"endColumn":37},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":23,"column":65,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":23,"endColumn":67,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[979,981],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":34,"column":51,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":34,"endColumn":53,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1393,1395],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":40,"column":40,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":40,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1517,1519],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":41,"column":58,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":41,"endColumn":60,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1581,1583],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":42,"column":60,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":42,"endColumn":62,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1647,1649],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":51,"column":9,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":51,"endColumn":59},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":53,"column":9,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":53,"endColumn":38},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":79,"column":55,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":79,"endColumn":57,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3069,3071],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":90,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":90,"endColumn":41},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (406). Maximum allowed is 75.","line":102,"column":1,"nodeType":null,"messageId":"exceed","endLine":449,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":108,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":108,"endColumn":39},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":124,"column":53,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":124,"endColumn":55,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4518,4520],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":173,"column":66,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":173,"endColumn":68,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6652,6654],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":178,"column":66,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":178,"endColumn":68,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6848,6850],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":298,"column":48,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":298,"endColumn":50,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12053,12055],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":300,"column":86,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":300,"endColumn":88,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12187,12189],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":362,"column":71,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":362,"endColumn":73,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[14987,14989],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":22,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { useAuthStore } from '../state/auth';\nimport { useCoinEventsStore } from '../state/coinEvents';\nimport { useCoinsStore } from '../state/coins';\nimport { useLeavesStore } from '../state/leaves';\nimport { useTimeRecordsStore } from '../state/timeRecords';\nimport { cn } from '../utils/cn';\n\n/**\n * Main dashboard screen showing personalized information\n * Different views for employees and admins\n */\nexport const DashboardScreen = () => {\n  const navigate = useNavigate();\n  const { user, organization, logout, updateUser, getAllUsers } = useAuthStore();\n  const { getAllLeaveRequests } = useLeavesStore();\n  const { getTimeRecords, getMonthlyStats, getWeeklyStats } = useTimeRecordsStore();\n  const { getUserBalance } = useCoinsStore();\n  const { getNextEvent, getUnlockedEvents } = useCoinEventsStore();\n\n  const [selectedUserId, setSelectedUserId] = useState(user?.id || '');\n  const [isEditingUser, setIsEditingUser] = useState(false);\n  const [editForm, setEditForm] = useState({\n    position: '',\n    weeklyHours: '',\n    vacationDays: ''\n  });\n\n  const isAdmin = user?.role === 'ADMIN' || user?.role === 'SUPERADMIN';\n  const allUsers = isAdmin ? getAllUsers() : [];\n  const displayUser = isAdmin && selectedUserId !== user.id \n    ? allUsers.find(u => u.id === selectedUserId) || user \n    : user;\n\n  useEffect(() => {\n    if (displayUser) {\n      setEditForm({\n        position: displayUser.position || '',\n        weeklyHours: displayUser.weeklyHours?.toString() || '',\n        vacationDays: displayUser.vacationDays?.toString() || ''\n      });\n    }\n  }, [displayUser]);\n\n  if (!user || !displayUser) return null;\n\n  // Get user's data\n  const userBalance = getUserBalance(displayUser.id);\n  const todayDate = new Date().toISOString().split('T')[0];\n  const todayRecords = getTimeRecords(displayUser.id).filter(record => record.date === todayDate);\n  const todayRecord = todayRecords[0];\n  \n  // Calculate monthly and weekly stats\n  const currentMonth = new Date().getMonth();\n  const currentYear = new Date().getFullYear();\n  const monthlyStats = getMonthlyStats(displayUser.id, currentMonth, currentYear);\n  const weeklyStats = getWeeklyStats(displayUser.id);\n\n  // Calculate vacation usage\n  const approvedVacations = getAllLeaveRequests()\n    .filter(req => \n      req.userId === displayUser.id && \n      req.type === 'VACATION' && \n      req.status === 'APPROVED' &&\n      new Date(req.startDate).getFullYear() === currentYear\n    );\n  \n  const usedVacationDays = approvedVacations.reduce((total, req) => {\n    const start = new Date(req.startDate);\n    const end = new Date(req.endDate);\n    const days = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)) + 1;\n    return total + days;\n  }, 0);\n\n  // Calculate working hours based on employment type\n  const expectedMonthlyHours = displayUser.weeklyHours ? (displayUser.weeklyHours * 4.33) : 0; // Average weeks per month\n  const expectedWeeklyHours = displayUser.weeklyHours || 0;\n\n  // Get coin level info\n  const coinBalance = userBalance?.currentBalance || 0;\n  const nextEvent = getNextEvent(coinBalance);\n  const unlockedEvents = getUnlockedEvents(coinBalance);\n  const currentLevel = unlockedEvents.length > 0 ? unlockedEvents[unlockedEvents.length - 1] : null;\n\n  /**\n   * Handles saving user edits (admin only)\n   */\n  const handleSaveUserEdit = async () => {\n    if (!isAdmin || !displayUser) return;\n\n    try {\n      await updateUser(displayUser.id, {\n        position: editForm.position,\n        weeklyHours: parseInt(editForm.weeklyHours) || undefined,\n        vacationDays: parseInt(editForm.vacationDays) || undefined\n      });\n      setIsEditingUser(false);\n    } catch (error) {\n      console.error('Error updating user:', error);\n    }\n  };\n\n  /**\n   * Formats time to German format\n   */\n  const formatTime = (time: string) => {\n    return new Date(`2000-01-01T${time}`).toLocaleTimeString('de-DE', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <div className=\"max-w-7xl mx-auto px-4 py-6\">\n        {/* Header */}\n        <div className=\"bg-white rounded-xl shadow-sm p-6 mb-6\">\n          <div className=\"flex justify-between items-start\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">\n                {displayUser.id === user.id \n                  ? `Hallo, ${displayUser.firstName || displayUser.name.split(' ')[0]}!`\n                  : `Mitarbeiter: ${displayUser.name}`\n                }\n              </h1>\n              {displayUser.employeeNumber && (\n                <p className=\"text-sm text-gray-500\">Personalnummer: {displayUser.employeeNumber}</p>\n              )}\n              {isAdmin && displayUser.id !== user.id && (\n                <select\n                  value={selectedUserId}\n                  onChange={(e) => setSelectedUserId(e.target.value)}\n                  className=\"mt-2 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value={user.id}>Meine Ansicht</option>\n                  {allUsers.filter(u => u.id !== user.id).map(u => (\n                    <option key={u.id} value={u.id}>{u.name}</option>\n                  ))}\n                </select>\n              )}\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <button \n                onClick={() => navigate('/settings')}\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                title=\"Einstellungen\"\n              >\n                ⚙️\n              </button>\n              <button \n                onClick={logout}\n                className=\"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors\"\n              >\n                <span className=\"text-gray-700\">Abmelden</span>\n              </button>\n            </div>\n          </div>\n\n          {/* Position and Organization */}\n          <div className=\"mt-4 grid md:grid-cols-3 gap-4\">\n            <div>\n              <p className=\"text-sm text-gray-500\">Position</p>\n              {isEditingUser ? (\n                <input\n                  type=\"text\"\n                  value={editForm.position}\n                  onChange={(e) => setEditForm({...editForm, position: e.target.value})}\n                  className=\"mt-1 w-full border border-gray-300 rounded px-2 py-1 text-sm\"\n                />\n              ) : (\n                <p className=\"font-medium\">{displayUser.position || '-'}</p>\n              )}\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-500\">Abteilung</p>\n              <p className=\"font-medium\">{displayUser.department || '-'}</p>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-500\">Organisation</p>\n              <p className=\"font-medium\">{organization?.name}</p>\n            </div>\n          </div>\n\n          {/* Admin Edit Controls */}\n          {isAdmin && displayUser.id !== user.id && (\n            <div className=\"mt-4 flex justify-end\">\n              {isEditingUser ? (\n                <>\n                  <button\n                    onClick={() => setIsEditingUser(false)}\n                    className=\"px-3 py-1 text-sm text-gray-600 hover:text-gray-800\"\n                  >\n                    Abbrechen\n                  </button>\n                  <button\n                    onClick={handleSaveUserEdit}\n                    className=\"ml-2 px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700\"\n                  >\n                    Speichern\n                  </button>\n                </>\n              ) : (\n                <button\n                  onClick={() => setIsEditingUser(true)}\n                  className=\"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700\"\n                >\n                  Bearbeiten\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Main Stats Grid */}\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\n          {/* Working Time Today */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className=\"text-sm font-medium text-gray-500\">Heute</h3>\n              <span className=\"text-2xl\">⏰</span>\n            </div>\n            {todayRecord ? (\n              <>\n                <p className=\"text-2xl font-bold text-gray-900\">{todayRecord.totalHours}h</p>\n                <p className=\"text-sm text-gray-500 mt-1\">\n                  {formatTime(todayRecord.timeIn)} - {todayRecord.timeOut ? formatTime(todayRecord.timeOut) : 'läuft'}\n                </p>\n                {!todayRecord.timeOut && (\n                  <span className=\"inline-block mt-2 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\">\n                    Gestempelt\n                  </span>\n                )}\n              </>\n            ) : (\n              <>\n                <p className=\"text-2xl font-bold text-gray-400\">-</p>\n                <span className=\"inline-block mt-2 px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full\">\n                  Nicht gestempelt\n                </span>\n              </>\n            )}\n          </div>\n\n          {/* Monthly Hours */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className=\"text-sm font-medium text-gray-500\">Monat</h3>\n              <span className=\"text-2xl\">📊</span>\n            </div>\n            <p className=\"text-2xl font-bold text-gray-900\">{monthlyStats.totalHours.toFixed(1)}h</p>\n            <div className=\"mt-2\">\n              <div className=\"flex justify-between text-xs text-gray-500\">\n                <span>Soll: {expectedMonthlyHours.toFixed(0)}h</span>\n                <span className={cn(\n                  \"font-medium\",\n                  monthlyStats.totalHours >= expectedMonthlyHours ? \"text-green-600\" : \"text-orange-600\"\n                )}>\n                  {monthlyStats.totalHours >= expectedMonthlyHours ? '+' : ''}{(monthlyStats.totalHours - expectedMonthlyHours).toFixed(1)}h\n                </span>\n              </div>\n              <div className=\"mt-1 w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className={cn(\n                    \"h-2 rounded-full transition-all\",\n                    monthlyStats.totalHours >= expectedMonthlyHours ? \"bg-green-500\" : \"bg-blue-500\"\n                  )}\n                  style={{ width: `${Math.min((monthlyStats.totalHours / expectedMonthlyHours) * 100, 100)}%` }}\n                />\n              </div>\n            </div>\n            <p className=\"text-xs text-gray-500 mt-2\">\n              Woche: {weeklyStats.totalHours.toFixed(1)}h / {expectedWeeklyHours}h\n            </p>\n          </div>\n\n          {/* Vacation */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className=\"text-sm font-medium text-gray-500\">Urlaub</h3>\n              <span className=\"text-2xl\">🏖️</span>\n            </div>\n            <div>\n              {isEditingUser ? (\n                <div className=\"flex items-center gap-2\">\n                  <input\n                    type=\"number\"\n                    value={editForm.vacationDays}\n                    onChange={(e) => setEditForm({...editForm, vacationDays: e.target.value})}\n                    className=\"w-20 border border-gray-300 rounded px-2 py-1 text-sm\"\n                  />\n                  <span className=\"text-sm text-gray-500\">Tage/Jahr</span>\n                </div>\n              ) : (\n                <>\n                  <p className=\"text-2xl font-bold text-gray-900\">\n                    {(displayUser.vacationDays || 0) - usedVacationDays}\n                  </p>\n                  <p className=\"text-sm text-gray-500\">von {displayUser.vacationDays || 0} Tagen</p>\n                </>\n              )}\n            </div>\n            <div className=\"mt-2 space-y-1\">\n              <div className=\"flex justify-between text-xs\">\n                <span className=\"text-gray-500\">Genommen:</span>\n                <span className=\"font-medium\">{usedVacationDays} Tage</span>\n              </div>\n              {displayUser.employmentType === 'PART_TIME' && (\n                <p className=\"text-xs text-blue-600\">Teilzeit-angepasst</p>\n              )}\n            </div>\n          </div>\n\n          {/* Browo Coins & Level */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className=\"text-sm font-medium text-gray-500\">Browo Coins</h3>\n              <span className=\"text-2xl\">🪙</span>\n            </div>\n            <p className=\"text-2xl font-bold text-yellow-600\">{coinBalance}</p>\n            {currentLevel && (\n              <p className=\"text-sm text-purple-600 font-medium mt-1\">\n                {currentLevel.title}\n              </p>\n            )}\n            {nextEvent && (\n              <div className=\"mt-3\">\n                <div className=\"flex justify-between text-xs text-gray-500 mb-1\">\n                  <span>Nächstes Level</span>\n                  <span>{coinBalance}/{nextEvent.requiredCoins}</span>\n                </div>\n                <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                  <div \n                    className=\"bg-gradient-to-r from-purple-500 to-indigo-500 h-2 rounded-full transition-all\"\n                    style={{ width: `${Math.min((coinBalance / nextEvent.requiredCoins) * 100, 100)}%` }}\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Employment Details (Admin editable) */}\n        {isAdmin && (\n          <div className=\"bg-white rounded-xl shadow-sm p-6 mb-6\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Beschäftigungsdetails</h2>\n            <div className=\"grid md:grid-cols-4 gap-4\">\n              <div>\n                <p className=\"text-sm text-gray-500\">Wochenarbeitszeit</p>\n                {isEditingUser ? (\n                  <div className=\"flex items-center gap-2\">\n                    <input\n                      type=\"number\"\n                      value={editForm.weeklyHours}\n                      onChange={(e) => setEditForm({...editForm, weeklyHours: e.target.value})}\n                      className=\"w-20 border border-gray-300 rounded px-2 py-1 text-sm\"\n                    />\n                    <span className=\"text-sm\">Stunden</span>\n                  </div>\n                ) : (\n                  <p className=\"font-medium\">{displayUser.weeklyHours || '-'}h / Woche</p>\n                )}\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-500\">Beschäftigungsart</p>\n                <p className=\"font-medium\">\n                  {displayUser.employmentType === 'FULL_TIME' && 'Vollzeit'}\n                  {displayUser.employmentType === 'PART_TIME' && 'Teilzeit'}\n                  {displayUser.employmentType === 'MINI_JOB' && 'Minijob'}\n                  {displayUser.employmentType === 'INTERN' && 'Praktikant'}\n                  {displayUser.employmentType === 'OTHER' && (displayUser.employmentTypeCustom || 'Sonstige')}\n                  {!displayUser.employmentType && '-'}\n                </p>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-500\">Eintrittsdatum</p>\n                <p className=\"font-medium\">\n                  {displayUser.joinDate ? new Date(displayUser.joinDate).toLocaleDateString('de-DE') : '-'}\n                </p>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-500\">Status</p>\n                <p className=\"font-medium\">\n                  {displayUser.employmentStatus === 'ACTIVE' && '✅ Aktiv'}\n                  {displayUser.employmentStatus === 'PARENTAL_LEAVE' && '👶 Elternzeit'}\n                  {displayUser.employmentStatus === 'TERMINATED' && '❌ Ausgeschieden'}\n                  {!displayUser.employmentStatus && '-'}\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Quick Actions */}\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          <button\n            onClick={() => navigate('/time-vacation')}\n            className=\"bg-white rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow text-left\"\n          >\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-3xl\">⏰</span>\n              <span className=\"text-gray-400\">→</span>\n            </div>\n            <h3 className=\"font-semibold text-gray-900\">Zeit & Urlaub</h3>\n            <p className=\"text-sm text-gray-500 mt-1\">Arbeitszeit, Stempeln & Kalender</p>\n          </button>\n\n          <button\n            onClick={() => navigate('/benefits')}\n            className=\"bg-white rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow text-left\"\n          >\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-3xl\">🎁</span>\n              <span className=\"text-gray-400\">→</span>\n            </div>\n            <h3 className=\"font-semibold text-gray-900\">Benefits</h3>\n            <p className=\"text-sm text-gray-500 mt-1\">Shop & Coins</p>\n          </button>\n\n\n          <button\n            onClick={() => navigate('/documents')}\n            className=\"bg-white rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow text-left\"\n          >\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-3xl\">📄</span>\n              <span className=\"text-gray-400\">→</span>\n            </div>\n            <h3 className=\"font-semibold text-gray-900\">Dokumente</h3>\n            <p className=\"text-sm text-gray-500 mt-1\">Lohn & Verträge</p>\n          </button>\n\n          <button\n            onClick={() => navigate('/settings')}\n            className=\"bg-white rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow text-left\"\n          >\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-3xl\">⚙️</span>\n              <span className=\"text-gray-400\">→</span>\n            </div>\n            <h3 className=\"font-semibold text-gray-900\">Einstellungen</h3>\n            <p className=\"text-sm text-gray-500 mt-1\">Profil & Daten</p>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/DocumentsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":3,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":3,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nexport const DocumentsScreen = () => {\n  return (\n    <div className=\"flex-1 bg-gray-50 p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">Dokumente</h1>\n      <p>Coming soon...</p>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/LearningAdmin.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (98). Maximum allowed is 30.","line":8,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":113,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":8,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":35},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 11. Maximum allowed is 10.","line":8,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":113,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (487). Maximum allowed is 75.","line":84,"column":1,"nodeType":null,"messageId":"exceed","endLine":527,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (118). Maximum allowed is 30.","line":116,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":237,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":116,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":116,"endColumn":30},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (42). Maximum allowed is 30.","line":189,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":230,"endColumn":16},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":240,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":240,"endColumn":29},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (57). Maximum allowed is 30.","line":258,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":315,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":258,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":258,"endColumn":30},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (46). Maximum allowed is 30.","line":318,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":365,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":318,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":318,"endColumn":33},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":331,"column":21,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":331,"endColumn":26},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (118). Maximum allowed is 30.","line":372,"column":59,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":498,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":381,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":381,"endColumn":47},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":384,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":384,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15708,15749],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\n\nimport { useAuthStore } from '../state/auth';\nimport { useLearningStore } from '../state/learning';\nimport { VideoContent, TrainingCategory } from '../types/learning';\nimport { cn } from '../utils/cn';\n\nexport const LearningAdmin = () => {\n  const { user } = useAuthStore();\n  const { videos, loadVideos } = useLearningStore();\n  const [activeTab, setActiveTab] = useState<'videos' | 'tests' | 'levels' | 'analytics'>('videos');\n  const [showCreateVideo, setShowCreateVideo] = useState(false);\n  const [showTestEditor, setShowTestEditor] = useState(false);\n  const [selectedVideo, setSelectedVideo] = useState<VideoContent | null>(null);\n\n  useEffect(() => {\n    loadVideos();\n  }, [loadVideos]);\n\n  // Check if user is admin\n  if (!user || (user.role !== 'ADMIN' && user.role !== 'SUPERADMIN')) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Zugriff verweigert</h1>\n          <p className=\"text-gray-600\">Sie haben keine Berechtigung für den Admin-Bereich.</p>\n        </div>\n      </div>\n    );\n  }\n\n  const tabs = [\n    { id: 'videos', label: 'Schulungen', icon: '📹', count: videos.length },\n    { id: 'tests', label: 'Tests', icon: '📝', count: 0 },\n    { id: 'levels', label: 'Level', icon: '🏆', count: 10 },\n    { id: 'analytics', label: 'Statistiken', icon: '📊', count: null }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow-sm border-b\">\n        <div className=\"px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">Learning Management</h1>\n              <p className=\"text-gray-600 mt-1\">Verwalten Sie Schulungen, Tests und das Levelsystem</p>\n            </div>\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => setShowCreateVideo(true)}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium flex items-center gap-2\"\n              >\n                <span>➕</span>\n                <span>Neue Schulung</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"bg-white border-b\">\n        <div className=\"px-6\">\n          <div className=\"flex space-x-8\">\n            {tabs.map(tab => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id as 'videos' | 'tests' | 'levels' | 'analytics')}\n                className={cn(\n                  \"flex items-center gap-2 py-4 px-2 border-b-2 font-medium transition-colors\",\n                  activeTab === tab.id\n                    ? \"border-blue-500 text-blue-600\"\n                    : \"border-transparent text-gray-500 hover:text-gray-700\"\n                )}\n              >\n                <span>{tab.icon}</span>\n                <span>{tab.label}</span>\n                {tab.count !== null && (\n                  <span className=\"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs\">\n                    {tab.count}\n                  </span>\n                )}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"p-6\">\n        {activeTab === 'videos' && <VideoManagement />}\n        {activeTab === 'tests' && <TestManagement />}\n        {activeTab === 'levels' && <LevelManagement />}\n        {activeTab === 'analytics' && <AnalyticsDashboard />}\n      </div>\n\n      {/* Modals */}\n      {showCreateVideo && (\n        <CreateVideoModal onClose={() => setShowCreateVideo(false)} />\n      )}\n      {showTestEditor && selectedVideo && (\n        <TestEditorModal \n          video={selectedVideo} \n          onClose={() => {\n            setShowTestEditor(false);\n            setSelectedVideo(null);\n          }} \n        />\n      )}\n    </div>\n  );\n};\n\n// Video Management Component\nconst VideoManagement = () => {\n  const { videos } = useLearningStore();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterCategory, setFilterCategory] = useState<string>('all');\n\n  const filteredVideos = videos.filter(video => {\n    const matchesSearch = video.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         video.description.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = filterCategory === 'all' || video.category === filterCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  const categoryOptions = [\n    { value: 'all', label: 'Alle Kategorien' },\n    { value: TrainingCategory.MANDATORY, label: 'Pflicht' },\n    { value: TrainingCategory.COMPLIANCE, label: 'Compliance' },\n    { value: TrainingCategory.SKILLS, label: 'Skills' },\n    { value: TrainingCategory.ONBOARDING, label: 'Onboarding' },\n    { value: TrainingCategory.BONUS, label: 'Bonus' }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Filters */}\n      <div className=\"bg-white rounded-lg p-4 shadow-sm\">\n        <div className=\"flex gap-4\">\n          <div className=\"flex-1\">\n            <input\n              type=\"text\"\n              placeholder=\"Schulungen durchsuchen...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            />\n          </div>\n          <select\n            value={filterCategory}\n            onChange={(e) => setFilterCategory(e.target.value)}\n            className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          >\n            {categoryOptions.map(option => (\n              <option key={option.value} value={option.value}>\n                {option.label}\n              </option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      {/* Video List */}\n      <div className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Schulung\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Kategorie\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Dauer\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Status\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Aktionen\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {filteredVideos.map(video => (\n                <tr key={video.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-4\">\n                    <div className=\"flex items-center\">\n                      <div className=\"w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold mr-4\">\n                        ▶️\n                      </div>\n                      <div>\n                        <div className=\"text-sm font-medium text-gray-900\">{video.title}</div>\n                        <div className=\"text-sm text-gray-500 line-clamp-1\">{video.description}</div>\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className={cn(\n                      \"inline-flex px-2 py-1 text-xs font-semibold rounded-full\",\n                      video.category === TrainingCategory.MANDATORY && \"bg-red-100 text-red-800\",\n                      video.category === TrainingCategory.COMPLIANCE && \"bg-yellow-100 text-yellow-800\",\n                      video.category === TrainingCategory.SKILLS && \"bg-blue-100 text-blue-800\",\n                      video.category === TrainingCategory.ONBOARDING && \"bg-green-100 text-green-800\",\n                      video.category === TrainingCategory.BONUS && \"bg-purple-100 text-purple-800\"\n                    )}>\n                      {video.category}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {Math.floor(video.duration / 60)} Min\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800\">\n                      Aktiv\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                    <div className=\"flex gap-2\">\n                      <button className=\"text-blue-600 hover:text-blue-900\">Bearbeiten</button>\n                      <button className=\"text-green-600 hover:text-green-900\">Test</button>\n                      <button className=\"text-red-600 hover:text-red-900\">Löschen</button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Test Management Component\nconst TestManagement = () => {\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm p-6\">\n      <div className=\"text-center py-12\">\n        <div className=\"text-6xl mb-4\">📝</div>\n        <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Test-Editor</h3>\n        <p className=\"text-gray-600 mb-6\">\n          Erstellen Sie interaktive Tests mit verschiedenen Fragetypen\n        </p>\n        <button className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-medium\">\n          Neuen Test erstellen\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// Level Management Component\nconst LevelManagement = () => {\n  const levels = [\n    { level: 1, title: \"Newcomer\", xp: 0, users: 45 },\n    { level: 2, title: \"Beginner\", xp: 50, users: 32 },\n    { level: 3, title: \"Schulungs-Kid\", xp: 150, users: 28 },\n    { level: 4, title: \"Knowledge Seeker\", xp: 300, users: 22 },\n    { level: 5, title: \"Certified Champ\", xp: 500, users: 18 },\n    { level: 6, title: \"Expert Learner\", xp: 750, users: 12 },\n    { level: 7, title: \"Master Student\", xp: 1000, users: 8 },\n    { level: 8, title: \"Team Brain\", xp: 1500, users: 5 },\n    { level: 9, title: \"Wisdom Keeper\", xp: 2000, users: 3 },\n    { level: 10, title: \"Legend\", xp: 3000, users: 1 }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Level-Konfiguration</h3>\n        <div className=\"overflow-hidden\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Level</th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Titel</th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Benötigte XP</th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Benutzer</th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Aktionen</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-gray-200\">\n              {levels.map(level => (\n                <tr key={level.level} className=\"hover:bg-gray-50\">\n                  <td className=\"px-4 py-4\">\n                    <div className=\"flex items-center\">\n                      <div className=\"w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-sm font-bold mr-3\">\n                        {level.level}\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"px-4 py-4 font-medium text-gray-900\">{level.title}</td>\n                  <td className=\"px-4 py-4 text-gray-600\">{level.xp.toLocaleString()} XP</td>\n                  <td className=\"px-4 py-4\">\n                    <span className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm\">\n                      {level.users} Benutzer\n                    </span>\n                  </td>\n                  <td className=\"px-4 py-4\">\n                    <button className=\"text-blue-600 hover:text-blue-900 text-sm\">Bearbeiten</button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Analytics Dashboard Component\nconst AnalyticsDashboard = () => {\n  const stats = [\n    { label: 'Aktive Lernende', value: '174', change: '+12%', positive: true },\n    { label: 'Abgeschlossene Schulungen', value: '2,847', change: '+23%', positive: true },\n    { label: 'Durchschnittliche Punktzahl', value: '87%', change: '+5%', positive: true },\n    { label: 'Gesamte Lernzeit', value: '1,245h', change: '+18%', positive: true }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {stats.map((stat, index) => (\n          <div key={index} className=\"bg-white rounded-lg shadow-sm p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">{stat.label}</p>\n                <p className=\"text-3xl font-bold text-gray-900\">{stat.value}</p>\n              </div>\n              <div className={cn(\n                \"text-sm font-medium\",\n                stat.positive ? \"text-green-600\" : \"text-red-600\"\n              )}>\n                {stat.change}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Charts Placeholder */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Lernaktivität</h3>\n          <div className=\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\">\n            <p className=\"text-gray-500\">Chart Placeholder</p>\n          </div>\n        </div>\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Kategorien-Performance</h3>\n          <div className=\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\">\n            <p className=\"text-gray-500\">Chart Placeholder</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Create Video Modal\ninterface CreateVideoModalProps {\n  onClose: () => void;\n}\n\nconst CreateVideoModal: React.FC<CreateVideoModalProps> = ({ onClose }) => {\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    url: '',\n    duration: 0,\n    category: TrainingCategory.SKILLS\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    // TODO: Implement video creation\n    console.log('Creating video:', formData);\n    onClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h2 className=\"text-2xl font-bold text-gray-900\">Neue Schulung erstellen</h2>\n            <button\n              onClick={onClose}\n              className=\"text-gray-500 hover:text-gray-700\"\n            >\n              ✕\n            </button>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Titel *\n              </label>\n              <input\n                type=\"text\"\n                required\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"z.B. Datenschutz Grundlagen\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Beschreibung *\n              </label>\n              <textarea\n                required\n                rows={3}\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"Kurze Beschreibung der Schulung...\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Video-URL *\n              </label>\n              <input\n                type=\"url\"\n                required\n                value={formData.url}\n                onChange={(e) => setFormData({ ...formData, url: e.target.value })}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"https://www.youtube.com/watch?v=...\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Kategorie *\n              </label>\n              <select\n                required\n                value={formData.category}\n                onChange={(e) => setFormData({ ...formData, category: e.target.value as TrainingCategory })}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value={TrainingCategory.SKILLS}>Skills</option>\n                <option value={TrainingCategory.MANDATORY}>Pflicht</option>\n                <option value={TrainingCategory.COMPLIANCE}>Compliance</option>\n                <option value={TrainingCategory.ONBOARDING}>Onboarding</option>\n                <option value={TrainingCategory.BONUS}>Bonus</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Dauer (Minuten) *\n              </label>\n              <input\n                type=\"number\"\n                required\n                min=\"1\"\n                value={formData.duration}\n                onChange={(e) => setFormData({ ...formData, duration: parseInt(e.target.value) * 60 })}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"z.B. 15\"\n              />\n            </div>\n\n            <div className=\"flex justify-end gap-3 pt-6\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"px-6 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50\"\n              >\n                Abbrechen\n              </button>\n              <button\n                type=\"submit\"\n                className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium\"\n              >\n                Schulung erstellen\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Test Editor Modal (placeholder)\ninterface TestEditorModalProps {\n  video: VideoContent;\n  onClose: () => void;\n}\n\nconst TestEditorModal: React.FC<TestEditorModalProps> = ({ video, onClose }) => {\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h2 className=\"text-2xl font-bold text-gray-900\">Test-Editor: {video.title}</h2>\n            <button\n              onClick={onClose}\n              className=\"text-gray-500 hover:text-gray-700\"\n            >\n              ✕\n            </button>\n          </div>\n          <div className=\"text-center py-12\">\n            <p className=\"text-gray-600\">Test-Editor wird hier implementiert...</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/LearningDashboard.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (265). Maximum allowed is 30.","line":8,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":297,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":8,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":39},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 12. Maximum allowed is 10.","line":8,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":297,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":43,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":43,"endColumn":53},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (270). Maximum allowed is 75.","line":89,"column":1,"nodeType":null,"messageId":"exceed","endLine":297,"endColumn":3},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":102,"column":81,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":102,"endColumn":83,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4118,4120],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":126,"column":44,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":126,"endColumn":46,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5163,5165],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":132,"column":43,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":132,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5475,5477],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":132,"column":75,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":132,"endColumn":77,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5507,5509],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (65). Maximum allowed is 30.","line":162,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":231,"endColumn":10},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":261,"column":72,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":261,"endColumn":74,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[11091,11093],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":265,"column":77,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":265,"endColumn":79,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[11376,11378],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":269,"column":67,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":269,"endColumn":69,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[11645,11647],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":273,"column":80,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":273,"endColumn":82,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[11922,11924],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\n\nimport { useAuthStore } from '../state/auth';\nimport { useLearningStore } from '../state/learning';\nimport { TrainingCategory } from '../types/learning';\nimport { cn } from '../utils/cn';\n\nexport const LearningDashboard = () => {\n  const { user } = useAuthStore();\n  const { \n    videos, \n    userLevel, \n    userCoins, \n    userBadges, \n    userProgress,\n    loadVideos,\n    selectVideo,\n    getUserStatistics\n  } = useLearningStore();\n\n  const [selectedCategory, setSelectedCategory] = useState<TrainingCategory | 'all'>('all');\n  const [showProfile, setShowProfile] = useState(false);\n\n  useEffect(() => {\n    loadVideos();\n  }, [loadVideos]);\n\n  const stats = user ? getUserStatistics(user.id) : null;\n\n  const filteredVideos = selectedCategory === 'all' \n    ? videos \n    : videos.filter(v => v.category === selectedCategory);\n\n  const categories = [\n    { id: 'all', label: 'Alle', icon: '📚' },\n    { id: TrainingCategory.MANDATORY, label: 'Pflicht', icon: '⚠️' },\n    { id: TrainingCategory.COMPLIANCE, label: 'Compliance', icon: '⚖️' },\n    { id: TrainingCategory.SKILLS, label: 'Skills', icon: '💡' },\n    { id: TrainingCategory.ONBOARDING, label: 'Onboarding', icon: '👋' },\n    { id: TrainingCategory.BONUS, label: 'Bonus', icon: '🎁' }\n  ];\n\n  const getProgressPercentage = (videoId: string) => {\n    const progress = userProgress[videoId];\n    const video = videos.find(v => v.id === videoId);\n    \n    if (!progress || !video) return 0;\n    return Math.min(100, (progress.watchedSeconds / video.duration) * 100);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-4\">\n      {/* Header with Stats */}\n      <div className=\"bg-white rounded-xl shadow-sm p-6 mb-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Lernzentrum</h1>\n            <p className=\"text-gray-600 mt-1\">Erweitere dein Wissen und sammle Belohnungen!</p>\n          </div>\n          \n          <button\n            onClick={() => setShowProfile(!showProfile)}\n            className=\"relative group\"\n          >\n            <div className=\"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-2xl shadow-lg transform transition-transform group-hover:scale-110\">\n              {user?.name.charAt(0)}\n            </div>\n            <div className=\"absolute -bottom-1 -right-1 bg-yellow-400 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold\">\n              {userLevel?.level}\n            </div>\n          </button>\n        </div>\n\n        {/* Stats Bar */}\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          <div className=\"bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-purple-600 text-sm font-medium\">Level</p>\n                <p className=\"text-2xl font-bold text-purple-900\">{userLevel?.level}</p>\n                <p className=\"text-xs text-purple-700\">{userLevel?.title}</p>\n              </div>\n              <span className=\"text-3xl\">🏆</span>\n            </div>\n          </div>\n\n          <div className=\"bg-gradient-to-r from-yellow-50 to-yellow-100 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-yellow-600 text-sm font-medium\">Münzen</p>\n                <p className=\"text-2xl font-bold text-yellow-900\">{userCoins}</p>\n                <p className=\"text-xs text-yellow-700\">BrowoCoins</p>\n              </div>\n              <span className=\"text-3xl\">🪙</span>\n            </div>\n          </div>\n\n          <div className=\"bg-gradient-to-r from-green-50 to-green-100 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-green-600 text-sm font-medium\">XP</p>\n                <p className=\"text-2xl font-bold text-green-900\">{userLevel?.xp || 0}</p>\n                <p className=\"text-xs text-green-700\">/ {userLevel?.nextLevelXp}</p>\n              </div>\n              <span className=\"text-3xl\">⭐</span>\n            </div>\n          </div>\n\n          <div className=\"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-blue-600 text-sm font-medium\">Abzeichen</p>\n                <p className=\"text-2xl font-bold text-blue-900\">{userBadges.length}</p>\n                <p className=\"text-xs text-blue-700\">Errungen</p>\n              </div>\n              <span className=\"text-3xl\">🏅</span>\n            </div>\n          </div>\n        </div>\n\n        {/* XP Progress Bar */}\n        <div className=\"mt-4\">\n          <div className=\"flex items-center justify-between text-sm text-gray-600 mb-1\">\n            <span>Level {userLevel?.level}</span>\n            <span>{userLevel?.xp} / {userLevel?.nextLevelXp} XP</span>\n            <span>Level {(userLevel?.level || 0) + 1}</span>\n          </div>\n          <div className=\"w-full bg-gray-200 rounded-full h-3 overflow-hidden\">\n            <div\n              className=\"h-full bg-gradient-to-r from-purple-500 to-blue-500 transition-all duration-500 ease-out\"\n              style={{\n                width: `${((userLevel?.xp || 0) / (userLevel?.nextLevelXp || 1)) * 100}%`\n              }}\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Category Filter */}\n      <div className=\"bg-white rounded-xl shadow-sm p-4 mb-6\">\n        <div className=\"flex gap-2 overflow-x-auto pb-2\">\n          {categories.map(category => (\n            <button\n              key={category.id}\n              onClick={() => setSelectedCategory(category.id as TrainingCategory | 'all')}\n              className={cn(\n                \"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap\",\n                selectedCategory === category.id\n                  ? \"bg-blue-600 text-white shadow-lg transform scale-105\"\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n              )}\n            >\n              <span>{category.icon}</span>\n              <span>{category.label}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Video Grid */}\n      <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredVideos.map(video => {\n          const progress = getProgressPercentage(video.id);\n          const isCompleted = userProgress[video.id]?.completed;\n\n          return (\n            <div\n              key={video.id}\n              className=\"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-lg transition-shadow cursor-pointer transform hover:scale-[1.02] transition-transform\"\n              onClick={() => {\n                selectVideo(video.id);\n                // Navigate to video player\n                window.location.href = `/learning/video/${video.id}`;\n              }}\n            >\n              {/* Video Thumbnail */}\n              <div className=\"relative h-48 bg-gradient-to-br from-blue-400 to-purple-600\">\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <span className=\"text-6xl text-white opacity-50\">▶️</span>\n                </div>\n                {isCompleted && (\n                  <div className=\"absolute top-2 right-2 bg-green-500 text-white px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1\">\n                    <span>✓</span>\n                    <span>Abgeschlossen</span>\n                  </div>\n                )}\n                {video.category === TrainingCategory.MANDATORY && (\n                  <div className=\"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-bold\">\n                    Pflicht\n                  </div>\n                )}\n              </div>\n\n              {/* Video Info */}\n              <div className=\"p-4\">\n                <h3 className=\"font-bold text-lg text-gray-900 mb-2\">{video.title}</h3>\n                <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">{video.description}</p>\n                \n                <div className=\"flex items-center justify-between text-sm text-gray-500 mb-3\">\n                  <span className=\"flex items-center gap-1\">\n                    <span>⏱️</span>\n                    <span>{Math.floor(video.duration / 60)} Min</span>\n                  </span>\n                  <span className=\"flex items-center gap-1\">\n                    <span>🎯</span>\n                    <span>+50 XP</span>\n                  </span>\n                </div>\n\n                {/* Progress Bar */}\n                {progress > 0 && (\n                  <div className=\"space-y-1\">\n                    <div className=\"flex justify-between text-xs text-gray-600\">\n                      <span>Fortschritt</span>\n                      <span>{Math.floor(progress)}%</span>\n                    </div>\n                    <div className=\"w-full bg-gray-200 rounded-full h-2 overflow-hidden\">\n                      <div\n                        className={cn(\n                          \"h-full transition-all duration-300\",\n                          isCompleted ? \"bg-green-500\" : \"bg-blue-500\"\n                        )}\n                        style={{ width: `${progress}%` }}\n                      />\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Profile Modal */}\n      {showProfile && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-2xl p-6 max-w-md w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h2 className=\"text-2xl font-bold\">Mein Profil</h2>\n              <button\n                onClick={() => setShowProfile(false)}\n                className=\"text-gray-500 hover:text-gray-700\"\n              >\n                ✕\n              </button>\n            </div>\n\n            {/* Avatar Section */}\n            <div className=\"text-center mb-6\">\n              <div className=\"w-32 h-32 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-4xl mx-auto mb-4\">\n                {user?.name.charAt(0)}\n              </div>\n              <h3 className=\"text-xl font-bold\">{user?.name}</h3>\n              <p className=\"text-purple-600 font-medium\">{userLevel?.title}</p>\n            </div>\n\n            {/* Stats */}\n            <div className=\"space-y-3 mb-6\">\n              <div className=\"flex justify-between items-center p-3 bg-gray-50 rounded-lg\">\n                <span className=\"text-gray-600\">Abgeschlossene Schulungen</span>\n                <span className=\"font-bold\">{stats?.completedTrainings || 0}</span>\n              </div>\n              <div className=\"flex justify-between items-center p-3 bg-gray-50 rounded-lg\">\n                <span className=\"text-gray-600\">Durchschnittliche Punktzahl</span>\n                <span className=\"font-bold\">{Math.round(stats?.averageScore || 0)}%</span>\n              </div>\n              <div className=\"flex justify-between items-center p-3 bg-gray-50 rounded-lg\">\n                <span className=\"text-gray-600\">Perfekte Ergebnisse</span>\n                <span className=\"font-bold\">{stats?.perfectScores || 0}</span>\n              </div>\n              <div className=\"flex justify-between items-center p-3 bg-gray-50 rounded-lg\">\n                <span className=\"text-gray-600\">Gesamte Lernzeit</span>\n                <span className=\"font-bold\">{Math.floor((stats?.totalWatchTime || 0) / 3600)}h</span>\n              </div>\n            </div>\n\n            {/* Badges */}\n            <div>\n              <h4 className=\"font-bold text-lg mb-3\">Meine Abzeichen</h4>\n              <div className=\"grid grid-cols-3 gap-3\">\n                {userBadges.map(badge => (\n                  <div\n                    key={badge.id}\n                    className=\"text-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\n                  >\n                    <div className=\"text-3xl mb-1\">{badge.icon}</div>\n                    <p className=\"text-xs font-medium\">{badge.name}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/LearningShop.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (143). Maximum allowed is 30.","line":9,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":162,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":9,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":9,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":24,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":24,"endColumn":45},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (401). Maximum allowed is 75.","line":85,"column":1,"nodeType":null,"messageId":"exceed","endLine":440,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (76). Maximum allowed is 30.","line":173,"column":51,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":254,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 15. Maximum allowed is 10.","line":173,"column":51,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":254,"endColumn":2},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (88). Maximum allowed is 30.","line":261,"column":45,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":355,"endColumn":2},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":282,"column":92,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":282,"endColumn":94,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9512,9514],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":322,"column":22,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":322,"endColumn":27},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (75). Maximum allowed is 30.","line":362,"column":51,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":440,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\n\nimport { LootboxAnimation, CelebrationOverlay } from '../components/LootboxAnimation';\nimport { useAuthStore } from '../state/auth';\nimport { useLearningStore } from '../state/learning';\nimport { ShopItem, LearningEvent } from '../types/learning';\nimport { cn } from '../utils/cn';\n\nexport const LearningShop = () => {\n  const { user: _user } = useAuthStore();\n  const { \n    userCoins, \n    shopItems, \n    ownedItems, \n    activeEvents,\n    purchaseItem \n  } = useLearningStore();\n\n  const [activeTab, setActiveTab] = useState<'shop' | 'events' | 'inventory'>('shop');\n  const [showPurchaseAnimation, setShowPurchaseAnimation] = useState(false);\n  const [lastPurchase, setLastPurchase] = useState<ShopItem | null>(null);\n  const [showCelebration, setShowCelebration] = useState(false);\n\n  const handlePurchase = (item: ShopItem) => {\n    if (userCoins >= item.price) {\n      const success = purchaseItem(item.id);\n      if (success) {\n        setLastPurchase(item);\n        setShowPurchaseAnimation(true);\n      }\n    }\n  };\n\n  const tabs = [\n    { id: 'shop', label: 'Shop', icon: '🛒' },\n    { id: 'events', label: 'Events', icon: '🎉' },\n    { id: 'inventory', label: 'Inventar', icon: '🎒' }\n  ];\n\n  const featuredItems = shopItems.filter(item => item.limitedTime);\n  const regularItems = shopItems.filter(item => !item.limitedTime);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-4\">\n      {/* Header */}\n      <div className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-2xl p-6 mb-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold mb-2\">BrowoShop</h1>\n            <p className=\"text-purple-100\">Tausche deine Münzen gegen tolle Belohnungen!</p>\n          </div>\n          <div className=\"text-right\">\n            <div className=\"bg-white bg-opacity-20 rounded-xl p-4\">\n              <p className=\"text-sm opacity-90\">Deine Münzen</p>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-3xl\">🪙</span>\n                <span className=\"text-3xl font-bold\">{userCoins.toLocaleString()}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Navigation Tabs */}\n      <div className=\"bg-white rounded-xl shadow-sm mb-6\">\n        <div className=\"flex\">\n          {tabs.map(tab => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id as 'shop' | 'events' | 'inventory')}\n              className={cn(\n                \"flex-1 flex items-center justify-center gap-2 py-4 font-medium transition-colors rounded-xl\",\n                activeTab === tab.id\n                  ? \"bg-blue-50 text-blue-600\"\n                  : \"text-gray-600 hover:text-gray-900\"\n              )}\n            >\n              <span className=\"text-xl\">{tab.icon}</span>\n              <span>{tab.label}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Content */}\n      {activeTab === 'shop' && (\n        <div className=\"space-y-8\">\n          {/* Featured Items */}\n          {featuredItems.length > 0 && (\n            <div>\n              <div className=\"flex items-center gap-2 mb-4\">\n                <span className=\"text-2xl\">⭐</span>\n                <h2 className=\"text-2xl font-bold text-gray-900\">Limitierte Angebote</h2>\n                <span className=\"bg-red-100 text-red-800 px-2 py-1 rounded-full text-sm font-medium\">\n                  Nur für kurze Zeit!\n                </span>\n              </div>\n              <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {featuredItems.map(item => (\n                  <ShopItemCard\n                    key={item.id}\n                    item={item}\n                    userCoins={userCoins}\n                    isOwned={ownedItems.includes(item.id)}\n                    onPurchase={() => handlePurchase(item)}\n                    featured\n                  />\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Regular Items */}\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Alle Items</h2>\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n              {regularItems.map(item => (\n                <ShopItemCard\n                  key={item.id}\n                  item={item}\n                  userCoins={userCoins}\n                  isOwned={ownedItems.includes(item.id)}\n                  onPurchase={() => handlePurchase(item)}\n                />\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeTab === 'events' && <EventsTab events={activeEvents} />}\n      {activeTab === 'inventory' && <InventoryTab ownedItems={ownedItems} />}\n\n      {/* Purchase Animation */}\n      {showPurchaseAnimation && lastPurchase && (\n        <LootboxAnimation\n          reward={{\n            type: 'coins',\n            value: lastPurchase.name,\n            description: lastPurchase.description,\n            icon: '🎁'\n          }}\n          onComplete={() => {\n            setShowPurchaseAnimation(false);\n            setShowCelebration(true);\n          }}\n          autoStart\n        />\n      )}\n\n      {/* Celebration */}\n      {showCelebration && (\n        <CelebrationOverlay\n          message=\"Item erhalten!\"\n          icon=\"🎉\"\n          color=\"from-green-400 to-blue-500\"\n          onComplete={() => setShowCelebration(false)}\n        />\n      )}\n    </div>\n  );\n};\n\n// Shop Item Card Component\ninterface ShopItemCardProps {\n  item: ShopItem;\n  userCoins: number;\n  isOwned: boolean;\n  onPurchase: () => void;\n  featured?: boolean;\n}\n\nconst ShopItemCard: React.FC<ShopItemCardProps> = ({\n  item,\n  userCoins,\n  isOwned,\n  onPurchase,\n  featured = false\n}) => {\n  const canAfford = userCoins >= item.price;\n  const isExpiringSoon = item.expiresAt && \n    new Date(item.expiresAt).getTime() - Date.now() < 24 * 60 * 60 * 1000; // 24 hours\n\n  return (\n    <div className={cn(\n      \"bg-white rounded-xl shadow-sm overflow-hidden transition-all hover:shadow-lg\",\n      featured && \"ring-2 ring-yellow-400 relative\",\n      !item.available && \"opacity-50\"\n    )}>\n      {featured && (\n        <div className=\"absolute top-2 right-2 bg-yellow-400 text-yellow-900 px-2 py-1 rounded-full text-xs font-bold\">\n          ⭐ Featured\n        </div>\n      )}\n\n      {/* Item Image */}\n      <div className=\"aspect-square bg-gradient-to-br from-blue-100 to-purple-100 p-6 flex items-center justify-center\">\n        {item.imageUrl ? (\n          <img src={item.imageUrl} alt={item.name} className=\"w-full h-full object-contain\" />\n        ) : (\n          <div className=\"text-6xl\">\n            {item.type === 'boost' && '⚡'}\n            {item.type === 'avatar-item' && '👕'}\n            {item.type === 'special' && '🎁'}\n          </div>\n        )}\n      </div>\n\n      {/* Item Info */}\n      <div className=\"p-4\">\n        <h3 className=\"font-bold text-lg text-gray-900 mb-1\">{item.name}</h3>\n        <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">{item.description}</p>\n\n        {/* Expiration Warning */}\n        {isExpiringSoon && (\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-2 mb-3\">\n            <p className=\"text-red-800 text-xs font-medium\">\n              ⏰ Läuft bald ab!\n            </p>\n          </div>\n        )}\n\n        {/* Price & Purchase */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-1\">\n            <span className=\"text-xl\">🪙</span>\n            <span className=\"font-bold text-lg text-gray-900\">\n              {item.price.toLocaleString()}\n            </span>\n          </div>\n\n          {isOwned ? (\n            <div className=\"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium\">\n              ✓ Besessen\n            </div>\n          ) : (\n            <button\n              onClick={onPurchase}\n              disabled={!canAfford || !item.available}\n              className={cn(\n                \"px-4 py-2 rounded-lg font-medium transition-colors\",\n                canAfford && item.available\n                  ? \"bg-blue-600 text-white hover:bg-blue-700\"\n                  : \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n              )}\n            >\n              {!canAfford ? \"Zu teuer\" : \"Kaufen\"}\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Events Tab Component\ninterface EventsTabProps {\n  events: LearningEvent[];\n}\n\nconst EventsTab: React.FC<EventsTabProps> = ({ events: _events }) => {\n  const { userCoins: _userCoins } = useLearningStore();\n\n  // Mock current event\n  const currentEvent: LearningEvent = {\n    id: 'event1',\n    name: 'Sommer Learning Sprint',\n    description: 'Sammle 2500 Münzen in diesem Monat und erhalte exklusive Belohnungen!',\n    startDate: new Date(2024, 5, 1),\n    endDate: new Date(2024, 5, 30),\n    targetCoins: 2500,\n    rewards: [\n      { type: 'badge', value: 'summer-champion', description: 'Sommer Champion Badge', icon: '🏆' },\n      { type: 'avatar-item', value: 'summer-hat', description: 'Sommer Hut', icon: '🏖️' },\n      { type: 'coins', value: 500, description: 'Bonus Münzen', icon: '🪙' }\n    ],\n    participants: [\n      { userId: 'user1', progress: 1850, claimed: false }\n    ]\n  };\n\n  const userProgress = currentEvent.participants.find(p => p.userId === 'user1')?.progress || 0;\n  const progressPercentage = Math.min(100, (userProgress / currentEvent.targetCoins) * 100);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Current Event */}\n      <div className=\"bg-gradient-to-r from-orange-400 to-red-500 text-white rounded-2xl p-6\">\n        <div className=\"flex items-start justify-between mb-4\">\n          <div>\n            <h2 className=\"text-2xl font-bold mb-2\">{currentEvent.name}</h2>\n            <p className=\"text-orange-100\">{currentEvent.description}</p>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"text-sm opacity-90\">Endet in</p>\n            <p className=\"text-xl font-bold\">12 Tagen</p>\n          </div>\n        </div>\n\n        {/* Progress */}\n        <div className=\"bg-white bg-opacity-20 rounded-xl p-4 mb-4\">\n          <div className=\"flex justify-between items-center mb-2\">\n            <span>Fortschritt</span>\n            <span className=\"font-bold\">\n              {userProgress.toLocaleString()} / {currentEvent.targetCoins.toLocaleString()} 🪙\n            </span>\n          </div>\n          <div className=\"w-full bg-white bg-opacity-30 rounded-full h-3 overflow-hidden\">\n            <div\n              className=\"h-full bg-white transition-all duration-500\"\n              style={{ width: `${progressPercentage}%` }}\n            />\n          </div>\n        </div>\n\n        {/* Rewards */}\n        <div>\n          <h4 className=\"font-bold mb-3\">Belohnungen</h4>\n          <div className=\"grid grid-cols-3 gap-3\">\n            {currentEvent.rewards.map((reward, index) => (\n              <div\n                key={index}\n                className=\"bg-white bg-opacity-20 rounded-lg p-3 text-center\"\n              >\n                <div className=\"text-2xl mb-1\">{reward.icon}</div>\n                <p className=\"text-xs font-medium\">{reward.description}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Past Events */}\n      <div className=\"bg-white rounded-xl shadow-sm p-6\">\n        <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Vergangene Events</h3>\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n            <div>\n              <h4 className=\"font-medium text-gray-900\">Frühlings-Challenge</h4>\n              <p className=\"text-sm text-gray-600\">Abgeschlossen am 31. Mai 2024</p>\n            </div>\n            <div className=\"text-green-600 font-medium\">✓ Teilgenommen</div>\n          </div>\n          <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n            <div>\n              <h4 className=\"font-medium text-gray-900\">Wissens-Marathon</h4>\n              <p className=\"text-sm text-gray-600\">Abgeschlossen am 30. April 2024</p>\n            </div>\n            <div className=\"text-green-600 font-medium\">🏆 Gewinner</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Inventory Tab Component\ninterface InventoryTabProps {\n  ownedItems: string[];\n}\n\nconst InventoryTab: React.FC<InventoryTabProps> = ({ ownedItems: _ownedItems }) => {\n  // Mock inventory items\n  const inventoryItems = [\n    {\n      id: 'xp-boost-24h',\n      name: 'XP Boost (24h)',\n      description: 'Verdoppelt XP für 24 Stunden',\n      type: 'boost',\n      icon: '⚡',\n      quantity: 2,\n      active: false\n    },\n    {\n      id: 'legendary-box',\n      name: 'Legendäre Lootbox',\n      description: 'Enthält seltene Items',\n      type: 'special',\n      icon: '📦',\n      quantity: 1,\n      active: false\n    }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-xl shadow-sm\">\n        <div className=\"p-6 border-b\">\n          <h3 className=\"text-lg font-bold text-gray-900\">Mein Inventar</h3>\n          <p className=\"text-gray-600\">Verwende deine Items oder verwalte dein Inventar</p>\n        </div>\n\n        <div className=\"p-6\">\n          {inventoryItems.length > 0 ? (\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {inventoryItems.map(item => (\n                <div\n                  key={item.id}\n                  className=\"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors\"\n                >\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div className=\"text-3xl\">{item.icon}</div>\n                    <span className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium\">\n                      {item.quantity}x\n                    </span>\n                  </div>\n                  <h4 className=\"font-medium text-gray-900 mb-1\">{item.name}</h4>\n                  <p className=\"text-sm text-gray-600 mb-3\">{item.description}</p>\n                  \n                  <button\n                    className={cn(\n                      \"w-full py-2 px-4 rounded-lg font-medium transition-colors\",\n                      item.active\n                        ? \"bg-green-100 text-green-800 cursor-not-allowed\"\n                        : \"bg-blue-600 text-white hover:bg-blue-700\"\n                    )}\n                    disabled={item.active}\n                  >\n                    {item.active ? 'Aktiv' : 'Verwenden'}\n                  </button>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-12\">\n              <div className=\"text-6xl mb-4\">🎒</div>\n              <h4 className=\"text-xl font-bold text-gray-900 mb-2\">Inventar ist leer</h4>\n              <p className=\"text-gray-600 mb-6\">\n                Kaufe Items im Shop, um sie hier zu sehen\n              </p>\n              <button className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-medium\">\n                Zum Shop\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/LevelManagementScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (88). Maximum allowed is 30.","line":17,"column":45,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":110,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":28,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":28,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":35,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":35,"endColumn":48},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (339). Maximum allowed is 75.","line":84,"column":1,"nodeType":null,"messageId":"exceed","endLine":387,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (73). Maximum allowed is 30.","line":119,"column":59,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":200,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":130,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":130,"endColumn":29},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (159). Maximum allowed is 30.","line":206,"column":48,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":387,"endColumn":2},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (17). Maximum allowed is 15.","line":206,"column":48,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":387,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":233,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":233,"endColumn":45},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":237,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":237,"endColumn":60},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":239,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":239,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7543,7605],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":243,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":243,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":247,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":247,"endColumn":67},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":248,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":248,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7780,7853],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\n\nimport { useAvatarStore } from '../state/avatar';\nimport { calculateXPForLevel } from '../types/avatar';\nimport { cn } from '../utils/cn';\n\ninterface LevelTierProps {\n  level: number;\n  requiredXP: number;\n  userCount: number;\n  isEditing: boolean;\n  onEdit: () => void;\n  onSave: (_newXP: number) => void;\n  onCancel: () => void;\n}\n\nconst LevelTier: React.FC<LevelTierProps> = ({\n  level,\n  requiredXP,\n  userCount,\n  isEditing,\n  onEdit,\n  onSave,\n  onCancel\n}) => {\n  const [editValue, setEditValue] = useState(requiredXP.toString());\n\n  const handleSave = () => {\n    const newXP = parseInt(editValue);\n    if (newXP > 0) {\n      onSave(newXP);\n    }\n  };\n\n  const getLevelBadgeColor = (level: number) => {\n    if (level >= 50) return 'from-purple-400 to-pink-500';\n    if (level >= 30) return 'from-yellow-400 to-orange-500';\n    if (level >= 20) return 'from-blue-400 to-indigo-500';\n    if (level >= 10) return 'from-green-400 to-emerald-500';\n    return 'from-gray-400 to-gray-500';\n  };\n\n  return (\n    <div className=\"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <div className=\"flex items-center gap-3\">\n          <div className={cn(\n            \"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold bg-gradient-to-r\",\n            getLevelBadgeColor(level)\n          )}>\n            {level}\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-gray-900\">Level {level}</h3>\n            <p className=\"text-sm text-gray-600\">{userCount} Benutzer</p>\n          </div>\n        </div>\n        \n        {!isEditing && (\n          <button\n            onClick={onEdit}\n            className=\"text-blue-600 hover:text-blue-800 text-sm\"\n          >\n            Bearbeiten\n          </button>\n        )}\n      </div>\n\n      <div className=\"space-y-2\">\n        <div className=\"flex justify-between items-center\">\n          <span className=\"text-sm text-gray-600\">Benötigte XP:</span>\n          {isEditing ? (\n            <div className=\"flex items-center gap-2\">\n              <input\n                type=\"number\"\n                value={editValue}\n                onChange={(e) => setEditValue(e.target.value)}\n                className=\"w-24 text-sm border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                min=\"1\"\n              />\n              <button\n                onClick={handleSave}\n                className=\"text-green-600 hover:text-green-800 text-sm\"\n              >\n                ✓\n              </button>\n              <button\n                onClick={onCancel}\n                className=\"text-red-600 hover:text-red-800 text-sm\"\n              >\n                ✕\n              </button>\n            </div>\n          ) : (\n            <span className=\"font-semibold text-gray-900\">\n              {requiredXP.toLocaleString()} XP\n            </span>\n          )}\n        </div>\n        \n        {level > 1 && (\n          <div className=\"flex justify-between items-center text-sm text-gray-500\">\n            <span>Differenz zu Level {level - 1}:</span>\n            <span>+{(requiredXP - calculateXPForLevel(level - 1)).toLocaleString()} XP</span>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\ninterface CreateLevelModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onCreate: (level: number, requiredXP: number) => void;\n  maxLevel: number;\n}\n\nconst CreateLevelModal: React.FC<CreateLevelModalProps> = ({\n  isOpen,\n  onClose,\n  onCreate,\n  maxLevel\n}) => {\n  const [level, setLevel] = useState((maxLevel + 1).toString());\n  const [requiredXP, setRequiredXP] = useState('');\n\n  if (!isOpen) return null;\n\n  const handleCreate = () => {\n    const levelNum = parseInt(level);\n    const xpNum = parseInt(requiredXP);\n    \n    if (levelNum > 0 && xpNum > 0) {\n      onCreate(levelNum, xpNum);\n      setLevel((maxLevel + 2).toString());\n      setRequiredXP('');\n      onClose();\n    }\n  };\n\n  // Calculate suggested XP based on progression\n  const suggestedXP = maxLevel > 0 ? Math.floor(calculateXPForLevel(maxLevel) * 1.15) : 100;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-xl p-6 max-w-md w-full\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Neues Level erstellen</h2>\n        \n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Level\n            </label>\n            <input\n              type=\"number\"\n              value={level}\n              onChange={(e) => setLevel(e.target.value)}\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              min={maxLevel + 1}\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Benötigte XP\n            </label>\n            <input\n              type=\"number\"\n              value={requiredXP}\n              onChange={(e) => setRequiredXP(e.target.value)}\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              placeholder={`Vorschlag: ${suggestedXP.toLocaleString()}`}\n              min=\"1\"\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">\n              Vorschlag basierend auf 15% Steigerung: {suggestedXP.toLocaleString()} XP\n            </p>\n          </div>\n        </div>\n        \n        <div className=\"flex gap-3 mt-6\">\n          <button\n            onClick={handleCreate}\n            disabled={!level || !requiredXP}\n            className=\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed\"\n          >\n            Level erstellen\n          </button>\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n          >\n            Abbrechen\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n/**\n * Level Management Screen\n * Create and edit level progression system\n */\nexport const LevelManagementScreen: React.FC = () => {\n  const { getAllUserAvatars } = useAvatarStore();\n  const [editingLevel, setEditingLevel] = useState<number | null>(null);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const allUserAvatars = getAllUserAvatars();\n\n  // Generate level data based on current system\n  const maxLevel = Math.max(...allUserAvatars.map(avatar => avatar.level), 50);\n  const levels = Array.from({ length: maxLevel }, (_, i) => {\n    const level = i + 1;\n    const requiredXP = calculateXPForLevel(level);\n    const userCount = allUserAvatars.filter(avatar => avatar.level === level).length;\n    \n    return {\n      level,\n      requiredXP,\n      userCount\n    };\n  });\n\n  const filteredLevels = levels.filter(level => \n    level.level.toString().includes(searchTerm) ||\n    level.requiredXP.toString().includes(searchTerm)\n  );\n\n  const handleEditLevel = (level: number) => {\n    setEditingLevel(level);\n  };\n\n  const handleSaveLevel = (level: number, newXP: number) => {\n    // This would update the level system configuration\n    console.log(`Updating level ${level} to require ${newXP} XP`);\n    setEditingLevel(null);\n  };\n\n  const handleCancelEdit = () => {\n    setEditingLevel(null);\n  };\n\n  const handleCreateLevel = (level: number, requiredXP: number) => {\n    console.log(`Creating level ${level} with ${requiredXP} XP requirement`);\n    // This would update the level system\n  };\n\n  // Statistics\n  const totalUsers = allUserAvatars.length;\n  const averageLevel = totalUsers > 0 \n    ? allUserAvatars.reduce((sum, avatar) => sum + avatar.level, 0) / totalUsers \n    : 0;\n  const highestLevel = Math.max(...allUserAvatars.map(avatar => avatar.level), 1);\n  const totalXP = allUserAvatars.reduce((sum, avatar) => sum + avatar.totalXP, 0);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-6\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n            📊 Level Management\n          </h1>\n          <p className=\"text-gray-600\">\n            Verwalte das Level-System und XP-Anforderungen\n          </p>\n        </div>\n\n        {/* Statistics */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <div className=\"text-2xl font-bold text-blue-600 mb-2\">{totalUsers}</div>\n            <div className=\"text-sm text-gray-600\">Aktive Benutzer</div>\n          </div>\n          \n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <div className=\"text-2xl font-bold text-green-600 mb-2\">\n              {averageLevel.toFixed(1)}\n            </div>\n            <div className=\"text-sm text-gray-600\">Durchschnittslevel</div>\n          </div>\n          \n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <div className=\"text-2xl font-bold text-purple-600 mb-2\">{highestLevel}</div>\n            <div className=\"text-sm text-gray-600\">Höchstes Level</div>\n          </div>\n          \n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <div className=\"text-2xl font-bold text-orange-600 mb-2\">\n              {totalXP.toLocaleString()}\n            </div>\n            <div className=\"text-sm text-gray-600\">Gesamt XP</div>\n          </div>\n        </div>\n\n        {/* Controls */}\n        <div className=\"flex justify-between items-center mb-6\">\n          <div className=\"flex-1 max-w-md\">\n            <input\n              type=\"text\"\n              placeholder=\"Level oder XP suchen...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            />\n          </div>\n          <div className=\"flex gap-3\">\n            <button\n              onClick={() => setShowCreateModal(true)}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\n            >\n              Neues Level erstellen\n            </button>\n          </div>\n        </div>\n\n        {/* Level Progression Chart */}\n        <div className=\"bg-white rounded-lg p-6 shadow-sm mb-8\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Level Progression</h2>\n          <div className=\"h-64 flex items-end justify-center gap-1 overflow-x-auto\">\n            {levels.slice(0, 20).map((levelData) => {\n              const height = Math.max(10, (levelData.userCount / Math.max(...levels.map(l => l.userCount), 1)) * 200);\n              return (\n                <div key={levelData.level} className=\"flex flex-col items-center min-w-[40px]\">\n                  <div className=\"text-xs text-gray-600 mb-1\">\n                    {levelData.userCount}\n                  </div>\n                  <div\n                    className=\"w-8 bg-gradient-to-t from-blue-500 to-blue-300 rounded-t\"\n                    style={{ height: `${height}px` }}\n                  />\n                  <div className=\"text-xs text-gray-500 mt-1\">\n                    L{levelData.level}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"text-center text-sm text-gray-500 mt-4\">\n            Anzahl Benutzer pro Level (nur die ersten 20 Level angezeigt)\n          </div>\n        </div>\n\n        {/* Level Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredLevels.map((levelData) => (\n            <LevelTier\n              key={levelData.level}\n              level={levelData.level}\n              requiredXP={levelData.requiredXP}\n              userCount={levelData.userCount}\n              isEditing={editingLevel === levelData.level}\n              onEdit={() => handleEditLevel(levelData.level)}\n              onSave={(newXP) => handleSaveLevel(levelData.level, newXP)}\n              onCancel={handleCancelEdit}\n            />\n          ))}\n        </div>\n\n        {/* Empty State */}\n        {filteredLevels.length === 0 && (\n          <div className=\"text-center py-12\">\n            <span className=\"text-6xl mb-4 block\">📊</span>\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n              Keine Level gefunden\n            </h3>\n            <p className=\"text-gray-600\">\n              Probiere einen anderen Suchbegriff oder erstelle ein neues Level\n            </p>\n          </div>\n        )}\n\n        {/* Create Level Modal */}\n        <CreateLevelModal\n          isOpen={showCreateModal}\n          onClose={() => setShowCreateModal(false)}\n          onCreate={handleCreateLevel}\n          maxLevel={maxLevel}\n        />\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/LoginScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (86). Maximum allowed is 30.","line":7,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":104,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":7,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":7,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":19,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":19,"endColumn":52},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (90). Maximum allowed is 75.","line":89,"column":1,"nodeType":null,"messageId":"exceed","endLine":104,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\n\nimport { RequiredStep as _RequiredStep } from '../pipeline/annotations';\nimport { useAuthStore } from '../state/auth';\nimport { cn } from '../utils/cn';\n\nexport const LoginScreen = () => {\n  const [email, setEmail] = useState('max.mustermann@hrthis.de');\n  const [password, setPassword] = useState('password');\n  const [error, setError] = useState('');\n  const { login, isLoading } = useAuthStore();\n\n  // @RequiredStep: \"validate-login-input\"\n  const validateLoginInput = (email: string, password: string): boolean => {\n    return !(!email || !password);\n  };\n\n  // @RequiredStep: \"handle-user-authentication\"\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    \n    if (!validateLoginInput(email, password)) {\n      setError('Bitte füllen Sie alle Felder aus.');\n      return;\n    }\n\n    try {\n      await login(email, password);\n    } catch (error) {\n      setError(error instanceof Error ? error.message : 'Ein unbekannter Fehler ist aufgetreten.');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white flex items-center justify-center px-4\">\n      <div className=\"max-w-md w-full\">\n        <div className=\"mb-12\">\n          <h1 className=\"text-4xl font-bold text-center text-blue-600 mb-2\">\n            HRdiese\n          </h1>\n          <p className=\"text-lg text-gray-600 text-center\">\n            Mitarbeiter Portal\n          </p>\n        </div>\n\n        <form onSubmit={handleLogin} className=\"space-y-4\">\n          {/* Error Message */}\n          {error && (\n            <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\n              <p className=\"text-red-800 text-sm\">{error}</p>\n            </div>\n          )}\n\n          <div>\n            <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n              E-Mail\n            </label>\n            <input\n              type=\"email\"\n              className=\"border border-gray-300 rounded-lg px-4 py-3 text-base w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              placeholder=\"ihre.email@firma.de\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              autoCapitalize=\"none\"\n              autoCorrect=\"off\"\n            />\n          </div>\n\n          <div>\n            <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n              Passwort\n            </label>\n            <input\n              type=\"password\"\n              className=\"border border-gray-300 rounded-lg px-4 py-3 text-base w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              placeholder=\"Passwort eingeben\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n          </div>\n\n          <button\n            type=\"submit\"\n            className={cn(\n              \"bg-blue-600 rounded-lg py-4 w-full text-white font-semibold text-base transition-opacity\",\n              isLoading && \"opacity-50 cursor-not-allowed\"\n            )}\n            disabled={isLoading}\n          >\n            {isLoading ? 'Anmeldung läuft...' : 'Anmelden'}\n          </button>\n        </form>\n\n        <div className=\"mt-8 p-4 bg-gray-50 rounded-lg\">\n          <p className=\"text-sm text-gray-600 mb-2 font-medium\">Demo-Anmeldedaten:</p>\n          <p className=\"text-xs text-gray-500\">Mitarbeiter: max.mustermann@hrthis.de</p>\n          <p className=\"text-xs text-gray-500\">Admin: anna.admin@hrthis.de</p>\n          <p className=\"text-xs text-gray-500\">Passwort: password</p>\n        </div>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/MyRequestsScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (280). Maximum allowed is 30.","line":9,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":321,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":9,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":9,"endColumn":38},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (20). Maximum allowed is 15.","line":9,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":321,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 13. Maximum allowed is 10.","line":9,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":321,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":42,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":42,"endColumn":53},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":60,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":60,"endColumn":52},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (286). Maximum allowed is 75.","line":92,"column":1,"nodeType":null,"messageId":"exceed","endLine":321,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":100,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":100,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":104,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":104,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":108,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":108,"endColumn":45},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":112,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":112,"endColumn":64},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":136,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":136,"endColumn":32},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (80). Maximum allowed is 30.","line":209,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":291,"endColumn":12},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 14. Maximum allowed is 10.","line":209,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":291,"endColumn":12},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":301,"column":16,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":305,"endColumn":87}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { useAuthStore } from '../state/auth';\nimport { useLeavesStore } from '../state/leaves';\nimport { LeaveRequest } from '../types';\nimport { cn } from '../utils/cn';\n\nexport const MyRequestsScreen = () => {\n  const navigate = useNavigate();\n  const { user } = useAuthStore();\n  const { getLeaveRequests, getAllLeaveRequests, approveLeaveRequest, rejectLeaveRequest } = useLeavesStore();\n  \n  const [requests, setRequests] = useState<LeaveRequest[]>([]);\n  const [activeTab, setActiveTab] = useState<'my' | 'all'>('my');\n  const [filter, setFilter] = useState<'ALL' | 'PENDING' | 'APPROVED' | 'REJECTED'>('ALL');\n  const [processingId, setProcessingId] = useState<string | null>(null);\n\n  const isAdmin = user && (user.role === 'ADMIN' || user.role === 'SUPERADMIN');\n\n  useEffect(() => {\n    if (!user) return;\n\n    let allRequests: LeaveRequest[] = [];\n    \n    if (activeTab === 'my') {\n      // Show user's own requests\n      allRequests = getLeaveRequests(user.id);\n    } else if (activeTab === 'all' && isAdmin) {\n      // Show all requests for admin\n      allRequests = getAllLeaveRequests();\n      if (filter !== 'ALL') {\n        allRequests = allRequests.filter(req => req.status === filter);\n      }\n    }\n\n    setRequests(allRequests.sort((a, b) => \n      new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n    ));\n  }, [user, getLeaveRequests, getAllLeaveRequests, activeTab, filter, isAdmin]);\n\n  const handleApprove = async (requestId: string) => {\n    if (!user) return;\n    setProcessingId(requestId);\n    try {\n      await approveLeaveRequest(requestId, user.id);\n      // Refresh the list\n      const allRequests = getAllLeaveRequests();\n      const filteredRequests = filter === 'ALL' \n        ? allRequests \n        : allRequests.filter(req => req.status === filter);\n      setRequests(filteredRequests.sort((a, b) => \n        new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n      ));\n    } finally {\n      setProcessingId(null);\n    }\n  };\n\n  const handleReject = async (requestId: string) => {\n    if (!user) return;\n    setProcessingId(requestId);\n    try {\n      await rejectLeaveRequest(requestId, user.id);\n      // Refresh the list\n      const allRequests = getAllLeaveRequests();\n      const filteredRequests = filter === 'ALL' \n        ? allRequests \n        : allRequests.filter(req => req.status === filter);\n      setRequests(filteredRequests.sort((a, b) => \n        new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n      ));\n    } finally {\n      setProcessingId(null);\n    }\n  };\n\n  const getStatusColor = (status: string): string => {\n    switch (status) {\n      case 'APPROVED':\n        return 'bg-green-100 text-green-800';\n      case 'REJECTED':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-yellow-100 text-yellow-800';\n    }\n  };\n\n  const getStatusText = (status: string): string => {\n    switch (status) {\n      case 'APPROVED':\n        return 'Genehmigt';\n      case 'REJECTED':\n        return 'Abgelehnt';\n      default:\n        return 'Ausstehend';\n    }\n  };\n\n  const getTypeIcon = (type: string) => {\n    return type === 'VACATION' ? '🏖️' : '🏥';\n  };\n\n  const getTypeText = (type: string) => {\n    return type === 'VACATION' ? 'Urlaub' : 'Krankheit';\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('de-DE');\n  };\n\n  const calculateDays = (startDate: string, endDate: string) => {\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const diffTime = Math.abs(end.getTime() - start.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;\n  };\n\n  /**\n   * Gets the display name for a user ID\n   * @param userId - The user ID to get the name for\n   * @returns The display name or 'Unbekannt' if not found\n   */\n  const getUserName = (userId: string): string => {\n    const names: { [key: string]: string } = {\n      '1': 'Max M.',\n      '2': 'Anna A.',\n      '3': 'Tom K.',\n      '4': 'Lisa S.',\n      '5': 'Julia B.',\n      '6': 'Marco L.'\n    };\n    return names[userId] || 'Unbekannt';\n  };\n\n  const getPendingCount = () => {\n    if (!isAdmin) return 0;\n    return getAllLeaveRequests().filter(req => req.status === 'PENDING').length;\n  };\n\n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <div className=\"flex-1 px-4 py-6 overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-xl font-bold text-gray-900\">\n            Anträge\n          </h1>\n          <button \n            onClick={() => navigate('/request-leave')}\n            className=\"bg-blue-600 px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            <span className=\"text-white font-medium\">+ Neu</span>\n          </button>\n        </div>\n\n        {/* Tab Navigation for Admin */}\n        {isAdmin && (\n          <div className=\"flex bg-white rounded-lg p-1 mb-4 shadow-sm\">\n            <button\n              onClick={() => setActiveTab('my')}\n              className={cn(\n                \"flex-1 py-2 px-3 rounded-md transition-colors\",\n                activeTab === 'my' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n              )}\n            >\n              <span className=\"text-center font-medium text-sm\">\n                Meine Anträge\n              </span>\n            </button>\n            <button\n              onClick={() => setActiveTab('all')}\n              className={cn(\n                \"flex-1 py-2 px-3 rounded-md transition-colors relative\",\n                activeTab === 'all' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n              )}\n            >\n              <span className=\"text-center font-medium text-sm\">\n                Alle verwalten\n              </span>\n              {getPendingCount() > 0 && (\n                <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\n                  {getPendingCount()}\n                </span>\n              )}\n            </button>\n          </div>\n        )}\n\n        {/* Filter for Admin View */}\n        {isAdmin && activeTab === 'all' && (\n          <div className=\"flex items-center justify-end mb-4\">\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-sm text-gray-500\">Filter:</span>\n              <select\n                value={filter}\n                onChange={(e) => setFilter(e.target.value as 'ALL' | 'PENDING' | 'APPROVED' | 'REJECTED')}\n                className=\"border border-gray-300 rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              >\n                <option value=\"ALL\">Alle</option>\n                <option value=\"PENDING\">Ausstehend</option>\n                <option value=\"APPROVED\">Genehmigt</option>\n                <option value=\"REJECTED\">Abgelehnt</option>\n              </select>\n            </div>\n          </div>\n        )}\n\n        <div className=\"space-y-4\">\n          {requests.map((request) => (\n            <div key={request.id} className=\"bg-white rounded-xl p-4 shadow-sm\">\n              <div className=\"flex justify-between items-start mb-3\">\n                <div className=\"flex items-center\">\n                  <span className=\"text-2xl mr-3\">{getTypeIcon(request.type)}</span>\n                  <div>\n                    <p className=\"text-base font-semibold text-gray-900\">\n                      {activeTab === 'all' && isAdmin \n                        ? `${getUserName(request.userId)} - ${getTypeText(request.type)}`\n                        : getTypeText(request.type)\n                      }\n                    </p>\n                    <p className=\"text-sm text-gray-500\">\n                      {formatDate(request.startDate)} - {formatDate(request.endDate)}\n                    </p>\n                  </div>\n                </div>\n                <div className={cn(\n                  \"px-3 py-1 rounded-full\",\n                  getStatusColor(request.status)\n                )}>\n                  <span className=\"text-xs font-medium\">\n                    {getStatusText(request.status)}\n                  </span>\n                </div>\n              </div>\n              \n              <div className=\"flex justify-between items-center mb-3\">\n                <p className=\"text-sm text-gray-600\">\n                  Dauer: {calculateDays(request.startDate, request.endDate)} Tag\n                  {calculateDays(request.startDate, request.endDate) !== 1 ? 'e' : ''}\n                </p>\n                <div className=\"text-right\">\n                  <p className=\"text-xs text-gray-500\">\n                    Eingereicht am {formatDate(request.createdAt.split('T')[0])}\n                  </p>\n                  {request.approvedBy && request.approvedAt && (\n                    <p className=\"text-xs text-gray-500\">\n                      {getStatusText(request.status)} von {getUserName(request.approvedBy)} am {formatDate(request.approvedAt.split('T')[0])}\n                    </p>\n                  )}\n                </div>\n              </div>\n\n              {request.comment && (\n                <div className=\"p-3 bg-gray-50 rounded-lg mb-3\">\n                  <p className=\"text-sm text-gray-700\">\n                    \"{request.comment}\"\n                  </p>\n                </div>\n              )}\n\n              {/* Admin Actions */}\n              {isAdmin && activeTab === 'all' && request.status === 'PENDING' && (\n                <div className=\"flex space-x-3 pt-3 border-t border-gray-100\">\n                  <button\n                    onClick={() => handleReject(request.id)}\n                    disabled={processingId === request.id}\n                    className={cn(\n                      \"flex-1 py-2 px-4 rounded-lg border border-red-300 text-red-700 font-medium transition-colors\",\n                      processingId === request.id \n                        ? \"opacity-50 cursor-not-allowed\" \n                        : \"hover:bg-red-50\"\n                    )}\n                  >\n                    {processingId === request.id ? '...' : 'Ablehnen'}\n                  </button>\n                  <button\n                    onClick={() => handleApprove(request.id)}\n                    disabled={processingId === request.id}\n                    className={cn(\n                      \"flex-1 py-2 px-4 rounded-lg bg-green-600 text-white font-medium transition-colors\",\n                      processingId === request.id \n                        ? \"opacity-50 cursor-not-allowed\" \n                        : \"hover:bg-green-700\"\n                    )}\n                  >\n                    {processingId === request.id ? '...' : 'Genehmigen'}\n                  </button>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n\n        {requests.length === 0 && (\n          <div className=\"bg-white rounded-xl p-8 flex flex-col items-center shadow-sm\">\n            <span className=\"text-4xl mb-4\">📝</span>\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">\n              Keine Anträge\n            </h2>\n            <p className=\"text-gray-600 text-center mb-4\">\n              {activeTab === 'my' \n                ? 'Sie haben noch keine Urlaubs- oder Krankmeldungen eingereicht.'\n                : filter === 'PENDING' \n                  ? 'Es gibt derzeit keine ausstehenden Anträge.' \n                  : `Es gibt keine Anträge mit dem Status \"${getStatusText(filter)}\".`\n              }\n            </p>\n            {activeTab === 'my' && (\n              <button \n                onClick={() => navigate('/request-leave')}\n                className=\"bg-blue-600 px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors\"\n              >\n                <span className=\"text-white font-medium\">Ersten Antrag stellen</span>\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/RequestLeaveScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (222). Maximum allowed is 30.","line":8,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":257,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":8,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":40},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (18). Maximum allowed is 15.","line":8,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":257,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 13. Maximum allowed is 10.","line":8,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":257,"endColumn":2},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":23,"column":65,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":23,"endColumn":67,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1032,1034],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Async arrow function has too many lines (36). Maximum allowed is 30.","line":27,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":73,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":27,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":27,"endColumn":53},{"ruleId":"max-statements","severity":1,"message":"Async arrow function has too many statements (21). Maximum allowed is 15.","line":27,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":73,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Async arrow function has a complexity of 11. Maximum allowed is 10.","line":27,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":73,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":75,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":75,"endColumn":45},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":79,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":79,"endColumn":30},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (227). Maximum allowed is 75.","line":99,"column":1,"nodeType":null,"messageId":"exceed","endLine":257,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\n\nimport { useAuthStore } from '../state/auth';\nimport { useLeavesStore } from '../state/leaves';\nimport { cn } from '../utils/cn';\n\nexport const RequestLeaveScreen = () => {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const { user } = useAuthStore();\n  const { submitLeaveRequest, isLoading } = useLeavesStore();\n  \n  // Get the type from URL parameters, default to VACATION\n  const typeParam = searchParams.get('type');\n  const initialType = typeParam === 'SICK' ? 'SICK' : 'VACATION';\n  \n  const [leaveType, setLeaveType] = useState<'VACATION' | 'SICK'>(initialType);\n  const [startDate, setStartDate] = useState(new Date().toISOString().split('T')[0]);\n  const [endDate, setEndDate] = useState(new Date().toISOString().split('T')[0]);\n  const [comment, setComment] = useState('');\n  const [error, setError] = useState('');\n  const [selectedUserId, setSelectedUserId] = useState(user?.id || '');\n\n  const isAdmin = user && (user.role === 'ADMIN' || user.role === 'SUPERADMIN');\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    \n    if (!user) {\n      setError('Benutzer nicht authentifiziert');\n      return;\n    }\n\n    // For admin: validate user selection\n    if (isAdmin && !selectedUserId) {\n      setError('Bitte wählen Sie einen Mitarbeiter aus');\n      return;\n    }\n\n    // Validation\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n\n    if (isNaN(start.getTime()) || isNaN(end.getTime())) {\n      setError('Ungültiges Datum ausgewählt');\n      return;\n    }\n\n    if (start > end) {\n      setError('Das Enddatum muss nach dem Startdatum liegen');\n      return;\n    }\n\n    // For admin: use selected user, for regular user: use their own ID\n    const targetUserId = isAdmin && selectedUserId ? selectedUserId : user.id;\n\n    try {\n      await submitLeaveRequest({\n        userId: targetUserId,\n        startDate,\n        endDate,\n        comment,\n        status: 'PENDING',\n        type: leaveType\n      });\n\n      navigate('/requests');\n    } catch (error) {\n      setError(error instanceof Error ? error.message : 'Der Antrag konnte nicht eingereicht werden');\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('de-DE');\n  };\n\n  const calculateDays = () => {\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const diffTime = Math.abs(end.getTime() - start.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;\n  };\n\n\n  const availableUsers = [\n    { id: '1', name: 'Max M.' },\n    { id: '2', name: 'Anna A.' },\n    { id: '3', name: 'Tom K.' },\n    { id: '4', name: 'Lisa S.' },\n    { id: '5', name: 'Julia B.' },\n    { id: '6', name: 'Marco L.' }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\n      <div className=\"max-w-2xl w-full\">\n        {/* Header */}\n        <div className=\"flex items-center mb-6\">\n          <button onClick={() => navigate(-1)} className=\"mr-4\">\n            <span className=\"text-blue-600 text-lg\">‹ Zurück</span>\n          </button>\n          <h1 className=\"text-xl font-bold text-gray-900\">\n            {isAdmin ? 'Antrag für Mitarbeiter stellen' : 'Antrag stellen'}\n          </h1>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"bg-white rounded-xl p-6 shadow-sm space-y-6\">\n          {/* Error Message */}\n          {error && (\n            <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\n              <p className=\"text-red-800 text-sm\">{error}</p>\n            </div>\n          )}\n\n          {/* User Selection for Admin */}\n          {isAdmin && (\n            <div>\n              <label className=\"text-base font-semibold text-gray-900 mb-3 block\">\n                Antrag für Mitarbeiter\n              </label>\n              <select\n                value={selectedUserId}\n                onChange={(e) => setSelectedUserId(e.target.value)}\n                className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                required\n              >\n                <option value=\"\">Mitarbeiter auswählen...</option>\n                {availableUsers.map((user) => (\n                  <option key={user.id} value={user.id}>\n                    {user.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n          )}\n\n          {/* Leave Type Selection */}\n          <div>\n            <label className=\"text-base font-semibold text-gray-900 mb-3 block\">\n              Art des Antrags\n            </label>\n            <div className=\"flex space-x-3\">\n              <button\n                type=\"button\"\n                onClick={() => setLeaveType('VACATION')}\n                className={cn(\n                  \"flex-1 p-4 rounded-lg border-2 transition-colors\",\n                  leaveType === 'VACATION' \n                    ? \"border-blue-500 bg-blue-50\" \n                    : \"border-gray-200 bg-white hover:border-gray-300\"\n                )}\n              >\n                <span className=\"font-medium\">🏖️ Urlaub</span>\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setLeaveType('SICK')}\n                className={cn(\n                  \"flex-1 p-4 rounded-lg border-2 transition-colors\",\n                  leaveType === 'SICK' \n                    ? \"border-blue-500 bg-blue-50\" \n                    : \"border-gray-200 bg-white hover:border-gray-300\"\n                )}\n              >\n                <span className=\"font-medium\">🏥 Krankheit</span>\n              </button>\n            </div>\n          </div>\n\n          {/* Date Selection */}\n          <div className=\"flex space-x-4\">\n            <div className=\"flex-1\">\n              <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                Startdatum\n              </label>\n              <input\n                type=\"date\"\n                value={startDate}\n                onChange={(e) => setStartDate(e.target.value)}\n                className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                required\n              />\n            </div>\n            <div className=\"flex-1\">\n              <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n                Enddatum\n              </label>\n              <input\n                type=\"date\"\n                value={endDate}\n                onChange={(e) => setEndDate(e.target.value)}\n                className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                required\n              />\n            </div>\n          </div>\n\n          {/* Duration Display */}\n          <div className=\"p-4 bg-blue-50 rounded-lg\">\n            <div className=\"flex justify-between items-center\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Zeitraum</p>\n                <p className=\"font-semibold text-gray-900\">\n                  {formatDate(startDate)} - {formatDate(endDate)}\n                </p>\n              </div>\n              <div className=\"text-right\">\n                <p className=\"text-sm text-gray-600\">Dauer</p>\n                <p className=\"text-xl font-bold text-blue-600\">\n                  {calculateDays()} Tag{calculateDays() !== 1 ? 'e' : ''}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Comment */}\n          <div>\n            <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\n              Kommentar (optional)\n            </label>\n            <textarea\n              value={comment}\n              onChange={(e) => setComment(e.target.value)}\n              placeholder=\"Zusätzliche Informationen...\"\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 h-24 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\"\n            />\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex space-x-3 pt-4\">\n            <button\n              type=\"button\"\n              onClick={() => navigate(-1)}\n              className=\"flex-1 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n            >\n              Abbrechen\n            </button>\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className={cn(\n                \"flex-1 py-3 bg-blue-600 text-white rounded-lg font-medium transition-colors\",\n                isLoading \n                  ? \"opacity-50 cursor-not-allowed\" \n                  : \"hover:bg-blue-700\"\n              )}\n            >\n              {isLoading ? 'Wird eingereicht...' : 'Antrag einreichen'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/SettingsScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (516). Maximum allowed is 30.","line":13,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":607,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":13,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":13,"endColumn":36},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (18). Maximum allowed is 15.","line":13,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":607,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 38. Maximum allowed is 10.","line":13,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":607,"endColumn":2},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":24,"column":32,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":24,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[916,918],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":25,"column":30,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":25,"endColumn":32,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[952,954],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":26,"column":38,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":26,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[996,998],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":27,"column":24,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":27,"endColumn":26,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1026,1028],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":28,"column":35,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":28,"endColumn":37,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1067,1069],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":29,"column":43,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":29,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1116,1118],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":30,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":30,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1153,1155],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":31,"column":35,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":31,"endColumn":37,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1194,1196],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":32,"column":33,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":32,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1233,1235],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":34,"column":24,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":34,"endColumn":26,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1304,1306],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":35,"column":30,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":35,"endColumn":32,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1354,1356],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":36,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":36,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1394,1396],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":37,"column":48,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":37,"endColumn":50,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1448,1450],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":38,"column":50,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":38,"endColumn":52,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1504,1506],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":39,"column":42,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":39,"endColumn":44,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1552,1554],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":40,"column":46,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":40,"endColumn":48,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1613,1615],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 16. Maximum allowed is 10.","line":50,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":66,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":83,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":83,"endColumn":58},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":105,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":105,"endColumn":41},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (522). Maximum allowed is 75.","line":106,"column":1,"nodeType":null,"messageId":"exceed","endLine":607,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":130,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":130,"endColumn":41},{"ruleId":"max-lines-per-function","severity":1,"message":"Async arrow function has too many lines (49). Maximum allowed is 30.","line":149,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":206,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":149,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":149,"endColumn":53},{"ruleId":"max-statements","severity":1,"message":"Async arrow function has too many statements (27). Maximum allowed is 15.","line":149,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":206,"endColumn":4},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 7 times.","line":453,"column":21,"nodeType":"Literal","endLine":453,"endColumn":125},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 7 times.","line":454,"column":33,"nodeType":"Literal","endLine":454,"endColumn":59}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":30,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { AvatarUpload } from '../components/avatar/AvatarUpload';\nimport { useAuthStore } from '../state/auth';\nimport { User } from '../types';\nimport { cn } from '../utils/cn';\n\n/**\n * Settings/Profile screen for user management\n * Provides interface for editing personal and work information\n */\nexport const SettingsScreen = () => {\n  const navigate = useNavigate();\n  const { user, updateUser } = useAuthStore();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [avatarFile, setAvatarFile] = useState<File | null>(null);\n  const [avatarError, setAvatarError] = useState('');\n  const [isAvatarUploading, setIsAvatarUploading] = useState(false);\n\n  const [formData, setFormData] = useState({\n    firstName: user?.firstName || '',\n    lastName: user?.lastName || '',\n    privateEmail: user?.privateEmail || '',\n    phone: user?.phone || '',\n    street: user?.address?.street || '',\n    postalCode: user?.address?.postalCode || '',\n    city: user?.address?.city || '',\n    iban: user?.bankDetails?.iban || '',\n    bic: user?.bankDetails?.bic || '',\n    // Work information (admin editable)\n    email: user?.email || '', // Work email\n    position: user?.position || '',\n    department: user?.department || '',\n    weeklyHours: user?.weeklyHours?.toString() || '',\n    vacationDays: user?.vacationDays?.toString() || '',\n    employmentType: user?.employmentType || 'FULL_TIME',\n    employmentStatus: user?.employmentStatus || 'ACTIVE'\n  });\n\n  if (!user) return null;\n\n  const isAdmin = user.role === 'ADMIN' || user.role === 'SUPERADMIN';\n\n  /**\n   * Validates form data before submission\n   */\n  const validateForm = (): string | null => {\n    if (!formData.firstName.trim()) return 'Vorname ist erforderlich';\n    if (!formData.lastName.trim()) return 'Nachname ist erforderlich';\n    if (formData.privateEmail && !/\\S+@\\S+\\.\\S+/.test(formData.privateEmail)) {\n      return 'Ungültige private E-Mail-Adresse';\n    }\n    if (isAdmin && formData.email && !/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      return 'Ungültige Arbeits-E-Mail-Adresse';\n    }\n    if (isAdmin && formData.weeklyHours && (parseInt(formData.weeklyHours) < 1 || parseInt(formData.weeklyHours) > 60)) {\n      return 'Wochenstunden müssen zwischen 1 und 60 liegen';\n    }\n    if (isAdmin && formData.vacationDays && (parseInt(formData.vacationDays) < 0 || parseInt(formData.vacationDays) > 50)) {\n      return 'Urlaubstage müssen zwischen 0 und 50 liegen';\n    }\n    return null;\n  };\n\n  /**\n   * Converts file to base64 data URL for storage\n   */\n  const fileToDataUrl = (file: File): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result as string);\n      reader.onerror = reject;\n      reader.readAsDataURL(file);\n    });\n  };\n\n  /**\n   * Handles avatar file selection\n   */\n  const handleAvatarChange = async (file: File | null) => {\n    setAvatarError('');\n    setAvatarFile(file);\n    \n    if (file) {\n      // Validate file size (already handled by FileUpload, but double-check)\n      if (file.size > 5 * 1024 * 1024) {\n        setAvatarError('Datei ist zu groß. Maximum: 5 MB');\n        return;\n      }\n      \n      // Validate file type\n      if (!['image/png', 'image/jpeg', 'image/jpg'].includes(file.type)) {\n        setAvatarError('Unsupported file type. Use PNG, JPG, or JPEG.');\n        return;\n      }\n    }\n  };\n\n  /**\n   * Handles avatar upload and immediate user update\n   */\n  const handleAvatarUpload = async () => {\n    if (!avatarFile || !user) return;\n    \n    setIsAvatarUploading(true);\n    setAvatarError('');\n    \n    try {\n      // Convert file to data URL for storage\n      const avatarUrl = await fileToDataUrl(avatarFile);\n      \n      // Update user with new avatar URL\n      await updateUser(user.id, { avatarUrl });\n      \n      setSuccess('Profilbild erfolgreich aktualisiert');\n      setAvatarFile(null);\n    } catch (err) {\n      setAvatarError('Fehler beim Hochladen des Profilbildes');\n    } finally {\n      setIsAvatarUploading(false);\n    }\n  };\n\n  /**\n   * Handles avatar removal\n   */\n  const handleAvatarRemove = async () => {\n    if (!user) return;\n    \n    setIsAvatarUploading(true);\n    \n    try {\n      await updateUser(user.id, { avatarUrl: undefined });\n      setSuccess('Profilbild erfolgreich entfernt');\n      setAvatarFile(null);\n    } catch (err) {\n      setAvatarError('Fehler beim Entfernen des Profilbildes');\n    } finally {\n      setIsAvatarUploading(false);\n    }\n  };\n\n  /**\n   * Handles form submission and user update\n   */\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n    setSuccess('');\n\n    // Validate form\n    const validationError = validateForm();\n    if (validationError) {\n      setError(validationError);\n      setIsLoading(false);\n      return;\n    }\n\n    const updateData: Partial<User> = {\n      firstName: formData.firstName,\n      lastName: formData.lastName,\n      privateEmail: formData.privateEmail,\n      phone: formData.phone,\n      address: {\n        street: formData.street,\n        postalCode: formData.postalCode,\n        city: formData.city\n      },\n      bankDetails: {\n        iban: formData.iban,\n        bic: formData.bic\n      }\n    };\n\n    // Add work information if admin\n    if (isAdmin) {\n      updateData.email = formData.email; // Work email\n      updateData.position = formData.position;\n      updateData.department = formData.department;\n      updateData.weeklyHours = formData.weeklyHours ? parseInt(formData.weeklyHours) : undefined;\n      updateData.vacationDays = formData.vacationDays ? parseInt(formData.vacationDays) : undefined;\n      updateData.employmentType = formData.employmentType;\n      updateData.employmentStatus = formData.employmentStatus;\n    }\n\n    try {\n      // Handle avatar upload first if there's a new avatar file\n      if (avatarFile) {\n        const avatarUrl = await fileToDataUrl(avatarFile);\n        updateData.avatarUrl = avatarUrl;\n        setAvatarFile(null);\n      }\n      \n      await updateUser(user.id, updateData);\n      \n      setSuccess('Profil erfolgreich aktualisiert');\n    } catch (err) {\n      setError('Fehler beim Speichern der Daten');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n\n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <div className=\"max-w-4xl mx-auto px-4 py-6\">\n        {/* Header */}\n        <div className=\"mb-6\">\n          <button \n            onClick={() => navigate(-1)}\n            className=\"mb-4 flex items-center text-blue-600 hover:text-blue-700\"\n          >\n            ← Zurück\n          </button>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Einstellungen</h1>\n          <p className=\"text-gray-600 mt-1\">Verwalten Sie Ihre persönlichen Daten</p>\n        </div>\n\n        {/* Messages */}\n        {error && (\n          <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\n            <p className=\"text-red-800\">{error}</p>\n          </div>\n        )}\n        \n        {success && (\n          <div className=\"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg\">\n            <p className=\"text-green-800\">{success}</p>\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          {/* Avatar Upload Section */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\n              Profilbild\n            </h2>\n            \n            <div className=\"flex flex-col items-center\">\n              <AvatarUpload\n                currentAvatarUrl={user.avatarUrl}\n                onAvatarChange={handleAvatarChange}\n                isUploading={isAvatarUploading}\n                error={avatarError}\n                canEdit={true}\n              />\n              \n              {avatarFile && (\n                <div className=\"mt-4 flex gap-2\">\n                  <button\n                    type=\"button\"\n                    onClick={handleAvatarUpload}\n                    disabled={isAvatarUploading}\n                    className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed\"\n                  >\n                    {isAvatarUploading ? 'Hochladen...' : 'Bild hochladen'}\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => setAvatarFile(null)}\n                    className=\"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50\"\n                  >\n                    Abbrechen\n                  </button>\n                </div>\n              )}\n              \n              {user.avatarUrl && !avatarFile && (\n                <button\n                  type=\"button\"\n                  onClick={handleAvatarRemove}\n                  disabled={isAvatarUploading}\n                  className=\"mt-4 px-4 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 disabled:bg-gray-300 disabled:cursor-not-allowed\"\n                >\n                  {isAvatarUploading ? 'Entfernen...' : 'Profilbild entfernen'}\n                </button>\n              )}\n            </div>\n          </div>\n\n          {/* Personal Information */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\n              Persönliche Informationen\n            </h2>\n            \n            <div className=\"grid md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Vorname\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.firstName}\n                  onChange={(e) => setFormData({...formData, firstName: e.target.value})}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Ihr Vorname\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Nachname\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.lastName}\n                  onChange={(e) => setFormData({...formData, lastName: e.target.value})}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Ihr Nachname\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Private E-Mail-Adresse\n                </label>\n                <input\n                  type=\"email\"\n                  value={formData.privateEmail}\n                  onChange={(e) => setFormData({...formData, privateEmail: e.target.value})}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"max.privat@gmail.com\"\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">Ihre persönliche E-Mail-Adresse</p>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Telefonnummer\n                </label>\n                <input\n                  type=\"tel\"\n                  value={formData.phone}\n                  onChange={(e) => setFormData({...formData, phone: e.target.value})}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"+49 30 12345678\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Address */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\n              Adresse\n            </h2>\n            \n            <div className=\"grid md:grid-cols-2 gap-4\">\n              <div className=\"md:col-span-2\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Straße & Hausnummer\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.street}\n                  onChange={(e) => setFormData({...formData, street: e.target.value})}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Musterstraße 123\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Postleitzahl\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.postalCode}\n                  onChange={(e) => setFormData({...formData, postalCode: e.target.value})}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"12345\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Ort\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.city}\n                  onChange={(e) => setFormData({...formData, city: e.target.value})}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Berlin\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Bank Details */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\n              Bankverbindung\n            </h2>\n            \n            <div className=\"grid md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  IBAN\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.iban}\n                  onChange={(e) => setFormData({...formData, iban: e.target.value})}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"DE89 3704 0044 0532 0130 00\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  BIC\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.bic}\n                  onChange={(e) => setFormData({...formData, bic: e.target.value})}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"COBADEFFXXX\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Work Information */}\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\n              Arbeitsinformationen\n              {!isAdmin && (\n                <span className=\"text-sm text-gray-500 font-normal ml-2\">\n                  (nur durch HR bearbeitbar)\n                </span>\n              )}\n            </h2>\n            \n            <div className=\"grid md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Arbeits-E-Mail-Adresse\n                </label>\n                <input\n                  type=\"email\"\n                  value={formData.email}\n                  onChange={(e) => setFormData({...formData, email: e.target.value})}\n                  disabled={!isAdmin}\n                  className={cn(\n                    \"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    !isAdmin && \"bg-gray-50 text-gray-500\"\n                  )}\n                  placeholder=\"max.mustermann@hrthis.de\"\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  {isAdmin ? 'System-Login E-Mail' : 'Nur durch HR bearbeitbar'}\n                </p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Position\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.position}\n                  onChange={(e) => setFormData({...formData, position: e.target.value})}\n                  disabled={!isAdmin}\n                  className={cn(\n                    \"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    !isAdmin && \"bg-gray-50 text-gray-500\"\n                  )}\n                  placeholder=\"Position\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Abteilung\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.department}\n                  onChange={(e) => setFormData({...formData, department: e.target.value})}\n                  disabled={!isAdmin}\n                  className={cn(\n                    \"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    !isAdmin && \"bg-gray-50 text-gray-500\"\n                  )}\n                  placeholder=\"Abteilung\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Wochenstunden\n                </label>\n                <input\n                  type=\"number\"\n                  value={formData.weeklyHours}\n                  onChange={(e) => setFormData({...formData, weeklyHours: e.target.value})}\n                  disabled={!isAdmin}\n                  className={cn(\n                    \"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    !isAdmin && \"bg-gray-50 text-gray-500\"\n                  )}\n                  placeholder=\"40\"\n                  min=\"1\"\n                  max=\"60\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Urlaubstage/Jahr\n                </label>\n                <input\n                  type=\"number\"\n                  value={formData.vacationDays}\n                  onChange={(e) => setFormData({...formData, vacationDays: e.target.value})}\n                  disabled={!isAdmin}\n                  className={cn(\n                    \"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    !isAdmin && \"bg-gray-50 text-gray-500\"\n                  )}\n                  placeholder=\"30\"\n                  min=\"0\"\n                  max=\"50\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Beschäftigungsart\n                </label>\n                <select\n                  value={formData.employmentType}\n                  onChange={(e) => setFormData({...formData, employmentType: e.target.value as 'FULL_TIME' | 'PART_TIME' | 'MINI_JOB'})}\n                  disabled={!isAdmin}\n                  className={cn(\n                    \"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    !isAdmin && \"bg-gray-50 text-gray-500\"\n                  )}\n                >\n                  <option value=\"FULL_TIME\">Vollzeit</option>\n                  <option value=\"PART_TIME\">Teilzeit</option>\n                  <option value=\"MINI_JOB\">Minijob</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Status\n                </label>\n                <select\n                  value={formData.employmentStatus}\n                  onChange={(e) => setFormData({...formData, employmentStatus: e.target.value as 'ACTIVE' | 'PARENTAL_LEAVE' | 'TERMINATED'})}\n                  disabled={!isAdmin}\n                  className={cn(\n                    \"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    !isAdmin && \"bg-gray-50 text-gray-500\"\n                  )}\n                >\n                  <option value=\"ACTIVE\">Aktiv</option>\n                  <option value=\"PARENTAL_LEAVE\">Elternzeit</option>\n                  <option value=\"TERMINATED\">Ausgeschieden</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Eintrittsdatum\n                </label>\n                <input\n                  type=\"text\"\n                  value={user.joinDate ? new Date(user.joinDate).toLocaleDateString('de-DE') : '-'}\n                  disabled\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-50 text-gray-500\"\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">Kann nur bei Erstellung gesetzt werden</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Submit Button */}\n          <div className=\"flex justify-end\">\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className={cn(\n                \"px-6 py-2 rounded-lg font-medium transition-colors\",\n                isLoading\n                  ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n                  : \"bg-blue-600 text-white hover:bg-blue-700\"\n              )}\n            >\n              {isLoading ? 'Speichern...' : 'Änderungen speichern'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/TakeLessonScreen.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":3,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":3,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nexport const TakeLessonScreen = () => {\n  return (\n    <div className=\"flex-1 bg-gray-50 p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">Lektion durchführen</h1>\n      <p>Coming soon...</p>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/TeamCalendarScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (142). Maximum allowed is 30.","line":17,"column":45,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":186,"endColumn":2},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (41). Maximum allowed is 30.","line":51,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":102,"endColumn":4},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":58,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":58,"endColumn":62},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":79,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":79,"endColumn":61},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":96,"column":56,"nodeType":"Literal","endLine":96,"endColumn":68},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (154). Maximum allowed is 75.","line":102,"column":1,"nodeType":null,"messageId":"exceed","endLine":191,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":105,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":105,"endColumn":60},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":109,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":109,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4109,4152],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":189,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":189,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { format } from 'date-fns';\nimport React, { useState, useMemo } from 'react';\n\nimport { TeamCalendarView } from '../components/TeamCalendarView';\nimport { useAuthStore } from '../state/auth';\nimport { useLeavesStore } from '../state/leaves';\nimport { useTeamsStore } from '../state/teams';\nimport { useTimeRecordsStore } from '../state/timeRecords';\nimport { TimeRecord } from '../types';\nimport { CalendarEntry } from '../types/calendar';\n\n/**\n * Team Calendar Screen\n * Shows a comprehensive calendar view of all team members' absences and work times\n * Available in month and year view with filtering capabilities\n */\nexport const TeamCalendarScreen: React.FC = () => {\n  const { user, getAllUsers } = useAuthStore();\n  const { getTeamsByUserId, getTeamById } = useTeamsStore();\n  const { getAllLeaveRequests } = useLeavesStore();\n  const { getAllTimeRecords } = useTimeRecordsStore();\n  \n  const [view, setView] = useState<'monat' | 'jahr'>('monat');\n  const [selectedTeamId, setSelectedTeamId] = useState<string>('all');\n\n  // Check if current user is admin or manager\n  const isAdmin = user?.role === 'ADMIN' || user?.role === 'SUPERADMIN';\n  const userTeams = user ? getTeamsByUserId(user.id) : [];\n\n  // Get users to display based on selected team\n  const displayUsers = useMemo(() => {\n    if (view === 'jahr') {\n      return getAllUsers();\n    }\n    // Im Monats-Modus\n    if (user && selectedTeamId === 'all') {\n      return [user];\n    }\n    if (user && selectedTeamId) {\n      const team = getTeamById(selectedTeamId);\n      if (team) {\n        const allUsers = getAllUsers();\n        return allUsers.filter(u => team.memberIds.includes(u.id));\n      }\n      return [user];\n    }\n    return user ? [user] : [];\n  }, [view, user, selectedTeamId, getAllUsers, getTeamById]);\n\n  // Convert leave requests and time records to calendar entries\n  const calendarEntries = useMemo(() => {\n    const entries: CalendarEntry[] = [];\n    const allUsers = getAllUsers();\n    \n    // Add leave requests\n    const leaveRequests = getAllLeaveRequests();\n    leaveRequests.forEach(request => {\n      const user = allUsers.find(u => u.id === request.userId);\n      if (!user) return;\n      \n      // Create entries for each day in the leave period\n      const start = new Date(request.startDate);\n      const end = new Date(request.endDate);\n      \n      for (let date = new Date(start); date <= end; date.setDate(date.getDate() + 1)) {\n        entries.push({\n          userId: request.userId,\n          userName: user.name,\n          date: format(date, 'yyyy-MM-dd'),\n          type: request.type === 'VACATION' ? 'urlaub' : 'krank',\n          status: request.status.toLowerCase() as 'beantragt' | 'genehmigt' | 'abgelehnt'\n        });\n      }\n    });\n    \n    // Add time records\n    const timeRecords = getAllTimeRecords();\n    timeRecords.forEach((record: TimeRecord) => {\n      const user = allUsers.find(u => u.id === record.userId);\n      if (!user || !record.totalHours) return;\n      \n      entries.push({\n        userId: record.userId,\n        userName: user.name,\n        date: record.date,\n        type: 'zeit',\n        stunden: record.totalHours\n      });\n    });\n\n    // Add mock data for demonstration\n    const mockEntries: CalendarEntry[] = [\n      { userId: '1', userName: 'Max Mustermann', date: '2025-01-06', type: 'meeting' },\n      { userId: '2', userName: 'Anna Admin', date: '2025-01-07', type: 'fortbildung' },\n      { userId: '3', userName: 'Tom Teilzeit', date: '2025-01-08', type: 'ux' },\n      { userId: '1', userName: 'Max Mustermann', date: '2025-01-09', type: 'zeit', stunden: 8.5 },\n      { userId: '2', userName: 'Anna Admin', date: '2025-01-09', type: 'zeit', stunden: 6.0 },\n      { userId: '3', userName: 'Tom Teilzeit', date: '2025-01-09', type: 'zeit', stunden: 4.0 },\n    ];\n    \n    return [...entries, ...mockEntries];\n  }, [getAllUsers, getAllLeaveRequests, getAllTimeRecords]);\n\n  // Handle cell click\n  const handleCellClick = (userId: string, date: string) => {\n    if (!isAdmin) return;\n    \n    // In a real app, this would open a modal to edit the entry\n    console.log('Cell clicked:', userId, date);\n  };\n\n  return (\n    <div className=\"p-6 max-w-full\">\n      {/* Header */}\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Team-Kalender</h1>\n        <p className=\"text-gray-600\">Übersicht über Abwesenheiten und Arbeitszeiten</p>\n      </div>\n\n      {/* Controls */}\n      <div className=\"mb-6 flex items-center justify-between\">\n        <div className=\"flex items-center gap-4\">\n          {/* View Toggle */}\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={() => setView('monat')}\n              className={cn(\n                \"px-4 py-2 rounded-lg font-medium transition-colors\",\n                view === 'monat' \n                  ? \"bg-blue-600 text-white\" \n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n              )}\n            >\n              Monatsansicht\n            </button>\n            <button\n              onClick={() => setView('jahr')}\n              className={cn(\n                \"px-4 py-2 rounded-lg font-medium transition-colors\",\n                view === 'jahr' \n                  ? \"bg-blue-600 text-white\" \n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n              )}\n            >\n              Jahresansicht\n            </button>\n          </div>\n\n          {/* Team Filter */}\n          <div className=\"flex items-center gap-2\">\n            <label className=\"text-sm font-medium text-gray-700\">Team:</label>\n            <select\n              value={selectedTeamId}\n              onChange={(e) => setSelectedTeamId(e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            >\n              <option value=\"all\">Alle Teams</option>\n              {userTeams.map(team => (\n                <option key={team.id} value={team.id}>{team.name}</option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        {/* Export Buttons */}\n        <div className=\"flex items-center gap-2\">\n          <button className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 font-medium\">\n            📄 PDF Export\n          </button>\n          <button className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 font-medium\">\n            📊 CSV Export\n          </button>\n        </div>\n      </div>\n\n      {/* Calendar Component */}\n      <TeamCalendarView\n        view={view}\n        entries={calendarEntries}\n        users={displayUsers.map(u => ({ userId: u.id, userName: u.name }))}\n        onCellClick={handleCellClick}\n        isAdmin={isAdmin}\n      />\n    </div>\n  );\n};\n\n// Helper function for className\nfunction cn(...classes: (string | boolean | undefined)[]) {\n  return classes.filter(Boolean).join(' ');\n}","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/TeamManagementScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (326). Maximum allowed is 30.","line":27,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":373,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":27,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":27,"endColumn":42},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (16). Maximum allowed is 15.","line":27,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":373,"endColumn":2},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":49,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":49,"endColumn":56},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":55,"column":63,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":55,"endColumn":65,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1932,1934],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":58,"column":37,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":58,"endColumn":39,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2104,2106],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":59,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":59,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2150,2152],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":60,"column":27,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":60,"endColumn":29,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2182,2184],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":71,"column":75,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":71,"endColumn":77,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2637,2639],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":72,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":72,"endColumn":92},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":86,"column":30,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":86,"endColumn":32,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3167,3169],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":86,"column":62,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":86,"endColumn":64,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3199,3201],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":90,"column":32,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":90,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3353,3355],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":90,"column":54,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":90,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3375,3377],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (339). Maximum allowed is 75.","line":105,"column":1,"nodeType":null,"messageId":"exceed","endLine":373,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (85). Maximum allowed is 30.","line":276,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":360,"endColumn":16},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 15. Maximum allowed is 10.","line":276,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":360,"endColumn":16},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":292,"column":77,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":292,"endColumn":79,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12180,12182],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":296,"column":32,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":296,"endColumn":37},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":312,"column":23,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":316,"endColumn":52},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":318,"column":24,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":319,"endColumn":97},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":328,"column":26,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":329,"endColumn":75},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":334,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":334,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[14425,14427],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":338,"column":85,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":338,"endColumn":87,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[14710,14712],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":342,"column":45,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":342,"endColumn":47,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[14913,14915],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":345,"column":43,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":345,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[15048,15050],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":345,"column":72,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":345,"endColumn":74,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[15077,15079],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":27,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { useAuthStore } from '../state/auth';\nimport { useLeavesStore } from '../state/leaves';\nimport { useTeamsStore } from '../state/teams';\n// import { useCoinsStore } from '../state/coins';\nimport { User } from '../types';\nimport { cn } from '../utils/cn';\n\n/**\n * Extended user interface for team management view\n * Includes additional computed fields for display purposes\n */\ninterface TeamMemberView extends User {\n  teamNames: string[];\n  remainingVacationDays: number;\n  lastLoginDays: number;\n  pendingRequests: number;\n}\n\n/**\n * Team Management Screen Component\n * Main dashboard for HR admins to manage teams and team members\n * Features include team assignment, lead designation, and member overview\n */\nexport const TeamManagementScreen = () => {\n  const { user } = useAuthStore();\n  const { getAllUsers } = useAuthStore();\n  const { getAllTeams, getTeamsByUserId } = useTeamsStore();\n  const { getVacationBalance } = useLeavesStore();\n  // const { getCoinBalance } = useCoinsStore();\n  \n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterStatus, setFilterStatus] = useState<string>('all');\n  const [filterRole, setFilterRole] = useState<string>('all');\n  const [sortBy, setSortBy] = useState<string>('name');\n\n  // Check if current user is admin\n  const isAdmin = user?.role === 'ADMIN' || user?.role === 'SUPERADMIN';\n\n  const allUsers = getAllUsers();\n  const allTeams = getAllTeams();\n\n  // Transform users to team member view\n  const teamMembers: TeamMemberView[] = useMemo(() => {\n    return allUsers.map(user => {\n      const userTeams = getTeamsByUserId(user.id);\n      const teamNames = userTeams.map(team => team.name);\n      const vacationBalance = getVacationBalance(user.id);\n      \n      return {\n        ...user,\n        teamNames,\n        remainingVacationDays: vacationBalance?.remainingDays || 0,\n        lastLoginDays: Math.floor(Math.random() * 30), // Mock data\n        pendingRequests: 0, // Would come from requests store\n        coinWallet: user.coinWallet || 0,\n        coinProgress: user.coinProgress || 0,\n        level: user.level || 1\n      };\n    });\n  }, [allUsers, getTeamsByUserId, getVacationBalance]);\n\n  // Filter and sort team members\n  const filteredMembers = useMemo(() => {\n    const filtered = teamMembers.filter(member => {\n      const matchesSearch = \n        member.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        member.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        member.position?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        member.teamNames.some(team => team.toLowerCase().includes(searchTerm.toLowerCase()));\n\n      const matchesStatus = filterStatus === 'all' || member.employmentStatus === filterStatus;\n      const matchesRole = filterRole === 'all' || member.role === filterRole;\n\n      return matchesSearch && matchesStatus && matchesRole;\n    });\n\n    // Sort\n    filtered.sort((a, b) => {\n      switch (sortBy) {\n        case 'name':\n          return a.name.localeCompare(b.name);\n        case 'position':\n          return (a.position || '').localeCompare(b.position || '');\n        case 'vacation':\n          return b.remainingVacationDays - a.remainingVacationDays;\n        case 'coins':\n          return (b.coinWallet || 0) - (a.coinWallet || 0);\n        case 'lastLogin':\n          return a.lastLoginDays - b.lastLoginDays;\n        default:\n          return 0;\n      }\n    });\n\n    return filtered;\n  }, [teamMembers, searchTerm, filterStatus, filterRole, sortBy]);\n\n  if (!isAdmin) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"text-center py-12\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Zugriff verweigert</h2>\n          <p className=\"text-gray-600\">Diese Seite ist nur für Administratoren verfügbar.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 max-w-7xl mx-auto\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">Teamverwaltung</h1>\n            <p className=\"text-gray-600\">Verwalten Sie alle Mitarbeitenden und Teams</p>\n          </div>\n          <div className=\"flex gap-3\">\n            <Link\n              to=\"/admin/team-management/teams\"\n              className=\"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium\"\n            >\n              Teams verwalten\n            </Link>\n            <Link\n              to=\"/admin/team-management/add-employee\"\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium inline-block\"\n            >\n              + Mitarbeiter hinzufügen\n            </Link>\n          </div>\n        </div>\n\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center\">\n              <div className=\"p-2 bg-blue-100 rounded-lg mr-3\">\n                <span className=\"text-blue-600\">👥</span>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">Gesamt Mitarbeiter</p>\n                <p className=\"text-xl font-semibold\">{allUsers.length}</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center\">\n              <div className=\"p-2 bg-green-100 rounded-lg mr-3\">\n                <span className=\"text-green-600\">✅</span>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">Aktive</p>\n                <p className=\"text-xl font-semibold\">\n                  {allUsers.filter(u => u.employmentStatus === 'ACTIVE').length}\n                </p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center\">\n              <div className=\"p-2 bg-orange-100 rounded-lg mr-3\">\n                <span className=\"text-orange-600\">👑</span>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">Admins</p>\n                <p className=\"text-xl font-semibold\">\n                  {allUsers.filter(u => u.role !== 'EMPLOYEE').length}\n                </p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center\">\n              <div className=\"p-2 bg-purple-100 rounded-lg mr-3\">\n                <span className=\"text-purple-600\">🏢</span>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">Teams</p>\n                <p className=\"text-xl font-semibold\">{allTeams.length}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Filters and Search */}\n      <div className=\"bg-white p-4 rounded-lg border border-gray-200 mb-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Suche</label>\n            <input\n              type=\"text\"\n              placeholder=\"Name, Email, Position, Team...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Status</label>\n            <select\n              value={filterStatus}\n              onChange={(e) => setFilterStatus(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            >\n              <option value=\"all\">Alle</option>\n              <option value=\"ACTIVE\">Aktiv</option>\n              <option value=\"PARENTAL_LEAVE\">Elternzeit</option>\n              <option value=\"TERMINATED\">Gekündigt</option>\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Rolle</label>\n            <select\n              value={filterRole}\n              onChange={(e) => setFilterRole(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            >\n              <option value=\"all\">Alle</option>\n              <option value=\"EMPLOYEE\">Mitarbeiter</option>\n              <option value=\"ADMIN\">Admin</option>\n              <option value=\"SUPERADMIN\">Super Admin</option>\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Sortierung</label>\n            <select\n              value={sortBy}\n              onChange={(e) => setSortBy(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            >\n              <option value=\"name\">Name</option>\n              <option value=\"position\">Position</option>\n              <option value=\"vacation\">Resturlaub</option>\n              <option value=\"coins\">Coins</option>\n              <option value=\"lastLogin\">Letzter Login</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Team Members Table */}\n      <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Mitarbeiter\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Position & Teams\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Status\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Arbeitszeit\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Resturlaub\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Coins & Level\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Aktionen\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {filteredMembers.map((member) => (\n                <tr key={member.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"flex items-center\">\n                      <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3\">\n                        <span className=\"text-blue-600 font-medium\">\n                          {member.name.split(' ').map(n => n[0]).join('')}\n                        </span>\n                      </div>\n                      <div>\n                        <div className=\"text-sm font-medium text-gray-900\">{member.name}</div>\n                        <div className=\"text-sm text-gray-500\">{member.email}</div>\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4\">\n                    <div className=\"text-sm text-gray-900\">{member.position || 'Keine Position'}</div>\n                    <div className=\"flex flex-wrap gap-1 mt-1\">\n                      {member.teamNames.map((teamName, index) => (\n                        <span\n                          key={index}\n                          className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800\"\n                        >\n                          {teamName}\n                        </span>\n                      ))}\n                      {member.teamNames.length === 0 && (\n                        <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800\">\n                          Kein Team\n                        </span>\n                      )}\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className={cn(\n                      \"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\",\n                      member.employmentStatus === 'ACTIVE' \n                        ? \"bg-green-100 text-green-800\"\n                        : member.employmentStatus === 'PARENTAL_LEAVE'\n                        ? \"bg-yellow-100 text-yellow-800\"\n                        : \"bg-red-100 text-red-800\"\n                    )}>\n                      {member.employmentStatus === 'ACTIVE' ? 'Aktiv' :\n                       member.employmentStatus === 'PARENTAL_LEAVE' ? 'Elternzeit' : 'Gekündigt'}\n                    </span>\n                    <div className=\"mt-1\">\n                      <span className={cn(\n                        \"inline-flex items-center px-2 py-0.5 rounded text-xs\",\n                        member.role === 'EMPLOYEE' \n                          ? \"bg-gray-100 text-gray-800\"\n                          : \"bg-orange-100 text-orange-800\"\n                      )}>\n                        {member.role === 'EMPLOYEE' ? 'Mitarbeiter' : \n                         member.role === 'ADMIN' ? 'Admin' : 'Super Admin'}\n                      </span>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {member.weeklyHours || 0}h/Woche\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm text-gray-900\">{member.remainingVacationDays} Tage</div>\n                    <div className=\"text-xs text-gray-500\">von {member.vacationDays || 0}</div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm text-gray-900\">\n                      🪙 {member.coinWallet || 0}\n                    </div>\n                    <div className=\"text-xs text-gray-500\">\n                      Level {member.level || 1} • {member.coinProgress || 0} XP\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                    <Link\n                      to={`/admin/team-management/user/${member.id}`}\n                      className=\"text-blue-600 hover:text-blue-900 mr-3\"\n                    >\n                      Details\n                    </Link>\n                    <button className=\"text-gray-400 hover:text-gray-600\">\n                      ⚙️\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        {filteredMembers.length === 0 && (\n          <div className=\"text-center py-12\">\n            <p className=\"text-gray-500\">Keine Mitarbeiter gefunden.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/TeamMemberDetailsScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (567). Maximum allowed is 30.","line":16,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":623,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":16,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":16,"endColumn":45},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (32). Maximum allowed is 15.","line":16,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":623,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 58. Maximum allowed is 10.","line":16,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":623,"endColumn":2},{"ruleId":"sonarjs/cognitive-complexity","severity":1,"message":"Refactor this function to reduce its Cognitive Complexity from 29 to the 15 allowed.","line":16,"column":43,"nodeType":null,"messageId":"refactorFunction","endLine":16,"endColumn":45},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":82,"column":56,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":82,"endColumn":58,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3125,3127],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":82,"column":96,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":82,"endColumn":98,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3165,3167],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":82,"column":126,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":82,"endColumn":128,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3195,3197],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":91,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":91,"endColumn":33},{"ruleId":"max-statements","severity":1,"message":"Async arrow function has too many statements (16). Maximum allowed is 15.","line":91,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":126,"endColumn":4},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (573). Maximum allowed is 75.","line":103,"column":1,"nodeType":null,"messageId":"exceed","endLine":623,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":128,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":128,"endColumn":37},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":132,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":132,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4784,4834],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":141,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":141,"endColumn":40},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":145,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":145,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5164,5217],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":154,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":154,"endColumn":47},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":162,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":162,"endColumn":47},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":228,"column":49,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":228,"endColumn":51,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8026,8028],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":233,"column":75,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":233,"endColumn":77,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8390,8392],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 11 times.","line":233,"column":78,"nodeType":"Literal","endLine":233,"endColumn":95},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":241,"column":48,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":241,"endColumn":50,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8708,8710],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":246,"column":74,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":246,"endColumn":76,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9070,9072],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":258,"column":54,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":258,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9618,9620],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":263,"column":80,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":263,"endColumn":82,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9992,9994],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":271,"column":52,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":271,"endColumn":54,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[10321,10323],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":276,"column":78,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":276,"endColumn":80,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[10691,10693],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":284,"column":45,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":284,"endColumn":47,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[11004,11006],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":289,"column":71,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":289,"endColumn":73,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[11360,11362],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":294,"column":72,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":294,"endColumn":74,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[11620,11622],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":308,"column":48,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":308,"endColumn":50,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12229,12231],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":313,"column":74,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":313,"endColumn":76,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12591,12593],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":321,"column":50,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":321,"endColumn":52,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12912,12914],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":326,"column":76,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":326,"endColumn":78,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[13278,13280],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":334,"column":51,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":334,"endColumn":53,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[13606,13608],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":339,"column":77,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":339,"endColumn":79,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[13982,13984],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":347,"column":52,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":347,"endColumn":54,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[14305,14307],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":352,"column":78,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":352,"endColumn":80,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[14683,14685],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":359,"column":56,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":359,"endColumn":58,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[14984,14986],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":369,"column":22,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":370,"endColumn":99},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":378,"column":44,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":378,"endColumn":46,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[16052,16054],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":388,"column":22,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":389,"endColumn":75},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":404,"column":58,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":404,"endColumn":60,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[17384,17386],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":424,"column":84,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":424,"endColumn":86,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[18389,18391],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":433,"column":60,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":433,"endColumn":62,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[18716,18718],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":445,"column":86,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":445,"endColumn":88,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[19333,19335],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":454,"column":60,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":454,"endColumn":62,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[19662,19664],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":466,"column":86,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":466,"endColumn":88,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[20275,20277],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (46). Maximum allowed is 30.","line":476,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":521,"endColumn":16},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":534,"column":81,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":534,"endColumn":83,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[23559,23561],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":49,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\n\nimport { useAuthStore } from '../state/auth';\nimport { useLeavesStore } from '../state/leaves';\nimport { useTeamsStore } from '../state/teams';\n// import { useCoinsStore } from '../state/coins';\n// import { cn } from '../utils/cn';\nimport { User, UserRole, EmploymentStatus } from '../types';\n\n/**\n * Team Member Details Screen Component\n * Allows HR admins to view and edit detailed information about team members\n * Features include personal info editing, team assignment, lead designation, and coin management\n */\nexport const TeamMemberDetailsScreen = () => {\n  const { userId } = useParams<{ userId: string }>();\n  const navigate = useNavigate();\n  const { user: currentUser, getAllUsers, updateUser } = useAuthStore();\n  const { \n    getAllTeams, \n    getTeamsByUserId, \n    getTeamsLedByUser,\n    addMemberToTeam,\n    removeMemberFromTeam,\n    setTeamLead\n  } = useTeamsStore();\n  const { getVacationBalance, getUserLeaveRequests } = useLeavesStore();\n  // const { getCoinBalance, addCoins, removeCoins } = useCoinsStore();\n\n  const [isEditing, setIsEditing] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [editedUser, setEditedUser] = useState<Partial<User>>({});\n  const [coinAmount, setCoinAmount] = useState<number>(0);\n  const [coinReason, setCoinReason] = useState<string>('');\n  const [selectedTeams, setSelectedTeams] = useState<string[]>([]);\n  const [leadTeams, setLeadTeams] = useState<string[]>([]);\n\n  // Check if current user is admin\n  const isAdmin = currentUser?.role === 'ADMIN' || currentUser?.role === 'SUPERADMIN';\n\n  const allUsers = getAllUsers();\n  const allTeams = getAllTeams();\n  const targetUser = allUsers.find(u => u.id === userId);\n\n  useEffect(() => {\n    if (targetUser) {\n      setEditedUser(targetUser);\n      const userTeams = getTeamsByUserId(targetUser.id);\n      const userLeadTeams = getTeamsLedByUser(targetUser.id);\n      setSelectedTeams(userTeams.map(t => t.id));\n      setLeadTeams(userLeadTeams.map(t => t.id));\n    }\n  }, [targetUser, userId, getTeamsByUserId, getTeamsLedByUser]);\n\n  if (!isAdmin) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"text-center py-12\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Zugriff verweigert</h2>\n          <p className=\"text-gray-600\">Diese Seite ist nur für Administratoren verfügbar.</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!targetUser) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"text-center py-12\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Mitarbeiter nicht gefunden</h2>\n          <p className=\"text-gray-600\">Der angegebene Mitarbeiter existiert nicht.</p>\n          <Link to=\"/team-management\" className=\"text-blue-600 hover:text-blue-800 mt-4 inline-block\">\n            ← Zurück zur Teamverwaltung\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const vacationBalance = getVacationBalance(targetUser.id);\n  const coinBalance = { balance: targetUser.coinWallet || 0, progress: targetUser.coinProgress || 0, level: targetUser.level || 1 };\n  const userRequests = getUserLeaveRequests(targetUser.id);\n  const userTeams = getTeamsByUserId(targetUser.id);\n  const userLeadTeams = getTeamsLedByUser(targetUser.id);\n\n  /**\n   * Save user changes including personal info and team assignments\n   * Handles team membership updates and lead role assignments\n   */\n  const handleSave = async () => {\n    setIsLoading(true);\n    try {\n      await updateUser(targetUser.id, editedUser);\n      \n      // Update team memberships\n      const currentTeamIds = userTeams.map(t => t.id);\n      \n      // Remove from teams that were deselected\n      for (const teamId of currentTeamIds) {\n        if (!selectedTeams.includes(teamId)) {\n          await removeMemberFromTeam(teamId, targetUser.id);\n        }\n      }\n      \n      // Add to newly selected teams\n      for (const teamId of selectedTeams) {\n        if (!currentTeamIds.includes(teamId)) {\n          await addMemberToTeam(teamId, targetUser.id);\n        }\n      }\n      \n      // Update lead status for all selected teams\n      for (const teamId of selectedTeams) {\n        const isLead = leadTeams.includes(teamId);\n        await setTeamLead(teamId, targetUser.id, isLead);\n      }\n      \n      setIsEditing(false);\n    } catch (error) {\n      console.error('Error updating user:', error);\n      // In production, show user-friendly error message\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleAddCoins = async () => {\n    if (coinAmount > 0) {\n      try {\n        // await addCoins(targetUser.id, coinAmount, coinReason || 'Manuell hinzugefügt');\n        console.log('Add coins:', coinAmount, coinReason);\n        setCoinAmount(0);\n        setCoinReason('');\n      } catch (error) {\n        console.error('Error adding coins:', error);\n      }\n    }\n  };\n\n  const handleRemoveCoins = async () => {\n    if (coinAmount > 0) {\n      try {\n        // await removeCoins(targetUser.id, coinAmount, coinReason || 'Manuell entfernt');\n        console.log('Remove coins:', coinAmount, coinReason);\n        setCoinAmount(0);\n        setCoinReason('');\n      } catch (error) {\n        console.error('Error removing coins:', error);\n      }\n    }\n  };\n\n  const handleTeamToggle = (teamId: string) => {\n    setSelectedTeams(prev => \n      prev.includes(teamId) \n        ? prev.filter(id => id !== teamId)\n        : [...prev, teamId]\n    );\n  };\n\n  const handleLeadToggle = (teamId: string) => {\n    setLeadTeams(prev => \n      prev.includes(teamId)\n        ? prev.filter(id => id !== teamId)\n        : [...prev, teamId]\n    );\n  };\n\n  return (\n    <div className=\"p-6 max-w-4xl mx-auto\">\n      {/* Header */}\n      <div className=\"mb-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center\">\n            <button \n              onClick={() => navigate('/team-management')}\n              className=\"mr-4 p-2 text-gray-400 hover:text-gray-600\"\n            >\n              ← Zurück\n            </button>\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">{targetUser.name}</h1>\n              <p className=\"text-gray-600\">{targetUser.email}</p>\n            </div>\n          </div>\n          <div className=\"flex gap-3\">\n            {isEditing ? (\n              <>\n                <button\n                  onClick={() => setIsEditing(false)}\n                  className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200\"\n                >\n                  Abbrechen\n                </button>\n                <button\n                  onClick={handleSave}\n                  disabled={isLoading}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50\"\n                >\n                  {isLoading ? 'Speichern...' : 'Speichern'}\n                </button>\n              </>\n            ) : (\n              <button\n                onClick={() => setIsEditing(true)}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n              >\n                Bearbeiten\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Personal Information */}\n        <div className=\"lg:col-span-2 space-y-6\">\n          {/* Basic Info */}\n          <div className=\"bg-white p-6 rounded-lg border border-gray-200\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Persönliche Informationen</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Vorname</label>\n                {isEditing ? (\n                  <input\n                    type=\"text\"\n                    value={editedUser.firstName || ''}\n                    onChange={(e) => setEditedUser(prev => ({ ...prev, firstName: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                ) : (\n                  <p className=\"py-2 text-gray-900\">{targetUser.firstName || 'Nicht angegeben'}</p>\n                )}\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Nachname</label>\n                {isEditing ? (\n                  <input\n                    type=\"text\"\n                    value={editedUser.lastName || ''}\n                    onChange={(e) => setEditedUser(prev => ({ ...prev, lastName: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                ) : (\n                  <p className=\"py-2 text-gray-900\">{targetUser.lastName || 'Nicht angegeben'}</p>\n                )}\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">E-Mail (System)</label>\n                <p className=\"py-2 text-gray-500\">{targetUser.email}</p>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Personalnummer</label>\n                {isEditing ? (\n                  <input\n                    type=\"text\"\n                    value={editedUser.employeeNumber || ''}\n                    onChange={(e) => setEditedUser(prev => ({ ...prev, employeeNumber: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                ) : (\n                  <p className=\"py-2 text-gray-900\">{targetUser.employeeNumber || 'Nicht angegeben'}</p>\n                )}\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Private E-Mail</label>\n                {isEditing ? (\n                  <input\n                    type=\"email\"\n                    value={editedUser.privateEmail || ''}\n                    onChange={(e) => setEditedUser(prev => ({ ...prev, privateEmail: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                ) : (\n                  <p className=\"py-2 text-gray-900\">{targetUser.privateEmail || 'Nicht angegeben'}</p>\n                )}\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Telefon</label>\n                {isEditing ? (\n                  <input\n                    type=\"tel\"\n                    value={editedUser.phone || ''}\n                    onChange={(e) => setEditedUser(prev => ({ ...prev, phone: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                ) : (\n                  <p className=\"py-2 text-gray-900\">{targetUser.phone || 'Nicht angegeben'}</p>\n                )}\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Eintrittsdatum</label>\n                <p className=\"py-2 text-gray-500\">{targetUser.joinDate || 'Nicht angegeben'}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Work Information */}\n          <div className=\"bg-white p-6 rounded-lg border border-gray-200\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Arbeitsinformationen</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Position</label>\n                {isEditing ? (\n                  <input\n                    type=\"text\"\n                    value={editedUser.position || ''}\n                    onChange={(e) => setEditedUser(prev => ({ ...prev, position: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                ) : (\n                  <p className=\"py-2 text-gray-900\">{targetUser.position || 'Nicht angegeben'}</p>\n                )}\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Abteilung</label>\n                {isEditing ? (\n                  <input\n                    type=\"text\"\n                    value={editedUser.department || ''}\n                    onChange={(e) => setEditedUser(prev => ({ ...prev, department: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                ) : (\n                  <p className=\"py-2 text-gray-900\">{targetUser.department || 'Nicht angegeben'}</p>\n                )}\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Wochenstunden</label>\n                {isEditing ? (\n                  <input\n                    type=\"number\"\n                    value={editedUser.weeklyHours || ''}\n                    onChange={(e) => setEditedUser(prev => ({ ...prev, weeklyHours: Number(e.target.value) }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                ) : (\n                  <p className=\"py-2 text-gray-900\">{targetUser.weeklyHours || 0} Stunden</p>\n                )}\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Urlaubsanspruch</label>\n                {isEditing ? (\n                  <input\n                    type=\"number\"\n                    value={editedUser.vacationDays || ''}\n                    onChange={(e) => setEditedUser(prev => ({ ...prev, vacationDays: Number(e.target.value) }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                ) : (\n                  <p className=\"py-2 text-gray-900\">{targetUser.vacationDays || 0} Tage/Jahr</p>\n                )}\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Beschäftigungsstatus</label>\n                {isEditing ? (\n                  <select\n                    value={editedUser.employmentStatus || targetUser.employmentStatus}\n                    onChange={(e) => setEditedUser(prev => ({ ...prev, employmentStatus: e.target.value as EmploymentStatus }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  >\n                    <option value=\"ACTIVE\">Aktiv</option>\n                    <option value=\"PARENTAL_LEAVE\">Elternzeit</option>\n                    <option value=\"TERMINATED\">Gekündigt</option>\n                  </select>\n                ) : (\n                  <p className=\"py-2 text-gray-900\">\n                    {targetUser.employmentStatus === 'ACTIVE' ? 'Aktiv' :\n                     targetUser.employmentStatus === 'PARENTAL_LEAVE' ? 'Elternzeit' : 'Gekündigt'}\n                  </p>\n                )}\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Rolle</label>\n                {isEditing ? (\n                  <select\n                    value={editedUser.role || targetUser.role}\n                    onChange={(e) => setEditedUser(prev => ({ ...prev, role: e.target.value as UserRole }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  >\n                    <option value=\"EMPLOYEE\">Mitarbeiter</option>\n                    <option value=\"ADMIN\">Admin</option>\n                    <option value=\"SUPERADMIN\">Super Admin</option>\n                  </select>\n                ) : (\n                  <p className=\"py-2 text-gray-900\">\n                    {targetUser.role === 'EMPLOYEE' ? 'Mitarbeiter' : \n                     targetUser.role === 'ADMIN' ? 'Admin' : 'Super Admin'}\n                  </p>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Clothing Sizes */}\n          <div className=\"bg-white p-6 rounded-lg border border-gray-200\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Arbeitskleidung Größen</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Oberteil</label>\n                {isEditing ? (\n                  <select\n                    value={editedUser.clothingSizes?.top || ''}\n                    onChange={(e) => setEditedUser(prev => ({ \n                      ...prev, \n                      clothingSizes: { \n                        ...prev.clothingSizes, \n                        top: e.target.value || undefined \n                      } \n                    }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  >\n                    <option value=\"\">Bitte wählen</option>\n                    <option value=\"XS\">XS</option>\n                    <option value=\"S\">S</option>\n                    <option value=\"M\">M</option>\n                    <option value=\"L\">L</option>\n                    <option value=\"XL\">XL</option>\n                    <option value=\"XXL\">XXL</option>\n                    <option value=\"XXXL\">XXXL</option>\n                  </select>\n                ) : (\n                  <p className=\"py-2 text-gray-900\">{targetUser.clothingSizes?.top || 'Nicht angegeben'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Hose</label>\n                {isEditing ? (\n                  <input\n                    type=\"text\"\n                    value={editedUser.clothingSizes?.pants || ''}\n                    onChange={(e) => setEditedUser(prev => ({ \n                      ...prev, \n                      clothingSizes: { \n                        ...prev.clothingSizes, \n                        pants: e.target.value || undefined \n                      } \n                    }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    placeholder=\"z.B. 32, W32/L34\"\n                  />\n                ) : (\n                  <p className=\"py-2 text-gray-900\">{targetUser.clothingSizes?.pants || 'Nicht angegeben'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Schuhe</label>\n                {isEditing ? (\n                  <input\n                    type=\"text\"\n                    value={editedUser.clothingSizes?.shoes || ''}\n                    onChange={(e) => setEditedUser(prev => ({ \n                      ...prev, \n                      clothingSizes: { \n                        ...prev.clothingSizes, \n                        shoes: e.target.value || undefined \n                      } \n                    }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    placeholder=\"z.B. 42, 9.5\"\n                  />\n                ) : (\n                  <p className=\"py-2 text-gray-900\">{targetUser.clothingSizes?.shoes || 'Nicht angegeben'}</p>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Team Assignment */}\n          <div className=\"bg-white p-6 rounded-lg border border-gray-200\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Teamzuweisung</h3>\n            <div className=\"space-y-3\">\n              {allTeams.map((team) => (\n                <div key={team.id} className=\"flex items-center justify-between p-3 border border-gray-200 rounded-lg\">\n                  <div className=\"flex items-center\">\n                    {isEditing ? (\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedTeams.includes(team.id)}\n                        onChange={() => handleTeamToggle(team.id)}\n                        className=\"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                      />\n                    ) : (\n                      <div className=\"mr-3 w-4 h-4 flex items-center justify-center\">\n                        {userTeams.some(t => t.id === team.id) ? '✅' : '⬜'}\n                      </div>\n                    )}\n                    <div>\n                      <p className=\"font-medium text-gray-900\">{team.name}</p>\n                      {team.description && (\n                        <p className=\"text-sm text-gray-500\">{team.description}</p>\n                      )}\n                    </div>\n                  </div>\n                  {(selectedTeams.includes(team.id) || userTeams.some(t => t.id === team.id)) && (\n                    <div className=\"flex items-center\">\n                      {isEditing ? (\n                        <label className=\"flex items-center\">\n                          <input\n                            type=\"checkbox\"\n                            checked={leadTeams.includes(team.id)}\n                            onChange={() => handleLeadToggle(team.id)}\n                            disabled={!selectedTeams.includes(team.id)}\n                            className=\"mr-2 h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded\"\n                          />\n                          <span className=\"text-sm text-orange-600 font-medium\">Team Lead</span>\n                        </label>\n                      ) : (\n                        userLeadTeams.some(t => t.id === team.id) && (\n                          <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-orange-100 text-orange-800\">\n                            👑 Lead\n                          </span>\n                        )\n                      )}\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Sidebar */}\n        <div className=\"space-y-6\">\n          {/* Stats */}\n          <div className=\"bg-white p-6 rounded-lg border border-gray-200\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Übersicht</h3>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-gray-600\">Resturlaub</span>\n                <span className=\"font-semibold\">{vacationBalance?.remainingDays || 0} Tage</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-gray-600\">Teams</span>\n                <span className=\"font-semibold\">{userTeams.length}</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-gray-600\">Team Lead</span>\n                <span className=\"font-semibold\">{userLeadTeams.length}</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-gray-600\">Offene Anträge</span>\n                <span className=\"font-semibold\">\n                  {userRequests.filter(r => r.status === 'PENDING').length}\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* Coins Management */}\n          <div className=\"bg-white p-6 rounded-lg border border-gray-200\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Coin-Verwaltung</h3>\n            <div className=\"space-y-4\">\n              <div className=\"text-center p-4 bg-yellow-50 rounded-lg\">\n                <div className=\"text-2xl font-bold text-yellow-600\">\n                  🪙 {coinBalance?.balance || 0}\n                </div>\n                <div className=\"text-sm text-gray-600\">\n                  Level {coinBalance?.level || 1} • {coinBalance?.progress || 0} XP\n                </div>\n              </div>\n              \n              <div className=\"space-y-3\">\n                <input\n                  type=\"number\"\n                  placeholder=\"Anzahl Coins\"\n                  value={coinAmount}\n                  onChange={(e) => setCoinAmount(Number(e.target.value))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Grund (optional)\"\n                  value={coinReason}\n                  onChange={(e) => setCoinReason(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={handleAddCoins}\n                    disabled={coinAmount <= 0}\n                    className=\"flex-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 text-sm\"\n                  >\n                    + Hinzufügen\n                  </button>\n                  <button\n                    onClick={handleRemoveCoins}\n                    disabled={coinAmount <= 0}\n                    className=\"flex-1 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 text-sm\"\n                  >\n                    - Entfernen\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Quick Actions */}\n          <div className=\"bg-white p-6 rounded-lg border border-gray-200\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Schnellaktionen</h3>\n            <div className=\"space-y-3\">\n              <button className=\"w-full px-4 py-2 text-left bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100\">\n                📧 E-Mail senden\n              </button>\n              <button className=\"w-full px-4 py-2 text-left bg-green-50 text-green-700 rounded-lg hover:bg-green-100\">\n                📄 Dokument zuweisen\n              </button>\n              <button className=\"w-full px-4 py-2 text-left bg-purple-50 text-purple-700 rounded-lg hover:bg-purple-100\">\n                🎓 Schulung zuweisen\n              </button>\n              <button className=\"w-full px-4 py-2 text-left bg-yellow-50 text-yellow-700 rounded-lg hover:bg-yellow-100\">\n                🏆 Badge vergeben\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/TeamsOverviewScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (353). Maximum allowed is 30.","line":14,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":403,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":14,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":14,"endColumn":41},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (17). Maximum allowed is 15.","line":14,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":403,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 13. Maximum allowed is 10.","line":14,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":403,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":58,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":58,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":91,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":91,"endColumn":39},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":92,"column":9,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":92,"endColumn":47,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[2814,2852],"text":"editingTeam?.name.trim()"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":105,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":105,"endColumn":53},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (358). Maximum allowed is 75.","line":108,"column":1,"nodeType":null,"messageId":"exceed","endLine":403,"endColumn":3},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":258,"column":50,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":258,"endColumn":52,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9766,9768],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (91). Maximum allowed is 30.","line":286,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":381,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\n\nimport { useAuthStore } from '../state/auth';\nimport { useTeamsStore } from '../state/teams';\n// import { cn } from '../utils/cn';\nimport { Team } from '../types';\n\n/**\n * Teams Overview Screen Component\n * Allows HR admins to manage teams within the organization\n * Features include team creation, editing, deletion, and member/lead overview\n */\nexport const TeamsOverviewScreen = () => {\n  const navigate = useNavigate();\n  const { user, getAllUsers } = useAuthStore();\n  const { \n    getAllTeams, \n    createTeam, \n    updateTeam, \n    deleteTeam,\n    getTeamMembers,\n    getTeamLeads,\n    isLoading \n  } = useTeamsStore();\n\n  const [isCreating, setIsCreating] = useState(false);\n  const [editingTeam, setEditingTeam] = useState<Team | null>(null);\n  const [newTeam, setNewTeam] = useState({ name: '', description: '' });\n  const [searchTerm, setSearchTerm] = useState('');\n\n  // Check if current user is admin\n  const isAdmin = user?.role === 'ADMIN' || user?.role === 'SUPERADMIN';\n\n  if (!isAdmin) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"text-center py-12\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Zugriff verweigert</h2>\n          <p className=\"text-gray-600\">Diese Seite ist nur für Administratoren verfügbar.</p>\n        </div>\n      </div>\n    );\n  }\n\n  const allTeams = getAllTeams();\n  const allUsers = getAllUsers();\n\n  const filteredTeams = allTeams.filter(team =>\n    team.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    team.description?.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  /**\n   * Create a new team with validation\n   * Ensures team name is not empty and handles errors gracefully\n   */\n  const handleCreateTeam = async () => {\n    // Validate team name\n    if (!newTeam.name.trim()) {\n      // TODO: Replace with toast notification\n      // alert('Bitte geben Sie einen Team-Namen ein');\n      console.error('Team name is required');\n      return;\n    }\n    \n    try {\n      if (!user?.organizationId) {\n        // TODO: Replace with toast notification\n        // alert('Fehler: Keine Organisation zugewiesen');\n        console.error('No organization assigned');\n        return;\n      }\n      \n      await createTeam({\n        name: newTeam.name.trim(),\n        description: newTeam.description.trim(),\n        organizationId: user.organizationId,\n        leadIds: [],\n        memberIds: []\n      });\n      setNewTeam({ name: '', description: '' });\n      setIsCreating(false);\n    } catch (error) {\n      console.error('Error creating team:', error);\n      // TODO: Replace with toast notification\n      // alert('Fehler beim Erstellen des Teams');\n    }\n  };\n\n  const handleUpdateTeam = async () => {\n    if (editingTeam && editingTeam.name.trim()) {\n      try {\n        await updateTeam(editingTeam.id, {\n          name: editingTeam.name,\n          description: editingTeam.description\n        });\n        setEditingTeam(null);\n      } catch (error) {\n        console.error('Error updating team:', error);\n      }\n    }\n  };\n\n  const handleDeleteTeam = async (teamId: string) => {\n    // TODO: Replace with modal confirmation component\n    // if (window.confirm('Sind Sie sicher, dass Sie dieses Team löschen möchten?')) {\n      try {\n        await deleteTeam(teamId);\n      } catch (error) {\n        console.error('Error deleting team:', error);\n      }\n    // }\n  };\n\n  return (\n    <div className=\"p-6 max-w-6xl mx-auto\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center\">\n            <button \n              onClick={() => navigate('/team-management')}\n              className=\"mr-4 p-2 text-gray-400 hover:text-gray-600\"\n            >\n              ← Zurück\n            </button>\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">Teams verwalten</h1>\n              <p className=\"text-gray-600\">Erstellen und verwalten Sie Teams in Ihrer Organisation</p>\n            </div>\n          </div>\n          <button\n            onClick={() => setIsCreating(true)}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium\"\n          >\n            + Neues Team\n          </button>\n        </div>\n\n        {/* Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center\">\n              <div className=\"p-2 bg-blue-100 rounded-lg mr-3\">\n                <span className=\"text-blue-600\">🏢</span>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">Gesamt Teams</p>\n                <p className=\"text-xl font-semibold\">{allTeams.length}</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center\">\n              <div className=\"p-2 bg-green-100 rounded-lg mr-3\">\n                <span className=\"text-green-600\">👥</span>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">Mitglieder insgesamt</p>\n                <p className=\"text-xl font-semibold\">\n                  {allTeams.reduce((sum, team) => sum + team.memberIds.length, 0)}\n                </p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n            <div className=\"flex items-center\">\n              <div className=\"p-2 bg-orange-100 rounded-lg mr-3\">\n                <span className=\"text-orange-600\">👑</span>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">Team Leads</p>\n                <p className=\"text-xl font-semibold\">\n                  {allTeams.reduce((sum, team) => sum + team.leadIds.length, 0)}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Search */}\n        <div className=\"mb-6\">\n          <input\n            type=\"text\"\n            placeholder=\"Teams durchsuchen...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          />\n        </div>\n      </div>\n\n      {/* Create Team Modal */}\n      {isCreating && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg w-full max-w-md\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Neues Team erstellen</h3>\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Team Name</label>\n                <input\n                  type=\"text\"\n                  value={newTeam.name}\n                  onChange={(e) => setNewTeam(prev => ({ ...prev, name: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"z.B. Entwicklung, Marketing\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Beschreibung</label>\n                <textarea\n                  value={newTeam.description}\n                  onChange={(e) => setNewTeam(prev => ({ ...prev, description: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"Beschreibung des Teams...\"\n                  rows={3}\n                />\n              </div>\n              <div className=\"flex gap-3 pt-4\">\n                <button\n                  onClick={() => setIsCreating(false)}\n                  className=\"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200\"\n                >\n                  Abbrechen\n                </button>\n                <button\n                  onClick={handleCreateTeam}\n                  disabled={!newTeam.name.trim() || isLoading}\n                  className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50\"\n                >\n                  {isLoading ? 'Erstellen...' : 'Erstellen'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Edit Team Modal */}\n      {editingTeam && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg w-full max-w-md\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Team bearbeiten</h3>\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Team Name</label>\n                <input\n                  type=\"text\"\n                  value={editingTeam.name}\n                  onChange={(e) => setEditingTeam(prev => prev ? { ...prev, name: e.target.value } : null)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Beschreibung</label>\n                <textarea\n                  value={editingTeam.description || ''}\n                  onChange={(e) => setEditingTeam(prev => prev ? { ...prev, description: e.target.value } : null)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  rows={3}\n                />\n              </div>\n              <div className=\"flex gap-3 pt-4\">\n                <button\n                  onClick={() => setEditingTeam(null)}\n                  className=\"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200\"\n                >\n                  Abbrechen\n                </button>\n                <button\n                  onClick={handleUpdateTeam}\n                  disabled={!editingTeam.name.trim() || isLoading}\n                  className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50\"\n                >\n                  {isLoading ? 'Speichern...' : 'Speichern'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Teams Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredTeams.map((team) => {\n          const teamMembers = getTeamMembers(team.id, allUsers);\n          const teamLeads = getTeamLeads(team.id, allUsers);\n\n          return (\n            <div key={team.id} className=\"bg-white p-6 rounded-lg border border-gray-200 hover:shadow-md transition-shadow\">\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">{team.name}</h3>\n                  {team.description && (\n                    <p className=\"text-sm text-gray-600 mb-3\">{team.description}</p>\n                  )}\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <button\n                    onClick={() => setEditingTeam(team)}\n                    className=\"p-1 text-gray-400 hover:text-blue-600\"\n                  >\n                    ✏️\n                  </button>\n                  <button\n                    onClick={() => handleDeleteTeam(team.id)}\n                    className=\"p-1 text-gray-400 hover:text-red-600\"\n                  >\n                    🗑️\n                  </button>\n                </div>\n              </div>\n\n              {/* Team Stats */}\n              <div className=\"grid grid-cols-2 gap-4 mb-4\">\n                <div className=\"text-center p-3 bg-blue-50 rounded-lg\">\n                  <div className=\"text-lg font-semibold text-blue-600\">{teamMembers.length}</div>\n                  <div className=\"text-xs text-blue-600\">Mitglieder</div>\n                </div>\n                <div className=\"text-center p-3 bg-orange-50 rounded-lg\">\n                  <div className=\"text-lg font-semibold text-orange-600\">{teamLeads.length}</div>\n                  <div className=\"text-xs text-orange-600\">Leads</div>\n                </div>\n              </div>\n\n              {/* Team Leads */}\n              {teamLeads.length > 0 && (\n                <div className=\"mb-4\">\n                  <div className=\"text-sm font-medium text-gray-700 mb-2\">Team Leads:</div>\n                  <div className=\"space-y-1\">\n                    {teamLeads.map((lead) => (\n                      <div key={lead.id} className=\"flex items-center text-sm\">\n                        <span className=\"text-orange-500 mr-2\">👑</span>\n                        <span className=\"text-gray-900\">{lead.name}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Team Members Preview */}\n              {teamMembers.length > 0 && (\n                <div className=\"mb-4\">\n                  <div className=\"text-sm font-medium text-gray-700 mb-2\">Mitglieder:</div>\n                  <div className=\"space-y-1\">\n                    {teamMembers.slice(0, 3).map((member) => (\n                      <div key={member.id} className=\"flex items-center text-sm\">\n                        <div className=\"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center mr-2 text-xs\">\n                          {member.name.split(' ').map(n => n[0]).join('')}\n                        </div>\n                        <span className=\"text-gray-900\">{member.name}</span>\n                        {teamLeads.some(lead => lead.id === member.id) && (\n                          <span className=\"ml-1 text-orange-500\">👑</span>\n                        )}\n                      </div>\n                    ))}\n                    {teamMembers.length > 3 && (\n                      <div className=\"text-xs text-gray-500 pl-8\">\n                        +{teamMembers.length - 3} weitere\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n\n              {/* Actions */}\n              <div className=\"flex gap-2 mt-4\">\n                <Link\n                  to={`/team-management/team/${team.id}`}\n                  className=\"flex-1 px-3 py-2 text-center bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 text-sm font-medium\"\n                >\n                  Details\n                </Link>\n                <button className=\"flex-1 px-3 py-2 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 text-sm font-medium\">\n                  Mitglieder\n                </button>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {filteredTeams.length === 0 && (\n        <div className=\"text-center py-12\">\n          <div className=\"text-gray-400 text-4xl mb-4\">🏢</div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Keine Teams gefunden</h3>\n          <p className=\"text-gray-600 mb-4\">\n            {searchTerm ? 'Versuchen Sie einen anderen Suchbegriff.' : 'Erstellen Sie Ihr erstes Team.'}\n          </p>\n          {!searchTerm && (\n            <button\n              onClick={() => setIsCreating(true)}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium\"\n            >\n              Erstes Team erstellen\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/TimeAndVacationScreen.backup.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (557). Maximum allowed is 30.","line":21,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":662,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":21,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":21,"endColumn":43},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (33). Maximum allowed is 15.","line":21,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":662,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 30. Maximum allowed is 10.","line":21,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":662,"endColumn":2},{"ruleId":"sonarjs/cognitive-complexity","severity":1,"message":"Refactor this function to reduce its Cognitive Complexity from 18 to the 15 allowed.","line":21,"column":41,"nodeType":null,"messageId":"refactorFunction","endLine":21,"endColumn":43},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":78,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":78,"endColumn":33},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":96,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":96,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3707,3709],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (570). Maximum allowed is 75.","line":100,"column":1,"nodeType":null,"messageId":"exceed","endLine":662,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (45). Maximum allowed is 30.","line":106,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":161,"endColumn":4},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":113,"column":11,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":113,"endColumn":96},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":114,"column":11,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":114,"endColumn":94},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (34). Maximum allowed is 30.","line":119,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":158,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":122,"column":17,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":122,"endColumn":61},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":123,"column":18,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":139,"endColumn":10},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":146,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":156,"endColumn":10},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":164,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":164,"endColumn":60},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":168,"column":11,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":168,"endColumn":76},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":179,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":179,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":192,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":192,"endColumn":37},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":223,"column":28,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":223,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7922,7924],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":229,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":229,"endColumn":62},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 4 times.","line":378,"column":21,"nodeType":"Literal","endLine":378,"endColumn":83},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 4 times.","line":381,"column":25,"nodeType":"Literal","endLine":381,"endColumn":70},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":464,"column":19,"nodeType":"MemberExpression","messageId":"unexpected","endLine":464,"endColumn":30,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[17707,17762],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (64). Maximum allowed is 30.","line":509,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":578,"endColumn":16},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 16. Maximum allowed is 10.","line":509,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":578,"endColumn":16},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":548,"column":44,"nodeType":"Literal","endLine":548,"endColumn":56},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":568,"column":25,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":570,"endColumn":50},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":572,"column":26,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":573,"endColumn":81},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":609,"column":23,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":609,"endColumn":89},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":629,"column":84,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":629,"endColumn":86,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[25433,25435],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":645,"column":25,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":647,"endColumn":50},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":649,"column":26,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":650,"endColumn":79}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":33,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport React, { useState, useMemo, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { TeamCalendarView } from '../components/TeamCalendarView';\nimport { useAuthStore } from '../state/auth';\nimport { useLeavesStore } from '../state/leaves';\nimport { useNotificationsStore } from '../state/notifications';\nimport { useTeamsStore } from '../state/teams';\nimport { useTimeRecordsStore } from '../state/timeRecords';\nimport { TimeRecord } from '../types';\nimport { CalendarEntry } from '../types/calendar';\nimport { cn } from '../utils/cn';\n\n/**\n * Combined Time & Vacation Module\n * Unified calendar view showing work times, vacation days, and sick days\n * Includes status overview and application management\n */\nexport const TimeAndVacationScreen = () => {\n  const navigate = useNavigate();\n  const { user, getAllUsers } = useAuthStore();\n  const { getAllLeaveRequests } = useLeavesStore();\n  const { getUnreadNotificationsForUser, markAsRead } = useNotificationsStore();\n  const { getTimeRecordsForPeriod, getTodayRecord, isCurrentlyTracking, clockIn, clockOut } = useTimeRecordsStore();\n  const { getTeamsByUserId: _getTeamsByUserId } = useTeamsStore();\n  \n  const [view, setView] = useState<'monat' | 'jahr'>('monat');\n  const [calendarType, setCalendarType] = useState<'mein' | 'team'>('mein');\n  const [requestsTab, setRequestsTab] = useState<'my' | 'manage'>('my');\n  const [_selectedTeamId, _setSelectedTeamId] = useState<string>('user');\n  const [currentTime, setCurrentTime] = useState(new Date());\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [showDetailModal, setShowDetailModal] = useState(false);\n  const [selectedDay, setSelectedDay] = useState<Date | null>(null);\n\n  const allLeaves = getAllLeaveRequests();\n  const isTracking = user ? isCurrentlyTracking(user.id) : false;\n  const todayRecord = user ? getTodayRecord(user.id) : null;\n  const unreadNotifications = user ? getUnreadNotificationsForUser(user.id) : [];\n  const isAdmin = user?.role === 'ADMIN' || user?.role === 'SUPERADMIN';\n\n  // Update current time every second\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 1000);\n    return () => clearInterval(timer);\n  }, []);\n\n  // Get users to display based on calendar type\n  const displayUsers = useMemo(() => {\n    if (!user) return [];\n    \n    if (calendarType === 'mein') {\n      // Show only current user\n      return [{\n        userId: user.id,\n        userName: user.name\n      }];\n    } else {\n      // Show all users in the organization\n      const allUsers = getAllUsers();\n      return allUsers\n        .filter(u => u.organizationId === user.organizationId)\n        .map(u => ({\n          userId: u.id,\n          userName: u.name\n        }));\n    }\n  }, [user, getAllUsers, calendarType]);\n\n  /**\n   * Get vacation statistics for current user\n   */\n  const getVacationStats = () => {\n    if (!user) return { total: 0, used: 0, remaining: 0 };\n    \n    const currentYear = new Date().getFullYear();\n    const approvedVacations = allLeaves.filter(leave =>\n      leave.userId === user.id &&\n      leave.type === 'VACATION' &&\n      leave.status === 'APPROVED' &&\n      new Date(leave.startDate).getFullYear() === currentYear\n    );\n    \n    const usedDays = approvedVacations.reduce((total, leave) => {\n      const start = new Date(leave.startDate);\n      const end = new Date(leave.endDate);\n      const days = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)) + 1;\n      return total + days;\n    }, 0);\n    \n    const totalDays = user.vacationDays || 30;\n    \n    return {\n      total: totalDays,\n      used: usedDays,\n      remaining: Math.max(0, totalDays - usedDays)\n    };\n  };\n\n  // Convert leave requests and time records to calendar entries\n  const calendarEntries = useMemo(() => {\n    if (!user || displayUsers.length === 0) return [];\n    \n    const entries: CalendarEntry[] = [];\n    const today = new Date();\n    const currentMonth = today.getMonth();\n    const currentYear = today.getFullYear();\n    const startDateStr = new Date(currentYear, currentMonth - 1, 1).toISOString().split('T')[0];\n    const endDateStr = new Date(currentYear, currentMonth + 2, 0).toISOString().split('T')[0];\n    \n    const isAdmin = user.role === 'ADMIN' || user.role === 'SUPERADMIN';\n    \n    // Process each user\n    displayUsers.forEach(displayUser => {\n      // Add leave requests for this user\n      allLeaves\n        .filter(leave => leave.userId === displayUser.userId)\n        .forEach(request => {\n          // Only show vacation (green) and sick leave (blue)\n          if (request.type === 'VACATION' || request.type === 'SICK') {\n            const start = new Date(request.startDate);\n            const end = new Date(request.endDate);\n            \n            for (let date = new Date(start); date <= end; date.setDate(date.getDate() + 1)) {\n              entries.push({\n                userId: request.userId,\n                userName: displayUser.userName,\n                date: format(date, 'yyyy-MM-dd'),\n                type: request.type === 'VACATION' ? 'urlaub' : 'krank',\n                status: request.status.toLowerCase() as 'beantragt' | 'genehmigt' | 'abgelehnt'\n              });\n            }\n          }\n        });\n      \n      // Add time records - only for \"Mein Kalender\" or if user is admin in \"Teamkalender\"\n      const shouldShowWorkTime = calendarType === 'mein' || (calendarType === 'team' && isAdmin);\n      \n      if (shouldShowWorkTime) {\n        const timeRecords = getTimeRecordsForPeriod(displayUser.userId, startDateStr, endDateStr);\n        timeRecords.forEach((record: TimeRecord) => {\n          if (record.totalHours) {\n            entries.push({\n              userId: record.userId,\n              userName: displayUser.userName,\n              date: record.date,\n              type: 'zeit',\n              stunden: record.totalHours\n            });\n          }\n        });\n      }\n    });\n\n    return entries;\n  }, [user, displayUsers, allLeaves, getTimeRecordsForPeriod, calendarType]);\n\n  // Handle cell click for calendar\n  const handleCellClick = (userId: string, date: string) => {\n    // Open detail modal for work time entries\n    const clickedDate = new Date(date);\n    const dateStr = date;\n    const timeRecord = getTimeRecordsForPeriod(userId, dateStr, dateStr)[0];\n    \n    if (timeRecord && timeRecord.totalHours > 0) {\n      setSelectedDay(clickedDate);\n      setShowDetailModal(true);\n    }\n  };\n\n  /**\n   * Clock in/out handlers\n   */\n  const handleClockIn = async () => {\n    if (!user) return;\n    \n    try {\n      setError('');\n      await clockIn(user.id);\n      setSuccess('Erfolgreich eingestempelt!');\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Fehler beim Einstempeln');\n    }\n  };\n\n  const handleClockOut = async () => {\n    if (!user) return;\n    \n    try {\n      setError('');\n      await clockOut(user.id, 30);\n      setSuccess('Erfolgreich ausgestempelt!');\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Fehler beim Ausstempeln');\n    }\n  };\n\n  const vacationStats = getVacationStats();\n\n  /**\n   * Check if a leave request has unread notifications\n   */\n  const hasUnreadNotification = (leaveRequestId: string): boolean => {\n    return unreadNotifications.some(notification => \n      notification.relatedId === leaveRequestId && \n      (notification.type === 'leave_approved' || notification.type === 'leave_rejected')\n    );\n  };\n\n  /**\n   * Get user name by ID\n   */\n  const getUserName = (userId: string): string => {\n    const allUsers = getAllUsers();\n    const foundUser = allUsers.find(u => u.id === userId);\n    return foundUser?.name || 'Unbekannt';\n  };\n\n  /**\n   * Handle click on leave request - mark related notifications as read\n   */\n  const handleLeaveRequestClick = (leaveRequestId: string) => {\n    // Mark all related notifications as read\n    unreadNotifications.forEach(notification => {\n      if (notification.relatedId === leaveRequestId && \n          (notification.type === 'leave_approved' || notification.type === 'leave_rejected')) {\n        markAsRead(notification.id);\n      }\n    });\n  };\n\n  if (!user) return null;\n\n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <div className=\"flex-1 px-4 py-6 overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-2xl font-bold text-gray-900\">Zeit & Urlaub</h1>\n          \n          <div className=\"flex items-center space-x-3\">\n            <button\n              onClick={() => navigate('/request-leave')}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm\"\n            >\n              + Neue Abwesenheit\n            </button>\n          </div>\n        </div>\n\n        {/* Status Overview */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\">\n          {/* User Info */}\n          <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Meine Daten</h3>\n            <div className=\"space-y-2 text-sm\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">Beschäftigungsart:</span>\n                <span className=\"font-medium\">Vollzeit</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">Wochenstunden:</span>\n                <span className=\"font-medium\">40h</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">Urlaubstage/Jahr:</span>\n                <span className=\"font-medium\">{vacationStats.total}</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Vacation Stats */}\n          <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n              Urlaubsübersicht {new Date().getFullYear()}\n            </h3>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div className=\"text-center\">\n                <p className=\"text-2xl font-bold text-green-600\">{vacationStats.remaining}</p>\n                <p className=\"text-xs text-gray-500\">Verfügbar</p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-2xl font-bold text-red-600\">{vacationStats.used}</p>\n                <p className=\"text-xs text-gray-500\">Genommen</p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-2xl font-bold text-blue-600\">{vacationStats.total}</p>\n                <p className=\"text-xs text-gray-500\">Gesamt</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Today's Time Tracking */}\n          <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Heute</h3>\n            <div className=\"space-y-3\">\n              <div className=\"text-center\">\n                <p className=\"text-lg font-mono font-bold text-gray-900\">\n                  {format(currentTime, 'HH:mm:ss')}\n                </p>\n                <p className=\"text-sm text-gray-500\">Aktuelle Zeit</p>\n              </div>\n              \n              {todayRecord && (\n                <div className=\"text-sm\">\n                  <p className=\"text-gray-600\">Heute gestempelt:</p>\n                  <p className=\"font-mono\">\n                    {todayRecord.timeIn} {todayRecord.timeOut ? `– ${todayRecord.timeOut}` : '– läuft'}\n                  </p>\n                  {todayRecord.totalHours > 0 && (\n                    <p className=\"text-gray-600\">Arbeitszeit: {todayRecord.totalHours.toFixed(1)}h</p>\n                  )}\n                </div>\n              )}\n\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={handleClockIn}\n                  disabled={isTracking}\n                  className={cn(\n                    \"flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors\",\n                    isTracking \n                      ? \"bg-gray-100 text-gray-400 cursor-not-allowed\"\n                      : \"bg-green-600 text-white hover:bg-green-700\"\n                  )}\n                >\n                  Einstempeln\n                </button>\n                <button\n                  onClick={handleClockOut}\n                  disabled={!isTracking}\n                  className={cn(\n                    \"flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors\",\n                    !isTracking \n                      ? \"bg-gray-100 text-gray-400 cursor-not-allowed\"\n                      : \"bg-red-600 text-white hover:bg-red-700\"\n                  )}\n                >\n                  Ausstempeln\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Messages */}\n        {error && (\n          <div className=\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg\">\n            {error}\n          </div>\n        )}\n        {success && (\n          <div className=\"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg\">\n            {success}\n          </div>\n        )}\n\n        {/* Team Calendar - Timebutler Style */}\n        <div className=\"bg-white rounded-xl p-6 shadow-sm mb-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">\n              {calendarType === 'mein' ? 'Mein Kalender' : 'Team Kalender'}\n            </h3>\n            \n            <div className=\"flex items-center gap-4\">\n              {/* Calendar Type Toggle */}\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={() => setCalendarType('mein')}\n                  className={cn(\n                    \"px-3 py-1.5 rounded-lg font-medium transition-colors text-sm\",\n                    calendarType === 'mein' \n                      ? \"bg-green-600 text-white\" \n                      : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n                  )}\n                >\n                  Mein Kalender\n                </button>\n                <button\n                  onClick={() => setCalendarType('team')}\n                  className={cn(\n                    \"px-3 py-1.5 rounded-lg font-medium transition-colors text-sm\",\n                    calendarType === 'team' \n                      ? \"bg-green-600 text-white\" \n                      : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n                  )}\n                >\n                  Team Kalender\n                </button>\n              </div>\n              \n              {/* View Toggle */}\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={() => setView('monat')}\n                  className={cn(\n                    \"px-3 py-1.5 rounded-lg font-medium transition-colors text-sm\",\n                    view === 'monat' \n                      ? \"bg-blue-600 text-white\" \n                      : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n                  )}\n                >\n                  Monat\n                </button>\n                <button\n                  onClick={() => setView('jahr')}\n                  className={cn(\n                    \"px-3 py-1.5 rounded-lg font-medium transition-colors text-sm\",\n                    view === 'jahr' \n                      ? \"bg-blue-600 text-white\" \n                      : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n                  )}\n                >\n                  Jahr\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Team Calendar Component */}\n          <TeamCalendarView\n            view={view}\n            entries={calendarEntries}\n            users={displayUsers}\n            onCellClick={handleCellClick}\n            isAdmin={false}\n            showLegend={false}\n          />\n          \n          {/* Custom Legend - Only 3 Categories */}\n          <div className=\"mt-4 flex justify-center gap-6 text-sm\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: \"#22c55e\" }}></div>\n              <span>Urlaub</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: \"#3b82f6\" }}></div>\n              <span>Krankheit</span>\n            </div>\n            {((calendarType === 'mein') || (calendarType === 'team' && (user.role === 'ADMIN' || user.role === 'SUPERADMIN'))) && (\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: \"#9ca3af\" }}></div>\n                <span>Arbeitszeit</span>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Applications Management */}\n        <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Abwesenheiten</h3>\n            <div className=\"flex items-center gap-3\">\n              {/* Debug Button - temporär zum Testen */}\n              <button\n                onClick={() => {\n                  console.log('Lösche Notifications für User:', user.id);\n                  // removeAllUserNotifications(user.id); // Method needs to be implemented\n                }}\n                className=\"bg-red-100 hover:bg-red-200 text-red-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors\"\n              >\n                🗑️ Debug: Notifications löschen\n              </button>\n            </div>\n          </div>\n\n          {/* Tab Navigation */}\n          <div className=\"flex bg-gray-100 rounded-lg p-1 mb-4\">\n            <button\n              onClick={() => setRequestsTab('my')}\n              className={cn(\n                \"flex-1 py-2 px-3 rounded-md transition-colors text-sm font-medium\",\n                requestsTab === 'my' \n                  ? \"bg-white text-gray-900 shadow-sm\" \n                  : \"text-gray-600 hover:text-gray-900\"\n              )}\n            >\n              Meine Abwesenheiten\n            </button>\n            {isAdmin && (\n              <button\n                onClick={() => setRequestsTab('manage')}\n                className={cn(\n                  \"flex-1 py-2 px-3 rounded-md transition-colors text-sm font-medium\",\n                  requestsTab === 'manage' \n                    ? \"bg-white text-gray-900 shadow-sm\" \n                    : \"text-gray-600 hover:text-gray-900\"\n                )}\n              >\n                Abwesenheiten verwalten\n              </button>\n            )}\n          </div>\n          \n          <div className=\"space-y-4\">\n            {(requestsTab === 'my' ? \n              allLeaves.filter(leave => leave.userId === user.id) :\n              allLeaves\n            )\n              .sort((a, b) => new Date(b.createdAt || '').getTime() - new Date(a.createdAt || '').getTime())\n              .slice(0, 8)\n              .map(leave => {\n                const start = new Date(leave.startDate);\n                const end = new Date(leave.endDate);\n                const days = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)) + 1;\n                const hasNotification = hasUnreadNotification(leave.id);\n\n                return (\n                  <div \n                    key={leave.id} \n                    className={cn(\n                      \"p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors relative\",\n                      hasNotification && \"bg-blue-50 border-blue-200\"\n                    )}\n                    onClick={() => handleLeaveRequestClick(leave.id)}\n                  >\n                    {/* Notification Indicator */}\n                    {hasNotification && (\n                      <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full\"></div>\n                    )}\n                    \n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex items-start space-x-3\">\n                        <span className=\"text-2xl\">\n                          {leave.type === 'VACATION' ? '🏖️' : '🏥'}\n                        </span>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <p className=\"font-semibold text-gray-900\">\n                              {requestsTab === 'manage' ? `${getUserName(leave.userId)} - ` : ''}\n                              {leave.type === 'VACATION' ? 'Urlaub' : 'Krankheit'}\n                            </p>\n                            {hasNotification && (\n                              <span className=\"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded\">\n                                🔔 Neu\n                              </span>\n                            )}\n                          </div>\n                          \n                          <p className=\"text-sm text-gray-600 mb-2\">\n                            {format(start, 'dd.MM.yyyy')} - {format(end, 'dd.MM.yyyy')} ({days} Tag{days !== 1 ? 'e' : ''})\n                          </p>\n                          \n                          {leave.comment && (\n                            <p className=\"text-sm text-gray-600 italic mb-2\">\"{leave.comment}\"</p>\n                          )}\n                          \n                          <div className=\"text-xs text-gray-500 space-y-1\">\n                            <p>Erstellt: {format(new Date(leave.createdAt), 'dd.MM.yyyy HH:mm')} von {getUserName(leave.userId)}</p>\n                            {leave.approvedAt && leave.approvedBy && (\n                              <p>\n                                {leave.status === 'APPROVED' ? 'Genehmigt' : 'Abgelehnt'}: {format(new Date(leave.approvedAt), 'dd.MM.yyyy HH:mm')} von {getUserName(leave.approvedBy)}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <span className={cn(\n                        \"px-3 py-1 rounded-full text-xs font-medium\",\n                        leave.status === 'APPROVED' ? 'bg-green-100 text-green-800' :\n                        leave.status === 'PENDING' ? 'bg-yellow-100 text-yellow-800' :\n                        'bg-red-100 text-red-800'\n                      )}>\n                        {leave.status === 'APPROVED' ? 'Genehmigt' :\n                         leave.status === 'PENDING' ? 'Ausstehend' : 'Abgelehnt'}\n                      </span>\n                    </div>\n                  </div>\n                );\n              })}\n          \n            {(requestsTab === 'my' ? \n              allLeaves.filter(leave => leave.userId === user.id) :\n              allLeaves\n            ).length === 0 && (\n              <p className=\"text-gray-500 text-center py-4\">\n                Noch keine Abwesenheiten vorhanden\n              </p>\n            )}\n          </div>\n        </div>\n\n        {/* Detail Modal for Work Time */}\n        {showDetailModal && selectedDay && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n            <div className=\"bg-white rounded-xl p-6 max-w-md w-full\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-lg font-semibold\">\n                  Arbeitszeit - {format(selectedDay, 'dd.MM.yyyy', { locale: de })}\n                </h3>\n                <button\n                  onClick={() => setShowDetailModal(false)}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  ✕\n                </button>\n              </div>\n              \n              {(() => {\n                const dateStr = format(selectedDay, 'yyyy-MM-dd');\n                const timeRecord = getTimeRecordsForPeriod(user.id, dateStr, dateStr)[0];\n                \n                if (!timeRecord) {\n                  return (\n                    <p className=\"text-gray-500 text-center py-4\">\n                      Keine Arbeitszeit für diesen Tag gefunden\n                    </p>\n                  );\n                }\n\n                return (\n                  <div className=\"space-y-4\">\n                    <div className=\"bg-gray-50 rounded-lg p-4\">\n                      <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                        <div>\n                          <span className=\"text-gray-600\">Arbeitsbeginn:</span>\n                          <p className=\"font-mono font-medium\">{timeRecord.timeIn}</p>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-600\">Arbeitsende:</span>\n                          <p className=\"font-mono font-medium\">{timeRecord.timeOut || 'läuft'}</p>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-600\">Pause:</span>\n                          <p className=\"font-mono font-medium\">{timeRecord.breakMinutes}min</p>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-600\">Gesamtzeit:</span>\n                          <p className=\"font-mono font-medium\">{timeRecord.totalHours.toFixed(1)}h</p>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"text-center\">\n                      <span className={cn(\n                        \"inline-block px-3 py-1 rounded-full text-sm font-medium\",\n                        timeRecord.totalHours >= 8 ? \"bg-green-100 text-green-800\" :\n                        timeRecord.totalHours >= 6 ? \"bg-yellow-100 text-yellow-800\" :\n                        \"bg-red-100 text-red-800\"\n                      )}>\n                        {timeRecord.totalHours >= 8 ? \"Vollzeit erreicht\" :\n                         timeRecord.totalHours >= 6 ? \"Teilzeit\" : \"Unterzeit\"}\n                      </span>\n                    </div>\n                  </div>\n                );\n              })()}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/TimeAndVacationScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (557). Maximum allowed is 30.","line":21,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":662,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":21,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":21,"endColumn":43},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (33). Maximum allowed is 15.","line":21,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":662,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 30. Maximum allowed is 10.","line":21,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":662,"endColumn":2},{"ruleId":"sonarjs/cognitive-complexity","severity":1,"message":"Refactor this function to reduce its Cognitive Complexity from 18 to the 15 allowed.","line":21,"column":41,"nodeType":null,"messageId":"refactorFunction","endLine":21,"endColumn":43},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":78,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":78,"endColumn":33},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":96,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":96,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3707,3709],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (570). Maximum allowed is 75.","line":100,"column":1,"nodeType":null,"messageId":"exceed","endLine":662,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (45). Maximum allowed is 30.","line":106,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":161,"endColumn":4},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":113,"column":11,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":113,"endColumn":96},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":114,"column":11,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":114,"endColumn":94},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (34). Maximum allowed is 30.","line":119,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":158,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":122,"column":17,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":122,"endColumn":61},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":123,"column":18,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":139,"endColumn":10},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":146,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":156,"endColumn":10},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":164,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":164,"endColumn":60},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":168,"column":11,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":168,"endColumn":76},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":179,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":179,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":192,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":192,"endColumn":37},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":223,"column":28,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":223,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7922,7924],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":229,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":229,"endColumn":62},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 4 times.","line":378,"column":21,"nodeType":"Literal","endLine":378,"endColumn":83},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 4 times.","line":381,"column":25,"nodeType":"Literal","endLine":381,"endColumn":70},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":464,"column":19,"nodeType":"MemberExpression","messageId":"unexpected","endLine":464,"endColumn":30,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[17707,17762],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (64). Maximum allowed is 30.","line":509,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":578,"endColumn":16},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 16. Maximum allowed is 10.","line":509,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":578,"endColumn":16},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":548,"column":44,"nodeType":"Literal","endLine":548,"endColumn":56},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":568,"column":25,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":570,"endColumn":50},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":572,"column":26,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":573,"endColumn":81},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":629,"column":84,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":629,"endColumn":86,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[25447,25449],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":645,"column":25,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":647,"endColumn":50},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":649,"column":26,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":650,"endColumn":79}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":32,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport React, { useState, useMemo, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { TeamCalendarView } from '../components/TeamCalendarView';\nimport { useAuthStore } from '../state/auth';\nimport { useLeavesStore } from '../state/leaves';\nimport { useNotificationsStore } from '../state/notifications';\nimport { useTeamsStore } from '../state/teams';\nimport { useTimeRecordsStore } from '../state/timeRecords';\nimport { TimeRecord } from '../types';\nimport { CalendarEntry } from '../types/calendar';\nimport { cn } from '../utils/cn';\n\n/**\n * Combined Time & Vacation Module\n * Unified calendar view showing work times, vacation days, and sick days\n * Includes status overview and application management\n */\nexport const TimeAndVacationScreen = () => {\n  const navigate = useNavigate();\n  const { user, getAllUsers } = useAuthStore();\n  const { getAllLeaveRequests } = useLeavesStore();\n  const { getUnreadNotificationsForUser, markAsRead } = useNotificationsStore();\n  const { getTimeRecordsForPeriod, getTodayRecord, isCurrentlyTracking, clockIn, clockOut } = useTimeRecordsStore();\n  const { getTeamsByUserId: _getTeamsByUserId } = useTeamsStore();\n  \n  const [view, setView] = useState<'monat' | 'jahr'>('monat');\n  const [calendarType, setCalendarType] = useState<'mein' | 'team'>('mein');\n  const [requestsTab, setRequestsTab] = useState<'my' | 'manage'>('my');\n  const [_selectedTeamId, _setSelectedTeamId] = useState<string>('user');\n  const [currentTime, setCurrentTime] = useState(new Date());\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [showDetailModal, setShowDetailModal] = useState(false);\n  const [selectedDay, setSelectedDay] = useState<Date | null>(null);\n\n  const allLeaves = getAllLeaveRequests();\n  const isTracking = user ? isCurrentlyTracking(user.id) : false;\n  const todayRecord = user ? getTodayRecord(user.id) : null;\n  const unreadNotifications = user ? getUnreadNotificationsForUser(user.id) : [];\n  const isAdmin = user?.role === 'ADMIN' || user?.role === 'SUPERADMIN';\n\n  // Update current time every second\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 1000);\n    return () => clearInterval(timer);\n  }, []);\n\n  // Get users to display based on calendar type\n  const displayUsers = useMemo(() => {\n    if (!user) return [];\n    \n    if (calendarType === 'mein') {\n      // Show only current user\n      return [{\n        userId: user.id,\n        userName: user.name\n      }];\n    } else {\n      // Show all users in the organization\n      const allUsers = getAllUsers();\n      return allUsers\n        .filter(u => u.organizationId === user.organizationId)\n        .map(u => ({\n          userId: u.id,\n          userName: u.name\n        }));\n    }\n  }, [user, getAllUsers, calendarType]);\n\n  /**\n   * Get vacation statistics for current user\n   */\n  const getVacationStats = () => {\n    if (!user) return { total: 0, used: 0, remaining: 0 };\n    \n    const currentYear = new Date().getFullYear();\n    const approvedVacations = allLeaves.filter(leave =>\n      leave.userId === user.id &&\n      leave.type === 'VACATION' &&\n      leave.status === 'APPROVED' &&\n      new Date(leave.startDate).getFullYear() === currentYear\n    );\n    \n    const usedDays = approvedVacations.reduce((total, leave) => {\n      const start = new Date(leave.startDate);\n      const end = new Date(leave.endDate);\n      const days = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)) + 1;\n      return total + days;\n    }, 0);\n    \n    const totalDays = user.vacationDays || 30;\n    \n    return {\n      total: totalDays,\n      used: usedDays,\n      remaining: Math.max(0, totalDays - usedDays)\n    };\n  };\n\n  // Convert leave requests and time records to calendar entries\n  const calendarEntries = useMemo(() => {\n    if (!user || displayUsers.length === 0) return [];\n    \n    const entries: CalendarEntry[] = [];\n    const today = new Date();\n    const currentMonth = today.getMonth();\n    const currentYear = today.getFullYear();\n    const startDateStr = new Date(currentYear, currentMonth - 1, 1).toISOString().split('T')[0];\n    const endDateStr = new Date(currentYear, currentMonth + 2, 0).toISOString().split('T')[0];\n    \n    const isAdmin = user.role === 'ADMIN' || user.role === 'SUPERADMIN';\n    \n    // Process each user\n    displayUsers.forEach(displayUser => {\n      // Add leave requests for this user\n      allLeaves\n        .filter(leave => leave.userId === displayUser.userId)\n        .forEach(request => {\n          // Only show vacation (green) and sick leave (blue)\n          if (request.type === 'VACATION' || request.type === 'SICK') {\n            const start = new Date(request.startDate);\n            const end = new Date(request.endDate);\n            \n            for (let date = new Date(start); date <= end; date.setDate(date.getDate() + 1)) {\n              entries.push({\n                userId: request.userId,\n                userName: displayUser.userName,\n                date: format(date, 'yyyy-MM-dd'),\n                type: request.type === 'VACATION' ? 'urlaub' : 'krank',\n                status: request.status.toLowerCase() as 'beantragt' | 'genehmigt' | 'abgelehnt'\n              });\n            }\n          }\n        });\n      \n      // Add time records - only for \"Mein Kalender\" or if user is admin in \"Teamkalender\"\n      const shouldShowWorkTime = calendarType === 'mein' || (calendarType === 'team' && isAdmin);\n      \n      if (shouldShowWorkTime) {\n        const timeRecords = getTimeRecordsForPeriod(displayUser.userId, startDateStr, endDateStr);\n        timeRecords.forEach((record: TimeRecord) => {\n          if (record.totalHours) {\n            entries.push({\n              userId: record.userId,\n              userName: displayUser.userName,\n              date: record.date,\n              type: 'zeit',\n              stunden: record.totalHours\n            });\n          }\n        });\n      }\n    });\n\n    return entries;\n  }, [user, displayUsers, allLeaves, getTimeRecordsForPeriod, calendarType]);\n\n  // Handle cell click for calendar\n  const handleCellClick = (userId: string, date: string) => {\n    // Open detail modal for work time entries\n    const clickedDate = new Date(date);\n    const dateStr = date;\n    const timeRecord = getTimeRecordsForPeriod(userId, dateStr, dateStr)[0];\n    \n    if (timeRecord && timeRecord.totalHours > 0) {\n      setSelectedDay(clickedDate);\n      setShowDetailModal(true);\n    }\n  };\n\n  /**\n   * Clock in/out handlers\n   */\n  const handleClockIn = async () => {\n    if (!user) return;\n    \n    try {\n      setError('');\n      await clockIn(user.id);\n      setSuccess('Erfolgreich eingestempelt!');\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Fehler beim Einstempeln');\n    }\n  };\n\n  const handleClockOut = async () => {\n    if (!user) return;\n    \n    try {\n      setError('');\n      await clockOut(user.id, 30);\n      setSuccess('Erfolgreich ausgestempelt!');\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Fehler beim Ausstempeln');\n    }\n  };\n\n  const vacationStats = getVacationStats();\n\n  /**\n   * Check if a leave request has unread notifications\n   */\n  const hasUnreadNotification = (leaveRequestId: string): boolean => {\n    return unreadNotifications.some(notification => \n      notification.relatedId === leaveRequestId && \n      (notification.type === 'leave_approved' || notification.type === 'leave_rejected')\n    );\n  };\n\n  /**\n   * Get user name by ID\n   */\n  const getUserName = (userId: string): string => {\n    const allUsers = getAllUsers();\n    const foundUser = allUsers.find(u => u.id === userId);\n    return foundUser?.name || 'Unbekannt';\n  };\n\n  /**\n   * Handle click on leave request - mark related notifications as read\n   */\n  const handleLeaveRequestClick = (leaveRequestId: string) => {\n    // Mark all related notifications as read\n    unreadNotifications.forEach(notification => {\n      if (notification.relatedId === leaveRequestId && \n          (notification.type === 'leave_approved' || notification.type === 'leave_rejected')) {\n        markAsRead(notification.id);\n      }\n    });\n  };\n\n  if (!user) return null;\n\n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <div className=\"flex-1 px-4 py-6 overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-2xl font-bold text-gray-900\">Zeit & Urlaub</h1>\n          \n          <div className=\"flex items-center space-x-3\">\n            <button\n              onClick={() => navigate('/request-leave')}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm\"\n            >\n              + Neue Abwesenheit\n            </button>\n          </div>\n        </div>\n\n        {/* Status Overview */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\">\n          {/* User Info */}\n          <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Meine Daten</h3>\n            <div className=\"space-y-2 text-sm\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">Beschäftigungsart:</span>\n                <span className=\"font-medium\">Vollzeit</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">Wochenstunden:</span>\n                <span className=\"font-medium\">40h</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">Urlaubstage/Jahr:</span>\n                <span className=\"font-medium\">{vacationStats.total}</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Vacation Stats */}\n          <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n              Urlaubsübersicht {new Date().getFullYear()}\n            </h3>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div className=\"text-center\">\n                <p className=\"text-2xl font-bold text-green-600\">{vacationStats.remaining}</p>\n                <p className=\"text-xs text-gray-500\">Verfügbar</p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-2xl font-bold text-red-600\">{vacationStats.used}</p>\n                <p className=\"text-xs text-gray-500\">Genommen</p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-2xl font-bold text-blue-600\">{vacationStats.total}</p>\n                <p className=\"text-xs text-gray-500\">Gesamt</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Today's Time Tracking */}\n          <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Heute</h3>\n            <div className=\"space-y-3\">\n              <div className=\"text-center\">\n                <p className=\"text-lg font-mono font-bold text-gray-900\">\n                  {format(currentTime, 'HH:mm:ss')}\n                </p>\n                <p className=\"text-sm text-gray-500\">Aktuelle Zeit</p>\n              </div>\n              \n              {todayRecord && (\n                <div className=\"text-sm\">\n                  <p className=\"text-gray-600\">Heute gestempelt:</p>\n                  <p className=\"font-mono\">\n                    {todayRecord.timeIn} {todayRecord.timeOut ? `– ${todayRecord.timeOut}` : '– läuft'}\n                  </p>\n                  {todayRecord.totalHours > 0 && (\n                    <p className=\"text-gray-600\">Arbeitszeit: {todayRecord.totalHours.toFixed(1)}h</p>\n                  )}\n                </div>\n              )}\n\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={handleClockIn}\n                  disabled={isTracking}\n                  className={cn(\n                    \"flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors\",\n                    isTracking \n                      ? \"bg-gray-100 text-gray-400 cursor-not-allowed\"\n                      : \"bg-green-600 text-white hover:bg-green-700\"\n                  )}\n                >\n                  Einstempeln\n                </button>\n                <button\n                  onClick={handleClockOut}\n                  disabled={!isTracking}\n                  className={cn(\n                    \"flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors\",\n                    !isTracking \n                      ? \"bg-gray-100 text-gray-400 cursor-not-allowed\"\n                      : \"bg-red-600 text-white hover:bg-red-700\"\n                  )}\n                >\n                  Ausstempeln\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Messages */}\n        {error && (\n          <div className=\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg\">\n            {error}\n          </div>\n        )}\n        {success && (\n          <div className=\"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg\">\n            {success}\n          </div>\n        )}\n\n        {/* Team Calendar - Timebutler Style */}\n        <div className=\"bg-white rounded-xl p-6 shadow-sm mb-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">\n              {calendarType === 'mein' ? 'Mein Kalender' : 'Team Kalender'}\n            </h3>\n            \n            <div className=\"flex items-center gap-4\">\n              {/* Calendar Type Toggle */}\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={() => setCalendarType('mein')}\n                  className={cn(\n                    \"px-3 py-1.5 rounded-lg font-medium transition-colors text-sm\",\n                    calendarType === 'mein' \n                      ? \"bg-green-600 text-white\" \n                      : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n                  )}\n                >\n                  Mein Kalender\n                </button>\n                <button\n                  onClick={() => setCalendarType('team')}\n                  className={cn(\n                    \"px-3 py-1.5 rounded-lg font-medium transition-colors text-sm\",\n                    calendarType === 'team' \n                      ? \"bg-green-600 text-white\" \n                      : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n                  )}\n                >\n                  Team Kalender\n                </button>\n              </div>\n              \n              {/* View Toggle */}\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={() => setView('monat')}\n                  className={cn(\n                    \"px-3 py-1.5 rounded-lg font-medium transition-colors text-sm\",\n                    view === 'monat' \n                      ? \"bg-blue-600 text-white\" \n                      : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n                  )}\n                >\n                  Monat\n                </button>\n                <button\n                  onClick={() => setView('jahr')}\n                  className={cn(\n                    \"px-3 py-1.5 rounded-lg font-medium transition-colors text-sm\",\n                    view === 'jahr' \n                      ? \"bg-blue-600 text-white\" \n                      : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n                  )}\n                >\n                  Jahr\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Team Calendar Component */}\n          <TeamCalendarView\n            view={view}\n            entries={calendarEntries}\n            users={displayUsers}\n            onCellClick={handleCellClick}\n            isAdmin={false}\n            showLegend={false}\n          />\n          \n          {/* Custom Legend - Only 3 Categories */}\n          <div className=\"mt-4 flex justify-center gap-6 text-sm\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: \"#22c55e\" }}></div>\n              <span>Urlaub</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: \"#3b82f6\" }}></div>\n              <span>Krankheit</span>\n            </div>\n            {((calendarType === 'mein') || (calendarType === 'team' && (user.role === 'ADMIN' || user.role === 'SUPERADMIN'))) && (\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: \"#9ca3af\" }}></div>\n                <span>Arbeitszeit</span>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Applications Management */}\n        <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Abwesenheiten</h3>\n            <div className=\"flex items-center gap-3\">\n              {/* Debug Button - temporär zum Testen */}\n              <button\n                onClick={() => {\n                  console.log('Lösche Notifications für User:', user.id);\n                  // removeAllUserNotifications(user.id); // Method needs to be implemented\n                }}\n                className=\"bg-red-100 hover:bg-red-200 text-red-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors\"\n              >\n                🗑️ Debug: Notifications löschen\n              </button>\n            </div>\n          </div>\n\n          {/* Tab Navigation */}\n          <div className=\"flex bg-gray-100 rounded-lg p-1 mb-4\">\n            <button\n              onClick={() => setRequestsTab('my')}\n              className={cn(\n                \"flex-1 py-2 px-3 rounded-md transition-colors text-sm font-medium\",\n                requestsTab === 'my' \n                  ? \"bg-white text-gray-900 shadow-sm\" \n                  : \"text-gray-600 hover:text-gray-900\"\n              )}\n            >\n              Meine Abwesenheiten\n            </button>\n            {isAdmin && (\n              <button\n                onClick={() => setRequestsTab('manage')}\n                className={cn(\n                  \"flex-1 py-2 px-3 rounded-md transition-colors text-sm font-medium\",\n                  requestsTab === 'manage' \n                    ? \"bg-white text-gray-900 shadow-sm\" \n                    : \"text-gray-600 hover:text-gray-900\"\n                )}\n              >\n                Abwesenheiten verwalten\n              </button>\n            )}\n          </div>\n          \n          <div className=\"space-y-4\">\n            {(requestsTab === 'my' ? \n              allLeaves.filter(leave => leave.userId === user.id) :\n              allLeaves\n            )\n              .sort((a, b) => new Date(b.createdAt || '').getTime() - new Date(a.createdAt || '').getTime())\n              .slice(0, 8)\n              .map(leave => {\n                const start = new Date(leave.startDate);\n                const end = new Date(leave.endDate);\n                const days = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)) + 1;\n                const hasNotification = hasUnreadNotification(leave.id);\n\n                return (\n                  <div \n                    key={leave.id} \n                    className={cn(\n                      \"p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors relative\",\n                      hasNotification && \"bg-blue-50 border-blue-200\"\n                    )}\n                    onClick={() => handleLeaveRequestClick(leave.id)}\n                  >\n                    {/* Notification Indicator */}\n                    {hasNotification && (\n                      <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full\"></div>\n                    )}\n                    \n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex items-start space-x-3\">\n                        <span className=\"text-2xl\">\n                          {leave.type === 'VACATION' ? '🏖️' : '🏥'}\n                        </span>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <p className=\"font-semibold text-gray-900\">\n                              {requestsTab === 'manage' ? `${getUserName(leave.userId)} - ` : ''}\n                              {leave.type === 'VACATION' ? 'Urlaub' : 'Krankheit'}\n                            </p>\n                            {hasNotification && (\n                              <span className=\"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded\">\n                                🔔 Neu\n                              </span>\n                            )}\n                          </div>\n                          \n                          <p className=\"text-sm text-gray-600 mb-2\">\n                            {format(start, 'dd.MM.yyyy')} - {format(end, 'dd.MM.yyyy')} ({days} Tag{days !== 1 ? 'e' : ''})\n                          </p>\n                          \n                          {leave.comment && (\n                            <p className=\"text-sm text-gray-600 italic mb-2\">\"{leave.comment}\"</p>\n                          )}\n                          \n                          <div className=\"text-xs text-gray-500 space-y-1\">\n                            <p>Erstellt: {format(new Date(leave.createdAt), 'dd.MM.yyyy HH:mm')} von {getUserName(leave.userId)}</p>\n                            {leave.approvedAt && leave.approvedBy && (\n                              <p>\n                                {leave.status === 'APPROVED' ? 'Genehmigt' : 'Abgelehnt'}: {format(new Date(leave.approvedAt), 'dd.MM.yyyy HH:mm')} von {getUserName(leave.approvedBy)}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <span className={cn(\n                        \"px-3 py-1 rounded-full text-xs font-medium\",\n                        leave.status === 'APPROVED' ? 'bg-green-100 text-green-800' :\n                        leave.status === 'PENDING' ? 'bg-yellow-100 text-yellow-800' :\n                        'bg-red-100 text-red-800'\n                      )}>\n                        {leave.status === 'APPROVED' ? 'Genehmigt' :\n                         leave.status === 'PENDING' ? 'Ausstehend' : 'Abgelehnt'}\n                      </span>\n                    </div>\n                  </div>\n                );\n              })}\n          \n            {(requestsTab === 'my' ? \n              allLeaves.filter(leave => leave.userId === user.id) :\n              allLeaves\n            ).length === 0 && (\n              <p className=\"text-gray-500 text-center py-4\">\n                Noch keine Abwesenheiten vorhanden\n              </p>\n            )}\n          </div>\n        </div>\n\n        {/* Detail Modal for Work Time */}\n        {showDetailModal && selectedDay && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n            <div className=\"bg-white rounded-xl p-6 max-w-md w-full\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-lg font-semibold\">\n                  Arbeitszeit - {format(selectedDay, 'dd.MM.yyyy', { locale: de })}\n                </h3>\n                <button\n                  onClick={() => setShowDetailModal(false)}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  ✕\n                </button>\n              </div>\n              \n              {(() => {\n                const dateStr = format(selectedDay, 'yyyy-MM-dd');\n                const timeRecord = user ? getTimeRecordsForPeriod(user.id, dateStr, dateStr)[0] : null;\n                \n                if (!timeRecord) {\n                  return (\n                    <p className=\"text-gray-500 text-center py-4\">\n                      Keine Arbeitszeit für diesen Tag gefunden\n                    </p>\n                  );\n                }\n\n                return (\n                  <div className=\"space-y-4\">\n                    <div className=\"bg-gray-50 rounded-lg p-4\">\n                      <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                        <div>\n                          <span className=\"text-gray-600\">Arbeitsbeginn:</span>\n                          <p className=\"font-mono font-medium\">{timeRecord.timeIn}</p>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-600\">Arbeitsende:</span>\n                          <p className=\"font-mono font-medium\">{timeRecord.timeOut || 'läuft'}</p>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-600\">Pause:</span>\n                          <p className=\"font-mono font-medium\">{timeRecord.breakMinutes}min</p>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-600\">Gesamtzeit:</span>\n                          <p className=\"font-mono font-medium\">{timeRecord.totalHours.toFixed(1)}h</p>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"text-center\">\n                      <span className={cn(\n                        \"inline-block px-3 py-1 rounded-full text-sm font-medium\",\n                        timeRecord.totalHours >= 8 ? \"bg-green-100 text-green-800\" :\n                        timeRecord.totalHours >= 6 ? \"bg-yellow-100 text-yellow-800\" :\n                        \"bg-red-100 text-red-800\"\n                      )}>\n                        {timeRecord.totalHours >= 8 ? \"Vollzeit erreicht\" :\n                         timeRecord.totalHours >= 6 ? \"Teilzeit\" : \"Unterzeit\"}\n                      </span>\n                    </div>\n                  </div>\n                );\n              })()}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/TimeAndVacationSimple.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (35). Maximum allowed is 30.","line":6,"column":48,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":42,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\n/**\n * Einfache Zeit & Urlaub Ansicht - funktioniert garantiert\n */\nexport const TimeAndVacationSimple: React.FC = () => (\n  <div className=\"min-h-screen bg-gray-50 p-6\">\n    <div className=\"max-w-6xl mx-auto\">\n      <h1 className=\"text-3xl font-bold text-gray-900 mb-8\">\n        ⏰ Zeit & Urlaub\n      </h1>\n      \n      <div className=\"grid md:grid-cols-2 gap-6\">\n        {/* Zeit-Erfassung Bereich */}\n        <div className=\"bg-white rounded-xl shadow-sm p-6\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Zeiterfassung</h2>\n          <p className=\"text-gray-600 mb-4\">Ein-/Ausstempeln, heutige Arbeitszeit</p>\n          <button className=\"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 mb-4\">\n            Einstempeln\n          </button>\n          <div className=\"p-4 bg-gray-50 rounded-lg\">\n            <div className=\"text-sm text-gray-600\">Heute gearbeitet:</div>\n            <div className=\"text-2xl font-bold text-gray-900\">0:00 Std</div>\n          </div>\n        </div>\n\n        {/* Urlaub Bereich */}\n        <div className=\"bg-white rounded-xl shadow-sm p-6\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Urlaub & Kalender</h2>\n          <p className=\"text-gray-600 mb-4\">Antrag stellen, Übersicht, Team-Kalender</p>\n          <button className=\"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 mb-4\">\n            Neuen Urlaub beantragen\n          </button>\n          <div className=\"p-4 bg-gray-50 rounded-lg\">\n            <div className=\"text-sm text-gray-600\">Verfügbare Urlaubstage:</div>\n            <div className=\"text-2xl font-bold text-gray-900\">25 Tage</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/TimeRecordsScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (452). Maximum allowed is 30.","line":12,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":549,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":12,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":12,"endColumn":39},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (26). Maximum allowed is 15.","line":12,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":549,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":77,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":77,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":93,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":93,"endColumn":37},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (457). Maximum allowed is 75.","line":103,"column":1,"nodeType":null,"messageId":"exceed","endLine":549,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":126,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":126,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":133,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":133,"endColumn":45},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":145,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":145,"endColumn":49},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":163,"column":44,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":163,"endColumn":46,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4804,4806],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (104). Maximum allowed is 30.","line":174,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":282,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":174,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":174,"endColumn":37},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 12. Maximum allowed is 10.","line":174,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":282,"endColumn":4},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (97). Maximum allowed is 30.","line":287,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":387,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":287,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":287,"endColumn":31},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 5 times.","line":295,"column":37,"nodeType":"Literal","endLine":295,"endColumn":61},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 5 times.","line":295,"column":64,"nodeType":"Literal","endLine":295,"endColumn":112},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (37). Maximum allowed is 30.","line":335,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":372,"endColumn":10},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":363,"column":19,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":364,"endColumn":74},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (94). Maximum allowed is 30.","line":392,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":497,"endColumn":4},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":392,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":392,"endColumn":31},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (33). Maximum allowed is 30.","line":440,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":472,"endColumn":14},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":441,"column":25,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":441,"endColumn":30},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":445,"column":21,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":451,"endColumn":53},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":446,"column":25,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":450,"endColumn":53},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":516,"column":15,"nodeType":"Literal","endLine":516,"endColumn":70}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":26,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\n\nimport { useAuthStore } from '../state/auth';\nimport { useTimeRecordsStore } from '../state/timeRecords';\nimport { TimeRecord } from '../types';\nimport { cn } from '../utils/cn';\n\n/**\n * Time tracking screen with clock in/out, overview, and calendar view\n * Features live timer, statistics, and admin management capabilities\n */\nexport const TimeRecordsScreen = () => {\n  const { user } = useAuthStore();\n  const { \n    getTimeRecordsForPeriod, \n    getTodayRecord, \n    isCurrentlyTracking, \n    clockIn, \n    clockOut,\n    isLoading\n  } = useTimeRecordsStore();\n  \n  const [viewMode, setViewMode] = useState<'clock' | 'overview' | 'calendar'>('clock');\n  const [periodMode, setPeriodMode] = useState<'week' | 'month'>('week');\n  const [timeRecords, setTimeRecords] = useState<TimeRecord[]>([]);\n  const [currentTime, setCurrentTime] = useState(new Date());\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [breakMinutes, setBreakMinutes] = useState(30);\n\n  const isTracking = user ? isCurrentlyTracking(user.id) : false;\n  const todayRecord = user ? getTodayRecord(user.id) : null;\n\n  // Update current time every second\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 1000);\n    return () => clearInterval(timer);\n  }, []);\n\n  // Load time records based on period\n  useEffect(() => {\n    if (!user) return;\n\n    const today = new Date();\n    let records: TimeRecord[] = [];\n    \n    if (periodMode === 'week') {\n      const startOfWeek = new Date(today);\n      startOfWeek.setDate(today.getDate() - today.getDay() + 1);\n      const endOfWeek = new Date(startOfWeek);\n      endOfWeek.setDate(startOfWeek.getDate() + 6);\n      \n      records = getTimeRecordsForPeriod(\n        user.id,\n        startOfWeek.toISOString().split('T')[0],\n        endOfWeek.toISOString().split('T')[0]\n      );\n    } else {\n      const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);\n      const endOfMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0);\n      \n      records = getTimeRecordsForPeriod(\n        user.id,\n        startOfMonth.toISOString().split('T')[0],\n        endOfMonth.toISOString().split('T')[0]\n      );\n    }\n    \n    setTimeRecords(records);\n  }, [user, periodMode, getTimeRecordsForPeriod]);\n\n  /**\n   * Handles clock in action\n   */\n  const handleClockIn = async () => {\n    if (!user) return;\n    \n    try {\n      setError('');\n      await clockIn(user.id);\n      setSuccess('Erfolgreich eingestempelt!');\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Fehler beim Einstempeln');\n    }\n  };\n\n  /**\n   * Handles clock out action\n   */\n  const handleClockOut = async () => {\n    if (!user) return;\n    \n    try {\n      setError('');\n      await clockOut(user.id, breakMinutes);\n      setSuccess('Erfolgreich ausgestempelt!');\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Fehler beim Ausstempeln');\n    }\n  };\n\n  /**\n   * Calculates current working time\n   */\n  const getCurrentWorkingTime = (): string => {\n    if (!isTracking || !todayRecord) return '0:00';\n    \n    const timeInParts = todayRecord.timeIn.split(':');\n    const timeInMinutes = parseInt(timeInParts[0]) * 60 + parseInt(timeInParts[1]);\n    const currentMinutes = currentTime.getHours() * 60 + currentTime.getMinutes();\n    const workedMinutes = Math.max(0, currentMinutes - timeInMinutes);\n    \n    const hours = Math.floor(workedMinutes / 60);\n    const minutes = workedMinutes % 60;\n    \n    return `${hours}:${minutes.toString().padStart(2, '0')}`;\n  };\n\n  /**\n   * Formats time to German format\n   */\n  const formatTime = (time: string) => {\n    return time.substring(0, 5);\n  };\n\n  /**\n   * Formats date to German format\n   */\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('de-DE', {\n      weekday: 'short',\n      day: '2-digit',\n      month: '2-digit'\n    });\n  };\n\n  /**\n   * Gets status color for time record\n   */\n  const getStatusColor = (record: TimeRecord) => {\n    if (!record.timeOut) return 'text-blue-600'; // Currently running\n    if (record.totalHours < 7) return 'text-red-600';\n    if (record.totalHours > 9) return 'text-orange-600';\n    return 'text-green-600';\n  };\n\n  /**\n   * Calculates total hours for current period\n   */\n  const getTotalHours = (): string => {\n    return timeRecords.reduce((sum, record) => sum + (record.totalHours || 0), 0).toFixed(1);\n  };\n\n  /**\n   * Gets expected hours for current period\n   */\n  const getExpectedHours = (): number => {\n    const workingHours = user?.weeklyHours || 40;\n    if (periodMode === 'week') {\n      return workingHours;\n    }\n    // Rough calculation for month (4.33 weeks average)\n    return workingHours * 4.33;\n  };\n\n  /**\n   * Renders clock in/out interface\n   */\n  const renderClockInterface = () => (\n    <div className=\"space-y-6\">\n      {/* Current Time Display */}\n      <div className=\"bg-white rounded-xl p-8 text-center shadow-sm\">\n        <div className=\"text-6xl font-mono font-bold text-gray-900 mb-2\">\n          {currentTime.toLocaleTimeString('de-DE', { \n            hour: '2-digit', \n            minute: '2-digit',\n            second: '2-digit'\n          })}\n        </div>\n        <div className=\"text-lg text-gray-600\">\n          {currentTime.toLocaleDateString('de-DE', { \n            weekday: 'long',\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric'\n          })}\n        </div>\n      </div>\n\n      {/* Status Card */}\n      <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">Arbeitsstatus</h2>\n          <span className={cn(\n            \"px-3 py-1 rounded-full text-sm font-medium\",\n            isTracking ? \"bg-green-100 text-green-800\" : \"bg-gray-100 text-gray-600\"\n          )}>\n            {isTracking ? \"Eingestempelt\" : \"Nicht eingestempelt\"}\n          </span>\n        </div>\n\n        {todayRecord && (\n          <div className=\"grid grid-cols-2 gap-4 mb-4\">\n            <div>\n              <p className=\"text-sm text-gray-500\">Start</p>\n              <p className=\"text-lg font-semibold\">{formatTime(todayRecord.timeIn)}</p>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-500\">Ende</p>\n              <p className=\"text-lg font-semibold\">\n                {todayRecord.timeOut ? formatTime(todayRecord.timeOut) : 'Läuft...'}\n              </p>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-500\">Arbeitszeit</p>\n              <p className=\"text-lg font-semibold text-blue-600\">\n                {isTracking ? getCurrentWorkingTime() : `${todayRecord.totalHours.toFixed(1)}h`}\n              </p>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-500\">Pause</p>\n              <p className=\"text-lg font-semibold\">{todayRecord.breakMinutes || 0} min</p>\n            </div>\n          </div>\n        )}\n\n        {/* Clock In/Out Buttons */}\n        <div className=\"space-y-4\">\n          {!isTracking ? (\n            <button\n              onClick={handleClockIn}\n              disabled={isLoading}\n              className=\"w-full bg-green-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:bg-green-700 transition-colors disabled:opacity-50\"\n            >\n              {isLoading ? 'Lädt...' : '🕐 Einstempeln'}\n            </button>\n          ) : (\n            <div className=\"space-y-3\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Pausenzeit (Minuten)\n                </label>\n                <input\n                  type=\"number\"\n                  value={breakMinutes}\n                  onChange={(e) => setBreakMinutes(parseInt(e.target.value) || 0)}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\n                  min=\"0\"\n                  max=\"120\"\n                />\n              </div>\n              <button\n                onClick={handleClockOut}\n                disabled={isLoading}\n                className=\"w-full bg-red-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:bg-red-700 transition-colors disabled:opacity-50\"\n              >\n                {isLoading ? 'Lädt...' : '🕐 Ausstempeln'}\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Messages */}\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n          <p className=\"text-red-800\">{error}</p>\n        </div>\n      )}\n      \n      {success && (\n        <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n          <p className=\"text-green-800\">{success}</p>\n        </div>\n      )}\n    </div>\n  );\n\n  /**\n   * Renders overview with statistics\n   */\n  const renderOverview = () => (\n    <div className=\"space-y-6\">\n      {/* Period Toggle */}\n      <div className=\"flex bg-white rounded-lg p-1 shadow-sm\">\n        <button\n          onClick={() => setPeriodMode('week')}\n          className={cn(\n            \"flex-1 py-2 px-4 rounded-md transition-colors\",\n            periodMode === 'week' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n          )}\n        >\n          Woche\n        </button>\n        <button\n          onClick={() => setPeriodMode('month')}\n          className={cn(\n            \"flex-1 py-2 px-4 rounded-md transition-colors\",\n            periodMode === 'month' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n          )}\n        >\n          Monat\n        </button>\n      </div>\n\n      {/* Summary Stats */}\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n        <div className=\"bg-white rounded-xl p-4 shadow-sm\">\n          <p className=\"text-sm text-gray-500\">Gearbeitet</p>\n          <p className=\"text-2xl font-bold text-blue-600\">{getTotalHours()}h</p>\n        </div>\n        <div className=\"bg-white rounded-xl p-4 shadow-sm\">\n          <p className=\"text-sm text-gray-500\">Erwartet</p>\n          <p className=\"text-2xl font-bold text-gray-600\">{getExpectedHours().toFixed(0)}h</p>\n        </div>\n        <div className=\"bg-white rounded-xl p-4 shadow-sm\">\n          <p className=\"text-sm text-gray-500\">Arbeitstage</p>\n          <p className=\"text-2xl font-bold text-purple-600\">{timeRecords.length}</p>\n        </div>\n        <div className=\"bg-white rounded-xl p-4 shadow-sm\">\n          <p className=\"text-sm text-gray-500\">Durchschnitt</p>\n          <p className=\"text-2xl font-bold text-green-600\">\n            {timeRecords.length > 0 ? (parseFloat(getTotalHours()) / timeRecords.length).toFixed(1) : '0'}h\n          </p>\n        </div>\n      </div>\n\n      {/* Time Records List */}\n      <div className=\"space-y-3\">\n        {timeRecords.map((record) => (\n          <div key={record.id} className=\"bg-white rounded-xl p-4 shadow-sm\">\n            <div className=\"flex justify-between items-start mb-3\">\n              <div>\n                <p className=\"font-semibold text-gray-900\">\n                  {formatDate(record.date)}\n                </p>\n                <p className=\"text-sm text-gray-500\">\n                  {formatTime(record.timeIn)} - {record.timeOut ? formatTime(record.timeOut) : 'Läuft...'}\n                </p>\n              </div>\n              <div className=\"text-right\">\n                <p className={cn(\"text-lg font-bold\", getStatusColor(record))}>\n                  {record.timeOut ? `${record.totalHours.toFixed(1)}h` : getCurrentWorkingTime()}\n                </p>\n                {record.breakMinutes > 0 && (\n                  <p className=\"text-xs text-gray-500\">\n                    {record.breakMinutes}min Pause\n                  </p>\n                )}\n              </div>\n            </div>\n            \n            {/* Progress Bar */}\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n              <div \n                className={cn(\n                  \"h-2 rounded-full transition-all\",\n                  record.totalHours >= 8 ? \"bg-green-500\" : \n                  record.totalHours >= 6 ? \"bg-yellow-500\" : \"bg-red-500\"\n                )}\n                style={{ \n                  width: `${Math.min(100, ((record.timeOut ? record.totalHours : parseFloat(getCurrentWorkingTime().split(':')[0])) / 8) * 100)}%` \n                }}\n              />\n            </div>\n          </div>\n        ))}\n\n        {timeRecords.length === 0 && (\n          <div className=\"bg-white rounded-xl p-8 flex flex-col items-center shadow-sm\">\n            <span className=\"text-4xl mb-4\">⏰</span>\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">\n              Keine Zeiterfassung\n            </h2>\n            <p className=\"text-gray-600 text-center\">\n              Für den ausgewählten Zeitraum wurden keine Arbeitszeiten erfasst.\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  /**\n   * Renders calendar view\n   */\n  const renderCalendar = () => {\n    const today = new Date();\n    const year = today.getFullYear();\n    const month = today.getMonth();\n    \n    // Get first day of month and number of days\n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const daysInMonth = lastDay.getDate();\n    const startDay = firstDay.getDay() || 7; // Monday = 1, Sunday = 7\n    \n    // Create calendar grid\n    const calendarDays = [];\n    \n    // Empty cells for days before month starts\n    for (let i = 1; i < startDay; i++) {\n      calendarDays.push(null);\n    }\n    \n    // Days of the month\n    for (let day = 1; day <= daysInMonth; day++) {\n      const dateStr = `${year}-${(month + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;\n      const dayRecord = timeRecords.find(record => record.date === dateStr);\n      calendarDays.push({ day, dateStr, record: dayRecord });\n    }\n\n    return (\n      <div className=\"space-y-6\">\n        {/* Calendar Header */}\n        <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n          <h2 className=\"text-xl font-semibold text-gray-900 text-center\">\n            {today.toLocaleDateString('de-DE', { month: 'long', year: 'numeric' })}\n          </h2>\n        </div>\n\n        {/* Calendar Grid */}\n        <div className=\"bg-white rounded-xl p-6 shadow-sm\">\n          {/* Weekday Headers */}\n          <div className=\"grid grid-cols-7 gap-2 mb-4\">\n            {['Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa', 'So'].map(day => (\n              <div key={day} className=\"text-center text-sm font-medium text-gray-500 py-2\">\n                {day}\n              </div>\n            ))}\n          </div>\n\n          {/* Calendar Days */}\n          <div className=\"grid grid-cols-7 gap-2\">\n            {calendarDays.map((dayData, index) => (\n              <div key={index} className=\"aspect-square\">\n                {dayData ? (\n                  <div className={cn(\n                    \"w-full h-full p-2 rounded-lg border transition-colors\",\n                    dayData.record \n                      ? dayData.record.totalHours >= 8 \n                        ? \"bg-green-50 border-green-200\" \n                        : dayData.record.totalHours >= 6\n                        ? \"bg-yellow-50 border-yellow-200\"\n                        : \"bg-red-50 border-red-200\"\n                      : \"bg-gray-50 border-gray-200\",\n                    dayData.dateStr === today.toISOString().split('T')[0] && \"ring-2 ring-blue-500\"\n                  )}>\n                    <div className=\"text-sm font-medium text-gray-900\">\n                      {dayData.day}\n                    </div>\n                    {dayData.record && (\n                      <div className=\"text-xs text-gray-600 mt-1\">\n                        <div>{formatTime(dayData.record.timeIn)}</div>\n                        {dayData.record.timeOut && (\n                          <div className=\"font-medium\">\n                            {dayData.record.totalHours.toFixed(1)}h\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                ) : (\n                  <div></div>\n                )}\n              </div>\n            ))}\n          </div>\n\n          {/* Legend */}\n          <div className=\"flex justify-center space-x-4 mt-6 text-sm\">\n            <div className=\"flex items-center\">\n              <div className=\"w-4 h-4 bg-green-100 border border-green-200 rounded mr-2\"></div>\n              <span>≥8h</span>\n            </div>\n            <div className=\"flex items-center\">\n              <div className=\"w-4 h-4 bg-yellow-100 border border-yellow-200 rounded mr-2\"></div>\n              <span>6-8h</span>\n            </div>\n            <div className=\"flex items-center\">\n              <div className=\"w-4 h-4 bg-red-100 border border-red-200 rounded mr-2\"></div>\n              <span>&lt;6h</span>\n            </div>\n            <div className=\"flex items-center\">\n              <div className=\"w-4 h-4 bg-gray-100 border border-gray-200 rounded mr-2\"></div>\n              <span>Kein Eintrag</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  if (!user) return null;\n\n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <div className=\"flex-1 px-4 py-6 overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-xl font-bold text-gray-900\">\n            Arbeitszeit\n          </h1>\n        </div>\n\n        {/* View Mode Toggle */}\n        <div className=\"flex bg-white rounded-lg p-1 mb-6 shadow-sm\">\n          <button\n            onClick={() => setViewMode('clock')}\n            className={cn(\n              \"flex-1 py-2 px-4 rounded-md transition-colors text-sm\",\n              viewMode === 'clock' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n            )}\n          >\n            ⏰ Stempeluhr\n          </button>\n          <button\n            onClick={() => setViewMode('overview')}\n            className={cn(\n              \"flex-1 py-2 px-4 rounded-md transition-colors text-sm\",\n              viewMode === 'overview' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n            )}\n          >\n            📊 Übersicht\n          </button>\n          <button\n            onClick={() => setViewMode('calendar')}\n            className={cn(\n              \"flex-1 py-2 px-4 rounded-md transition-colors text-sm\",\n              viewMode === 'calendar' ? \"bg-blue-500 text-white\" : \"bg-transparent text-gray-700 hover:bg-gray-100\"\n            )}\n          >\n            📅 Kalender\n          </button>\n        </div>\n\n        {/* Content */}\n        {viewMode === 'clock' && renderClockInterface()}\n        {viewMode === 'overview' && renderOverview()}\n        {viewMode === 'calendar' && renderCalendar()}\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/TrainingDetailsScreen.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":3,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":3,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nexport const TrainingDetailsScreen = () => {\n  return (\n    <div className=\"flex-1 bg-gray-50 p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">Trainingsdetails</h1>\n      <p>Coming soon...</p>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/TrainingManagementScreen.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":3,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":3,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nexport const TrainingManagementScreen = () => {\n  return (\n    <div className=\"flex-1 bg-gray-50 p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">Trainingsverwaltung</h1>\n      <p>Coming soon...</p>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/TrainingOverviewScreen.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":3,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":3,"endColumn":44}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nexport const TrainingOverviewScreen = () => {\n  return (\n    <div className=\"flex-1 bg-gray-50 p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">Trainingsübersicht</h1>\n      <p>Coming soon...</p>\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/VideoLearningScreen.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (316). Maximum allowed is 30.","line":12,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":363,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":12,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":12,"endColumn":41},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (22). Maximum allowed is 15.","line":12,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":363,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 26. Maximum allowed is 10.","line":12,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":363,"endColumn":2},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":51,"column":30,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":51,"endColumn":32,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1670,1672],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":72,"column":48,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":72,"endColumn":50,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2450,2452],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":75,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":75,"endColumn":36},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (325). Maximum allowed is 75.","line":89,"column":1,"nodeType":null,"messageId":"exceed","endLine":363,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":103,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":103,"endColumn":53},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":130,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":130,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":135,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":135,"endColumn":42},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":169,"column":58,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":169,"endColumn":60,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5542,5544],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":180,"column":15,"nodeType":"Literal","endLine":180,"endColumn":81},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":181,"column":15,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":185,"endColumn":46},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":184,"column":19,"nodeType":"Literal","endLine":184,"endColumn":44},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":185,"column":19,"nodeType":"Literal","endLine":185,"endColumn":46},{"ruleId":"no-nested-ternary","severity":1,"message":"Do not nest ternary expressions.","line":196,"column":19,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":200,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\n\nimport { LootboxAnimation, CelebrationOverlay } from '../components/LootboxAnimation';\nimport { Quiz } from '../components/Quiz';\nimport { VideoPlayer } from '../components/VideoPlayer';\nimport { useAuthStore } from '../state/auth';\nimport { useLearningStore } from '../state/learning';\nimport { TestResult, Reward } from '../types/learning';\nimport { cn } from '../utils/cn';\n\nexport const VideoLearningScreen = () => {\n  const { videoId } = useParams<{ videoId: string }>();\n  const navigate = useNavigate();\n  const { user } = useAuthStore();\n  const { \n    videos, \n    currentVideo, \n    selectVideo, \n    userProgress,\n    getVideoQuestions,\n    userLevel,\n    userCoins,\n    addXP: _addXP,\n    awardBadge\n  } = useLearningStore();\n\n  const [stage, setStage] = useState<'video' | 'quiz' | 'completed'>('video');\n  const [showRewards, setShowRewards] = useState(false);\n  const [earnedRewards, setEarnedRewards] = useState<Reward[]>([]);\n  const [showCelebration, setCelebration] = useState(false);\n\n  useEffect(() => {\n    if (videoId) {\n      selectVideo(videoId);\n    }\n  }, [videoId, selectVideo]);\n\n  useEffect(() => {\n    // Check if video is completed and determine next stage\n    if (currentVideo && user) {\n      const progress = userProgress[currentVideo.id];\n      const questions = getVideoQuestions(currentVideo.id);\n      \n      if (progress?.completed && questions.length > 0 && stage === 'video') {\n        setStage('quiz');\n      }\n    }\n  }, [currentVideo, user, userProgress, stage, getVideoQuestions]);\n\n  const video = currentVideo || videos.find(v => v.id === videoId);\n  \n  if (!video) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Video nicht gefunden</h1>\n          <p className=\"text-gray-600 mb-4\">Das angeforderte Video existiert nicht.</p>\n          <button\n            onClick={() => navigate('/learning')}\n            className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700\"\n          >\n            Zurück zur Übersicht\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const questions = getVideoQuestions(video.id);\n  const progress = user ? userProgress[video.id] : null;\n  const isVideoCompleted = progress?.completed || false;\n  const hasQuestions = questions.length > 0;\n\n  const handleVideoComplete = () => {\n    const rewards: Reward[] = [\n      { type: 'coins', value: 50, description: 'Video abgeschlossen', icon: '⭐' },\n      { type: 'coins', value: 10, description: 'BrowoCoins', icon: '🪙' }\n    ];\n\n    // Check for early bird badge (before 8 AM)\n    const currentHour = new Date().getHours();\n    if (currentHour < 8) {\n      awardBadge('early-bird');\n      rewards.push({\n        type: 'badge',\n        value: 100,\n        description: 'Frühaufsteher Badge',\n        icon: '🌅'\n      });\n    }\n\n    setEarnedRewards(rewards);\n    \n    if (hasQuestions) {\n      setStage('quiz');\n    } else {\n      setStage('completed');\n      setShowRewards(true);\n    }\n  };\n\n  const handleQuizComplete = (result: TestResult) => {\n    const baseRewards: Reward[] = [\n      { type: 'coins', value: result.earnedXP, description: `${result.earnedXP} XP`, icon: '⭐' },\n      { type: 'coins', value: result.earnedCoins, description: `${result.earnedCoins} BrowoCoins`, icon: '🪙' }\n    ];\n\n    // Perfect score bonus\n    if (result.score === 100) {\n      baseRewards.push({\n        type: 'badge',\n        value: 150,\n        description: 'Perfektionist Badge',\n        icon: '🎯'\n      });\n      baseRewards.push({\n        type: 'coins',\n        value: 50,\n        description: 'Perfektion Bonus',\n        icon: '🪙'\n      });\n    }\n\n    setEarnedRewards([...earnedRewards, ...baseRewards]);\n    setStage('completed');\n    setShowRewards(true);\n  };\n\n  const handleRewardsComplete = () => {\n    setShowRewards(false);\n    setCelebration(true);\n  };\n\n  const handleCelebrationComplete = () => {\n    setCelebration(false);\n    // Navigate back to learning dashboard\n    navigate('/learning');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-900\">\n      {/* Header */}\n      <div className=\"bg-black bg-opacity-50 text-white p-4\">\n        <div className=\"flex items-center justify-between max-w-6xl mx-auto\">\n          <div className=\"flex items-center gap-4\">\n            <button\n              onClick={() => navigate('/learning')}\n              className=\"text-gray-300 hover:text-white transition-colors\"\n            >\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n            </button>\n            <div>\n              <h1 className=\"text-xl font-bold\">{video.title}</h1>\n              <p className=\"text-gray-300 text-sm\">{video.description}</p>\n            </div>\n          </div>\n\n          {/* Progress Indicator */}\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-yellow-400\">🪙</span>\n              <span className=\"font-bold\">{userCoins}</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-purple-400\">⭐</span>\n              <span className=\"font-bold\">{userLevel?.xp || 0}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Stage Indicator */}\n      <div className=\"bg-gray-800 p-4\">\n        <div className=\"max-w-6xl mx-auto\">\n          <div className=\"flex items-center justify-center gap-8\">\n            <div className={cn(\n              \"flex items-center gap-2 px-4 py-2 rounded-full transition-colors\",\n              stage === 'video' \n                ? \"bg-blue-600 text-white\" \n                : isVideoCompleted\n                ? \"bg-green-600 text-white\"\n                : \"bg-gray-600 text-gray-300\"\n            )}>\n              <span>{isVideoCompleted ? '✓' : '▶️'}</span>\n              <span>Video ansehen</span>\n            </div>\n\n            {hasQuestions && (\n              <>\n                <div className=\"w-8 h-0.5 bg-gray-600\" />\n                <div className={cn(\n                  \"flex items-center gap-2 px-4 py-2 rounded-full transition-colors\",\n                  stage === 'quiz'\n                    ? \"bg-blue-600 text-white\"\n                    : stage === 'completed'\n                    ? \"bg-green-600 text-white\"\n                    : \"bg-gray-600 text-gray-300\"\n                )}>\n                  <span>{stage === 'completed' ? '✓' : '📝'}</span>\n                  <span>Quiz</span>\n                </div>\n              </>\n            )}\n\n            <div className=\"w-8 h-0.5 bg-gray-600\" />\n            <div className={cn(\n              \"flex items-center gap-2 px-4 py-2 rounded-full transition-colors\",\n              stage === 'completed'\n                ? \"bg-green-600 text-white\"\n                : \"bg-gray-600 text-gray-300\"\n            )}>\n              <span>{stage === 'completed' ? '🏆' : '🎁'}</span>\n              <span>Belohnung</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"max-w-6xl mx-auto p-6\">\n        {stage === 'video' && (\n          <div className=\"space-y-6\">\n            <VideoPlayer video={video} onComplete={handleVideoComplete} />\n            \n            {/* Video Info */}\n            <div className=\"bg-gray-800 rounded-xl p-6 text-white\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <h2 className=\"text-2xl font-bold mb-2\">{video.title}</h2>\n                  <p className=\"text-gray-300 mb-4\">{video.description}</p>\n                  \n                  <div className=\"flex items-center gap-6 text-sm\">\n                    <div className=\"flex items-center gap-2\">\n                      <span>⏱️</span>\n                      <span>{Math.floor(video.duration / 60)} Minuten</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <span>🎯</span>\n                      <span>+50 XP</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <span>🪙</span>\n                      <span>+10 Münzen</span>\n                    </div>\n                    {hasQuestions && (\n                      <div className=\"flex items-center gap-2\">\n                        <span>📝</span>\n                        <span>{questions.length} Fragen</span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* Progress */}\n                {progress && (\n                  <div className=\"ml-6\">\n                    <div className=\"text-right mb-2\">\n                      <span className=\"text-sm text-gray-400\">Fortschritt</span>\n                      <div className=\"text-xl font-bold\">\n                        {Math.round((progress.watchedSeconds / video.duration) * 100)}%\n                      </div>\n                    </div>\n                    <div className=\"w-24 bg-gray-700 rounded-full h-2\">\n                      <div\n                        className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\n                        style={{ width: `${(progress.watchedSeconds / video.duration) * 100}%` }}\n                      />\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Transcript (if available) */}\n            {video.transcription && (\n              <div className=\"bg-gray-800 rounded-xl p-6 text-white\">\n                <h3 className=\"text-lg font-bold mb-4\">📄 Vollständige Transkription</h3>\n                <div className=\"max-h-48 overflow-y-auto text-gray-300 leading-relaxed\">\n                  {video.transcription.text}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {stage === 'quiz' && hasQuestions && (\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"bg-gray-800 rounded-xl p-6 text-white mb-6\">\n              <h2 className=\"text-2xl font-bold mb-2\">📝 Wissenstest</h2>\n              <p className=\"text-gray-300\">\n                Teste dein Wissen über das Video und sammle zusätzliche Belohnungen!\n              </p>\n            </div>\n            <Quiz\n              videoId={video.id}\n              questions={questions}\n              onComplete={handleQuizComplete}\n            />\n          </div>\n        )}\n\n        {stage === 'completed' && (\n          <div className=\"max-w-2xl mx-auto text-center\">\n            <div className=\"bg-gradient-to-br from-green-500 to-blue-600 rounded-2xl p-8 text-white\">\n              <div className=\"text-6xl mb-4\">🎉</div>\n              <h2 className=\"text-3xl font-bold mb-2\">Herzlichen Glückwunsch!</h2>\n              <p className=\"text-xl mb-6\">\n                Du hast die Schulung \"{video.title}\" erfolgreich abgeschlossen!\n              </p>\n\n              {/* Summary */}\n              <div className=\"bg-white bg-opacity-20 rounded-xl p-6 mb-6\">\n                <h3 className=\"text-lg font-bold mb-4\">Deine Leistung</h3>\n                <div className=\"grid grid-cols-2 gap-4 text-center\">\n                  <div>\n                    <div className=\"text-2xl font-bold\">100%</div>\n                    <div className=\"text-sm opacity-90\">Video angesehen</div>\n                  </div>\n                  {hasQuestions && (\n                    <div>\n                      <div className=\"text-2xl font-bold\">\n                        100%\n                      </div>\n                      <div className=\"text-sm opacity-90\">Quiz-Ergebnis</div>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              <button\n                onClick={() => navigate('/learning')}\n                className=\"bg-white text-blue-600 px-8 py-3 rounded-lg font-bold hover:bg-gray-100 transition-colors\"\n              >\n                Weiter lernen\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Reward Animations */}\n      {showRewards && earnedRewards.length > 0 && (\n        <LootboxAnimation\n          reward={earnedRewards[0]}\n          onComplete={handleRewardsComplete}\n          autoStart\n        />\n      )}\n\n      {showCelebration && (\n        <CelebrationOverlay\n          message=\"Schulung abgeschlossen!\"\n          icon=\"🎓\"\n          color=\"from-purple-400 to-blue-500\"\n          onComplete={handleCelebrationComplete}\n        />\n      )}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/screens/__tests__/AddEmployeeScreen.test.tsx","messages":[{"ruleId":"no-duplicate-imports","severity":1,"message":"'../../test-utils/test-utils' import is duplicated.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"import","endLine":5,"endColumn":57},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":53,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":55,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":72,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":74,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":86,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":88,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":124,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":135,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":155,"column":57,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":156,"endColumn":56},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":156,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":156,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { useAuthStore } from '../../state/auth';\nimport { render, screen, fireEvent, waitFor } from '../../test-utils/test-utils';\nimport { mockAdmin } from '../../test-utils/test-utils';\nimport { AddEmployeeScreen } from '../AddEmployeeScreen';\n\n// Mock useNavigate\nconst mockNavigate = jest.fn();\njest.mock('react-router-dom', () => ({\n  ...jest.requireActual('react-router-dom'),\n  useNavigate: () => mockNavigate,\n}));\n\ndescribe('AddEmployeeScreen', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockNavigate.mockClear();\n    \n    // Set admin user\n    useAuthStore.setState({\n      user: mockAdmin,\n      isAuthenticated: true,\n      organization: { id: 'org1', name: 'Test Org', slug: 'test-org' },\n    });\n  });\n\n  it('should render the form with all required fields', () => {\n    render(<AddEmployeeScreen />);\n    \n    // Check header\n    expect(screen.getByText('Neuen Mitarbeiter hinzufügen')).toBeInTheDocument();\n    \n    // Check required fields\n    expect(screen.getByLabelText(/E-Mail-Adresse \\*/)).toBeInTheDocument();\n    expect(screen.getByLabelText(/Vorname \\*/)).toBeInTheDocument();\n    expect(screen.getByLabelText(/Nachname \\*/)).toBeInTheDocument();\n    expect(screen.getByLabelText(/Position \\*/)).toBeInTheDocument();\n    expect(screen.getByLabelText(/Abteilung \\*/)).toBeInTheDocument();\n    \n    // Check optional fields\n    expect(screen.getByLabelText('Private E-Mail')).toBeInTheDocument();\n    expect(screen.getByLabelText('Telefon')).toBeInTheDocument();\n    expect(screen.getByLabelText('Wochenstunden')).toBeInTheDocument();\n  });\n\n  it('should show validation errors for empty required fields', async () => {\n    render(<AddEmployeeScreen />);\n    \n    const submitButton = screen.getByText('Mitarbeiter erstellen');\n    fireEvent.click(submitButton);\n    \n    await waitFor(() => {\n      expect(screen.getByText('E-Mail ist erforderlich')).toBeInTheDocument();\n    });\n    \n    expect(screen.getByText('Vorname ist erforderlich')).toBeInTheDocument();\n    expect(screen.getByText('Nachname ist erforderlich')).toBeInTheDocument();\n    expect(screen.getByText('Position ist erforderlich')).toBeInTheDocument();\n    expect(screen.getByText('Abteilung ist erforderlich')).toBeInTheDocument();\n  });\n\n  it('should validate email format', async () => {\n    render(<AddEmployeeScreen />);\n    \n    const emailInput = screen.getByLabelText(/E-Mail-Adresse \\*/);\n    fireEvent.change(emailInput, { target: { value: 'invalid-email' } });\n    \n    const submitButton = screen.getByText('Mitarbeiter erstellen');\n    fireEvent.click(submitButton);\n    \n    await waitFor(() => {\n      expect(screen.getByText('Ungültige E-Mail-Adresse')).toBeInTheDocument();\n    });\n  });\n\n  it('should validate weekly hours range', async () => {\n    render(<AddEmployeeScreen />);\n    \n    const hoursInput = screen.getByLabelText('Wochenstunden');\n    fireEvent.change(hoursInput, { target: { value: '100' } });\n    \n    const submitButton = screen.getByText('Mitarbeiter erstellen');\n    fireEvent.click(submitButton);\n    \n    await waitFor(() => {\n      expect(screen.getByText('Wochenstunden müssen zwischen 1 und 60 liegen')).toBeInTheDocument();\n    });\n  });\n\n  it('should successfully create a new employee', async () => {\n    const mockCreateUser = jest.fn().mockResolvedValue({\n      id: 'new-user-id',\n      email: 'new@example.com',\n      name: 'New Employee',\n    });\n    \n    useAuthStore.setState({\n      createUser: mockCreateUser,\n    });\n\n    render(<AddEmployeeScreen />);\n    \n    // Fill in required fields\n    fireEvent.change(screen.getByLabelText(/E-Mail-Adresse \\*/), {\n      target: { value: 'new@example.com' },\n    });\n    fireEvent.change(screen.getByLabelText(/Vorname \\*/), {\n      target: { value: 'New' },\n    });\n    fireEvent.change(screen.getByLabelText(/Nachname \\*/), {\n      target: { value: 'Employee' },\n    });\n    fireEvent.change(screen.getByLabelText(/Position \\*/), {\n      target: { value: 'Developer' },\n    });\n    fireEvent.change(screen.getByLabelText(/Abteilung \\*/), {\n      target: { value: 'IT' },\n    });\n    \n    const submitButton = screen.getByText('Mitarbeiter erstellen');\n    fireEvent.click(submitButton);\n    \n    await waitFor(() => {\n      expect(mockCreateUser).toHaveBeenCalledWith(\n        expect.objectContaining({\n          email: 'new@example.com',\n          firstName: 'New',\n          lastName: 'Employee',\n          name: 'New Employee',\n          position: 'Developer',\n          department: 'IT',\n        })\n      );\n    });\n    \n    expect(mockNavigate).toHaveBeenCalledWith('/admin/team-management', {\n      state: {\n        message: 'Mitarbeiter New Employee wurde erfolgreich erstellt.',\n        type: 'success',\n      },\n    });\n  });\n\n  it('should handle cancel button', () => {\n    render(<AddEmployeeScreen />);\n    \n    const cancelButton = screen.getByText('Abbrechen');\n    fireEvent.click(cancelButton);\n    \n    expect(mockNavigate).toHaveBeenCalledWith('/admin/team-management');\n  });\n\n  it('should show loading state during submission', async () => {\n    const mockCreateUser = jest.fn().mockImplementation(() => \n      new Promise(resolve => setTimeout(resolve, 1000))\n    );\n    \n    useAuthStore.setState({\n      createUser: mockCreateUser,\n      isLoading: true,\n    });\n\n    render(<AddEmployeeScreen />);\n    \n    const submitButton = screen.getByText('Erstelle Mitarbeiter...');\n    expect(submitButton).toBeDisabled();\n  });\n\n  it('should handle API errors gracefully', async () => {\n    const mockCreateUser = jest.fn().mockRejectedValue(new Error('API Error'));\n    \n    useAuthStore.setState({\n      createUser: mockCreateUser,\n    });\n\n    render(<AddEmployeeScreen />);\n    \n    // Fill in minimum required fields\n    fireEvent.change(screen.getByLabelText(/E-Mail-Adresse \\*/), {\n      target: { value: 'test@example.com' },\n    });\n    fireEvent.change(screen.getByLabelText(/Vorname \\*/), {\n      target: { value: 'Test' },\n    });\n    fireEvent.change(screen.getByLabelText(/Nachname \\*/), {\n      target: { value: 'User' },\n    });\n    fireEvent.change(screen.getByLabelText(/Position \\*/), {\n      target: { value: 'Tester' },\n    });\n    fireEvent.change(screen.getByLabelText(/Abteilung \\*/), {\n      target: { value: 'QA' },\n    });\n    \n    const submitButton = screen.getByText('Mitarbeiter erstellen');\n    fireEvent.click(submitButton);\n    \n    await waitFor(() => {\n      expect(screen.getByText('Fehler beim Erstellen des Mitarbeiters. Bitte versuchen Sie es erneut.')).toBeInTheDocument();\n    });\n  });\n});","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/setupTests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/__tests__/auth.test.ts","messages":[{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":25,"column":60,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":35,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":37,"column":54,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":45,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":47,"column":49,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":59,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":63,"column":44,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":79,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":83,"column":16,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":87,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":89,"column":57,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":119,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (4). Maximum allowed is 2.","line":118,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":118,"endColumn":60},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":121,"column":57,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":145,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":147,"column":52,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":171,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":175,"column":16,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":178,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":180,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":195,"endColumn":6},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":183,"column":13,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":183,"endColumn":36},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (4). Maximum allowed is 2.","line":191,"column":45,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":191,"endColumn":74},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":197,"column":55,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":208,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":212,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":221,"endColumn":6},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (4). Maximum allowed is 2.","line":220,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":220,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { User } from '../../types';\nimport { useAuthStore } from '../auth';\n\n// Mock the pipeline annotations to avoid errors in tests\njest.mock('../../pipeline/annotations', () => ({\n  RequiredStep: () => () => {},\n  markStepExecuted: jest.fn(),\n}));\n\ndescribe('Auth Store', () => {\n  beforeEach(() => {\n    // Reset store state before each test\n    useAuthStore.setState({\n      user: null,\n      organization: null,\n      isAuthenticated: false,\n      isLoading: false,\n    });\n    \n    // Clear localStorage\n    localStorage.clear();\n  });\n\n  describe('login', () => {\n    it('should successfully login with valid credentials', async () => {\n      const { login } = useAuthStore.getState();\n      \n      await login('anna.admin@hrthis.de', 'password');\n      \n      const state = useAuthStore.getState();\n      expect(state.isAuthenticated).toBe(true);\n      expect(state.user).toBeDefined();\n      expect(state.user?.email).toBe('anna.admin@hrthis.de');\n      expect(state.organization).toBeDefined();\n    });\n\n    it('should fail login with invalid credentials', async () => {\n      const { login } = useAuthStore.getState();\n      \n      await expect(login('invalid@email.com', 'wrongpassword')).rejects.toThrow('Ungültige Anmeldedaten');\n      \n      const state = useAuthStore.getState();\n      expect(state.isAuthenticated).toBe(false);\n      expect(state.user).toBeNull();\n    });\n\n    it('should set loading state during login', async () => {\n      const { login } = useAuthStore.getState();\n      \n      const loginPromise = login('anna.admin@hrthis.de', 'password');\n      \n      // Check loading state immediately\n      expect(useAuthStore.getState().isLoading).toBe(true);\n      \n      await loginPromise;\n      \n      // Check loading state after completion\n      expect(useAuthStore.getState().isLoading).toBe(false);\n    });\n  });\n\n  describe('logout', () => {\n    it('should clear user data on logout', async () => {\n      // First login\n      const { login, logout } = useAuthStore.getState();\n      await login('anna.admin@hrthis.de', 'password');\n      \n      // Verify logged in\n      expect(useAuthStore.getState().isAuthenticated).toBe(true);\n      \n      // Logout\n      logout();\n      \n      // Verify logged out\n      const state = useAuthStore.getState();\n      expect(state.isAuthenticated).toBe(false);\n      expect(state.user).toBeNull();\n      expect(state.organization).toBeNull();\n    });\n  });\n\n  describe('createUser', () => {\n    beforeEach(async () => {\n      // Login as admin\n      const { login } = useAuthStore.getState();\n      await login('anna.admin@hrthis.de', 'password');\n    });\n\n    it('should create a new user with required fields', async () => {\n      const { createUser, getAllUsers } = useAuthStore.getState();\n      \n      const newUserData: Omit<User, 'id' | 'organizationId'> = {\n        email: 'newuser@example.com',\n        name: 'New User',\n        firstName: 'New',\n        lastName: 'User',\n        role: 'EMPLOYEE',\n        position: 'Developer',\n        department: 'IT',\n        weeklyHours: 40,\n        employmentType: 'FULL_TIME',\n        employmentStatus: 'ACTIVE',\n        vacationDays: 30,\n        joinDate: '2024-01-01',\n      };\n\n      const initialUserCount = getAllUsers().length;\n      const createdUser = await createUser(newUserData);\n      \n      expect(createdUser).toBeDefined();\n      expect(createdUser.id).toBeDefined();\n      expect(createdUser.email).toBe('newuser@example.com');\n      expect(createdUser.organizationId).toBe('org1');\n      \n      // Verify user was added to the list\n      const updatedUsers = getAllUsers();\n      expect(updatedUsers.length).toBe(initialUserCount + 1);\n      expect(updatedUsers.find(u => u.id === createdUser.id)).toBeDefined();\n    });\n\n    it('should set default values for optional fields', async () => {\n      const { createUser } = useAuthStore.getState();\n      \n      const minimalUserData: Omit<User, 'id' | 'organizationId'> = {\n        email: 'minimal@example.com',\n        name: 'Minimal User',\n        firstName: 'Minimal',\n        lastName: 'User',\n        position: 'Tester',\n        department: 'QA',\n        role: 'EMPLOYEE',\n      };\n\n      const createdUser = await createUser(minimalUserData);\n      \n      // Check default values\n      expect(createdUser.role).toBe('EMPLOYEE');\n      expect(createdUser.employmentStatus).toBe('ACTIVE');\n      expect(createdUser.employmentType).toBe('FULL_TIME');\n      expect(createdUser.weeklyHours).toBe(40);\n      expect(createdUser.vacationDays).toBe(30);\n      expect(createdUser.coinWallet).toBe(0);\n      expect(createdUser.level).toBe(1);\n      expect(createdUser.teamIds).toEqual([]);\n    });\n\n    it('should generate unique IDs for new users', async () => {\n      const { createUser } = useAuthStore.getState();\n      \n      const user1 = await createUser({\n        email: 'user1@example.com',\n        name: 'User 1',\n        firstName: 'User',\n        lastName: 'One',\n        position: 'Dev',\n        department: 'IT',\n      });\n\n      const user2 = await createUser({\n        email: 'user2@example.com',\n        name: 'User 2',\n        firstName: 'User',\n        lastName: 'Two',\n        position: 'Dev',\n        department: 'IT',\n      });\n\n      expect(user1.id).toBeDefined();\n      expect(user2.id).toBeDefined();\n      expect(user1.id).not.toBe(user2.id);\n    });\n  });\n\n  describe('updateUser', () => {\n    beforeEach(async () => {\n      const { login } = useAuthStore.getState();\n      await login('anna.admin@hrthis.de', 'password');\n    });\n\n    it('should update user data', async () => {\n      const { updateUser, getAllUsers } = useAuthStore.getState();\n      const users = getAllUsers();\n      const userToUpdate = users[0];\n      \n      await updateUser(userToUpdate.id, {\n        position: 'Senior Developer',\n        weeklyHours: 35,\n      });\n      \n      const updatedUsers = getAllUsers();\n      const updatedUser = updatedUsers.find(u => u.id === userToUpdate.id);\n      \n      expect(updatedUser?.position).toBe('Senior Developer');\n      expect(updatedUser?.weeklyHours).toBe(35);\n    });\n\n    it('should update current user if updating self', async () => {\n      const { updateUser, user } = useAuthStore.getState();\n      \n      if (!user) throw new Error('User should be logged in');\n      \n      await updateUser(user.id, {\n        position: 'Updated Position',\n      });\n      \n      const updatedState = useAuthStore.getState();\n      expect(updatedState.user?.position).toBe('Updated Position');\n    });\n  });\n\n  describe('getAllUsers', () => {\n    it('should return all users', async () => {\n      const { login, getAllUsers } = useAuthStore.getState();\n      await login('anna.admin@hrthis.de', 'password');\n      \n      const users = getAllUsers();\n      \n      expect(Array.isArray(users)).toBe(true);\n      expect(users.length).toBeGreaterThan(0);\n      expect(users.every(user => user.id && user.email)).toBe(true);\n    });\n  });\n});","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/achievement-store-helpers.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (32). Maximum allowed is 30.","line":23,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":57,"endColumn":2},{"ruleId":"max-params","severity":1,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":28,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":28,"endColumn":40},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":67,"column":9,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":67,"endColumn":34},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":74,"column":9,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":74,"endColumn":61}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ProgressTracker } from '../types/gamification';\n\n// Helper to create default user progress\nexport const createDefaultUserProgress = (userId: string, currentQuarter: string): ProgressTracker => ({\n  userId,\n  achievements: {},\n  dailyStreak: { current: 0, longest: 0, lastCheckin: '' },\n  quarterlyStats: {\n    quarter: currentQuarter,\n    coinsEarned: 0,\n    trainingsCompleted: 0,\n    punctualDays: 0,\n    feedbackGiven: 0\n  }\n});\n\n// Helper to get current quarter string\nexport const getCurrentQuarter = (): string => {\n  return `${new Date().getFullYear()}-Q${Math.ceil((new Date().getMonth() + 1) / 3)}`;\n};\n\n// Helper to update quarterly stats\nexport const updateQuarterlyStats = (\n  currentStats: ProgressTracker['quarterlyStats'],\n  eventType: string,\n  value: number,\n  currentQuarter: string\n): ProgressTracker['quarterlyStats'] => {\n  // Reset stats if quarter changed\n  if (currentStats.quarter !== currentQuarter) {\n    return {\n      quarter: currentQuarter,\n      coinsEarned: eventType === 'coins_earned' ? value : 0,\n      trainingsCompleted: eventType === 'training_completed' ? value : 0,\n      punctualDays: eventType === 'punctual_checkin' ? value : 0,\n      feedbackGiven: eventType === 'feedback_given' ? value : 0\n    };\n  }\n\n  // Update existing stats\n  const updates: ProgressTracker['quarterlyStats'] = { ...currentStats };\n  switch (eventType) {\n    case 'coins_earned':\n      updates.coinsEarned += value;\n      break;\n    case 'training_completed':\n      updates.trainingsCompleted += value;\n      break;\n    case 'punctual_checkin':\n      updates.punctualDays += value;\n      break;\n    case 'feedback_given':\n      updates.feedbackGiven += value;\n      break;\n  }\n  return updates;\n};\n\n// Helper to update daily streak\nexport const updateDailyStreak = (\n  currentStreak: ProgressTracker['dailyStreak'],\n  eventType: string,\n  now: string\n): ProgressTracker['dailyStreak'] => {\n  if (eventType !== 'daily_checkin') return currentStreak;\n\n  const today = now.split('T')[0];\n  const lastCheckin = currentStreak.lastCheckin?.split('T')[0];\n  \n  if (lastCheckin === today) return currentStreak; // Already checked in today\n\n  const yesterday = new Date();\n  yesterday.setDate(yesterday.getDate() - 1);\n  const yesterdayStr = yesterday.toISOString().split('T')[0];\n\n  const newCurrent = lastCheckin === yesterdayStr ? currentStreak.current + 1 : 1;\n  \n  return {\n    current: newCurrent,\n    longest: Math.max(currentStreak.longest, newCurrent),\n    lastCheckin: now\n  };\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/achievements-helpers.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (37). Maximum allowed is 30.","line":6,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":49,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 16. Maximum allowed is 10.","line":6,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":49,"endColumn":2},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":15,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":15,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[509,511],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":41,"column":28,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":41,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1407,1409],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (135). Maximum allowed is 75.","line":99,"column":1,"nodeType":null,"messageId":"exceed","endLine":168,"endColumn":3},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":124,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3660,3663],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3660,3663],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":131,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3929,3932],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3929,3932],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":138,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4108,4111],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4108,4111],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":149,"column":7,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":10,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4459,4462],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4459,4462],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":152,"column":4,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":7,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4512,4515],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4512,4515],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":166,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":166,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4911,4914],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4911,4914],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Achievement, AchievementCondition, ProgressTracker } from '../types/gamification';\n\nimport { useAvatarStore } from './avatar';\n\n// Helper to get current value for condition type\nconst getCurrentValue = (\n  userId: string,\n  condition: AchievementCondition,\n  userProgress: ProgressTracker\n): number => {\n  switch (condition.type) {\n    case 'xp_earned':\n      const avatarStore = useAvatarStore.getState();\n      const userAvatar = avatarStore.getUserAvatar(userId);\n      return userAvatar?.totalXP || 0;\n    \n    case 'training_completed':\n    case 'trainings_completed':\n      return condition.timeframe === 'quarterly' \n        ? userProgress.quarterlyStats.trainingsCompleted\n        : getTotalTrainingsCompleted(userId);\n    \n    case 'days_punctual':\n    case 'punctual_checkins':\n      return condition.timeframe === 'quarterly'\n        ? userProgress.quarterlyStats.punctualDays\n        : getTotalPunctualDays(userId);\n    \n    case 'coins_earned':\n      return condition.timeframe === 'quarterly'\n        ? userProgress.quarterlyStats.coinsEarned\n        : getTotalCoinsEarned(userId);\n    \n    case 'feedback_given':\n      return condition.timeframe === 'quarterly'\n        ? userProgress.quarterlyStats.feedbackGiven\n        : getTotalFeedbackGiven(userId);\n    \n    case 'level_reached':\n      const avatar = useAvatarStore.getState().getUserAvatar(userId);\n      return avatar?.level || 1;\n    \n    case 'consecutive_days':\n      return userProgress.dailyStreak.current;\n    \n    default:\n      return 0;\n  }\n};\n\n// Helper to check condition operator\nconst checkConditionOperator = (currentValue: number, condition: AchievementCondition): boolean => {\n  switch (condition.operator) {\n    case 'equals':\n    case 'eq':\n      return currentValue === condition.target;\n    case 'gte':\n      return currentValue >= condition.target;\n    case 'gt':\n      return currentValue > condition.target;\n    case 'lte':\n      return currentValue <= condition.target;\n    case 'lt':\n      return currentValue < condition.target;\n    default:\n      return false;\n  }\n};\n\n// Helper function to check individual achievement conditions\nexport const checkAchievementCondition = (\n  userId: string,\n  condition: AchievementCondition,\n  userProgress: ProgressTracker\n): boolean => {\n  const currentValue = getCurrentValue(userId, condition, userProgress);\n  return checkConditionOperator(currentValue, condition);\n};\n\n// Mock functions that would normally be in the store\nconst getTotalTrainingsCompleted = (_userId: string): number => {\n  // This would fetch from training store\n  return 0;\n};\n\nconst getTotalPunctualDays = (_userId: string): number => {\n  // This would fetch from time tracking store\n  return 0;\n};\n\nconst getTotalCoinsEarned = (_userId: string): number => {\n  // This would fetch from coins store\n  return 0;\n};\n\nconst getTotalFeedbackGiven = (_userId: string): number => {\n  // This would fetch from feedback/teams store\n  return 0;\n};\n\n// Helper to get user progress stats\nexport const getUserProgressStats = (userId: string): ProgressTracker => {\n  // This would normally fetch from various stores/APIs\n  // For now, returning mock data structure\n  return {\n    userId,\n    achievements: {},\n    dailyStreak: {\n      current: 0,\n      longest: 0,\n      lastCheckin: new Date().toISOString()\n    },\n    quarterlyStats: {\n      quarter: `${new Date().getFullYear()}-Q${Math.floor(new Date().getMonth() / 3) + 1}`,\n      coinsEarned: 0,\n      trainingsCompleted: 0,\n      punctualDays: 0,\n      feedbackGiven: 0\n    }\n  };\n};\n\n// Create initial achievement from predefined data\nexport const createAchievementFromPredefined = (achievement: any, index: number): Achievement => ({\n  id: `predefined-${index}`,\n  name: achievement.name,\n  description: achievement.description,\n  icon: achievement.icon,\n  category: achievement.category,\n  rarity: achievement.rarity,\n  conditions: achievement.conditions.map((c: any) => ({\n    type: c.type,\n    target: c.target,\n    operator: c.operator,\n    timeframe: c.timeframe\n  })),\n  xpReward: achievement.rewards ? \n    achievement.rewards.find((r: any) => r.type === 'xp')?.value as number || 50 \n    : 50,\n  rewards: achievement.rewards ? [...achievement.rewards] : undefined,\n  isActive: true,\n  isHidden: false,\n  createdAt: new Date().toISOString(),\n  updatedAt: new Date().toISOString()\n});\n\n// Helper to map user achievement to UserAchievement object\nexport const mapUserAchievement = (\n  ua: any,\n  achievement: Achievement,\n  userId: string\n): any => ({\n  id: `${userId}-${ua.achievementId}`,\n  userId,\n  achievementId: ua.achievementId,\n  progress: 100,\n  unlockedAt: ua.unlockedAt,\n  notified: ua.isNew !== true,\n  name: achievement.name,\n  description: achievement.description,\n  icon: achievement.icon,\n  rarity: achievement.rarity\n});\n\n// Helper to get unlocked achievement IDs\nexport const getUnlockedAchievementIds = (userAchievements: any[]): string[] => {\n  return userAchievements.map(ua => ua.achievementId);\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/achievements.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":100,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":103,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1156,1159],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1156,1159],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (212). Maximum allowed is 30.","line":70,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":336,"endColumn":7},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (275). Maximum allowed is 75.","line":98,"column":1,"nodeType":null,"messageId":"exceed","endLine":346,"endColumn":3},{"ruleId":"max-params","severity":1,"message":"Method 'updateProgress' has too many parameters (4). Maximum allowed is 3.","line":106,"column":7,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":106,"endColumn":23},{"ruleId":"max-lines-per-function","severity":1,"message":"Method 'checkAchievements' has too many lines (66). Maximum allowed is 30.","line":136,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":211,"endColumn":8},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (57). Maximum allowed is 30.","line":145,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":208,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\nimport { \n  Achievement, \n  UserAchievement, \n  AchievementCondition,\n  ProgressTracker,\n  PREDEFINED_ACHIEVEMENTS\n} from '../types/gamification';\n\nimport {\n  createDefaultUserProgress,\n  getCurrentQuarter,\n  updateQuarterlyStats,\n  updateDailyStreak\n} from './achievement-store-helpers';\nimport { \n  checkAchievementCondition, \n  createAchievementFromPredefined, \n  mapUserAchievement,\n  getUnlockedAchievementIds\n} from './achievements-helpers';\nimport { useAvatarStore } from './avatar';\nimport { useNotificationsStore } from './notifications';\n\ninterface AchievementsState {\n  // Achievement system data\n  achievements: Achievement[];\n  userProgress: Record<string, ProgressTracker>;\n  \n  // Actions\n  getAchievements: () => Achievement[];\n  getUserAchievements: (_userId: string) => UserAchievement[];\n  getUnlockedAchievements: (_userId: string) => Achievement[];\n  getLockedAchievements: (_userId: string) => Achievement[];\n  \n  // Progress tracking\n  updateProgress: (_userId: string, _eventType: string, _value: number, _metadata?: Record<string, any>) => void;\n  checkAchievements: (_userId: string) => UserAchievement[];\n  unlockAchievement: (_userId: string, _achievementId: string) => void;\n  \n  // Admin functions\n  addAchievement: (achievement: Omit<Achievement, 'id'>) => void;\n  updateAchievement: (_achievementId: string, _updates: Partial<Achievement>) => void;\n  deleteAchievement: (_achievementId: string) => void;\n  \n  // Statistics\n  getProgressStats: (_userId: string) => {\n    totalAchievements: number;\n    unlockedAchievements: number;\n    completionRate: number;\n    recentUnlocks: UserAchievement[];\n  };\n  \n  // Additional methods\n  createAchievement: (achievement: Achievement) => void;\n  toggleAchievementActive: (_achievementId: string) => void;\n  getAchievementStats: (_achievementId: string) => { unlockedCount: number; totalUsers: number };\n  checkCondition: (_userId: string, condition: AchievementCondition, userProgress: ProgressTracker) => boolean;\n  getTotalTrainingsCompleted: (_userId: string) => number;\n  getTotalPunctualDays: (_userId: string) => number;\n  getTotalCoinsEarned: (_userId: string) => number;\n  getTotalFeedbackGiven: (_userId: string) => number;\n}\n\n\nexport const useAchievementsStore = create<AchievementsState>()(\n  persist(\n    (set, get) => ({\n      achievements: PREDEFINED_ACHIEVEMENTS.map(createAchievementFromPredefined),\n      userProgress: {},\n\n      getAchievements: () => get().achievements,\n\n      getUserAchievements: (userId: string) => {\n        const avatarStore = useAvatarStore.getState();\n        const userAvatar = avatarStore.getUserAvatar(userId);\n        const {achievements} = get();\n        \n        if (!userAvatar?.achievements) return [];\n        \n        return userAvatar.achievements.map(ua => {\n          const achievement = achievements.find(a => a.id === ua.achievementId);\n          if (!achievement) return null;\n          return mapUserAchievement(ua, achievement, userId);\n        }).filter(Boolean) as UserAchievement[];\n      },\n\n      getUnlockedAchievements: (userId: string) => {\n        const userAchievements = get().getUserAchievements(userId);\n        const allAchievements = get().achievements;\n        const unlockedIds = getUnlockedAchievementIds(userAchievements);\n        return allAchievements.filter(achievement => unlockedIds.includes(achievement.id));\n      },\n\n      getLockedAchievements: (userId: string) => {\n        const userAchievements = get().getUserAchievements(userId);\n        const allAchievements = get().achievements;\n        const unlockedIds = getUnlockedAchievementIds(userAchievements);\n        return allAchievements.filter(achievement => \n          !unlockedIds.includes(achievement.id) && achievement.isActive && !achievement.isHidden\n        );\n      },\n\n      updateProgress: (userId: string, eventType: string, value: number, _metadata = {}) => {\n        const now = new Date().toISOString();\n        const currentQuarter = getCurrentQuarter();\n        \n        set(state => {\n          const userProgress = state.userProgress[userId] || \n            createDefaultUserProgress(userId, currentQuarter);\n\n          // Update quarterly stats and daily streak using helpers\n          const quarterlyStats = updateQuarterlyStats(userProgress.quarterlyStats, eventType, value, currentQuarter);\n          const dailyStreak = updateDailyStreak(userProgress.dailyStreak, eventType, now);\n\n          const updatedProgress = {\n            ...userProgress,\n            quarterlyStats,\n            dailyStreak\n          };\n\n          return {\n            userProgress: {\n              ...state.userProgress,\n              [userId]: updatedProgress\n            }\n          };\n        });\n\n        // Check for new achievements\n        get().checkAchievements(userId);\n      },\n\n      checkAchievements: (userId: string) => {\n        const userAchievements = get().getUserAchievements(userId);\n        const unlockedIds = userAchievements.map(ua => ua.achievementId);\n        const lockedAchievements = get().achievements.filter(a => !unlockedIds.includes(a.id));\n        const userProgress = get().userProgress[userId];\n        const newUnlocks: UserAchievement[] = [];\n\n        if (!userProgress) return newUnlocks;\n\n        lockedAchievements.forEach(achievement => {\n          const isUnlocked = achievement.conditions.every(condition => {\n            return get().checkCondition(userId, condition, userProgress);\n          });\n\n          if (isUnlocked) {\n            const userAchievement = {\n              id: `${userId}-${achievement.id}`,\n              userId,\n              achievementId: achievement.id,\n              progress: 100,\n              unlockedAt: new Date().toISOString(),\n              notified: false,\n              name: achievement.name,\n              description: achievement.description,\n              icon: achievement.icon,\n              rarity: achievement.rarity\n            };\n            \n            newUnlocks.push(userAchievement);\n            get().unlockAchievement(userId, achievement.id);\n\n            // Add notification\n            const notificationsStore = useNotificationsStore.getState();\n            notificationsStore.addNotification({\n              userId,\n              type: 'general',\n              title: 'Achievement freigeschaltet!',\n              message: `Du hast \"${achievement.name}\" erreicht!`,\n              isRead: false,\n              relatedId: achievement.id\n            });\n\n            // Process rewards\n            if (achievement.rewards) {\n              const avatarStore = useAvatarStore.getState();\n              achievement.rewards.forEach(reward => {\n                switch (reward.type) {\n                  case 'xp':\n                    avatarStore.addXP({\n                      userId, \n                      skillId: null, \n                      xpAmount: Number(reward.value), \n                      description: `Achievement: ${achievement.name}`\n                    });\n                    break;\n                  case 'skill_xp':\n                    if (reward.skillId) {\n                      avatarStore.addXP({\n                        userId,\n                        skillId: reward.skillId,\n                        xpAmount: Number(reward.value),\n                        description: `Achievement: ${achievement.name}`\n                      });\n                    }\n                    break;\n                  case 'coins':\n                    // Add coins logic here when coins store is available\n                    break;\n                }\n              });\n            }\n          }\n        });\n\n        return newUnlocks;\n      },\n\n\n      // Helper functions for getting total values (these would integrate with other stores)\n      getTotalTrainingsCompleted: (_userId: string) => {\n        // This would integrate with training store\n        return 0;\n      },\n\n      getTotalPunctualDays: (_userId: string) => {\n        // This would integrate with time records store  \n        return 0;\n      },\n\n      getTotalCoinsEarned: (_userId: string) => {\n        // This would integrate with coins store\n        return 0;\n      },\n\n      getTotalFeedbackGiven: (_userId: string) => {\n        // This would integrate with feedback/training store\n        return 0;\n      },\n\n      unlockAchievement: (userId: string, achievementId: string) => {\n        const avatarStore = useAvatarStore.getState();\n        let userAvatar = avatarStore.getUserAvatar(userId);\n        \n        if (!userAvatar) {\n          userAvatar = avatarStore.createUserAvatar(userId);\n        }\n\n        const newAchievement = {\n          achievementId,\n          unlockedAt: new Date().toISOString(),\n          isNew: true\n        };\n\n        const updatedAchievements = [...userAvatar.achievements, newAchievement];\n        \n        // Update avatar store with new achievements\n        avatarStore.updateAvatar(userId, { achievements: updatedAchievements });\n      },\n\n      addAchievement: (achievementData: Omit<Achievement, 'id'>) => {\n        const newAchievement: Achievement = {\n          ...achievementData,\n          id: `custom-${Date.now()}`\n        };\n\n        set(state => ({\n          achievements: [...state.achievements, newAchievement]\n        }));\n      },\n\n      updateAchievement: (achievementId: string, updates: Partial<Achievement>) => {\n        set(state => ({\n          achievements: state.achievements.map(achievement =>\n            achievement.id === achievementId ? { ...achievement, ...updates } : achievement\n          )\n        }));\n      },\n\n      deleteAchievement: (achievementId: string) => {\n        set(state => ({\n          achievements: state.achievements.filter(achievement => achievement.id !== achievementId)\n        }));\n      },\n\n      getProgressStats: (userId: string) => {\n        const allAchievements = get().achievements;\n        const userAchievements = get().getUserAchievements(userId);\n        \n        const totalAchievements = allAchievements.filter(a => a.isActive && !a.isHidden).length;\n        const unlockedAchievements = userAchievements.length;\n        const completionRate = totalAchievements > 0 ? (unlockedAchievements / totalAchievements) * 100 : 0;\n        \n        const recentUnlocks = userAchievements\n          .sort((a, b) => new Date(b.unlockedAt).getTime() - new Date(a.unlockedAt).getTime())\n          .slice(0, 3);\n\n        return {\n          totalAchievements,\n          unlockedAchievements,\n          completionRate,\n          recentUnlocks\n        };\n      },\n      \n      createAchievement: (achievement: Achievement) => {\n        set(state => ({\n          achievements: [...state.achievements, achievement]\n        }));\n      },\n      \n      toggleAchievementActive: (achievementId: string) => {\n        set(state => ({\n          achievements: state.achievements.map(achievement =>\n            achievement.id === achievementId \n              ? { ...achievement, isActive: !achievement.isActive }\n              : achievement\n          )\n        }));\n      },\n      \n      getAchievementStats: (achievementId: string) => {\n        const avatarStore = useAvatarStore.getState();\n        const allUserAvatars = avatarStore.getAllUserAvatars();\n        \n        let unlockedCount = 0;\n        allUserAvatars.forEach(avatar => {\n          if (avatar.achievements.some(a => a.achievementId === achievementId)) {\n            unlockedCount++;\n          }\n        });\n        \n        return { \n          unlockedCount, \n          totalUsers: allUserAvatars.length \n        };\n      },\n      \n      checkCondition: (userId: string, condition: AchievementCondition, userProgress: ProgressTracker) => {\n        return checkAchievementCondition(userId, condition, userProgress);\n      }\n    }),\n    {\n      name: 'achievements-storage',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({\n        achievements: state.achievements,\n        userProgress: state.userProgress\n      })\n    }\n  )\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/auth.ts","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":8,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":59},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":10,"column":25,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":10,"endColumn":27,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[391,393],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":11,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":11,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[428,430],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":11,"column":58,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":11,"endColumn":60,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[455,457],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":12,"column":23,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":12,"endColumn":25,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[493,495],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":13,"column":43,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":13,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[550,552],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":14,"column":33,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":14,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[593,595],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":15,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":15,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[630,632],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":19,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":19,"endColumn":60},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":20,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":20,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[772,774],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":21,"column":35,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":21,"endColumn":37,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[813,815],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":22,"column":37,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":22,"endColumn":39,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[856,858],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":23,"column":43,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":23,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[905,907],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":24,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":24,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[951,953],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":26,"column":39,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":26,"endColumn":41,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1071,1073],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":30,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":37,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":37,"endColumn":54},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":38,"column":29,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":38,"endColumn":31,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1333,1335],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":54,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":54,"endColumn":30},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (263). Maximum allowed is 75.","line":92,"column":1,"nodeType":null,"messageId":"exceed","endLine":310,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (79). Maximum allowed is 30.","line":192,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":299,"endColumn":7},{"ruleId":"max-statements","severity":1,"message":"Async method 'login' has too many statements (16). Maximum allowed is 15.","line":198,"column":14,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":235,"endColumn":8}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":22,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\nimport { RequiredStep as _RequiredStep, markStepExecuted } from '../pipeline/annotations';\nimport { User, Organization } from '../types';\n\n// Helper to create basic user fields\nconst createBasicUserFields = (userData: Partial<User>) => ({\n  id: `user-${Date.now()}`,\n  email: userData.email || '',\n  name: `${userData.firstName || ''} ${userData.lastName || ''}`.trim(),\n  role: userData.role || 'EMPLOYEE',\n  organizationId: userData.organizationId || 'org1',\n  firstName: userData.firstName || '',\n  lastName: userData.lastName || ''\n});\n\n// Helper to create employment fields\nconst createEmploymentFields = (userData: Partial<User>) => ({\n  position: userData.position || '',\n  department: userData.department || '',\n  weeklyHours: userData.weeklyHours || 40,\n  employmentType: userData.employmentType || 'FULL_TIME',\n  joinDate: userData.joinDate || new Date().toISOString().split('T')[0],\n  employmentStatus: 'ACTIVE' as const,\n  vacationDays: userData.vacationDays || 30\n});\n\n// Helper to create gamification fields\nconst createGamificationFields = () => ({\n  coinWallet: 0,\n  coinProgress: 0,\n  level: 1\n});\n\n// Helper to create team fields\nconst createTeamFields = (userData: Partial<User>) => ({\n  teamIds: userData.teamIds || [],\n  primaryTeamId: userData.primaryTeamId\n});\n\n// Helper function to create new user with defaults\nconst createUserWithDefaults = (userData: Partial<User>): User => {\n  return {\n    ...createBasicUserFields(userData),\n    ...createEmploymentFields(userData),\n    ...createGamificationFields(),\n    ...createTeamFields(userData),\n    ...userData\n  };\n};\n\n// Helper function to simulate API delay\nconst simulateApiCall = () => new Promise(resolve => setTimeout(resolve, 500));\n\ninterface AuthState {\n  user: User | null;\n  organization: Organization | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => void;\n  setUser: (user: User) => void;\n  setOrganization: (org: Organization) => void;\n  updateUser: (userId: string, updates: Partial<User>) => Promise<void>;\n  createUser: (userData: Partial<User>) => Promise<User>;\n  getAllUsers: () => User[];\n}\n\n// Mock authentication data\nconst mockUsers: User[] = [\n  {\n    id: '1',\n    email: 'max.mustermann@hrthis.de',\n    name: 'Max Mustermann',\n    role: 'EMPLOYEE',\n    organizationId: 'org1',\n    firstName: 'Max',\n    lastName: 'Mustermann',\n    privateEmail: 'max.privat@gmail.com',\n    position: 'Senior Developer',\n    department: 'IT',\n    weeklyHours: 40,\n    employmentType: 'FULL_TIME',\n    joinDate: '2022-01-15',\n    employmentStatus: 'ACTIVE',\n    vacationDays: 30,\n    address: {\n      street: 'Musterstraße 123',\n      postalCode: '12345',\n      city: 'Berlin'\n    },\n    phone: '+49 30 12345678',\n    bankDetails: {\n      iban: 'DE89 3704 0044 0532 0130 00',\n      bic: 'COBADEFFXXX'\n    },\n    coinWallet: 1500,\n    coinProgress: 2200,\n    level: 3,\n    teamIds: ['team1'],\n    primaryTeamId: 'team1'\n  },\n  {\n    id: '2',\n    email: 'anna.admin@hrthis.de',\n    name: 'Anna Admin',\n    role: 'ADMIN',\n    organizationId: 'org1',\n    firstName: 'Anna',\n    lastName: 'Admin',\n    privateEmail: 'anna.privat@gmail.com',\n    position: 'HR Manager',\n    department: 'Human Resources',\n    weeklyHours: 40,\n    employmentType: 'FULL_TIME',\n    joinDate: '2021-03-01',\n    employmentStatus: 'ACTIVE',\n    vacationDays: 30,\n    coinWallet: 2500,\n    coinProgress: 3800,\n    level: 5,\n    teamIds: ['team1', 'team2', 'team3'],\n    leadTeamIds: ['team1', 'team2', 'team3']\n  },\n  {\n    id: '3',\n    email: 'tom.teilzeit@hrthis.de',\n    name: 'Tom Teilzeit',\n    role: 'EMPLOYEE',\n    organizationId: 'org1',\n    firstName: 'Tom',\n    lastName: 'Teilzeit',\n    privateEmail: 'tom.privat@gmail.com',\n    position: 'Designer',\n    department: 'Marketing',\n    weeklyHours: 20,\n    employmentType: 'PART_TIME',\n    joinDate: '2023-06-01',\n    employmentStatus: 'ACTIVE',\n    vacationDays: 15,\n    coinWallet: 800,\n    coinProgress: 1200,\n    level: 2,\n    teamIds: ['team2'],\n    primaryTeamId: 'team2'\n  },\n  {\n    id: '4',\n    email: 'test@hrthis.de',\n    name: 'Test User',\n    role: 'EMPLOYEE',\n    organizationId: 'org1',\n    firstName: 'Test',\n    lastName: 'User',\n    privateEmail: 'test.user@gmail.com',\n    position: 'Software Tester',\n    department: 'Quality Assurance',\n    weeklyHours: 35,\n    employmentType: 'FULL_TIME',\n    joinDate: '2024-01-15',\n    employmentStatus: 'ACTIVE',\n    vacationDays: 28,\n    address: {\n      street: 'Teststraße 42',\n      postalCode: '10115',\n      city: 'Berlin'\n    },\n    phone: '+49 30 98765432',\n    bankDetails: {\n      iban: 'DE89 1001 0010 0987 6543 21',\n      bic: 'PBNKDEFFXXX'\n    },\n    coinWallet: 950,\n    coinProgress: 1500,\n    level: 2,\n    teamIds: ['team3'],\n    primaryTeamId: 'team3'\n  }\n];\n\nconst mockOrganizations: Organization[] = [\n  {\n    id: 'org1',\n    name: 'HRthis GmbH',\n    slug: 'hrthis-gmbh'\n  }\n];\n\nexport const useAuthStore = create<AuthState>()(\n  persist(\n    (set, get) => ({\n      user: null,\n      organization: null,\n      isAuthenticated: false,\n      isLoading: false,\n\n      login: async (email: string, password: string) => {\n        set({ isLoading: true });\n        \n        try {\n          // @RequiredStep: \"authenticate-user-credentials\"\n          markStepExecuted('authenticate-user-credentials', true, { email });\n          \n          // Simulate API call delay\n          await new Promise(resolve => setTimeout(resolve, 1000));\n          \n          // @RequiredStep: \"validate-user-exists\"\n          const user = mockUsers.find(u => u.email === email);\n          markStepExecuted('validate-user-exists', !!user, { userFound: !!user });\n          \n          if (!user || password !== 'password') {\n            markStepExecuted('login-validation', false, 'Invalid credentials');\n            throw new Error('Ungültige Anmeldedaten');\n          }\n          \n          // @RequiredStep: \"load-user-organization\"\n          const organization = mockOrganizations.find(org => org.id === user.organizationId);\n          markStepExecuted('load-user-organization', !!organization, { organizationId: user.organizationId });\n          \n          // @RequiredStep: \"establish-user-session\"\n          set({ \n            user, \n            organization, \n            isAuthenticated: true, \n            isLoading: false \n          });\n          markStepExecuted('establish-user-session', true, { userId: user.id });\n          \n        } catch (error) {\n          set({ isLoading: false });\n          markStepExecuted('login-process', false, error instanceof Error ? error.message : String(error));\n          throw error;\n        }\n      },\n\n      logout: () => {\n        set({ \n          user: null, \n          organization: null, \n          isAuthenticated: false \n        });\n      },\n\n      setUser: (user: User) => {\n        set({ user });\n      },\n\n      setOrganization: (organization: Organization) => {\n        set({ organization });\n      },\n\n      updateUser: async (userId: string, updates: Partial<User>) => {\n        set({ isLoading: true });\n        \n        try {\n          // Simulate API call\n          await new Promise(resolve => setTimeout(resolve, 500));\n          \n          // Update mock data\n          const userIndex = mockUsers.findIndex(u => u.id === userId);\n          if (userIndex !== -1) {\n            mockUsers[userIndex] = { ...mockUsers[userIndex], ...updates };\n          }\n          \n          // Update current user if it's the same\n          const currentUser = get().user;\n          if (currentUser && currentUser.id === userId) {\n            set({ user: { ...currentUser, ...updates } });\n          }\n          \n          set({ isLoading: false });\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      createUser: async (userData: Partial<User>) => {\n        set({ isLoading: true });\n        \n        try {\n          await simulateApiCall();\n          \n          const newUser = createUserWithDefaults(userData);\n          mockUsers.push(newUser);\n          \n          set({ isLoading: false });\n          return newUser;\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      getAllUsers: () => {\n        return mockUsers;\n      }\n    }),\n    {\n      name: 'auth-storage',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({ \n        user: state.user, \n        organization: state.organization,\n        isAuthenticated: state.isAuthenticated \n      }),\n    }\n  )\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/avatar-actions.ts","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":30,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":33,"endColumn":5},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[709,712],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[709,712],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { UserAvatar, Skill, DEFAULT_SKILLS } from '../types/avatar';\n\n// Helper to create new user avatar\nexport const createNewUserAvatar = (userId: string): UserAvatar => {\n  const now = new Date().toISOString();\n  \n  // Create default skills with 0 XP\n  const skills: Skill[] = DEFAULT_SKILLS.map(skillTemplate => ({\n    ...skillTemplate,\n    currentXP: 0,\n    level: 1,\n    totalXP: 0\n  }));\n\n  return {\n    userId,\n    level: 1,\n    totalXP: 0,\n    currentLevelXP: 0,\n    nextLevelXP: 100,\n    skills,\n    achievements: [],\n    lastActiveAt: now,\n    createdAt: now,\n    updatedAt: now\n  };\n};\n\n// Helper to get user stats\nexport const calculateUserStats = (\n  userAvatar: UserAvatar | null,\n  xpEvents: any[]\n) => {\n  if (!userAvatar) {\n    return {\n      totalXP: 0,\n      level: 1,\n      skillLevels: {},\n      recentEvents: []\n    };\n  }\n\n  const skillLevels = userAvatar.skills.reduce((acc, skill) => {\n    acc[skill.id] = skill.level;\n    return acc;\n  }, {} as Record<string, number>);\n\n  return {\n    totalXP: userAvatar.totalXP,\n    level: userAvatar.level,\n    skillLevels,\n    recentEvents: xpEvents\n  };\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/avatar-helpers.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":26,"column":27,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":26,"endColumn":29,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[863,865],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":37,"column":95,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":37,"endColumn":97,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1334,1336],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (34). Maximum allowed is 30.","line":83,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":121,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (98). Maximum allowed is 75.","line":96,"column":1,"nodeType":null,"messageId":"exceed","endLine":121,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { UserAvatar, Skill, Level, XPEvent, LevelUpEvent, calculateXPProgress, calculateLevelFromXP } from '../types/avatar';\nimport { XPEventType } from '../types/gamification';\n\n// Helper function to calculate new level based on XP\nexport const calculateLevel = (totalXP: number, levels: Level[]): number => {\n  for (let i = levels.length - 1; i >= 0; i--) {\n    if (totalXP >= levels[i].requiredXP) {\n      return levels[i].levelNumber;\n    }\n  }\n  return 1;\n};\n\n// Helper function to create XP event\nexport const createXPEvent = (params: {\n  userId: string;\n  skillId: string | null | undefined;\n  xpAmount: number;\n  description: string;\n  metadata: Record<string, unknown>;\n  now: string;\n}): XPEvent => ({\n  id: `${params.userId}-${Date.now()}`,\n  userId: params.userId,\n  type: (params.metadata.type as XPEventType) || 'manual',\n  skillId: params.skillId || undefined,\n  xpAmount: params.xpAmount,\n  description: params.description,\n  metadata: params.metadata,\n  createdAt: params.now\n});\n\n// Helper function to update skill XP and level\nexport const updateSkillXP = (skill: Skill, xpAmount: number, levels: Level[]): Skill => {\n  const newTotalXP = skill.totalXP + xpAmount;\n  const newLevel = calculateLevel(newTotalXP, levels);\n  const newCurrentXP = newTotalXP - (levels.find(l => l.levelNumber === newLevel)?.requiredXP || 0);\n  \n  return {\n    ...skill,\n    currentXP: newCurrentXP,\n    totalXP: newTotalXP,\n    level: newLevel\n  };\n};\n\n// Helper function to update user avatar with XP\nexport const updateAvatarWithXP = (params: {\n  avatar: UserAvatar;\n  skillId: string | null | undefined;\n  xpAmount: number;\n  levels: Level[];\n  now: string;\n}): UserAvatar => {\n  const { avatar, skillId, xpAmount, levels, now } = params;\n  const updatedAvatar = { ...avatar };\n  \n  // Add to total XP\n  updatedAvatar.totalXP += xpAmount;\n  \n  // Update specific skill if provided\n  if (skillId) {\n    updatedAvatar.skills = updatedAvatar.skills.map(skill => {\n      if (skill.id === skillId) {\n        return updateSkillXP(skill, xpAmount, levels);\n      }\n      return skill;\n    });\n  }\n  \n  // Update overall level progress  \n  updatedAvatar.level = calculateLevel(updatedAvatar.totalXP, levels);\n  const overallProgress = calculateXPProgress(updatedAvatar.totalXP);\n  updatedAvatar.currentLevelXP = overallProgress.currentLevelXP;\n  updatedAvatar.nextLevelXP = overallProgress.nextLevelXP;\n  updatedAvatar.lastActiveAt = now;\n  updatedAvatar.updatedAt = now;\n  \n  return updatedAvatar;\n};\n\n// Helper function to check level ups\nexport const checkLevelUps = (params: {\n  userAvatar: UserAvatar;\n  userId: string;\n  now: string;\n}): LevelUpEvent[] => {\n  const { userAvatar, userId, now } = params;\n  const levelUpEvents: LevelUpEvent[] = [];\n\n  // Check overall level up\n  const newOverallLevel = calculateLevelFromXP(userAvatar.totalXP);\n  if (newOverallLevel > userAvatar.level) {\n    const levelUpEvent: LevelUpEvent = {\n      userId,\n      oldLevel: userAvatar.level,\n      newLevel: newOverallLevel,\n      rewards: [], // Add level rewards logic here\n      timestamp: now\n    };\n    levelUpEvents.push(levelUpEvent);\n  }\n\n  // Check skill level ups\n  userAvatar.skills.forEach(skill => {\n    const newSkillLevel = calculateLevelFromXP(skill.totalXP);\n    if (newSkillLevel > skill.level) {\n      const skillLevelUpEvent: LevelUpEvent = {\n        userId,\n        oldLevel: skill.level,\n        newLevel: newSkillLevel,\n        skillId: skill.id,\n        rewards: [], // Add skill level rewards logic here\n        timestamp: now\n      };\n      levelUpEvents.push(skillLevelUpEvent);\n    }\n  });\n\n  return levelUpEvents;\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/avatar-xp.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (55). Maximum allowed is 30.","line":3,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":68,"endColumn":2},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":3,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":13,"endColumn":5},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":4,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":4,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[123,126],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[123,126],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":5,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[135,138],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[135,138],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[289,292],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[289,292],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[754,757],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[754,757],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1398,1401],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1398,1401],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createXPEvent, updateAvatarWithXP, checkLevelUps } from './avatar-helpers';\n\nexport const processAddXP = (\n  get: any,\n  set: any,\n  params: {\n    userId: string;\n    skillId: string | null | undefined;\n    xpAmount: number;\n    description: string;\n    metadata?: Record<string, any>;\n  }\n) => {\n  const { userId, skillId, xpAmount, description, metadata = {} } = params;\n  const now = new Date().toISOString();\n  let userAvatar = get().getUserAvatar(userId);\n  \n  // Create avatar if it doesn't exist\n  if (!userAvatar) {\n    userAvatar = get().createUserAvatar(userId);\n  }\n\n  // Create XP event using helper\n  const xpEvent = createXPEvent({\n    userId,\n    skillId,\n    xpAmount,\n    description,\n    metadata,\n    now\n  });\n\n  set((state: any) => {\n    // Update avatar using helper function\n    const updatedAvatar = updateAvatarWithXP({\n      avatar: state.userAvatars[userId],\n      skillId,\n      xpAmount,\n      levels: state.levels,\n      now\n    });\n\n    return {\n      userAvatars: {\n        ...state.userAvatars,\n        [userId]: updatedAvatar\n      },\n      xpEvents: [xpEvent, ...state.xpEvents]\n    };\n  });\n\n  // Check for level ups\n  const currentAvatar = get().getUserAvatar(userId);\n  if (!currentAvatar) return;\n  \n  const levelUpEvents = checkLevelUps({\n    userAvatar: currentAvatar,\n    userId,\n    now\n  });\n  \n  if (levelUpEvents.length > 0) {\n    set((state: any) => ({\n      ...state,\n      levelUpEvents: [...levelUpEvents, ...state.levelUpEvents]\n    }));\n  }\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/avatar.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (53). Maximum allowed is 30.","line":18,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":76,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":18,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":18,"endColumn":52},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[473,476],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[473,476],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[483,486],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[483,486],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[589,592],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[589,592],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1146,1149],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1146,1149],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":60,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1572,1575],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1572,1575],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":78,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":78,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1955,1958],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1955,1958],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1965,1968],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1965,1968],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":85,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2130,2133],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2130,2133],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (224). Maximum allowed is 75.","line":88,"column":1,"nodeType":null,"messageId":"exceed","endLine":276,"endColumn":3},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":91,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2323,2326],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2323,2326],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":99,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2524,2527],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2524,2527],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":117,"column":126,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":129,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3069,3072],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3069,3072],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (80). Maximum allowed is 30.","line":165,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":264,"endColumn":6},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":198,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":198,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6144,6147],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6144,6147],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":210,"column":80,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":210,"endColumn":82,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6531,6533],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\nimport { \n  UserAvatar, \n  Skill, \n  Level, \n  XPEvent, \n  LevelUpEvent,\n  calculateLevelFromXP\n} from '../types/avatar';\n\nimport { createNewUserAvatar, calculateUserStats } from './avatar-actions';\nimport { checkLevelUps } from './avatar-helpers';\nimport { processAddXP } from './avatar-xp';\n\n// Helper functions for avatar store actions\nconst createAvatarActions = (get: any, set: any) => ({\n  updateSkill: (userId: string, skillId: string, updates: Partial<Skill>) => {\n    set((state: any) => {\n      const userAvatar = state.userAvatars[userId];\n      if (!userAvatar) return state;\n\n      const updatedSkills = userAvatar.skills.map((skill: Skill) =>\n        skill.id === skillId ? { ...skill, ...updates } : skill\n      );\n\n      return {\n        userAvatars: {\n          ...state.userAvatars,\n          [userId]: {\n            ...userAvatar,\n            skills: updatedSkills,\n            updatedAt: new Date().toISOString()\n          }\n        }\n      };\n    });\n  },\n\n  updateTitle: (userId: string, title: string) => {\n    set((state: any) => {\n      const userAvatar = state.userAvatars[userId];\n      if (!userAvatar) return state;\n      \n      return {\n        userAvatars: {\n          ...state.userAvatars,\n          [userId]: {\n            ...userAvatar,\n            title,\n            updatedAt: new Date().toISOString()\n          }\n        }\n      };\n    });\n  },\n\n  updateAvatar: (userId: string, avatarConfig: Partial<UserAvatar>) => {\n    set((state: any) => {\n      const userAvatar = state.userAvatars[userId];\n      if (!userAvatar) return state;\n      \n      return {\n        userAvatars: {\n          ...state.userAvatars,\n          [userId]: {\n            ...userAvatar,\n            ...avatarConfig,\n            updatedAt: new Date().toISOString()\n          }\n        }\n      };\n    });\n  }\n});\n\nconst createLevelActions = (get: any, set: any) => ({\n  addLevel: (levelData: Omit<Level, 'id'>) => {\n    const newLevel: Level = {\n      ...levelData,\n      id: `level-${Date.now()}`\n    };\n\n    set((state: any) => ({\n      levels: [...state.levels, newLevel].sort((a, b) => a.levelNumber - b.levelNumber)\n    }));\n  },\n\n  updateLevel: (levelId: string, updates: Partial<Level>) => {\n    set((state: any) => ({\n      levels: state.levels.map((level: Level) =>\n        level.id === levelId ? { ...level, ...updates } : level\n      )\n    }));\n  },\n\n  deleteLevel: (levelId: string) => {\n    set((state: any) => ({\n      levels: state.levels.filter((level: Level) => level.id !== levelId)\n    }));\n  }\n});\n\ninterface AvatarState {\n  // User avatar data\n  userAvatars: Record<string, UserAvatar>;\n  \n  // System configuration\n  levels: Level[];\n  xpEvents: XPEvent[];\n  levelUpEvents: LevelUpEvent[];\n  \n  // Actions\n  getUserAvatar: (userId: string) => UserAvatar | null;\n  createUserAvatar: (userId: string) => UserAvatar;\n  addXP: (params: { userId: string; skillId: string | null; xpAmount: number; description: string; metadata?: Record<string, any> }) => void;\n  updateSkill: (userId: string, skillId: string, updates: Partial<Skill>) => void;\n  \n  // Level management\n  getLevels: () => Level[];\n  getLevel: (levelNumber: number) => Level | null;\n  addLevel: (level: Omit<Level, 'id'>) => void;\n  updateLevel: (levelId: string, updates: Partial<Level>) => void;\n  deleteLevel: (levelId: string) => void;\n  \n  // XP and level calculations\n  calculateUserLevel: (userId: string) => number;\n  checkLevelUp: (userId: string) => LevelUpEvent[];\n  \n  // Statistics\n  getXPEvents: (userId: string, limit?: number) => XPEvent[];\n  getLevelUpEvents: (userId: string, limit?: number) => LevelUpEvent[];\n  getUserStats: (userId: string) => {\n    totalXP: number;\n    level: number;\n    skillLevels: Record<string, number>;\n    recentEvents: XPEvent[];\n  };\n  \n  // Additional methods\n  getAllUserAvatars: () => UserAvatar[];\n  getUserSkill: (userId: string, skillId: string) => Skill | undefined;\n  updateTitle: (userId: string, title: string) => void;\n  updateAvatar: (userId: string, avatarConfig: Partial<UserAvatar>) => void;\n}\n\n// Mock default levels\nconst mockLevels: Level[] = [\n  { id: '1', levelNumber: 1, title: 'Neuling', requiredXP: 0, icon: '🌱', color: '#10B981' },\n  { id: '2', levelNumber: 2, title: 'Anfänger', requiredXP: 100, icon: '🔰', color: '#3B82F6' },\n  { id: '3', levelNumber: 3, title: 'Lernender', requiredXP: 250, icon: '📚', color: '#6366F1' },\n  { id: '4', levelNumber: 4, title: 'Fortgeschrittener', requiredXP: 450, icon: '⭐', color: '#8B5CF6' },\n  { id: '5', levelNumber: 5, title: 'Explorer', requiredXP: 700, icon: '🧭', color: '#F59E0B' },\n  { id: '6', levelNumber: 6, title: 'Spezialist', requiredXP: 1000, icon: '🎯', color: '#EF4444' },\n  { id: '7', levelNumber: 7, title: 'Experte', requiredXP: 1350, icon: '💎', color: '#06B6D4' },\n  { id: '8', levelNumber: 8, title: 'Meister', requiredXP: 1750, icon: '👑', color: '#8B5CF6' },\n  { id: '9', levelNumber: 9, title: 'Profi', requiredXP: 2200, icon: '🏆', color: '#F59E0B' },\n  { id: '10', levelNumber: 10, title: 'Sensei', requiredXP: 2700, icon: '🥇', color: '#EF4444' }\n];\n\n\nexport const useAvatarStore = create<AvatarState>()(\n  persist(\n    (set, get) => {\n      const avatarActions = createAvatarActions(get, set);\n      const levelActions = createLevelActions(get, set);\n      \n      return {\n        userAvatars: {},\n        levels: mockLevels,\n        xpEvents: [],\n        levelUpEvents: [],\n        \n        getUserAvatar: (userId) => {\n          const avatars = get().userAvatars;\n          return avatars[userId] || null;\n        },\n\n        createUserAvatar: (userId: string) => {\n          const newAvatar = createNewUserAvatar(userId);\n\n          set(state => ({\n            userAvatars: {\n              ...state.userAvatars,\n              [userId]: newAvatar\n            }\n          }));\n\n          return newAvatar;\n        },\n\n        addXP: (params: {\n          userId: string;\n          skillId: string | null | undefined;\n          xpAmount: number;\n          description: string;\n          metadata?: Record<string, any>;\n        }) => {\n          processAddXP(get, set, params);\n        },\n\n        updateSkill: avatarActions.updateSkill,\n        updateTitle: avatarActions.updateTitle,\n        updateAvatar: avatarActions.updateAvatar,\n\n        getLevels: () => get().levels,\n\n        getLevel: (levelNumber: number) => {\n          return get().levels.find(level => level.levelNumber === levelNumber) || null;\n        },\n\n        addLevel: levelActions.addLevel,\n        updateLevel: levelActions.updateLevel,\n        deleteLevel: levelActions.deleteLevel,\n\n        calculateUserLevel: (userId: string) => {\n          const userAvatar = get().getUserAvatar(userId);\n          if (!userAvatar) return 1;\n          \n          return calculateLevelFromXP(userAvatar.totalXP);\n        },\n\n        checkLevelUp: (userId: string) => {\n          const userAvatar = get().getUserAvatar(userId);\n          if (!userAvatar) return [];\n\n          return checkLevelUps({\n            userAvatar,\n            userId,\n            now: new Date().toISOString()\n          });\n        },\n\n        getXPEvents: (userId: string, limit = 10) => {\n          return get().xpEvents\n            .filter(event => event.userId === userId)\n            .slice(0, limit);\n        },\n\n        getLevelUpEvents: (userId: string, limit = 5) => {\n          return get().levelUpEvents\n            .filter(event => event.userId === userId)\n            .slice(0, limit);\n        },\n\n        getUserStats: (userId: string) => {\n          const userAvatar = get().getUserAvatar(userId);\n          const xpEvents = get().getXPEvents(userId, 5);\n          \n          return calculateUserStats(userAvatar, xpEvents);\n        },\n        \n        getAllUserAvatars: () => {\n          return Object.values(get().userAvatars);\n        },\n        \n        getUserSkill: (userId: string, skillId: string) => {\n          const userAvatar = get().getUserAvatar(userId);\n          if (!userAvatar) return undefined;\n          return userAvatar.skills.find(skill => skill.id === skillId);\n        }\n      };\n    },\n    {\n      name: 'avatar-storage',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({\n        userAvatars: state.userAvatars,\n        levels: state.levels,\n        xpEvents: state.xpEvents.slice(0, 100), // Keep only recent events\n        levelUpEvents: state.levelUpEvents.slice(0, 50)\n      })\n    }\n  )\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/avatar/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/coinEvents.ts","messages":[{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 4 times.","line":58,"column":25,"nodeType":"Literal","endLine":58,"endColumn":37},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (50). Maximum allowed is 30.","line":91,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":157,"endColumn":7},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (117). Maximum allowed is 75.","line":108,"column":1,"nodeType":null,"messageId":"exceed","endLine":165,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\n/**\n * Represents a coin-based event or milestone that users can unlock\n */\nexport interface CoinEvent {\n  /** Unique identifier for the event */\n  id: string;\n  /** Display title of the event */\n  title: string;\n  /** Detailed description of the event */\n  description: string;\n  /** Number of coins required to unlock this event */\n  requiredCoins: number;\n  /** Description of what the user receives when unlocking this event */\n  reward: string;\n  /** Whether this event is currently active and available */\n  isActive: boolean;\n  /** ISO timestamp of when the event was created */\n  createdAt: string;\n}\n\ninterface CoinEventsState {\n  /** List of all coin events */\n  events: CoinEvent[];\n  /** Loading state for async operations */\n  isLoading: boolean;\n  \n  /** Get all currently active events */\n  getActiveEvents: () => CoinEvent[];\n  \n  /** Get events that the user has enough coins to unlock */\n  getUnlockedEvents: (userBalance: number) => CoinEvent[];\n  \n  /** Get the next event the user can work towards */\n  getNextEvent: (userBalance: number) => CoinEvent | null;\n  \n  /** Add a new coin event */\n  addEvent: (event: Omit<CoinEvent, 'id' | 'createdAt'>) => Promise<void>;\n  \n  /** Update an existing event */\n  updateEvent: (eventId: string, updates: Partial<CoinEvent>) => Promise<void>;\n  \n  /** Delete an event */\n  deleteEvent: (eventId: string) => Promise<void>;\n}\n\n// Mock data for initial events\nconst mockEvents: CoinEvent[] = [\n  {\n    id: '1',\n    title: 'Bronze Status',\n    description: 'Achieve Bronze status and unlock basic perks',\n    requiredCoins: 100,\n    reward: 'Bronze badge + 5% discount on company merchandise',\n    isActive: true,\n    createdAt: new Date('2024-01-01').toISOString(),\n  },\n  {\n    id: '2',\n    title: 'Silver Status',\n    description: 'Level up to Silver status for enhanced benefits',\n    requiredCoins: 250,\n    reward: 'Silver badge + 10% discount + Priority support',\n    isActive: true,\n    createdAt: new Date('2024-01-01').toISOString(),\n  },\n  {\n    id: '3',\n    title: 'Gold Status',\n    description: 'Reach Gold status and enjoy premium perks',\n    requiredCoins: 500,\n    reward: 'Gold badge + 15% discount + VIP lounge access + 1 extra vacation day',\n    isActive: true,\n    createdAt: new Date('2024-01-01').toISOString(),\n  },\n  {\n    id: '4',\n    title: 'Platinum Status',\n    description: 'Achieve the highest status level with exclusive rewards',\n    requiredCoins: 1000,\n    reward: 'Platinum badge + 20% discount + Executive lounge + 2 extra vacation days + Personal assistant for 1 month',\n    isActive: true,\n    createdAt: new Date('2024-01-01').toISOString(),\n  },\n];\n\nexport const useCoinEventsStore = create<CoinEventsState>()(\n  persist(\n    (set, get) => ({\n      events: mockEvents,\n      isLoading: false,\n\n      getActiveEvents: () => {\n        return get().events.filter(event => event.isActive);\n      },\n\n      getUnlockedEvents: (userBalance: number) => {\n        return get().events.filter(\n          event => event.isActive && userBalance >= event.requiredCoins\n        );\n      },\n\n      getNextEvent: (userBalance: number) => {\n        const activeEvents = get().getActiveEvents();\n        const affordableEvents = activeEvents\n          .filter(event => event.requiredCoins > userBalance)\n          .sort((a, b) => a.requiredCoins - b.requiredCoins);\n        \n        return affordableEvents[0] || null;\n      },\n\n      addEvent: async (eventData) => {\n        set({ isLoading: true });\n        \n        // Simulate API call\n        await new Promise(resolve => setTimeout(resolve, 500));\n        \n        const newEvent: CoinEvent = {\n          ...eventData,\n          id: Date.now().toString(),\n          createdAt: new Date().toISOString(),\n        };\n        \n        set(state => ({\n          events: [...state.events, newEvent],\n          isLoading: false,\n        }));\n      },\n\n      updateEvent: async (eventId, updates) => {\n        set({ isLoading: true });\n        \n        // Simulate API call\n        await new Promise(resolve => setTimeout(resolve, 500));\n        \n        set(state => ({\n          events: state.events.map(event =>\n            event.id === eventId ? { ...event, ...updates } : event\n          ),\n          isLoading: false,\n        }));\n      },\n\n      deleteEvent: async (eventId) => {\n        set({ isLoading: true });\n        \n        // Simulate API call\n        await new Promise(resolve => setTimeout(resolve, 500));\n        \n        set(state => ({\n          events: state.events.filter(event => event.id !== eventId),\n          isLoading: false,\n        }));\n      },\n    }),\n    {\n      name: 'coin-events-storage',\n    }\n  )\n);\n\n// Export type alias for components\nexport type EventsStore = CoinEventsState;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/coins.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (236). Maximum allowed is 75.","line":91,"column":1,"nodeType":null,"messageId":"exceed","endLine":279,"endColumn":37},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":95,"column":16,"nodeType":"Literal","endLine":95,"endColumn":38},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (124). Maximum allowed is 30.","line":117,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":265,"endColumn":7},{"ruleId":"max-params","severity":1,"message":"Async method 'grantCoins' has too many parameters (4). Maximum allowed is 3.","line":123,"column":7,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":123,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\nexport interface CoinTransaction {\n  id: string;\n  userId: string;\n  amount: number; // positive for earning, negative for spending\n  reason: string;\n  type: 'ADMIN_GRANT' | 'RULE_EARNED' | 'BENEFIT_PURCHASE';\n  adminId?: string; // Who granted the coins (for ADMIN_GRANT)\n  benefitId?: string; // Which benefit was purchased (for BENEFIT_PURCHASE)\n  ruleId?: string; // Which rule was fulfilled (for RULE_EARNED)\n  createdAt: string;\n}\n\nexport interface CoinRule {\n  id: string;\n  title: string;\n  description: string;\n  coinAmount: number;\n  isActive: boolean;\n  createdAt: string;\n}\n\nexport interface UserCoinBalance {\n  userId: string;\n  totalEarned: number;\n  totalSpent: number;\n  currentBalance: number;\n  lastUpdated: string;\n}\n\nexport interface CoinsState {\n  transactions: CoinTransaction[];\n  rules: CoinRule[];\n  balances: UserCoinBalance[];\n  isLoading: boolean;\n  \n  // Coin distribution by admin\n  grantCoins: (userId: string, amount: number, reason: string, adminId: string) => Promise<void>;\n  \n  // User coin management\n  getUserBalance: (userId: string) => UserCoinBalance;\n  getUserTransactions: (userId: string) => CoinTransaction[];\n  getAllTransactions: () => CoinTransaction[];\n  \n  // Rules management\n  getCoinRules: () => CoinRule[];\n  addCoinRule: (rule: Omit<CoinRule, 'id' | 'createdAt'>) => Promise<void>;\n  updateCoinRule: (ruleId: string, updates: Partial<CoinRule>) => Promise<void>;\n  deleteCoinRule: (ruleId: string) => Promise<void>;\n  \n  // Internal methods\n  updateUserBalance: (userId: string) => void;\n}\n\n// Mock data\nconst mockTransactions: CoinTransaction[] = [\n  {\n    id: '1',\n    userId: '1',\n    amount: 50,\n    reason: 'Willkommensbonus',\n    type: 'ADMIN_GRANT',\n    adminId: '2',\n    createdAt: '2024-12-01T10:00:00Z'\n  },\n  {\n    id: '2',\n    userId: '1',\n    amount: 25,\n    reason: 'Überstunden geleistet',\n    type: 'ADMIN_GRANT',\n    adminId: '2',\n    createdAt: '2024-12-15T14:30:00Z'\n  },\n  {\n    id: '3',\n    userId: '3',\n    amount: 30,\n    reason: 'Projektabschluss erfolgreich',\n    type: 'ADMIN_GRANT',\n    adminId: '2',\n    createdAt: '2024-12-10T09:15:00Z'\n  }\n];\n\nconst mockRules: CoinRule[] = [\n  {\n    id: '1',\n    title: 'Schulung abgeschlossen',\n    description: 'Für jede erfolgreich abgeschlossene Schulung',\n    coinAmount: 20,\n    isActive: true,\n    createdAt: '2024-11-01T10:00:00Z'\n  },\n  {\n    id: '2',\n    title: 'Keine Krankheitstage im Monat',\n    description: 'Bonus für komplette Anwesenheit im Monat',\n    coinAmount: 15,\n    isActive: true,\n    createdAt: '2024-11-01T10:00:00Z'\n  },\n  {\n    id: '3',\n    title: 'Überstunden (>5h/Monat)',\n    description: 'Zusätzliche Coins für Flexibilität',\n    coinAmount: 10,\n    isActive: true,\n    createdAt: '2024-11-01T10:00:00Z'\n  }\n];\n\nexport const useCoinsStore = create<CoinsState>()(\n  persist(\n    (set, get) => ({\n      transactions: mockTransactions,\n      rules: mockRules,\n      balances: [],\n      isLoading: false,\n\n      grantCoins: async (userId: string, amount: number, reason: string, adminId: string) => {\n        set({ isLoading: true });\n        \n        try {\n          // Simulate API call\n          await new Promise(resolve => setTimeout(resolve, 500));\n          \n          const newTransaction: CoinTransaction = {\n            id: Date.now().toString(),\n            userId,\n            amount,\n            reason,\n            type: 'ADMIN_GRANT',\n            adminId,\n            createdAt: new Date().toISOString()\n          };\n          \n          set(state => ({\n            transactions: [newTransaction, ...state.transactions],\n            isLoading: false\n          }));\n\n          // Update user balance\n          get().updateUserBalance(userId);\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      getUserBalance: (userId: string) => {\n        const transactions = get().transactions.filter(t => t.userId === userId);\n        const totalEarned = transactions\n          .filter(t => t.amount > 0)\n          .reduce((sum, t) => sum + t.amount, 0);\n        const totalSpent = Math.abs(transactions\n          .filter(t => t.amount < 0)\n          .reduce((sum, t) => sum + t.amount, 0));\n        const currentBalance = totalEarned - totalSpent;\n\n        const existingBalance = get().balances.find(b => b.userId === userId);\n        if (existingBalance) {\n          return {\n            ...existingBalance,\n            totalEarned,\n            totalSpent,\n            currentBalance,\n            lastUpdated: new Date().toISOString()\n          };\n        }\n\n        return {\n          userId,\n          totalEarned,\n          totalSpent,\n          currentBalance,\n          lastUpdated: new Date().toISOString()\n        };\n      },\n\n      getUserTransactions: (userId: string) => {\n        return get().transactions\n          .filter(t => t.userId === userId)\n          .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n      },\n\n      getAllTransactions: () => {\n        return get().transactions\n          .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n      },\n\n      getCoinRules: () => {\n        return get().rules.filter(rule => rule.isActive)\n          .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n      },\n\n      addCoinRule: async (rule) => {\n        set({ isLoading: true });\n        \n        try {\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          const newRule: CoinRule = {\n            ...rule,\n            id: Date.now().toString(),\n            createdAt: new Date().toISOString()\n          };\n          \n          set(state => ({\n            rules: [newRule, ...state.rules],\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      updateCoinRule: async (ruleId: string, updates: Partial<CoinRule>) => {\n        set({ isLoading: true });\n        \n        try {\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          set(state => ({\n            rules: state.rules.map(rule =>\n              rule.id === ruleId ? { ...rule, ...updates } : rule\n            ),\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      deleteCoinRule: async (ruleId: string) => {\n        set({ isLoading: true });\n        \n        try {\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          set(state => ({\n            rules: state.rules.filter(rule => rule.id !== ruleId),\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      updateUserBalance: (userId: string) => {\n        const balance = get().getUserBalance(userId);\n        \n        set(state => ({\n          balances: [\n            ...state.balances.filter(b => b.userId !== userId),\n            balance\n          ]\n        }));\n      }\n    }),\n    {\n      name: 'coins-storage',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({ \n        transactions: state.transactions,\n        rules: state.rules,\n        balances: state.balances\n      }),\n    }\n  )\n);\n\n// Export type alias for components\nexport type CoinsStore = CoinsState;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/dashboardInfo.ts","messages":[{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":65,"column":19,"nodeType":"Literal","endLine":65,"endColumn":41},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":83,"column":19,"nodeType":"Literal","endLine":83,"endColumn":41},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (359). Maximum allowed is 75.","line":100,"column":1,"nodeType":null,"messageId":"exceed","endLine":456,"endColumn":3},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":101,"column":19,"nodeType":"Literal","endLine":101,"endColumn":41},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (262). Maximum allowed is 30.","line":115,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":445,"endColumn":7},{"ruleId":"max-lines-per-function","severity":1,"message":"Async method 'createItem' has too many lines (46). Maximum allowed is 30.","line":149,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":205,"endColumn":8},{"ruleId":"max-statements","severity":1,"message":"Async method 'createItem' has too many statements (16). Maximum allowed is 15.","line":149,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":205,"endColumn":8},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":172,"column":35,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":172,"endColumn":37,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5344,5346],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Async method 'updateItem' has too many lines (47). Maximum allowed is 30.","line":207,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":262,"endColumn":8},{"ruleId":"max-statements","severity":1,"message":"Async method 'updateItem' has too many statements (21). Maximum allowed is 15.","line":207,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":262,"endColumn":8},{"ruleId":"complexity","severity":1,"message":"Async method 'updateItem' has a complexity of 11. Maximum allowed is 10.","line":207,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":262,"endColumn":8},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":233,"column":37,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":233,"endColumn":39,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7280,7282],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Method 'getActiveItems' has too many lines (40). Maximum allowed is 30.","line":314,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":364,"endColumn":8}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Dashboard Info Store\n * \n * Zustand store for managing dashboard info items that admins can upload\n * and users can view in their dashboard news section.\n */\n\nimport { v4 as uuidv4 } from 'uuid';\nimport { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\nimport { \n  DashboardInfoStore, \n  DashboardInfo, \n  DashboardInfoFile,\n  CreateDashboardInfoForm,\n  UpdateDashboardInfoForm,\n  FileValidationResult,\n  DashboardInfoFileType,\n  SupportedMimeType,\n  DashboardInfoStats\n} from '../types/dashboardInfo';\n\n/**\n * Default display configuration for dashboard info\n */\nconst defaultDisplayConfig = {\n  maxItems: 5,\n  showDescriptions: true,\n  showDates: true,\n  cardStyle: 'expanded' as const\n};\n\n/**\n * File type validation mapping\n */\nconst MIME_TYPE_MAP: Record<string, DashboardInfoFileType> = {\n  'image/png': 'image',\n  'image/jpeg': 'image',\n  'image/jpg': 'image',\n  'image/svg+xml': 'image',\n  'application/pdf': 'pdf'\n};\n\n/**\n * Maximum file size (10MB)\n */\nconst MAX_FILE_SIZE = 10 * 1024 * 1024;\n\n/**\n * Mock data for demonstration\n */\nconst mockDashboardInfoItems: DashboardInfo[] = [\n  {\n    id: 'info-1',\n    title: 'Neues Urlaubsverfahren 2025',\n    description: 'Ab sofort gelten neue Regelungen für die Urlaubsbeantragung. Bitte beachten Sie die aktualisierten Fristen und Verfahren.',\n    file: {\n      id: 'file-1',\n      filename: 'urlaubsverfahren-2025.pdf',\n      mimeType: 'application/pdf',\n      type: 'pdf',\n      size: 245760,\n      data: 'data:application/pdf;base64,JVBERi0xLjQKJdPr6eEKMSAwIG9iago8PAovVGl0bGUgKE5ldWVzIFVybGF1YnN2ZXJmYWhyZW4gMjAyNSkKL1Byb2R1Y2VyIChIUlRoaXMpCi9DcmVhdGlvbkRhdGUgKEQ6MjAyNTA2MjQwMDAwMDBaKQo+PgplbmRvYmoK',\n      uploadedAt: '2025-06-24T10:30:00Z'\n    },\n    isActive: true,\n    createdAt: '2025-06-24T10:30:00Z',\n    updatedAt: '2025-06-24T10:30:00Z',\n    createdBy: 'admin-1'\n  },\n  {\n    id: 'info-2',\n    title: 'Team Building Event 2025',\n    description: 'Freut euch auf unser jährliches Team Building Event! Mehr Details in der angehängten Einladung.',\n    file: {\n      id: 'file-2',\n      filename: 'team-building-2025.jpg',\n      mimeType: 'image/jpeg',\n      type: 'image',\n      size: 156720,\n      data: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k=',\n      uploadedAt: '2025-06-23T14:15:00Z'\n    },\n    isActive: true,\n    createdAt: '2025-06-23T14:15:00Z',\n    updatedAt: '2025-06-23T14:15:00Z',\n    createdBy: 'admin-1'\n  },\n  {\n    id: 'info-3',\n    title: 'Neue Bürozeiten',\n    description: 'Ab dem 1. Juli gelten neue flexible Bürozeiten. Alle Details finden Sie im angehängten Dokument.',\n    file: {\n      id: 'file-3',\n      filename: 'neue-buerozeiten.pdf',\n      mimeType: 'application/pdf',\n      type: 'pdf',\n      size: 189440,\n      data: 'data:application/pdf;base64,JVBERi0xLjQKJdPr6eEKMSAwIG9iago8PAovVGl0bGUgKE5ldWUgQsO8cm96ZWl0ZW4pCi9Qcm9kdWNlciAoSFJUaGlzKQovQ3JlYXRpb25EYXRlIChEOjIwMjUwNjIyMDAwMDAwWikKPj4KZW5kb2JqCg==',\n      uploadedAt: '2025-06-22T09:00:00Z'\n    },\n    isActive: true,\n    createdAt: '2025-06-22T09:00:00Z',\n    updatedAt: '2025-06-22T09:00:00Z',\n    createdBy: 'admin-1'\n  }\n];\n\n/**\n * Dashboard Info Store Implementation\n */\nexport const useDashboardInfoStore = create<DashboardInfoStore>()(\n  persist(\n    (set, get) => ({\n      // State\n      items: mockDashboardInfoItems,\n      uploadProgress: {},\n      isLoading: false,\n      error: null,\n      displayConfig: defaultDisplayConfig,\n      sortBy: 'newest',\n      filters: {},\n\n      // Actions\n      loadItems: async () => {\n        set({ isLoading: true, error: null });\n        \n        try {\n          // Simulate API call\n          await new Promise(resolve => setTimeout(resolve, 500));\n          \n          const { items } = get();\n          // Filter out expired items\n          const activeItems = items.filter(item => {\n            if (!item.expiresAt) return true;\n            return new Date(item.expiresAt) > new Date();\n          });\n          \n          set({ items: activeItems, isLoading: false });\n        } catch (error) {\n          set({ \n            error: error instanceof Error ? error.message : 'Failed to load items',\n            isLoading: false \n          });\n        }\n      },\n\n      createItem: async (data: CreateDashboardInfoForm): Promise<DashboardInfo> => {\n        if (!data.file) {\n          throw new Error('File is required');\n        }\n\n        const { validateFile, fileToBase64 } = get();\n        const validation = validateFile(data.file);\n        \n        if (!validation.isValid) {\n          throw new Error(validation.error);\n        }\n\n        set({ isLoading: true, error: null });\n\n        try {\n          // Convert file to base64\n          const base64Data = await fileToBase64(data.file);\n          \n          // Create file object\n          const file: DashboardInfoFile = {\n            id: uuidv4(),\n            filename: data.file.name,\n            mimeType: data.file.type as SupportedMimeType,\n            type: validation.type || 'pdf',\n            size: data.file.size,\n            data: base64Data,\n            uploadedAt: new Date().toISOString()\n          };\n\n          // Create dashboard info item\n          const newItem: DashboardInfo = {\n            id: uuidv4(),\n            title: data.title,\n            description: data.description || undefined,\n            file,\n            isActive: true,\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n            createdBy: 'current-admin', // TODO: Get from auth store\n            expiresAt: data.expiresAt\n          };\n\n          const { items } = get();\n          set({ \n            items: [newItem, ...items], \n            isLoading: false \n          });\n\n          return newItem;\n        } catch (error) {\n          set({ \n            error: error instanceof Error ? error.message : 'Failed to create item',\n            isLoading: false \n          });\n          throw error;\n        }\n      },\n\n      updateItem: async (id: string, data: UpdateDashboardInfoForm): Promise<DashboardInfo> => {\n        const { items, validateFile, fileToBase64 } = get();\n        const itemIndex = items.findIndex(item => item.id === id);\n        \n        if (itemIndex === -1) {\n          throw new Error('Item not found');\n        }\n\n        set({ isLoading: true, error: null });\n\n        try {\n          const existingItem = items[itemIndex];\n          let updatedFile = existingItem.file;\n\n          // Handle file replacement\n          if (data.file) {\n            const validation = validateFile(data.file);\n            if (!validation.isValid) {\n              throw new Error(validation.error);\n            }\n\n            const base64Data = await fileToBase64(data.file);\n            updatedFile = {\n              id: uuidv4(),\n              filename: data.file.name,\n              mimeType: data.file.type as SupportedMimeType,\n              type: validation.type || 'pdf',\n              size: data.file.size,\n              data: base64Data,\n              uploadedAt: new Date().toISOString()\n            };\n          }\n\n          const updatedItem: DashboardInfo = {\n            ...existingItem,\n            title: data.title ?? existingItem.title,\n            description: data.description !== undefined ? data.description : existingItem.description,\n            file: updatedFile,\n            isActive: data.isActive ?? existingItem.isActive,\n            updatedAt: new Date().toISOString(),\n            expiresAt: data.expiresAt !== undefined ? data.expiresAt : existingItem.expiresAt\n          };\n\n          const updatedItems = [...items];\n          updatedItems[itemIndex] = updatedItem;\n\n          set({ items: updatedItems, isLoading: false });\n          return updatedItem;\n        } catch (error) {\n          set({ \n            error: error instanceof Error ? error.message : 'Failed to update item',\n            isLoading: false \n          });\n          throw error;\n        }\n      },\n\n      deleteItem: async (id: string): Promise<void> => {\n        const { items } = get();\n        set({ isLoading: true, error: null });\n\n        try {\n          // Simulate API call\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          const updatedItems = items.filter(item => item.id !== id);\n          set({ items: updatedItems, isLoading: false });\n        } catch (error) {\n          set({ \n            error: error instanceof Error ? error.message : 'Failed to delete item',\n            isLoading: false \n          });\n          throw error;\n        }\n      },\n\n      toggleActive: async (id: string): Promise<void> => {\n        const { items } = get();\n        const itemIndex = items.findIndex(item => item.id === id);\n        \n        if (itemIndex === -1) {\n          throw new Error('Item not found');\n        }\n\n        set({ isLoading: true, error: null });\n\n        try {\n          // Simulate API call\n          await new Promise(resolve => setTimeout(resolve, 200));\n          \n          const updatedItems = [...items];\n          updatedItems[itemIndex] = {\n            ...updatedItems[itemIndex],\n            isActive: !updatedItems[itemIndex].isActive,\n            updatedAt: new Date().toISOString()\n          };\n\n          set({ items: updatedItems, isLoading: false });\n        } catch (error) {\n          set({ \n            error: error instanceof Error ? error.message : 'Failed to toggle item',\n            isLoading: false \n          });\n          throw error;\n        }\n      },\n\n      getActiveItems: (): DashboardInfo[] => {\n        const { items, sortBy, filters } = get();\n        \n        const filteredItems = items.filter(item => {\n          // Only active items\n          if (!item.isActive) return false;\n          \n          // Check expiry\n          if (item.expiresAt && new Date(item.expiresAt) <= new Date()) {\n            return false;\n          }\n\n          // Apply filters\n          if (filters.fileType && item.file.type !== filters.fileType) {\n            return false;\n          }\n\n          if (filters.dateRange) {\n            const createdDate = new Date(item.createdAt);\n            const start = new Date(filters.dateRange.start);\n            const end = new Date(filters.dateRange.end);\n            if (createdDate < start || createdDate > end) {\n              return false;\n            }\n          }\n\n          return true;\n        });\n\n        // Apply sorting\n        filteredItems.sort((a, b) => {\n          switch (sortBy) {\n            case 'newest':\n              return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\n            case 'oldest':\n              return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime();\n            case 'title-asc':\n              return a.title.localeCompare(b.title);\n            case 'title-desc':\n              return b.title.localeCompare(a.title);\n            case 'size-asc':\n              return a.file.size - b.file.size;\n            case 'size-desc':\n              return b.file.size - a.file.size;\n            default:\n              return 0;\n          }\n        });\n\n        return filteredItems;\n      },\n\n      getStats: (): DashboardInfoStats => {\n        const { items } = get();\n        const now = new Date();\n        \n        const activeItems = items.filter(item => item.isActive);\n        const expiredItems = items.filter(item => \n          item.expiresAt && new Date(item.expiresAt) <= now\n        );\n        \n        const totalStorageUsed = items.reduce((total, item) => total + item.file.size, 0);\n        const imageCount = items.filter(item => item.file.type === 'image').length;\n        const pdfCount = items.filter(item => item.file.type === 'pdf').length;\n\n        return {\n          totalItems: items.length,\n          activeItems: activeItems.length,\n          expiredItems: expiredItems.length,\n          totalStorageUsed,\n          imageCount,\n          pdfCount\n        };\n      },\n\n      setSortBy: (sortBy) => {\n        set({ sortBy });\n      },\n\n      setFilters: (newFilters) => {\n        const { filters } = get();\n        set({ filters: { ...filters, ...newFilters } });\n      },\n\n      updateDisplayConfig: (config) => {\n        const { displayConfig } = get();\n        set({ displayConfig: { ...displayConfig, ...config } });\n      },\n\n      validateFile: (file: File): FileValidationResult => {\n        // Check file size\n        if (file.size > MAX_FILE_SIZE) {\n          return {\n            isValid: false,\n            error: `Datei ist zu groß. Maximale Größe: ${get().formatFileSize(MAX_FILE_SIZE)}`\n          };\n        }\n\n        // Check file type\n        const fileType = MIME_TYPE_MAP[file.type];\n        if (!fileType) {\n          return {\n            isValid: false,\n            error: 'Nicht unterstützter Dateityp. Erlaubt sind: PNG, JPG, SVG, PDF'\n          };\n        }\n\n        return {\n          isValid: true,\n          type: fileType\n        };\n      },\n\n      fileToBase64: (file: File): Promise<string> => {\n        return new Promise((resolve, reject) => {\n          const reader = new FileReader();\n          reader.readAsDataURL(file);\n          reader.onload = () => resolve(reader.result as string);\n          reader.onerror = error => reject(error);\n        });\n      },\n\n      formatFileSize: (bytes: number): string => {\n        if (bytes === 0) return '0 B';\n        \n        const k = 1024;\n        const sizes = ['B', 'KB', 'MB', 'GB'];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        \n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n      }\n    }),\n    {\n      name: 'dashboard-info-store',\n      partialize: (state) => ({\n        items: state.items,\n        displayConfig: state.displayConfig,\n        sortBy: state.sortBy,\n        filters: state.filters\n      })\n    }\n  )\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/gamification.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":60,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1863,1866],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1863,1866],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":69,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2146,2149],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2146,2149],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"max-params","severity":1,"message":"Arrow function has too many parameters (4). Maximum allowed is 3.","line":70,"column":11,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":70,"endColumn":13},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (224). Maximum allowed is 30.","line":91,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":358,"endColumn":7},{"ruleId":"max-lines-per-function","severity":1,"message":"Method 'awardXP' has too many lines (47). Maximum allowed is 30.","line":95,"column":16,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":151,"endColumn":8},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (300). Maximum allowed is 75.","line":103,"column":1,"nodeType":null,"messageId":"exceed","endLine":368,"endColumn":3},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":129,"column":76,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":129,"endColumn":78,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4148,4150],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":153,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4927,4930],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4927,4930],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":239,"column":15,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":239,"endColumn":61},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":287,"column":33,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":287,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9067,9069],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":288,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":288,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9106,9108],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Method 'getUserGamificationSummary' has too many lines (31). Maximum allowed is 30.","line":321,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":357,"endColumn":8}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\nimport { SKILL_IDS } from '../types/avatar';\nimport { \n  XPEventData, \n  GamificationConfig, \n  DEFAULT_GAMIFICATION_CONFIG,\n  NotificationEvent\n} from '../types/gamification';\n\nimport { useAchievementsStore } from './achievements';\nimport { useAvatarStore } from './avatar';\n\ninterface GamificationState {\n  // Configuration\n  config: GamificationConfig;\n  \n  // Event tracking\n  notifications: NotificationEvent[];\n  \n  // Main actions\n  awardXP: (_eventData: XPEventData) => void;\n  awardCoins: (_userId: string, _amount: number, _reason: string) => void;\n  \n  // Event handlers for different activities\n  onTrainingCompleted: (_userId: string, _trainingId: string, _passed: boolean) => void;\n  onPunctualCheckin: (_userId: string, _streakDay?: number) => void;\n  onCoinsEarned: (_userId: string, _amount: number, _reason: string) => void;\n  onFeedbackGiven: (_userId: string, _feedbackId: string) => void;\n  onDailyLogin: (_userId: string) => void;\n  \n  // Configuration management\n  updateConfig: (_updates: Partial<GamificationConfig>) => void;\n  \n  // Notifications\n  getNotifications: (_userId: string) => NotificationEvent[];\n  markNotificationAsRead: (_notificationId: string) => void;\n  clearNotifications: (_userId: string) => void;\n  \n  // Statistics and leaderboards\n  getLeaderboard: (_skillId?: string, _limit?: number) => Array<{\n    userId: string;\n    userName: string;\n    xp: number;\n    level: number;\n  }>;\n  \n  // Integration helpers\n  initializeUserGamification: (_userId: string) => void;\n  getUserGamificationSummary: (_userId: string) => {\n    level: number;\n    totalXP: number;\n    achievements: number;\n    weeklyXP: number;\n    rank: number;\n  };\n  \n  // Helper methods\n  getXPDescription: (_type: string, metadata: Record<string, any>) => string;\n  getDefaultSkillForEventType: (_type: string) => string | null;\n}\n\n// Helper function to calculate XP amount based on event type\nconst calculateXPAmount = (\n  type: string, \n  xpAmount: number | undefined, \n  config: GamificationConfig, \n  metadata: Record<string, any>\n): number => {\n  if (xpAmount) return xpAmount;\n  \n  switch (type) {\n    case 'training_completed':\n      return config.xpRates.trainingCompleted;\n    case 'punctual_checkin':\n      return config.xpRates.punctualCheckin;\n    case 'coins_earned':\n      return Math.floor((metadata.coinAmount || 0) * config.xpRates.coinsEarned);\n    case 'feedback_given':\n      return config.xpRates.feedbackGiven;\n    case 'daily_login':\n      return config.xpRates.dailyLogin;\n    default:\n      return 0;\n  }\n};\n\nexport const useGamificationStore = create<GamificationState>()(\n  persist(\n    (set, get) => ({\n      config: DEFAULT_GAMIFICATION_CONFIG,\n      notifications: [],\n      \n      awardXP: (eventData) => {\n        const { type, userId, skillIds, xpAmount, metadata = {} } = eventData;\n        const {config} = get();\n        \n        const finalXPAmount = calculateXPAmount(type, xpAmount, config, metadata);\n        if (!finalXPAmount || finalXPAmount <= 0) return;\n\n        const avatarStore = useAvatarStore.getState();\n        const achievementsStore = useAchievementsStore.getState();\n\n        // Award XP to specific skills or general\n        if (skillIds && skillIds.length > 0) {\n          skillIds.forEach(skillId => {\n            avatarStore.addXP({\n              userId,\n              skillId,\n              xpAmount: finalXPAmount,\n              description: get().getXPDescription(type, metadata),\n              metadata: { type, ...metadata }\n            });\n          });\n        } else {\n          // Award to default skill based on type\n          const defaultSkillId = get().getDefaultSkillForEventType(type);\n          avatarStore.addXP({\n            userId,\n            skillId: defaultSkillId,\n            xpAmount: finalXPAmount,\n            description: get().getXPDescription(type, metadata),\n            metadata: { type, ...metadata }\n          });\n        }\n\n        // Update achievement progress\n        achievementsStore.updateProgress(userId, type, metadata.coinAmount || 1, metadata);\n\n        // Create notification\n        set(state => {\n          const notification: NotificationEvent = {\n            id: `xp-${userId}-${Date.now()}`,\n            userId,\n            type: skillIds ? 'skill_level_up' : 'level_up',\n            title: 'XP erhalten!',\n            message: `+${finalXPAmount} XP für ${get().getXPDescription(type, metadata)}`,\n            data: {\n              xpGained: finalXPAmount,\n              skillId: skillIds?.[0]\n            },\n            isRead: false,\n            createdAt: new Date().toISOString()\n          };\n\n          return {\n            notifications: [notification, ...state.notifications.slice(0, 99)]\n          };\n        });\n      },\n      \n      getXPDescription: (type: string, metadata: Record<string, any>) => {\n        switch (type) {\n          case 'training_completed':\n            return `Schulung abgeschlossen`;\n          case 'punctual_checkin':\n            return metadata.streakDay > 1 \n              ? `Pünktlich (${metadata.streakDay} Tage Serie)`\n              : 'Pünktlich gestempelt';\n          case 'coins_earned':\n            return `${metadata.coinAmount} Coins verdient: ${metadata.reason}`;\n          case 'feedback_given':\n            return 'Feedback gegeben';\n          case 'daily_login':\n            return 'Täglicher Login';\n          case 'manual':\n            return metadata.reason || 'Manuell vergeben';\n          default:\n            return 'XP erhalten';\n        }\n      },\n      \n      getDefaultSkillForEventType: (type: string) => {\n        switch (type) {\n          case 'training_completed':\n          case 'training_passed':\n            return SKILL_IDS.KNOWLEDGE;\n          case 'punctual_checkin':\n          case 'feedback_given':\n          case 'daily_login':\n            return SKILL_IDS.LOYALTY;\n          case 'coins_earned':\n            return SKILL_IDS.HUSTLE;\n          default:\n            return null;\n        }\n      },\n\n      awardCoins: (userId: string, amount: number, reason: string) => {\n        // This would integrate with the existing coins store\n        // For now, we just track it for XP purposes\n        get().awardXP({\n          type: 'coins_earned',\n          userId,\n          metadata: { coinAmount: amount, reason }\n        });\n      },\n\n      onTrainingCompleted: (userId: string, trainingId: string, passed: boolean) => {\n        if (!passed) return;\n        \n        get().awardXP({\n          type: 'training_completed',\n          userId,\n          skillIds: [SKILL_IDS.KNOWLEDGE],\n          metadata: { trainingId, passed }\n        });\n      },\n\n      onPunctualCheckin: (userId: string, streakDay = 1) => {\n        get().awardXP({\n          type: 'punctual_checkin',\n          userId,\n          skillIds: [SKILL_IDS.LOYALTY],\n          metadata: { streakDay }\n        });\n      },\n\n      onCoinsEarned: (userId: string, amount: number, reason: string) => {\n        get().awardXP({\n          type: 'coins_earned',\n          userId,\n          skillIds: [SKILL_IDS.HUSTLE],\n          metadata: { coinAmount: amount, reason }\n        });\n      },\n\n      onFeedbackGiven: (userId: string, feedbackId: string) => {\n        get().awardXP({\n          type: 'feedback_given',\n          userId,\n          skillIds: [SKILL_IDS.LOYALTY],\n          metadata: { feedbackId }\n        });\n      },\n\n      onDailyLogin: (userId: string) => {\n        const today = new Date().toISOString().split('T')[0];\n        const lastLogin = localStorage.getItem(`lastLogin-${userId}`);\n        \n        if (lastLogin !== today) {\n          localStorage.setItem(`lastLogin-${userId}`, today);\n          get().awardXP({\n            type: 'daily_login',\n            userId,\n            metadata: { date: today }\n          });\n        }\n      },\n\n\n      updateConfig: (updates: Partial<GamificationConfig>) => {\n        set(state => ({\n          config: { ...state.config, ...updates }\n        }));\n      },\n\n      getNotifications: (_userId: string) => {\n        return get().notifications.filter(n => n.userId === _userId);\n      },\n\n      markNotificationAsRead: (_notificationId: string) => {\n        set(state => ({\n          notifications: state.notifications.map(n =>\n            n.id === _notificationId ? { ...n, isRead: true } : n\n          )\n        }));\n      },\n\n      clearNotifications: (_userId: string) => {\n        set(state => ({\n          notifications: state.notifications.filter(n => n.userId !== _userId)\n        }));\n      },\n\n      getLeaderboard: (_skillId?: string, limit = 10) => {\n        const avatarStore = useAvatarStore.getState();\n        const allAvatars = Object.values(avatarStore.userAvatars);\n        \n        const leaderboard = allAvatars.map(avatar => {\n          let xp = avatar.totalXP;\n          let {level} = avatar;\n          \n          if (_skillId) {\n            const skill = avatar.skills.find(s => s.id === _skillId);\n            xp = skill?.totalXP || 0;\n            level = skill?.level || 1;\n          }\n          \n          return {\n            userId: avatar.userId,\n            userName: `User ${avatar.userId}`, // This would come from user store\n            xp,\n            level\n          };\n        });\n\n        return leaderboard\n          .sort((a, b) => b.xp - a.xp)\n          .slice(0, limit);\n      },\n\n      initializeUserGamification: (_userId: string) => {\n        const avatarStore = useAvatarStore.getState();\n        const existingAvatar = avatarStore.getUserAvatar(_userId);\n        \n        if (!existingAvatar) {\n          avatarStore.createUserAvatar(_userId);\n        }\n        \n        // Award welcome XP\n        get().awardXP({\n          type: 'manual',\n          userId: _userId,\n          xpAmount: 25,\n          metadata: { reason: 'Willkommen bei HRthis!' }\n        });\n      },\n\n      getUserGamificationSummary: (_userId: string) => {\n        const avatarStore = useAvatarStore.getState();\n        const achievementsStore = useAchievementsStore.getState();\n        \n        const userAvatar = avatarStore.getUserAvatar(_userId);\n        const userAchievements = achievementsStore.getUserAchievements(_userId);\n        const leaderboard = get().getLeaderboard();\n        \n        if (!userAvatar) {\n          return {\n            level: 1,\n            totalXP: 0,\n            achievements: 0,\n            weeklyXP: 0,\n            rank: leaderboard.length + 1\n          };\n        }\n\n        // Calculate weekly XP (this would need proper date tracking)\n        const weeklyXP = avatarStore.getXPEvents(_userId, 50)\n          .filter(event => {\n            const eventDate = new Date(event.createdAt);\n            const weekAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);\n            return eventDate >= weekAgo;\n          })\n          .reduce((sum, event) => sum + event.xpAmount, 0);\n\n        const rank = leaderboard.findIndex(entry => entry.userId === _userId) + 1;\n\n        return {\n          level: userAvatar.level,\n          totalXP: userAvatar.totalXP,\n          achievements: userAchievements.length,\n          weeklyXP,\n          rank: rank || leaderboard.length + 1\n        };\n      }\n    }),\n    {\n      name: 'gamification-storage',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({\n        config: state.config,\n        notifications: state.notifications.slice(0, 50) // Keep recent notifications\n      })\n    }\n  )\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/learning.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (363). Maximum allowed is 75.","line":83,"column":1,"nodeType":null,"messageId":"exceed","endLine":428,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (165). Maximum allowed is 30.","line":222,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":423,"endColumn":7},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":252,"column":35,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":252,"endColumn":37,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6432,6434],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":291,"column":90,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":291,"endColumn":92,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7535,7537],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":314,"column":13,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":314,"endColumn":44},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":315,"column":13,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":315,"endColumn":41},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":334,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":334,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8754,8756],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":413,"column":30,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":413,"endColumn":32,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[11083,11085],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\nimport { \n  VideoContent, \n  LearningProgress, \n  TestResult, \n  UserLevel, \n  Avatar, \n  Badge, \n  TrainingStatistics,\n  LevelConfig,\n  TrainingCategory,\n  TestQuestion,\n  AvatarAccessory,\n  ShopItem,\n  LearningEvent\n} from '../types/learning';\n\n// Level configuration\nconst LEVEL_CONFIGS: LevelConfig[] = [\n  { level: 1, title: \"Newcomer\", xp: 0 },\n  { level: 2, title: \"Beginner\", xp: 50 },\n  { level: 3, title: \"Schulungs-Kid\", xp: 150 },\n  { level: 4, title: \"Knowledge Seeker\", xp: 300 },\n  { level: 5, title: \"Certified Champ\", xp: 500 },\n  { level: 6, title: \"Expert Learner\", xp: 750 },\n  { level: 7, title: \"Master Student\", xp: 1000 },\n  { level: 8, title: \"Team Brain\", xp: 1500 },\n  { level: 9, title: \"Wisdom Keeper\", xp: 2000 },\n  { level: 10, title: \"Legend\", xp: 3000 }\n];\n\n// Mock video content\nconst mockVideos: VideoContent[] = [\n  {\n    id: 'video1',\n    url: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',\n    title: 'Datenschutz Grundlagen',\n    description: 'Lernen Sie die wichtigsten DSGVO-Richtlinien kennen',\n    duration: 600,\n    category: TrainingCategory.COMPLIANCE,\n    transcription: {\n      id: 'trans1',\n      videoId: 'video1',\n      text: 'Willkommen zur Datenschutz-Schulung...',\n      segments: [\n        { start: 0, end: 5, text: 'Willkommen zur Datenschutz-Schulung.' },\n        { start: 5, end: 10, text: 'Heute lernen wir die Grundlagen der DSGVO.' }\n      ],\n      language: 'de',\n      generatedAt: new Date()\n    }\n  },\n  {\n    id: 'video2',\n    url: 'https://www.youtube.com/watch?v=abc123',\n    title: 'Arbeitssicherheit im Büro',\n    description: 'Ergonomie und Sicherheit am Arbeitsplatz',\n    duration: 480,\n    category: TrainingCategory.MANDATORY\n  }\n];\n\n// Mock test questions\nconst mockQuestions: Record<string, TestQuestion[]> = {\n  'video1': [\n    {\n      id: 'q1',\n      type: 'multiple-choice',\n      question: 'Was ist der Hauptzweck der DSGVO?',\n      options: [\n        'Datenschutz für Unternehmen',\n        'Schutz personenbezogener Daten',\n        'Verkauf von Daten',\n        'Datenspeicherung'\n      ],\n      correctAnswer: 'Schutz personenbezogener Daten',\n      points: 10,\n      explanation: 'Die DSGVO schützt die personenbezogenen Daten von EU-Bürgern.'\n    },\n    {\n      id: 'q2',\n      type: 'multiple-choice',\n      question: 'Wie lange dürfen personenbezogene Daten maximal gespeichert werden?',\n      options: [\n        'Unbegrenzt',\n        'Nur solange notwendig',\n        '10 Jahre',\n        '1 Jahr'\n      ],\n      correctAnswer: 'Nur solange notwendig',\n      points: 10\n    }\n  ]\n};\n\n// Mock badges\nconst availableBadges: Badge[] = [\n  {\n    id: 'perfect-score',\n    name: 'Perfektionist',\n    description: '100% in einem Test erreicht',\n    icon: '🎯',\n    earnedAt: new Date(),\n    category: 'achievement',\n    rarity: 'rare'\n  },\n  {\n    id: 'early-bird',\n    name: 'Frühaufsteher',\n    description: 'Erste Schulung vor 8 Uhr',\n    icon: '🌅',\n    earnedAt: new Date(),\n    category: 'special',\n    rarity: 'common'\n  },\n  {\n    id: 'week-warrior',\n    name: 'Wochenheld',\n    description: '5 Schulungen in einer Woche',\n    icon: '💪',\n    earnedAt: new Date(),\n    category: 'milestone',\n    rarity: 'epic'\n  }\n];\n\n// Mock avatar accessories\nconst mockAccessories: AvatarAccessory[] = [\n  {\n    id: 'glasses1',\n    type: 'glasses',\n    name: 'Nerd-Brille',\n    imageUrl: '/avatars/glasses/nerd.png',\n    price: 100\n  },\n  {\n    id: 'hat1',\n    type: 'hat',\n    name: 'Absolventenhut',\n    imageUrl: '/avatars/hats/graduation.png',\n    requiredLevel: 5\n  },\n  {\n    id: 'effect1',\n    type: 'effect',\n    name: 'Goldener Schein',\n    imageUrl: '/avatars/effects/golden-glow.png',\n    price: 500\n  }\n];\n\n// Mock shop items\nconst mockShopItems: ShopItem[] = [\n  {\n    id: 'shop1',\n    name: 'XP Boost (1 Tag)',\n    description: 'Verdoppelt deine XP für 24 Stunden',\n    type: 'boost',\n    price: 200,\n    imageUrl: '/shop/xp-boost.png',\n    available: true\n  },\n  {\n    id: 'shop2',\n    name: 'Legendäre Lootbox',\n    description: 'Enthält garantiert ein episches oder legendäres Item',\n    type: 'special',\n    price: 1000,\n    imageUrl: '/shop/legendary-box.png',\n    available: true,\n    limitedTime: true,\n    expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)\n  }\n];\n\ninterface LearningState {\n  // Video content\n  videos: VideoContent[];\n  currentVideo: VideoContent | null;\n  \n  // User progress\n  userProgress: Record<string, LearningProgress>;\n  testResults: TestResult[];\n  \n  // Gamification\n  userStats: TrainingStatistics | null;\n  userLevel: UserLevel | null;\n  userAvatar: Avatar | null;\n  userBadges: Badge[];\n  userCoins: number;\n  \n  // Shop & Items\n  shopItems: ShopItem[];\n  ownedItems: string[];\n  \n  // Events\n  activeEvents: LearningEvent[];\n  \n  // Questions\n  testQuestions: Record<string, TestQuestion[]>;\n  \n  // Actions\n  loadVideos: () => void;\n  selectVideo: (videoId: string) => void;\n  updateProgress: (videoId: string, watchedSeconds: number) => void;\n  completeVideo: (videoId: string) => void;\n  submitTestResult: (result: TestResult) => void;\n  calculateLevel: (xp: number) => UserLevel;\n  addXP: (amount: number) => void;\n  addCoins: (amount: number) => void;\n  awardBadge: (badgeId: string) => void;\n  purchaseItem: (itemId: string) => boolean;\n  equipAccessory: (accessoryId: string) => void;\n  getVideoQuestions: (videoId: string) => TestQuestion[];\n  getUserStatistics: (userId: string) => TrainingStatistics;\n}\n\nexport const useLearningStore = create<LearningState>()(\n  persist(\n    (set, get) => ({\n      videos: mockVideos,\n      currentVideo: null,\n      userProgress: {},\n      testResults: [],\n      userStats: null,\n      userLevel: { level: 1, title: 'Newcomer', xp: 0, nextLevelXp: 50 },\n      userAvatar: {\n        id: 'avatar1',\n        userId: 'user1',\n        baseModel: 'default',\n        accessories: [],\n        badges: [],\n        level: 1,\n        title: 'Newcomer'\n      },\n      userBadges: [],\n      userCoins: 0,\n      shopItems: mockShopItems,\n      ownedItems: [],\n      activeEvents: [],\n      testQuestions: mockQuestions,\n\n      loadVideos: () => {\n        // In production, this would fetch from API\n        set({ videos: mockVideos });\n      },\n\n      selectVideo: (videoId: string) => {\n        const video = get().videos.find(v => v.id === videoId);\n        set({ currentVideo: video || null });\n      },\n\n      updateProgress: (videoId: string, watchedSeconds: number) => {\n        const progress = get().userProgress;\n        const video = get().videos.find(v => v.id === videoId);\n        \n        if (!video) return;\n\n        const currentProgress = progress[videoId] || {\n          userId: 'user1',\n          videoId,\n          watchedSeconds: 0,\n          completed: false,\n          lastWatchedAt: new Date()\n        };\n\n        const newProgress = {\n          ...currentProgress,\n          watchedSeconds,\n          lastWatchedAt: new Date(),\n          completed: watchedSeconds >= video.duration * 0.9 // 90% watched = completed\n        };\n\n        set({\n          userProgress: {\n            ...progress,\n            [videoId]: newProgress\n          }\n        });\n\n        // Award XP for completion\n        if (newProgress.completed && !currentProgress.completed) {\n          get().addXP(50);\n          get().addCoins(10);\n        }\n      },\n\n      completeVideo: (videoId: string) => {\n        get().updateProgress(videoId, get().videos.find(v => v.id === videoId)?.duration || 0);\n      },\n\n      submitTestResult: (result: TestResult) => {\n        set(state => ({\n          testResults: [...state.testResults, result]\n        }));\n\n        // Award XP and coins based on score\n        const baseXP = 100;\n        const xpMultiplier = result.score / 100;\n        const earnedXP = Math.floor(baseXP * xpMultiplier);\n        \n        get().addXP(earnedXP);\n        get().addCoins(Math.floor(earnedXP / 5));\n\n        // Check for perfect score badge\n        if (result.score === 100) {\n          get().awardBadge('perfect-score');\n        }\n      },\n\n      calculateLevel: (xp: number) => {\n        let currentLevel = LEVEL_CONFIGS[0];\n        let nextLevel = LEVEL_CONFIGS[1];\n\n        for (let i = 0; i < LEVEL_CONFIGS.length; i++) {\n          if (xp >= LEVEL_CONFIGS[i].xp) {\n            currentLevel = LEVEL_CONFIGS[i];\n            nextLevel = LEVEL_CONFIGS[i + 1] || currentLevel;\n          }\n        }\n\n        return {\n          level: currentLevel.level,\n          title: currentLevel.title,\n          xp: xp,\n          nextLevelXp: nextLevel.xp\n        };\n      },\n\n      addXP: (amount: number) => {\n        const currentLevel = get().userLevel;\n        const newXP = (currentLevel?.xp || 0) + amount;\n        const newLevel = get().calculateLevel(newXP);\n\n        set({\n          userLevel: newLevel\n        });\n\n        // Update avatar level\n        set(state => ({\n          userAvatar: state.userAvatar ? {\n            ...state.userAvatar,\n            level: newLevel.level,\n            title: newLevel.title\n          } : null\n        }));\n      },\n\n      addCoins: (amount: number) => {\n        set(state => ({\n          userCoins: state.userCoins + amount\n        }));\n      },\n\n      awardBadge: (badgeId: string) => {\n        const badge = availableBadges.find(b => b.id === badgeId);\n        if (!badge) return;\n\n        const hasBadge = get().userBadges.some(b => b.id === badgeId);\n        if (!hasBadge) {\n          set(state => ({\n            userBadges: [...state.userBadges, badge]\n          }));\n        }\n      },\n\n      purchaseItem: (itemId: string) => {\n        const item = get().shopItems.find(i => i.id === itemId);\n        if (!item) return false;\n\n        if (get().userCoins < item.price) return false;\n\n        set(state => ({\n          userCoins: state.userCoins - item.price,\n          ownedItems: [...state.ownedItems, itemId]\n        }));\n\n        return true;\n      },\n\n      equipAccessory: (accessoryId: string) => {\n        const accessory = mockAccessories.find(a => a.id === accessoryId);\n        if (!accessory) return;\n\n        set(state => ({\n          userAvatar: state.userAvatar ? {\n            ...state.userAvatar,\n            accessories: [...state.userAvatar.accessories, accessory]\n          } : null\n        }));\n      },\n\n      getVideoQuestions: (videoId: string) => {\n        return get().testQuestions[videoId] || [];\n      },\n\n      getUserStatistics: (userId: string) => {\n        const progress = Object.values(get().userProgress);\n        const results = get().testResults;\n        const level = get().userLevel;\n\n        const completedTrainings = progress.filter(p => p.completed).length;\n        const perfectScores = results.filter(r => r.score === 100).length;\n        const totalWatchTime = progress.reduce((acc, p) => acc + p.watchedSeconds, 0);\n        const averageScore = results.length > 0 \n          ? results.reduce((acc, r) => acc + r.score, 0) / results.length \n          : 0;\n\n        return {\n          userId,\n          totalXP: level?.xp || 0,\n          totalCoins: get().userCoins,\n          completedTrainings,\n          perfectScores,\n          currentStreak: 0, // TODO: Implement streak logic\n          badges: get().userBadges,\n          averageScore,\n          totalWatchTime\n        };\n      }\n    }),\n    {\n      name: 'learning-storage'\n    }\n  )\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/leaves.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (269). Maximum allowed is 75.","line":83,"column":1,"nodeType":null,"messageId":"exceed","endLine":315,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (143). Maximum allowed is 30.","line":126,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":305,"endColumn":7},{"ruleId":"max-lines-per-function","severity":1,"message":"Async method 'submitLeaveRequest' has too many lines (48). Maximum allowed is 30.","line":131,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":191,"endColumn":8},{"ruleId":"max-statements","severity":1,"message":"Async method 'submitLeaveRequest' has too many statements (22). Maximum allowed is 15.","line":131,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":191,"endColumn":8},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":144,"column":63,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":144,"endColumn":65,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3891,3893],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":162,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":162,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4552,4554],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":169,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":169,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4808,4810],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":208,"column":47,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":208,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6228,6230],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Async method 'approveLeaveRequest' has too many lines (34). Maximum allowed is 30.","line":225,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":267,"endColumn":8},{"ruleId":"max-lines-per-function","severity":1,"message":"Async method 'rejectLeaveRequest' has too many lines (31). Maximum allowed is 30.","line":269,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":304,"endColumn":8}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\nimport { LeaveRequest, VacationBalance } from '../types';\n\nimport { useAuthStore } from './auth';\nimport { useNotificationsStore } from './notifications';\nimport { useTeamsStore } from './teams';\n\n// Helper function to get user display name by ID\nconst getUserDisplayName = (userId: string): string => {\n  const names: { [key: string]: string } = {\n    '1': 'Max M.',\n    '2': 'Anna A.',\n    '3': 'Tom K.',\n    '4': 'Lisa S.',\n    '5': 'Julia B.',\n    '6': 'Marco L.'\n  };\n  return names[userId] || 'Unbekannt';\n};\n\ninterface LeavesState {\n  leaveRequests: LeaveRequest[];\n  vacationBalance: VacationBalance | null;\n  isLoading: boolean;\n  submitLeaveRequest: (request: Omit<LeaveRequest, 'id' | 'createdAt'>) => Promise<void>;\n  getLeaveRequests: (userId: string) => LeaveRequest[];\n  getAllLeaveRequests: () => LeaveRequest[];\n  getPendingRequestsForTeamLead: (leadUserId: string) => LeaveRequest[];\n  getUserLeaveRequests: (userId: string) => LeaveRequest[];\n  getVacationBalance: (userId: string) => VacationBalance | null;\n  setVacationBalance: (balance: VacationBalance) => void;\n  approveLeaveRequest: (requestId: string, approverId: string) => Promise<void>;\n  rejectLeaveRequest: (requestId: string, approverId: string) => Promise<void>;\n}\n\n// Mock data\nconst mockLeaveRequests: LeaveRequest[] = [\n  {\n    id: '1',\n    userId: '1',\n    startDate: '2024-12-23',\n    endDate: '2024-12-30',\n    comment: 'Weihnachtsurlaub',\n    status: 'APPROVED',\n    type: 'VACATION',\n    createdAt: '2024-12-01T10:00:00Z',\n    teamId: 'team1'\n  },\n  {\n    id: '2',\n    userId: '1',\n    startDate: '2024-11-15',\n    endDate: '2024-11-15',\n    comment: 'Arzttermin',\n    status: 'PENDING',\n    type: 'SICK',\n    createdAt: '2024-11-15T08:00:00Z',\n    teamId: 'team1'\n  },\n  {\n    id: '3',\n    userId: '3',\n    startDate: '2025-01-15',\n    endDate: '2025-01-17',\n    comment: 'Verlängertes Wochenende',\n    status: 'PENDING',\n    type: 'VACATION',\n    createdAt: '2024-12-20T14:30:00Z',\n    teamId: 'team2'\n  },\n  {\n    id: '4',\n    userId: '4',\n    startDate: '2024-12-28',\n    endDate: '2024-12-28',\n    comment: 'Erkältung',\n    status: 'PENDING',\n    type: 'SICK',\n    createdAt: '2024-12-27T07:45:00Z',\n    teamId: 'team3'\n  },\n  {\n    id: '5',\n    userId: '5',\n    startDate: '2025-02-10',\n    endDate: '2025-02-14',\n    comment: 'Skiurlaub',\n    status: 'PENDING',\n    type: 'VACATION',\n    createdAt: '2024-12-15T16:20:00Z'\n  },\n  {\n    id: '6',\n    userId: '2',\n    startDate: '2024-11-20',\n    endDate: '2024-11-22',\n    comment: 'Familienbesuch',\n    status: 'APPROVED',\n    type: 'VACATION',\n    createdAt: '2024-11-10T11:15:00Z'\n  },\n  {\n    id: '7',\n    userId: '6',\n    startDate: '2024-12-19',\n    endDate: '2024-12-19',\n    comment: '',\n    status: 'REJECTED',\n    type: 'SICK',\n    createdAt: '2024-12-18T09:30:00Z'\n  }\n];\n\nconst mockVacationBalance: VacationBalance = {\n  userId: '1',\n  totalDays: 30,\n  usedDays: 8,\n  remainingDays: 22,\n  year: 2024\n};\n\nexport const useLeavesStore = create<LeavesState>()(\n  persist(\n    (set, get) => ({\n      leaveRequests: mockLeaveRequests,\n      vacationBalance: mockVacationBalance,\n      isLoading: false,\n\n      submitLeaveRequest: async (request) => {\n        set({ isLoading: true });\n        \n        try {\n          // Simulate API call\n          await new Promise(resolve => setTimeout(resolve, 500));\n          \n          // Determine primary team for the user\n          const authStore = useAuthStore.getState();\n          const teamsStore = useTeamsStore.getState();\n          const allUsers = authStore.getAllUsers();\n          const requestingUser = allUsers.find(u => u.id === request.userId);\n          const userTeams = teamsStore.getTeamsByUserId(request.userId);\n          const primaryTeamId = requestingUser?.primaryTeamId || userTeams[0]?.id;\n          \n          const newRequest: LeaveRequest = {\n            ...request,\n            id: Date.now().toString(),\n            createdAt: new Date().toISOString(),\n            teamId: primaryTeamId\n          };\n          \n          set(state => ({\n            leaveRequests: [...state.leaveRequests, newRequest],\n            isLoading: false\n          }));\n\n          // Notify team leads about new leave request\n          const notificationsStore = useNotificationsStore.getState();\n          const getUserName = (userId: string): string => {\n            const user = allUsers.find(u => u.id === userId);\n            return user?.name || 'Unbekannt';\n          };\n\n          // Get team leads for the primary team\n          let teamLeadIds: string[] = [];\n          if (primaryTeamId) {\n            const team = teamsStore.getTeamById(primaryTeamId);\n            teamLeadIds = team?.leadIds || [];\n          }\n          \n          // If no team leads found, fallback to all admins\n          if (teamLeadIds.length === 0) {\n            teamLeadIds = allUsers.filter(u => u.role === 'ADMIN' || u.role === 'SUPERADMIN').map(u => u.id);\n          }\n\n          teamLeadIds.forEach(leadId => {\n            notificationsStore.addNotification({\n              userId: leadId,\n              type: 'leave_request',\n              title: 'Neuer Antrag eingereicht',\n              message: `${getUserName(request.userId)} hat einen ${request.type === 'VACATION' ? 'Urlaubs' : 'Krankheits'}antrag eingereicht`,\n              isRead: false,\n              relatedId: newRequest.id\n            });\n          });\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      getLeaveRequests: (userId: string) => {\n        return get().leaveRequests.filter(request => request.userId === userId);\n      },\n\n      getAllLeaveRequests: () => {\n        return get().leaveRequests;\n      },\n\n      getPendingRequestsForTeamLead: (leadUserId: string) => {\n        const teamsStore = useTeamsStore.getState();\n        const ledTeams = teamsStore.getTeamsLedByUser(leadUserId);\n        const ledTeamIds = ledTeams.map(team => team.id);\n        \n        return get().leaveRequests.filter(request => \n          request.status === 'PENDING' && \n          (ledTeamIds.includes(request.teamId || '') || !request.teamId)\n        );\n      },\n\n      getUserLeaveRequests: (userId: string) => {\n        return get().leaveRequests.filter(request => request.userId === userId);\n      },\n\n      getVacationBalance: (userId: string) => {\n        const balance = get().vacationBalance;\n        return balance?.userId === userId ? balance : null;\n      },\n\n      setVacationBalance: (balance: VacationBalance) => {\n        set({ vacationBalance: balance });\n      },\n\n      approveLeaveRequest: async (requestId: string, approverId: string) => {\n        try {\n          // Simulate API call\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          const requestToApprove = get().leaveRequests.find(r => r.id === requestId);\n          \n          set(state => ({\n            leaveRequests: state.leaveRequests.map(request =>\n              request.id === requestId\n                ? { \n                    ...request, \n                    status: 'APPROVED' as const,\n                    approvedBy: approverId,\n                    approvedAt: new Date().toISOString()\n                  }\n                : request\n            )\n          }));\n          \n          // Notify user about approval\n          if (requestToApprove) {\n            const notificationsStore = useNotificationsStore.getState();\n            notificationsStore.addNotification({\n              userId: requestToApprove.userId,\n              type: 'leave_approved',\n              title: 'Antrag genehmigt',\n              message: `Ihr ${requestToApprove.type === 'VACATION' ? 'Urlaubs' : 'Krankheits'}antrag wurde von ${getUserDisplayName(approverId)} genehmigt`,\n              isRead: false,\n              relatedId: requestId\n            });\n          }\n          \n          // Trigger automatic reminder creation for vacation requests\n          const approvedRequest = get().leaveRequests.find(r => r.id === requestId);\n          if (approvedRequest && approvedRequest.type === 'VACATION') {\n            // This would integrate with the reminders store\n            // For now, this is handled in the UI layer\n          }\n        } catch (error) {\n          throw error;\n        }\n      },\n\n      rejectLeaveRequest: async (requestId: string, approverId: string) => {\n        try {\n          // Simulate API call\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          const requestToReject = get().leaveRequests.find(r => r.id === requestId);\n          \n          set(state => ({\n            leaveRequests: state.leaveRequests.map(request =>\n              request.id === requestId\n                ? { \n                    ...request, \n                    status: 'REJECTED' as const,\n                    approvedBy: approverId,\n                    approvedAt: new Date().toISOString()\n                  }\n                : request\n            )\n          }));\n\n          // Notify user about rejection\n          if (requestToReject) {\n            const notificationsStore = useNotificationsStore.getState();\n            notificationsStore.addNotification({\n              userId: requestToReject.userId,\n              type: 'leave_rejected',\n              title: 'Antrag abgelehnt',\n              message: `Ihr ${requestToReject.type === 'VACATION' ? 'Urlaubs' : 'Krankheits'}antrag wurde von ${getUserDisplayName(approverId)} abgelehnt`,\n              isRead: false,\n              relatedId: requestId\n            });\n          }\n        } catch (error) {\n          throw error;\n        }\n      }\n    }),\n    {\n      name: 'leaves-storage',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({ \n        leaveRequests: state.leaveRequests,\n        vacationBalance: state.vacationBalance \n      }),\n    }\n  )\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/notifications.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (53). Maximum allowed is 30.","line":31,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":91,"endColumn":7},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (87). Maximum allowed is 75.","line":89,"column":1,"nodeType":null,"messageId":"exceed","endLine":100,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\nexport interface Notification {\n  id: string;\n  userId: string;\n  type: 'leave_request' | 'leave_approved' | 'leave_rejected' | 'training_completed' | 'general';\n  title: string;\n  message: string;\n  isRead: boolean;\n  createdAt: string;\n  relatedId?: string; // ID of related entity (leave request, training, etc.)\n}\n\ninterface NotificationsState {\n  notifications: Notification[];\n  addNotification: (notification: Omit<Notification, 'id' | 'createdAt'>) => void;\n  markAsRead: (notificationId: string) => void;\n  markAllAsRead: (userId: string) => void;\n  getUnreadCount: (userId: string) => number;\n  getNotificationsForUser: (userId: string) => Notification[];\n  getUnreadNotificationsForUser: (userId: string) => Notification[];\n  removeNotification: (notificationId: string) => void;\n}\n\n// Mock notifications - initially empty, will be populated when actions happen\nconst mockNotifications: Notification[] = [];\n\nexport const useNotificationsStore = create<NotificationsState>()(\n  persist(\n    (set, get) => ({\n      notifications: mockNotifications,\n\n      addNotification: (notification) => {\n        const newNotification: Notification = {\n          ...notification,\n          id: Date.now().toString(),\n          createdAt: new Date().toISOString()\n        };\n        \n        set(state => ({\n          notifications: [newNotification, ...state.notifications]\n        }));\n      },\n\n      markAsRead: (notificationId: string) => {\n        set(state => ({\n          notifications: state.notifications.map(notification =>\n            notification.id === notificationId\n              ? { ...notification, isRead: true }\n              : notification\n          )\n        }));\n      },\n\n      markAllAsRead: (userId: string) => {\n        set(state => ({\n          notifications: state.notifications.map(notification =>\n            notification.userId === userId\n              ? { ...notification, isRead: true }\n              : notification\n          )\n        }));\n      },\n\n      getUnreadCount: (userId: string) => {\n        return get().notifications.filter(\n          notification => notification.userId === userId && !notification.isRead\n        ).length;\n      },\n\n      getNotificationsForUser: (userId: string) => {\n        return get().notifications\n          .filter(notification => notification.userId === userId)\n          .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n      },\n\n      getUnreadNotificationsForUser: (userId: string) => {\n        return get().notifications\n          .filter(notification => notification.userId === userId && !notification.isRead)\n          .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n      },\n\n      removeNotification: (notificationId: string) => {\n        set(state => ({\n          notifications: state.notifications.filter(\n            notification => notification.id !== notificationId\n          )\n        }));\n      }\n    }),\n    {\n      name: 'notifications-storage',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({ \n        notifications: state.notifications\n      }),\n    }\n  )\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/reminders.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (268). Maximum allowed is 75.","line":91,"column":1,"nodeType":null,"messageId":"exceed","endLine":319,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (179). Maximum allowed is 30.","line":95,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":308,"endColumn":7},{"ruleId":"max-lines-per-function","severity":1,"message":"Async method 'createReminderForVacation' has too many lines (40). Maximum allowed is 30.","line":101,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":148,"endColumn":8},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":106,"column":43,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":106,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3451,3491],"text":"(customDays ?? settings?.defaultReminders)"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":106,"column":73,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":106,"endColumn":75,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3492,3494],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":130,"column":19,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":130,"endColumn":21,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4687,4689],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-params","severity":1,"message":"Async method 'createManualReminder' has too many parameters (4). Maximum allowed is 3.","line":150,"column":7,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":150,"endColumn":35},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":196,"column":76,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":196,"endColumn":78,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6800,6802],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Async method 'updateReminderSettings' has too many lines (32). Maximum allowed is 30.","line":199,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":236,"endColumn":8},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":239,"column":15,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":239,"endColumn":61},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":259,"column":15,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":259,"endColumn":61},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":284,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":284,"endColumn":53},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":300,"column":15,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":300,"endColumn":66},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":301,"column":15,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":301,"endColumn":61}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\nimport { LeaveRequest } from '../types';\nimport { VacationReminder, ReminderSettings, ReminderNotification } from '../types/reminders';\n\ninterface RemindersState {\n  reminders: VacationReminder[];\n  reminderSettings: ReminderSettings[];\n  notifications: ReminderNotification[];\n  isLoading: boolean;\n  \n  // Reminder management\n  createReminderForVacation: (leaveRequest: LeaveRequest, managerId: string, customDays?: number[]) => Promise<void>;\n  createManualReminder: (leaveRequestId: string, reminderDate: string, message: string, managerId: string) => Promise<void>;\n  deleteReminder: (reminderId: string) => void;\n  updateReminder: (reminderId: string, updates: Partial<VacationReminder>) => void;\n  \n  // Settings management\n  getReminderSettings: (managerId: string) => ReminderSettings | null;\n  updateReminderSettings: (managerId: string, settings: Partial<ReminderSettings>) => Promise<void>;\n  \n  // Notifications\n  getUpcomingNotifications: (managerId: string) => ReminderNotification[];\n  markNotificationAsRead: (notificationId: string) => void;\n  generateNotificationsForToday: () => ReminderNotification[];\n  \n  // Calendar integration\n  getRemindersForLeave: (leaveRequestId: string) => VacationReminder[];\n  getUpcomingVacationAlerts: (managerId: string, days?: number) => ReminderNotification[];\n}\n\n// Constants\nconst DEFAULT_VACATION_MESSAGE = 'Max Mustermann ist vom 23.12.2024 bis 30.12.2024 im Weihnachtsurlaub.';\nconst CREATED_DATE = '2024-12-01T10:00:00Z';\n\n// Mock data\nconst mockReminderSettings: ReminderSettings[] = [\n  {\n    id: '1',\n    managerId: '2', // Anna Admin\n    isEnabled: true,\n    defaultReminders: [14, 7, 2], // 2 weeks, 1 week, 2 days before\n    customMessage: 'Erinnerung: {employeeName} ist vom {startDate} bis {endDate} im Urlaub.',\n    notificationMethod: 'BOTH',\n    autoCreateForNewVacations: true,\n    createdAt: '2024-01-01T00:00:00Z'\n  }\n];\n\nconst mockReminders: VacationReminder[] = [\n  {\n    id: '1',\n    leaveRequestId: '1', // Max's Christmas vacation\n    userId: '1',\n    reminderType: 'AUTOMATIC',\n    reminderDate: '2024-12-09', // 2 weeks before\n    daysBeforeVacation: 14,\n    isActive: true,\n    isSent: false,\n    message: DEFAULT_VACATION_MESSAGE,\n    createdAt: CREATED_DATE,\n    createdBy: '2'\n  },\n  {\n    id: '2',\n    leaveRequestId: '1',\n    userId: '1',\n    reminderType: 'AUTOMATIC',\n    reminderDate: '2024-12-16', // 1 week before\n    daysBeforeVacation: 7,\n    isActive: true,\n    isSent: false,\n    message: DEFAULT_VACATION_MESSAGE,\n    createdAt: CREATED_DATE,\n    createdBy: '2'\n  },\n  {\n    id: '3',\n    leaveRequestId: '1',\n    userId: '1',\n    reminderType: 'AUTOMATIC',\n    reminderDate: '2024-12-21', // 2 days before\n    daysBeforeVacation: 2,\n    isActive: true,\n    isSent: false,\n    message: DEFAULT_VACATION_MESSAGE,\n    createdAt: CREATED_DATE,\n    createdBy: '2'\n  }\n];\n\nexport const useRemindersStore = create<RemindersState>()(\n  persist(\n    (set, get) => ({\n      reminders: mockReminders,\n      reminderSettings: mockReminderSettings,\n      notifications: [],\n      isLoading: false,\n\n      createReminderForVacation: async (leaveRequest: LeaveRequest, managerId: string, customDays?: number[]) => {\n        set({ isLoading: true });\n        \n        try {\n          const settings = get().getReminderSettings(managerId);\n          const reminderDays = customDays || settings?.defaultReminders || [7, 2]; // Default fallback\n          \n          const vacationStart = new Date(leaveRequest.startDate);\n          const newReminders: VacationReminder[] = [];\n          \n          reminderDays.forEach(days => {\n            const reminderDate = new Date(vacationStart);\n            reminderDate.setDate(vacationStart.getDate() - days);\n            \n            // Don't create reminders for past dates\n            if (reminderDate >= new Date()) {\n              const reminder: VacationReminder = {\n                id: `${Date.now()}-${days}`,\n                leaveRequestId: leaveRequest.id,\n                userId: leaveRequest.userId,\n                reminderType: 'AUTOMATIC',\n                reminderDate: reminderDate.toISOString().split('T')[0],\n                daysBeforeVacation: days,\n                isActive: true,\n                isSent: false,\n                message: settings?.customMessage\n                  ?.replace('{employeeName}', 'Mitarbeiter')\n                  ?.replace('{startDate}', new Date(leaveRequest.startDate).toLocaleDateString('de-DE'))\n                  ?.replace('{endDate}', new Date(leaveRequest.endDate).toLocaleDateString('de-DE'))\n                  || `Urlaub vom ${new Date(leaveRequest.startDate).toLocaleDateString('de-DE')} bis ${new Date(leaveRequest.endDate).toLocaleDateString('de-DE')}`,\n                createdAt: new Date().toISOString(),\n                createdBy: managerId\n              };\n              \n              newReminders.push(reminder);\n            }\n          });\n          \n          set(state => ({\n            reminders: [...state.reminders, ...newReminders],\n            isLoading: false\n          }));\n          \n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      createManualReminder: async (leaveRequestId: string, reminderDate: string, message: string, managerId: string) => {\n        set({ isLoading: true });\n        \n        try {\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          const reminder: VacationReminder = {\n            id: Date.now().toString(),\n            leaveRequestId,\n            userId: '', // Will be filled from leave request\n            reminderType: 'MANUAL',\n            reminderDate,\n            daysBeforeVacation: 0, // Calculated later\n            isActive: true,\n            isSent: false,\n            message,\n            createdAt: new Date().toISOString(),\n            createdBy: managerId\n          };\n          \n          set(state => ({\n            reminders: [...state.reminders, reminder],\n            isLoading: false\n          }));\n          \n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      deleteReminder: (reminderId: string) => {\n        set(state => ({\n          reminders: state.reminders.filter(r => r.id !== reminderId)\n        }));\n      },\n\n      updateReminder: (reminderId: string, updates: Partial<VacationReminder>) => {\n        set(state => ({\n          reminders: state.reminders.map(r => \n            r.id === reminderId ? { ...r, ...updates } : r\n          )\n        }));\n      },\n\n      getReminderSettings: (managerId: string) => {\n        return get().reminderSettings.find(s => s.managerId === managerId) || null;\n      },\n\n      updateReminderSettings: async (managerId: string, settingsUpdate: Partial<ReminderSettings>) => {\n        set({ isLoading: true });\n        \n        try {\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          set(state => {\n            const existingIndex = state.reminderSettings.findIndex(s => s.managerId === managerId);\n            \n            if (existingIndex >= 0) {\n              // Update existing settings\n              const updatedSettings = [...state.reminderSettings];\n              updatedSettings[existingIndex] = { ...updatedSettings[existingIndex], ...settingsUpdate };\n              return { reminderSettings: updatedSettings, isLoading: false };\n            } else {\n              // Create new settings\n              const newSettings: ReminderSettings = {\n                id: Date.now().toString(),\n                managerId,\n                isEnabled: true,\n                defaultReminders: [14, 7, 2],\n                notificationMethod: 'BOTH',\n                autoCreateForNewVacations: true,\n                createdAt: new Date().toISOString(),\n                ...settingsUpdate\n              };\n              return { \n                reminderSettings: [...state.reminderSettings, newSettings], \n                isLoading: false \n              };\n            }\n          });\n          \n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      getUpcomingNotifications: (_managerId: string) => {\n        const today = new Date().toISOString().split('T')[0];\n        const upcomingDays = new Date();\n        upcomingDays.setDate(upcomingDays.getDate() + 7); // Next 7 days\n        \n        return get().notifications.filter(n => \n          n.scheduledFor >= today && \n          n.scheduledFor <= upcomingDays.toISOString().split('T')[0] &&\n          !n.isRead\n        );\n      },\n\n      markNotificationAsRead: (notificationId: string) => {\n        set(state => ({\n          notifications: state.notifications.map(n => \n            n.id === notificationId ? { ...n, isRead: true } : n\n          )\n        }));\n      },\n\n      generateNotificationsForToday: () => {\n        const today = new Date().toISOString().split('T')[0];\n        const todayReminders = get().reminders.filter(r => \n          r.reminderDate === today && r.isActive && !r.isSent\n        );\n        \n        const newNotifications: ReminderNotification[] = todayReminders.map(reminder => ({\n          id: Date.now().toString() + Math.random(),\n          reminderId: reminder.id,\n          title: `Urlaubserinnerung - ${reminder.daysBeforeVacation} Tag${reminder.daysBeforeVacation !== 1 ? 'e' : ''} vorher`,\n          message: reminder.message,\n          isRead: false,\n          createdAt: new Date().toISOString(),\n          scheduledFor: today,\n          leaveRequestId: reminder.leaveRequestId,\n          employeeName: 'Mitarbeiter', // Would be filled from user data\n          vacationDates: {\n            startDate: '', // Would be filled from leave request\n            endDate: ''\n          }\n        }));\n        \n        // Mark reminders as sent\n        set(state => ({\n          notifications: [...state.notifications, ...newNotifications],\n          reminders: state.reminders.map(r => \n            todayReminders.some(tr => tr.id === r.id) \n              ? { ...r, isSent: true } \n              : r\n          )\n        }));\n        \n        return newNotifications;\n      },\n\n      getRemindersForLeave: (leaveRequestId: string) => {\n        return get().reminders.filter(r => r.leaveRequestId === leaveRequestId);\n      },\n\n      getUpcomingVacationAlerts: (managerId: string, days = 14) => {\n        const endDate = new Date();\n        endDate.setDate(endDate.getDate() + days);\n        const endDateString = endDate.toISOString().split('T')[0];\n        const today = new Date().toISOString().split('T')[0];\n        \n        return get().notifications.filter(n => \n          n.scheduledFor >= today && \n          n.scheduledFor <= endDateString\n        ).sort((a, b) => new Date(a.scheduledFor).getTime() - new Date(b.scheduledFor).getTime());\n      }\n    }),\n    {\n      name: 'reminders-storage',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({ \n        reminders: state.reminders,\n        reminderSettings: state.reminderSettings,\n        notifications: state.notifications\n      }),\n    }\n  )\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/shop.ts","messages":[{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 5 times.","line":60,"column":16,"nodeType":"Literal","endLine":60,"endColumn":38},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (256). Maximum allowed is 75.","line":87,"column":1,"nodeType":null,"messageId":"exceed","endLine":302,"endColumn":35},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (140). Maximum allowed is 30.","line":119,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":289,"endColumn":7},{"ruleId":"max-lines-per-function","severity":1,"message":"Async method 'purchaseBenefit' has too many lines (48). Maximum allowed is 30.","line":192,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":252,"endColumn":8},{"ruleId":"max-statements","severity":1,"message":"Async method 'purchaseBenefit' has too many statements (18). Maximum allowed is 15.","line":192,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":252,"endColumn":8},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":220,"column":59,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":220,"endColumn":61,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6272,6274],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\nexport interface ShopBenefit {\n  id: string;\n  title: string;\n  description: string;\n  coinCost: number;\n  category: 'WELLNESS' | 'FOOD' | 'TECH' | 'TIME_OFF' | 'OTHER';\n  imageUrl?: string;\n  isActive: boolean;\n  stockLimit?: number; // null = unlimited\n  currentStock?: number;\n  createdAt: string;\n}\n\nexport interface BenefitPurchase {\n  id: string;\n  userId: string;\n  benefitId: string;\n  coinCost: number;\n  status: 'PENDING' | 'APPROVED' | 'DELIVERED' | 'CANCELLED';\n  purchasedAt: string;\n  deliveredAt?: string;\n  notes?: string;\n}\n\ninterface ShopState {\n  benefits: ShopBenefit[];\n  purchases: BenefitPurchase[];\n  isLoading: boolean;\n  \n  // Shop management\n  getActiveBenefits: () => ShopBenefit[];\n  getBenefitsByCategory: (category: string) => ShopBenefit[];\n  \n  // Admin benefit management\n  addBenefit: (benefit: Omit<ShopBenefit, 'id' | 'createdAt'>) => Promise<void>;\n  updateBenefit: (benefitId: string, updates: Partial<ShopBenefit>) => Promise<void>;\n  deleteBenefit: (benefitId: string) => Promise<void>;\n  \n  // Purchase management\n  purchaseBenefit: (userId: string, benefitId: string) => Promise<void>;\n  getUserPurchases: (userId: string) => BenefitPurchase[];\n  getAllPurchases: () => BenefitPurchase[];\n  updatePurchaseStatus: (purchaseId: string, status: BenefitPurchase['status'], notes?: string) => Promise<void>;\n}\n\n// Mock data\nconst mockBenefits: ShopBenefit[] = [\n  {\n    id: '1',\n    title: 'Massage Gutschein',\n    description: '60 Minuten entspannende Massage',\n    coinCost: 150,\n    category: 'WELLNESS',\n    isActive: true,\n    stockLimit: 10,\n    currentStock: 8,\n    createdAt: '2024-11-01T10:00:00Z'\n  },\n  {\n    id: '2',\n    title: 'Lunch Gutschein',\n    description: 'Mittagessen im Restaurant nach Wahl (bis 25€)',\n    coinCost: 75,\n    category: 'FOOD',\n    isActive: true,\n    createdAt: '2024-11-01T10:00:00Z'\n  },\n  {\n    id: '3',\n    title: 'Zusätzlicher freier Tag',\n    description: 'Ein zusätzlicher bezahlter Urlaubstag',\n    coinCost: 200,\n    category: 'TIME_OFF',\n    isActive: true,\n    stockLimit: 5,\n    currentStock: 3,\n    createdAt: '2024-11-01T10:00:00Z'\n  },\n  {\n    id: '4',\n    title: 'Tech Gadget Budget',\n    description: '50€ Budget für Tech-Zubehör',\n    coinCost: 125,\n    category: 'TECH',\n    isActive: true,\n    createdAt: '2024-11-01T10:00:00Z'\n  },\n  {\n    id: '5',\n    title: 'Fitness Studio Monat',\n    description: '1 Monat kostenlose Mitgliedschaft',\n    coinCost: 100,\n    category: 'WELLNESS',\n    isActive: true,\n    stockLimit: 20,\n    currentStock: 15,\n    createdAt: '2024-11-01T10:00:00Z'\n  }\n];\n\nconst mockPurchases: BenefitPurchase[] = [\n  {\n    id: '1',\n    userId: '1',\n    benefitId: '2',\n    coinCost: 75,\n    status: 'DELIVERED',\n    purchasedAt: '2024-12-10T14:30:00Z',\n    deliveredAt: '2024-12-12T10:00:00Z',\n    notes: 'Gutschein per E-Mail versendet'\n  }\n];\n\nexport const useShopStore = create<ShopState>()(\n  persist(\n    (set, get) => ({\n      benefits: mockBenefits,\n      purchases: mockPurchases,\n      isLoading: false,\n\n      getActiveBenefits: () => {\n        return get().benefits\n          .filter(benefit => benefit.isActive)\n          .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n      },\n\n      getBenefitsByCategory: (category: string) => {\n        return get().benefits\n          .filter(benefit => benefit.isActive && benefit.category === category)\n          .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n      },\n\n      addBenefit: async (benefit) => {\n        set({ isLoading: true });\n        \n        try {\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          const newBenefit: ShopBenefit = {\n            ...benefit,\n            id: Date.now().toString(),\n            createdAt: new Date().toISOString()\n          };\n          \n          set(state => ({\n            benefits: [newBenefit, ...state.benefits],\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      updateBenefit: async (benefitId: string, updates: Partial<ShopBenefit>) => {\n        set({ isLoading: true });\n        \n        try {\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          set(state => ({\n            benefits: state.benefits.map(benefit =>\n              benefit.id === benefitId ? { ...benefit, ...updates } : benefit\n            ),\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      deleteBenefit: async (benefitId: string) => {\n        set({ isLoading: true });\n        \n        try {\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          set(state => ({\n            benefits: state.benefits.filter(benefit => benefit.id !== benefitId),\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      purchaseBenefit: async (userId: string, benefitId: string) => {\n        set({ isLoading: true });\n        \n        try {\n          await new Promise(resolve => setTimeout(resolve, 500));\n          \n          const benefit = get().benefits.find(b => b.id === benefitId);\n          if (!benefit) throw new Error('Benefit nicht gefunden');\n          \n          // Check stock\n          if (benefit.stockLimit && benefit.currentStock && benefit.currentStock <= 0) {\n            throw new Error('Dieses Benefit ist ausverkauft');\n          }\n          \n          const newPurchase: BenefitPurchase = {\n            id: Date.now().toString(),\n            userId,\n            benefitId,\n            coinCost: benefit.coinCost,\n            status: 'PENDING',\n            purchasedAt: new Date().toISOString()\n          };\n          \n          // Update stock if limited\n          if (benefit.stockLimit && benefit.currentStock) {\n            set(state => ({\n              benefits: state.benefits.map(b =>\n                b.id === benefitId\n                  ? { ...b, currentStock: (b.currentStock || 0) - 1 }\n                  : b\n              )\n            }));\n          }\n          \n          set(state => ({\n            purchases: [newPurchase, ...state.purchases],\n            isLoading: false\n          }));\n\n          // Deduct coins from user's balance by creating a negative transaction\n          const { useCoinsStore } = await import('./coins');\n          const coinsStore = useCoinsStore.getState();\n          \n          // Create negative transaction for benefit purchase\n          const purchaseTransaction = {\n            id: `purchase-${Date.now()}`,\n            userId,\n            amount: -benefit.coinCost,\n            reason: `${benefit.title} eingekauft`,\n            type: 'BENEFIT_PURCHASE' as const,\n            benefitId,\n            createdAt: new Date().toISOString()\n          };\n          \n          coinsStore.transactions.unshift(purchaseTransaction);\n          coinsStore.updateUserBalance(userId);\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      getUserPurchases: (userId: string) => {\n        return get().purchases\n          .filter(purchase => purchase.userId === userId)\n          .sort((a, b) => new Date(b.purchasedAt).getTime() - new Date(a.purchasedAt).getTime());\n      },\n\n      getAllPurchases: () => {\n        return get().purchases\n          .sort((a, b) => new Date(b.purchasedAt).getTime() - new Date(a.purchasedAt).getTime());\n      },\n\n      updatePurchaseStatus: async (purchaseId: string, status: BenefitPurchase['status'], notes?: string) => {\n        set({ isLoading: true });\n        \n        try {\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          set(state => ({\n            purchases: state.purchases.map(purchase =>\n              purchase.id === purchaseId\n                ? {\n                    ...purchase,\n                    status,\n                    notes,\n                    deliveredAt: status === 'DELIVERED' ? new Date().toISOString() : purchase.deliveredAt\n                  }\n                : purchase\n            ),\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      }\n    }),\n    {\n      name: 'shop-storage',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({ \n        benefits: state.benefits,\n        purchases: state.purchases\n      }),\n    }\n  )\n);\n\n// Export type alias for components\nexport type ShopStore = ShopState;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/teams.ts","messages":[{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 6 times.","line":39,"column":16,"nodeType":"Literal","endLine":39,"endColumn":38},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (153). Maximum allowed is 30.","line":66,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":292,"endColumn":7},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (214). Maximum allowed is 75.","line":120,"column":1,"nodeType":null,"messageId":"exceed","endLine":299,"endColumn":3},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":216,"column":54,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":216,"endColumn":73},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":217,"column":50,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":217,"endColumn":69},{"ruleId":"max-lines-per-function","severity":1,"message":"Async method 'setTeamLead' has too many lines (33). Maximum allowed is 30.","line":237,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":277,"endColumn":8},{"ruleId":"max-nested-callbacks","severity":1,"message":"Too many nested callbacks (3). Maximum allowed is 2.","line":261,"column":48,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":261,"endColumn":67}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\nimport { Team, User } from '../types';\n\n/**\n * Zustand store for team management\n * Handles all team-related operations including team creation, member management, and lead assignments\n */\ninterface TeamsState {\n  teams: Team[];\n  isLoading: boolean;\n  error: string | null;\n  \n  // Actions\n  getAllTeams: () => Team[];\n  getTeamById: (teamId: string) => Team | undefined;\n  getTeamsByUserId: (userId: string) => Team[];\n  getTeamsLedByUser: (userId: string) => Team[];\n  createTeam: (teamData: Omit<Team, 'id' | 'createdAt' | 'updatedAt'>) => Promise<Team>;\n  updateTeam: (teamId: string, updates: Partial<Team>) => Promise<void>;\n  deleteTeam: (teamId: string) => Promise<void>;\n  addMemberToTeam: (teamId: string, userId: string) => Promise<void>;\n  removeMemberFromTeam: (teamId: string, userId: string) => Promise<void>;\n  setTeamLead: (teamId: string, userId: string, isLead: boolean) => Promise<void>;\n  getTeamMembers: (teamId: string, allUsers: User[]) => User[];\n  getTeamLeads: (teamId: string, allUsers: User[]) => User[];\n}\n\n// Mock team data\nconst mockTeams: Team[] = [\n  {\n    id: 'team1',\n    name: 'Entwicklung',\n    description: 'Software Development Team',\n    organizationId: 'org1',\n    leadIds: ['2'], // Anna Admin is lead\n    memberIds: ['1', '2'], // Max and Anna\n    createdAt: '2024-01-01T00:00:00Z',\n    updatedAt: '2024-01-01T00:00:00Z'\n  },\n  {\n    id: 'team2',\n    name: 'Marketing',\n    description: 'Marketing and Design Team',\n    organizationId: 'org1',\n    leadIds: ['2'], // Anna Admin is lead\n    memberIds: ['2', '3'], // Anna and Tom\n    createdAt: '2024-01-01T00:00:00Z',\n    updatedAt: '2024-01-01T00:00:00Z'\n  },\n  {\n    id: 'team3',\n    name: 'Quality Assurance',\n    description: 'Testing and QA Team',\n    organizationId: 'org1',\n    leadIds: ['2'], // Anna Admin is lead\n    memberIds: ['2', '4'], // Anna and Test User\n    createdAt: '2024-01-01T00:00:00Z',\n    updatedAt: '2024-01-01T00:00:00Z'\n  }\n];\n\nexport const useTeamsStore = create<TeamsState>()(\n  persist(\n    (set, get) => ({\n      teams: mockTeams,\n      isLoading: false,\n      error: null,\n\n      /**\n       * Get all teams in the organization\n       * @returns Array of all teams\n       */\n      getAllTeams: () => {\n        return get().teams;\n      },\n\n      /**\n       * Get a specific team by its ID\n       * @param teamId - The ID of the team to retrieve\n       * @returns The team if found, undefined otherwise\n       */\n      getTeamById: (teamId: string) => {\n        return get().teams.find(team => team.id === teamId);\n      },\n\n      /**\n       * Get all teams a user belongs to\n       * @param userId - The ID of the user\n       * @returns Array of teams the user is a member of\n       */\n      getTeamsByUserId: (userId: string) => {\n        return get().teams.filter(team => team.memberIds.includes(userId));\n      },\n\n      /**\n       * Get all teams where a user is a lead\n       * @param userId - The ID of the user\n       * @returns Array of teams where the user is a lead\n       */\n      getTeamsLedByUser: (userId: string) => {\n        return get().teams.filter(team => team.leadIds.includes(userId));\n      },\n\n      /**\n       * Create a new team\n       * @param teamData - Team data without system-generated fields\n       * @returns The newly created team\n       * @throws Error if team creation fails\n       */\n      createTeam: async (teamData) => {\n        set({ isLoading: true });\n        \n        try {\n          // Simulate API call - in production, this would be an actual API request\n          await new Promise(resolve => setTimeout(resolve, 500));\n          \n          const newTeam: Team = {\n            ...teamData,\n            id: `team${Date.now()}`,\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString()\n          };\n          \n          set(state => ({\n            teams: [...state.teams, newTeam],\n            isLoading: false\n          }));\n          \n          return newTeam;\n        } catch (error) {\n          set({ isLoading: false, error: 'Failed to create team' });\n          throw error;\n        }\n      },\n\n      /**\n       * Update an existing team\n       * @param teamId - The ID of the team to update\n       * @param updates - Partial team data to update\n       * @throws Error if team update fails\n       */\n      updateTeam: async (teamId: string, updates) => {\n        set({ isLoading: true });\n        \n        try {\n          // Simulate API call\n          await new Promise(resolve => setTimeout(resolve, 500));\n          \n          set(state => ({\n            teams: state.teams.map(team =>\n              team.id === teamId\n                ? { ...team, ...updates, updatedAt: new Date().toISOString() }\n                : team\n            ),\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false, error: 'Failed to update team' });\n          throw error;\n        }\n      },\n\n      deleteTeam: async (teamId: string) => {\n        set({ isLoading: true });\n        \n        try {\n          await new Promise(resolve => setTimeout(resolve, 500));\n          \n          set(state => ({\n            teams: state.teams.filter(team => team.id !== teamId),\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false, error: 'Failed to delete team' });\n          throw error;\n        }\n      },\n\n      addMemberToTeam: async (teamId: string, userId: string) => {\n        set({ isLoading: true });\n        \n        try {\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          set(state => ({\n            teams: state.teams.map(team =>\n              team.id === teamId && !team.memberIds.includes(userId)\n                ? { \n                    ...team, \n                    memberIds: [...team.memberIds, userId],\n                    updatedAt: new Date().toISOString()\n                  }\n                : team\n            ),\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false, error: 'Failed to add member to team' });\n          throw error;\n        }\n      },\n\n      removeMemberFromTeam: async (teamId: string, userId: string) => {\n        set({ isLoading: true });\n        \n        try {\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          set(state => ({\n            teams: state.teams.map(team =>\n              team.id === teamId\n                ? { \n                    ...team, \n                    memberIds: team.memberIds.filter(id => id !== userId),\n                    leadIds: team.leadIds.filter(id => id !== userId), // Remove from leads too\n                    updatedAt: new Date().toISOString()\n                  }\n                : team\n            ),\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false, error: 'Failed to remove member from team' });\n          throw error;\n        }\n      },\n\n      /**\n       * Set or remove a user as team lead\n       * @param teamId - The ID of the team\n       * @param userId - The ID of the user\n       * @param isLead - Whether the user should be a lead\n       * @throws Error if operation fails\n       */\n      setTeamLead: async (teamId: string, userId: string, isLead: boolean) => {\n        set({ isLoading: true });\n        \n        try {\n          // Simulate API call\n          await new Promise(resolve => setTimeout(resolve, 300));\n          \n          set(state => ({\n            teams: state.teams.map(team => {\n              if (team.id !== teamId) return team;\n              \n              let newLeadIds = [...team.leadIds];\n              const newMemberIds = [...team.memberIds];\n              \n              if (isLead) {\n                // Add as lead and ensure they're a member\n                if (!newLeadIds.includes(userId)) {\n                  newLeadIds.push(userId);\n                }\n                if (!newMemberIds.includes(userId)) {\n                  newMemberIds.push(userId);\n                }\n              } else {\n                // Remove from leads\n                newLeadIds = newLeadIds.filter(id => id !== userId);\n              }\n              \n              return {\n                ...team,\n                leadIds: newLeadIds,\n                memberIds: newMemberIds,\n                updatedAt: new Date().toISOString()\n              };\n            }),\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false, error: 'Failed to update team lead' });\n          throw error;\n        }\n      },\n\n      getTeamMembers: (teamId: string, allUsers: User[]) => {\n        const team = get().getTeamById(teamId);\n        if (!team) return [];\n        \n        return allUsers.filter(user => team.memberIds.includes(user.id));\n      },\n\n      getTeamLeads: (teamId: string, allUsers: User[]) => {\n        const team = get().getTeamById(teamId);\n        if (!team) return [];\n        \n        return allUsers.filter(user => team.leadIds.includes(user.id));\n      }\n    }),\n    {\n      name: 'teams-storage',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({ teams: state.teams }),\n    }\n  )\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/timeRecords.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (172). Maximum allowed is 30.","line":63,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":277,"endColumn":7},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (230). Maximum allowed is 75.","line":97,"column":1,"nodeType":null,"messageId":"exceed","endLine":287,"endColumn":3},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":132,"column":15,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":132,"endColumn":61},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":134,"column":62,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":134,"endColumn":64,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5150,5152],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Async method 'clockIn' has too many lines (34). Maximum allowed is 30.","line":141,"column":16,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":183,"endColumn":8},{"ruleId":"prefer-destructuring","severity":1,"message":"Use array destructuring.","line":147,"column":17,"nodeType":"VariableDeclarator","messageId":"preferDestructuring","endLine":147,"endColumn":56},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":156,"column":15,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":156,"endColumn":55,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[5905,5945],"text":"existingRecord?.timeOut"},"desc":"Change to an optional chain."}]},{"ruleId":"max-lines-per-function","severity":1,"message":"Async method 'clockOut' has too many lines (33). Maximum allowed is 30.","line":185,"column":17,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":225,"endColumn":8},{"ruleId":"max-statements","severity":1,"message":"Async method 'clockOut' has too many statements (17). Maximum allowed is 15.","line":185,"column":17,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":225,"endColumn":8}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\nimport { TimeRecord } from '../types';\n\ninterface TimeRecordsState {\n  timeRecords: TimeRecord[];\n  isLoading: boolean;\n  currentlyTracking: { [userId: string]: { timeIn: string; startTime: number } | null };\n  getTimeRecords: (userId: string) => TimeRecord[];\n  getAllTimeRecords: () => TimeRecord[];\n  getTimeRecordsForPeriod: (userId: string, startDate: string, endDate: string) => TimeRecord[];\n  getMonthlyStats: (userId: string, month: number, year: number) => { totalHours: number; totalDays: number };\n  getWeeklyStats: (userId: string) => { totalHours: number; totalDays: number };\n  getTodayRecord: (userId: string) => TimeRecord | null;\n  isCurrentlyTracking: (userId: string) => boolean;\n  clockIn: (userId: string) => Promise<void>;\n  clockOut: (userId: string, breakMinutes?: number) => Promise<void>;\n  addTimeRecord: (record: Omit<TimeRecord, 'id'>) => Promise<void>;\n  updateTimeRecord: (recordId: string, updates: Partial<TimeRecord>) => Promise<void>;\n  deleteTimeRecord: (recordId: string) => Promise<void>;\n  setTimeRecords: (records: TimeRecord[]) => void;\n}\n\n// Mock data - simulating data from Timerecording.de API\nconst generateMockTimeRecords = (userId: string): TimeRecord[] => {\n  const records: TimeRecord[] = [];\n  const today = new Date();\n  \n  // Generate records for the last 30 days\n  for (let i = 29; i >= 0; i--) {\n    const date = new Date(today);\n    date.setDate(date.getDate() - i);\n    \n    // Skip weekends\n    if (date.getDay() === 0 || date.getDay() === 6) continue;\n    \n    const timeIn = new Date(date);\n    timeIn.setHours(8 + Math.floor(Math.random() * 2), Math.floor(Math.random() * 60));\n    \n    const timeOut = new Date(timeIn);\n    timeOut.setHours(timeIn.getHours() + 8 + Math.floor(Math.random() * 2), Math.floor(Math.random() * 60));\n    \n    const breakMinutes = 30 + Math.floor(Math.random() * 30);\n    const totalHours = (timeOut.getTime() - timeIn.getTime()) / (1000 * 60 * 60) - (breakMinutes / 60);\n    \n    records.push({\n      id: `${userId}-${date.toISOString().split('T')[0]}`,\n      userId,\n      date: date.toISOString().split('T')[0],\n      timeIn: timeIn.toTimeString().split(' ')[0].substring(0, 5),\n      timeOut: timeOut.toTimeString().split(' ')[0].substring(0, 5),\n      breakMinutes,\n      totalHours: Math.round(totalHours * 100) / 100\n    });\n  }\n  \n  return records;\n};\n\nexport const useTimeRecordsStore = create<TimeRecordsState>()(\n  persist(\n    (set, get) => ({\n      timeRecords: [],\n      isLoading: false,\n      currentlyTracking: {},\n\n      getTimeRecords: (userId: string) => {\n        let records = get().timeRecords.filter(record => record.userId === userId);\n        \n        // If no records exist for this user, generate mock data\n        if (records.length === 0) {\n          const mockRecords = generateMockTimeRecords(userId);\n          set(state => ({\n            timeRecords: [...state.timeRecords, ...mockRecords]\n          }));\n          records = mockRecords;\n        }\n        \n        return records.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n      },\n\n      getAllTimeRecords: () => {\n        return get().timeRecords;\n      },\n\n      getTimeRecordsForPeriod: (userId: string, startDate: string, endDate: string) => {\n        const allRecords = get().getTimeRecords(userId);\n        return allRecords.filter(record => \n          record.date >= startDate && record.date <= endDate\n        );\n      },\n\n      getMonthlyStats: (userId: string, month: number, year: number) => {\n        const allRecords = get().getTimeRecords(userId);\n        const monthRecords = allRecords.filter(record => {\n          const recordDate = new Date(record.date);\n          return recordDate.getMonth() === month && recordDate.getFullYear() === year;\n        });\n        \n        const totalHours = monthRecords.reduce((sum, record) => sum + record.totalHours, 0);\n        return {\n          totalHours,\n          totalDays: monthRecords.length\n        };\n      },\n\n      getWeeklyStats: (userId: string) => {\n        const today = new Date();\n        const weekStart = new Date(today);\n        weekStart.setDate(today.getDate() - today.getDay() + 1); // Monday\n        weekStart.setHours(0, 0, 0, 0);\n        \n        const weekEnd = new Date(weekStart);\n        weekEnd.setDate(weekStart.getDate() + 6); // Sunday\n        weekEnd.setHours(23, 59, 59, 999);\n        \n        const allRecords = get().getTimeRecords(userId);\n        const weekRecords = allRecords.filter(record => {\n          const recordDate = new Date(record.date);\n          return recordDate >= weekStart && recordDate <= weekEnd;\n        });\n        \n        const totalHours = weekRecords.reduce((sum, record) => sum + record.totalHours, 0);\n        return {\n          totalHours,\n          totalDays: weekRecords.length\n        };\n      },\n\n      getTodayRecord: (userId: string) => {\n        const today = new Date().toISOString().split('T')[0];\n        const records = get().getTimeRecords(userId);\n        return records.find(record => record.date === today) || null;\n      },\n\n      isCurrentlyTracking: (userId: string) => {\n        return !!get().currentlyTracking[userId];\n      },\n\n      clockIn: async (userId: string) => {\n        set({ isLoading: true });\n        \n        try {\n          const now = new Date();\n          const timeIn = now.toTimeString().split(' ')[0].substring(0, 5); // HH:MM\n          const today = now.toISOString().split('T')[0];\n          \n          // Check if already clocked in today\n          const existingRecord = get().getTodayRecord(userId);\n          if (existingRecord && !existingRecord.timeOut) {\n            throw new Error('Bereits eingestempelt heute');\n          }\n          \n          // If there's already a completed record today, create a new one\n          if (existingRecord && existingRecord.timeOut) {\n            throw new Error('Heute bereits vollständig erfasst. Bitte HR kontaktieren für Änderungen.');\n          }\n          \n          // Create new time record\n          const newRecord: TimeRecord = {\n            id: `${userId}-${today}-${Date.now()}`,\n            userId,\n            date: today,\n            timeIn,\n            breakMinutes: 0,\n            totalHours: 0\n          };\n          \n          // Add to records and set tracking\n          set(state => ({\n            timeRecords: [...state.timeRecords, newRecord],\n            currentlyTracking: {\n              ...state.currentlyTracking,\n              [userId]: { timeIn, startTime: now.getTime() }\n            },\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      clockOut: async (userId: string, breakMinutes = 30) => {\n        set({ isLoading: true });\n        \n        try {\n          const now = new Date();\n          const timeOut = now.toTimeString().split(' ')[0].substring(0, 5); // HH:MM\n          \n          // Find today's record\n          const todayRecord = get().getTodayRecord(userId);\n          if (!todayRecord || todayRecord.timeOut) {\n            throw new Error('Nicht eingestempelt oder bereits ausgestempelt');\n          }\n          \n          // Calculate total hours\n          const timeInParts = todayRecord.timeIn.split(':');\n          const timeOutParts = timeOut.split(':');\n          const timeInMinutes = parseInt(timeInParts[0]) * 60 + parseInt(timeInParts[1]);\n          const timeOutMinutes = parseInt(timeOutParts[0]) * 60 + parseInt(timeOutParts[1]);\n          const totalMinutes = timeOutMinutes - timeInMinutes - breakMinutes;\n          const totalHours = Math.round((totalMinutes / 60) * 100) / 100;\n          \n          // Update record\n          const updatedRecords = get().timeRecords.map(record =>\n            record.id === todayRecord.id\n              ? { ...record, timeOut, breakMinutes, totalHours }\n              : record\n          );\n          \n          set(state => ({\n            timeRecords: updatedRecords,\n            currentlyTracking: {\n              ...state.currentlyTracking,\n              [userId]: null\n            },\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      addTimeRecord: async (record: Omit<TimeRecord, 'id'>) => {\n        set({ isLoading: true });\n        \n        try {\n          const newRecord: TimeRecord = {\n            ...record,\n            id: `${record.userId}-${record.date}-${Date.now()}`\n          };\n          \n          set(state => ({\n            timeRecords: [...state.timeRecords, newRecord],\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      updateTimeRecord: async (recordId: string, updates: Partial<TimeRecord>) => {\n        set({ isLoading: true });\n        \n        try {\n          const updatedRecords = get().timeRecords.map(record =>\n            record.id === recordId ? { ...record, ...updates } : record\n          );\n          \n          set({ timeRecords: updatedRecords, isLoading: false });\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      deleteTimeRecord: async (recordId: string) => {\n        set({ isLoading: true });\n        \n        try {\n          const filteredRecords = get().timeRecords.filter(record => record.id !== recordId);\n          \n          set({ timeRecords: filteredRecords, isLoading: false });\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      setTimeRecords: (records: TimeRecord[]) => {\n        set({ timeRecords: records });\n      }\n    }),\n    {\n      name: 'time-records-storage',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({ \n        timeRecords: state.timeRecords,\n        currentlyTracking: state.currentlyTracking\n      }),\n    }\n  )\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/state/training.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (362). Maximum allowed is 75.","line":92,"column":1,"nodeType":null,"messageId":"exceed","endLine":417,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (183). Maximum allowed is 30.","line":186,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":404,"endColumn":7},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":393,"column":51,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":393,"endColumn":53,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12115,12117],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\nimport { \n  Training, \n  TrainingLesson, \n  TrainingProgress, \n  TrainingAttempt, \n  TrainingCertificate,\n  AIGenerationRequest,\n  AIGeneratedContent\n} from '../types/training';\n\ninterface TrainingState {\n  trainings: Training[];\n  lessons: TrainingLesson[];\n  progress: TrainingProgress[];\n  attempts: TrainingAttempt[];\n  certificates: TrainingCertificate[];\n  isLoading: boolean;\n  \n  // Training Management\n  createTraining: (training: Omit<Training, 'id' | 'createdAt'>) => Promise<void>;\n  updateTraining: (id: string, updates: Partial<Training>) => void;\n  deleteTraining: (id: string) => void;\n  getTrainingById: (id: string) => Training | undefined;\n  getTrainingsForUser: (userId: string) => Training[];\n  \n  // Lesson Management\n  addLesson: (lesson: Omit<TrainingLesson, 'id'>) => void;\n  updateLesson: (id: string, updates: Partial<TrainingLesson>) => void;\n  deleteLesson: (id: string) => void;\n  getLessonsForTraining: (trainingId: string) => TrainingLesson[];\n  \n  // Progress Tracking\n  getUserProgress: (userId: string, trainingId: string) => TrainingProgress | undefined;\n  updateProgress: (userId: string, trainingId: string, updates: Partial<TrainingProgress>) => void;\n  startTraining: (userId: string, trainingId: string) => void;\n  completeLesson: (userId: string, trainingId: string, lessonId: string) => void;\n  completeTraining: (userId: string, trainingId: string, finalScore: number) => void;\n  \n  // Quiz Management\n  submitQuizAttempt: (attempt: Omit<TrainingAttempt, 'id'>) => void;\n  getUserAttempts: (userId: string, quizId: string) => TrainingAttempt[];\n  \n  // AI Generation\n  generateTrainingContent: (request: AIGenerationRequest) => Promise<AIGeneratedContent>;\n  \n  // Manager Functions\n  getTeamProgress: (userIds: string[]) => TrainingProgress[];\n  getTrainingStatistics: (trainingId: string) => {\n    totalUsers: number;\n    completed: number;\n    inProgress: number;\n    notStarted: number;\n    averageScore: number;\n  };\n}\n\n// Mock data\nconst mockTrainings: Training[] = [\n  {\n    id: '1',\n    title: 'Datenschutz und DSGVO Grundlagen',\n    description: 'Pflichtschulung zu Datenschutz-Grundlagen und DSGVO-Compliance für alle Mitarbeiter',\n    targetAudience: 'ALL',\n    startDate: '2024-01-01',\n    endDate: '2024-12-31',\n    isActive: true,\n    isMandatory: true,\n    createdBy: '2',\n    createdAt: '2024-01-01T10:00:00Z',\n    estimatedDuration: 45,\n    category: 'COMPLIANCE'\n  },\n  {\n    id: '2',\n    title: 'Onboarding Programm',\n    description: 'Umfassendes Einführungsprogramm für neue Mitarbeiter',\n    targetAudience: 'SPECIFIC_USERS',\n    targetUserIds: ['1'],\n    startDate: '2024-12-01',\n    isActive: true,\n    isMandatory: true,\n    createdBy: '2',\n    createdAt: '2024-11-15T14:00:00Z',\n    estimatedDuration: 120,\n    category: 'ONBOARDING'\n  },\n  {\n    id: '3',\n    title: 'Microsoft Office 365 Schulung',\n    description: 'Erweiterte Funktionen von Office 365 für effizienteres Arbeiten',\n    targetAudience: 'DEPARTMENT',\n    targetDepartments: ['IT', 'Administration'],\n    startDate: '2024-11-01',\n    endDate: '2025-01-31',\n    isActive: true,\n    isMandatory: false,\n    createdBy: '2',\n    createdAt: '2024-10-15T09:00:00Z',\n    estimatedDuration: 90,\n    category: 'SKILLS'\n  }\n];\n\nconst mockLessons: TrainingLesson[] = [\n  {\n    id: '1',\n    trainingId: '1',\n    title: 'Was ist Datenschutz?',\n    description: 'Grundlagen des Datenschutzes und warum er wichtig ist',\n    order: 1,\n    content: [\n      {\n        id: '1',\n        type: 'TEXT',\n        title: 'Einführung',\n        content: 'Datenschutz betrifft uns alle und ist ein Grundrecht...',\n        order: 1\n      }\n    ],\n    quiz: {\n      id: 'quiz1',\n      lessonId: '1',\n      questions: [\n        {\n          id: 'q1',\n          question: 'Was bedeutet DSGVO?',\n          options: [\n            'Datenschutz-Grundverordnung',\n            'Deutsche Sicherheits-Grundverordnung',\n            'Digitale Schutz-Grundverordnung',\n            'Daten-Sicherheits-Grundverordnung'\n          ],\n          correctAnswer: 0,\n          explanation: 'DSGVO steht für Datenschutz-Grundverordnung, die europäische Verordnung zum Schutz personenbezogener Daten.'\n        }\n      ],\n      passingScore: 80,\n      maxAttempts: 3\n    },\n    isRequired: true\n  },\n  {\n    id: '2',\n    trainingId: '2',\n    title: 'Willkommen bei HRthis',\n    description: 'Erste Schritte und Orientierung im Unternehmen',\n    order: 1,\n    content: [\n      {\n        id: '2',\n        type: 'TEXT',\n        title: 'Unternehmenswerte',\n        content: 'Willkommen bei HRthis! Unsere Werte sind...',\n        order: 1\n      }\n    ],\n    isRequired: true\n  }\n];\n\nconst mockProgress: TrainingProgress[] = [\n  {\n    id: '1',\n    userId: '1',\n    trainingId: '1',\n    status: 'IN_PROGRESS',\n    currentLessonId: '1',\n    completedLessons: [],\n    startedAt: '2024-12-15T10:00:00Z',\n    lastActivityAt: '2024-12-15T10:30:00Z'\n  },\n  {\n    id: '2',\n    userId: '1',\n    trainingId: '2',\n    status: 'NOT_STARTED',\n    completedLessons: []\n  }\n];\n\nexport const useTrainingStore = create<TrainingState>()(\n  persist(\n    (set, get) => ({\n      trainings: mockTrainings,\n      lessons: mockLessons,\n      progress: mockProgress,\n      attempts: [],\n      certificates: [],\n      isLoading: false,\n\n      createTraining: async (trainingData) => {\n        set({ isLoading: true });\n        \n        try {\n          await new Promise(resolve => setTimeout(resolve, 1000));\n          \n          const newTraining: Training = {\n            ...trainingData,\n            id: Date.now().toString(),\n            createdAt: new Date().toISOString()\n          };\n          \n          set(state => ({\n            trainings: [...state.trainings, newTraining],\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      updateTraining: (id: string, updates: Partial<Training>) => {\n        set(state => ({\n          trainings: state.trainings.map(training =>\n            training.id === id ? { ...training, ...updates } : training\n          )\n        }));\n      },\n\n      deleteTraining: (id: string) => {\n        set(state => ({\n          trainings: state.trainings.filter(training => training.id !== id),\n          lessons: state.lessons.filter(lesson => lesson.trainingId !== id),\n          progress: state.progress.filter(progress => progress.trainingId !== id)\n        }));\n      },\n\n      getTrainingById: (id: string) => {\n        return get().trainings.find(training => training.id === id);\n      },\n\n      getTrainingsForUser: (userId: string) => {\n        const { trainings } = get();\n        return trainings.filter(training => {\n          if (!training.isActive) return false;\n          \n          switch (training.targetAudience) {\n            case 'ALL':\n              return true;\n            case 'SPECIFIC_USERS':\n              return training.targetUserIds?.includes(userId) || false;\n            case 'DEPARTMENT':\n              // In real app, would check user's department\n              return true;\n            default:\n              return false;\n          }\n        });\n      },\n\n      addLesson: (lessonData) => {\n        const newLesson: TrainingLesson = {\n          ...lessonData,\n          id: Date.now().toString()\n        };\n        \n        set(state => ({\n          lessons: [...state.lessons, newLesson]\n        }));\n      },\n\n      updateLesson: (id: string, updates: Partial<TrainingLesson>) => {\n        set(state => ({\n          lessons: state.lessons.map(lesson =>\n            lesson.id === id ? { ...lesson, ...updates } : lesson\n          )\n        }));\n      },\n\n      deleteLesson: (id: string) => {\n        set(state => ({\n          lessons: state.lessons.filter(lesson => lesson.id !== id)\n        }));\n      },\n\n      getLessonsForTraining: (trainingId: string) => {\n        return get().lessons\n          .filter(lesson => lesson.trainingId === trainingId)\n          .sort((a, b) => a.order - b.order);\n      },\n\n      getUserProgress: (userId: string, trainingId: string) => {\n        return get().progress.find(p => p.userId === userId && p.trainingId === trainingId);\n      },\n\n      updateProgress: (userId: string, trainingId: string, updates: Partial<TrainingProgress>) => {\n        set(state => ({\n          progress: state.progress.map(progress =>\n            progress.userId === userId && progress.trainingId === trainingId\n              ? { ...progress, ...updates, lastActivityAt: new Date().toISOString() }\n              : progress\n          )\n        }));\n      },\n\n      startTraining: (userId: string, trainingId: string) => {\n        const existingProgress = get().getUserProgress(userId, trainingId);\n        \n        if (!existingProgress) {\n          const newProgress: TrainingProgress = {\n            id: Date.now().toString(),\n            userId,\n            trainingId,\n            status: 'IN_PROGRESS',\n            completedLessons: [],\n            startedAt: new Date().toISOString(),\n            lastActivityAt: new Date().toISOString()\n          };\n          \n          set(state => ({\n            progress: [...state.progress, newProgress]\n          }));\n        } else {\n          get().updateProgress(userId, trainingId, { status: 'IN_PROGRESS' });\n        }\n      },\n\n      completeLesson: (userId: string, trainingId: string, lessonId: string) => {\n        const progress = get().getUserProgress(userId, trainingId);\n        if (!progress) return;\n        \n        const completedLessons = [...progress.completedLessons];\n        if (!completedLessons.includes(lessonId)) {\n          completedLessons.push(lessonId);\n        }\n        \n        get().updateProgress(userId, trainingId, {\n          completedLessons,\n          currentLessonId: lessonId\n        });\n      },\n\n      completeTraining: (userId: string, trainingId: string, finalScore: number) => {\n        get().updateProgress(userId, trainingId, {\n          status: finalScore >= 70 ? 'COMPLETED' : 'FAILED',\n          finalScore,\n          completedAt: new Date().toISOString()\n        });\n      },\n\n      submitQuizAttempt: (attemptData) => {\n        const newAttempt: TrainingAttempt = {\n          ...attemptData,\n          id: Date.now().toString()\n        };\n        \n        set(state => ({\n          attempts: [...state.attempts, newAttempt]\n        }));\n      },\n\n      getUserAttempts: (userId: string, quizId: string) => {\n        return get().attempts.filter(attempt => \n          attempt.userId === userId && attempt.quizId === quizId\n        ).sort((a, b) => b.attemptNumber - a.attemptNumber);\n      },\n\n      generateTrainingContent: async (request: AIGenerationRequest) => {\n        set({ isLoading: true });\n        \n        try {\n          // Import AI service dynamically to avoid circular dependencies\n          const { generateTrainingContent } = await import('../api/training-ai');\n          const generatedContent = await generateTrainingContent(request);\n          \n          set({ isLoading: false });\n          return generatedContent;\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      getTeamProgress: (userIds: string[]) => {\n        return get().progress.filter(progress => userIds.includes(progress.userId));\n      },\n\n      getTrainingStatistics: (trainingId: string) => {\n        const { progress } = get();\n        const trainingProgress = progress.filter(p => p.trainingId === trainingId);\n        \n        const completed = trainingProgress.filter(p => p.status === 'COMPLETED').length;\n        const inProgress = trainingProgress.filter(p => p.status === 'IN_PROGRESS').length;\n        const failed = trainingProgress.filter(p => p.status === 'FAILED').length;\n        const notStarted = trainingProgress.filter(p => p.status === 'NOT_STARTED').length;\n        \n        const scoresSum = trainingProgress\n          .filter(p => p.finalScore !== undefined)\n          .reduce((sum, p) => sum + (p.finalScore || 0), 0);\n        const scoresCount = trainingProgress.filter(p => p.finalScore !== undefined).length;\n        \n        return {\n          totalUsers: trainingProgress.length,\n          completed,\n          inProgress,\n          notStarted: notStarted + failed, // Count failed as not started for simplicity\n          averageScore: scoresCount > 0 ? scoresSum / scoresCount : 0\n        };\n      }\n    }),\n    {\n      name: 'training-storage',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({ \n        trainings: state.trainings,\n        lessons: state.lessons,\n        progress: state.progress,\n        attempts: state.attempts,\n        certificates: state.certificates\n      }),\n    }\n  )\n);","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/test-utils/test-utils.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":48,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":48,"endColumn":131},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":56,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":58,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":80,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":80,"endColumn":50},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (80). Maximum allowed is 75.","line":100,"column":1,"nodeType":null,"messageId":"exceed","endLine":104,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { render, RenderOptions } from '@testing-library/react';\nimport React, { ReactElement } from 'react';\nimport { BrowserRouter } from 'react-router-dom';\n\n// Mock stores for testing\nimport { useAuthStore } from '../state/auth';\nimport { User, Organization } from '../types';\n\n// Create mock user\nexport const mockUser: User = {\n  id: 'test-user-1',\n  email: 'test@example.com',\n  name: 'Test User',\n  firstName: 'Test',\n  lastName: 'User',\n  role: 'EMPLOYEE',\n  organizationId: 'org1',\n  position: 'Developer',\n  department: 'IT',\n  weeklyHours: 40,\n  employmentType: 'FULL_TIME',\n  employmentStatus: 'ACTIVE',\n  vacationDays: 30,\n  joinDate: '2023-01-01',\n};\n\nexport const mockAdmin: User = {\n  ...mockUser,\n  id: 'test-admin-1',\n  email: 'admin@example.com',\n  name: 'Admin User',\n  role: 'ADMIN',\n};\n\nexport const mockOrganization: Organization = {\n  id: 'org1',\n  name: 'Test Organization',\n  slug: 'test-org',\n};\n\n// Custom render function that includes providers\ninterface CustomRenderOptions extends Omit<RenderOptions, 'wrapper'> {\n  initialRoute?: string;\n  user?: User | null;\n  isAuthenticated?: boolean;\n}\n\nconst AllTheProviders = ({ children, initialRoute: _initialRoute = '/' }: { children: React.ReactNode; initialRoute?: string }) => {\n  return (\n    <BrowserRouter>\n      {children}\n    </BrowserRouter>\n  );\n};\n\nexport const customRender = (ui: ReactElement, {\n    initialRoute = '/', user = mockUser, isAuthenticated = true, ...renderOptions\n  }: CustomRenderOptions = {}) => {\n  // Mock auth store state\n  useAuthStore.setState({\n    user,\n    isAuthenticated,\n    organization: mockOrganization,\n    isLoading: false,\n  });\n\n  window.history.pushState({}, 'Test page', initialRoute);\n\n  return render(ui, {\n    wrapper: ({ children }) => <AllTheProviders initialRoute={initialRoute}>{children}</AllTheProviders>,\n    ...renderOptions,\n  });\n};\n\n// Re-export everything from React Testing Library\nexport * from '@testing-library/react';\nexport { customRender as render };\n\n// Utility functions for testing\nexport const waitForLoadingToFinish = async () => {\n  // Wait for any loading states to resolve\n  await new Promise(resolve => setTimeout(resolve, 0));\n};\n\n// Mock navigation\nexport const mockNavigate = jest.fn();\njest.mock('react-router-dom', () => ({\n  ...jest.requireActual('react-router-dom'),\n  useNavigate: () => mockNavigate,\n}));\n\n// Reset all mocks between tests\nbeforeEach(() => {\n  jest.clearAllMocks();\n  mockNavigate.mockClear();\n  \n  // Reset store states\n  useAuthStore.setState({\n    user: null,\n    organization: null,\n    isAuthenticated: false,\n    isLoading: false,\n  });\n});","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/types/ai.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/types/avatar.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (153). Maximum allowed is 75.","line":88,"column":1,"nodeType":null,"messageId":"exceed","endLine":181,"endColumn":3},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":88,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2225,2228],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2225,2228],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Avatar and Gamification System Types\n */\n\nexport interface Skill {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  color: string;\n  currentXP: number;\n  level: number;\n  totalXP: number; // Total XP ever earned for this skill\n}\n\nexport interface Level {\n  id: string;\n  levelNumber: number;\n  title: string;\n  description?: string;\n  requiredXP: number;\n  icon?: string;\n  color?: string;\n  badge?: string;\n  rewards?: LevelReward[];\n}\n\nexport interface LevelReward {\n  type: 'coins' | 'achievement' | 'benefit' | 'title';\n  value: string | number;\n  description: string;\n}\n\nexport interface Achievement {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  category: 'learning' | 'attendance' | 'engagement' | 'special' | 'milestone';\n  rarity: 'common' | 'rare' | 'epic' | 'legendary';\n  conditions: AchievementCondition[];\n  rewards?: AchievementReward[];\n  isVisible: boolean; // Hidden until unlocked\n  unlockedAt?: string; // ISO timestamp\n}\n\nexport interface AchievementCondition {\n  type: 'trainings_completed' | 'days_punctual' | 'coins_earned' | 'feedback_given' | 'custom';\n  operator: 'equals' | 'greater_than' | 'less_than' | 'between';\n  value: number | [number, number];\n  timeframe?: 'all_time' | 'monthly' | 'quarterly' | 'yearly';\n}\n\nexport interface AchievementReward {\n  type: 'xp' | 'coins' | 'skill_xp' | 'title' | 'benefit_unlock';\n  value: number | string;\n  skillId?: string; // For skill_xp rewards\n}\n\nexport interface UserAvatar {\n  userId: string;\n  level: number;\n  totalXP: number;\n  currentLevelXP: number;\n  nextLevelXP: number;\n  title?: string;\n  avatarUrl?: string;\n  skills: Skill[];\n  achievements: UserAchievement[];\n  lastActiveAt: string;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface UserAchievement {\n  achievementId: string;\n  unlockedAt: string;\n  isNew?: boolean; // For highlighting new achievements\n}\n\nexport interface XPEvent {\n  id: string;\n  userId: string;\n  type: 'training_completed' | 'training_passed' | 'punctual_checkin' | 'coins_earned' | 'feedback_given' | 'daily_login' | 'manual';\n  skillId?: string; // Which skill gets the XP\n  xpAmount: number;\n  description: string;\n  metadata?: Record<string, any>; // Additional data (training ID, etc.)\n  createdAt: string;\n}\n\nexport interface LevelUpEvent {\n  userId: string;\n  oldLevel: number;\n  newLevel: number;\n  skillId?: string; // null for overall level\n  rewards: LevelReward[];\n  timestamp: string;\n}\n\n// Default skill IDs\nexport const SKILL_IDS = {\n  KNOWLEDGE: 'knowledge',\n  LOYALTY: 'loyalty', \n  HUSTLE: 'hustle'\n} as const;\n\n// Default skills configuration\nexport const DEFAULT_SKILLS: Omit<Skill, 'currentXP' | 'level' | 'totalXP'>[] = [\n  {\n    id: SKILL_IDS.KNOWLEDGE,\n    name: '🎓 Wissen',\n    description: 'Durch Schulungen und Lernen erworbenes Wissen',\n    icon: '🎓',\n    color: '#3B82F6'\n  },\n  {\n    id: SKILL_IDS.LOYALTY,\n    name: '🔁 Loyalität', \n    description: 'Treue und regelmäßige Aktivität im Unternehmen',\n    icon: '🔁',\n    color: '#10B981'\n  },\n  {\n    id: SKILL_IDS.HUSTLE,\n    name: '💪 Hustle',\n    description: 'Engagement und Initiative durch BrowoCoins',\n    icon: '💪',\n    color: '#F59E0B'\n  }\n];\n\n// XP calculation helpers\nexport const calculateLevelFromXP = (xp: number): number => {\n  // Progressive XP requirement: Level 1 = 100 XP, Level 2 = 250 XP, etc.\n  let level = 1;\n  let requiredXP = 100;\n  let totalRequired = 0;\n  \n  while (totalRequired + requiredXP <= xp) {\n    totalRequired += requiredXP;\n    level++;\n    requiredXP = Math.floor(requiredXP * 1.15); // 15% increase per level\n  }\n  \n  return level;\n};\n\nexport const calculateXPForLevel = (level: number): number => {\n  let totalXP = 0;\n  let requiredXP = 100;\n  \n  for (let i = 1; i < level; i++) {\n    totalXP += requiredXP;\n    requiredXP = Math.floor(requiredXP * 1.15);\n  }\n  \n  return totalXP;\n};\n\nexport const calculateXPProgress = (currentXP: number): {\n  level: number;\n  currentLevelXP: number;\n  nextLevelXP: number;\n  progress: number;\n} => {\n  const level = calculateLevelFromXP(currentXP);\n  const currentLevelStartXP = calculateXPForLevel(level);\n  const nextLevelStartXP = calculateXPForLevel(level + 1);\n  \n  const currentLevelXP = currentXP - currentLevelStartXP;\n  const nextLevelXP = nextLevelStartXP - currentLevelStartXP;\n  const progress = nextLevelXP > 0 ? (currentLevelXP / nextLevelXP) * 100 : 0;\n  \n  return {\n    level,\n    currentLevelXP,\n    nextLevelXP,\n    progress: Math.min(100, Math.max(0, progress))\n  };\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/types/benefits.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/types/calendar.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (108). Maximum allowed is 75.","line":125,"column":1,"nodeType":null,"messageId":"exceed","endLine":169,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { VacationReminder } from './reminders';\n\nimport { LeaveRequest } from './index';\n\n/**\n * Calendar entry type for tracking absences and work times\n */\nexport type CalendarEntry = {\n  userId: string;\n  userName: string;\n  date: string; // Format: YYYY-MM-DD\n  type: \"urlaub\" | \"krank\" | \"meeting\" | \"fortbildung\" | \"ux\" | \"zeit\";\n  stunden?: number; // nur bei Arbeitszeiteinträgen\n  status?: \"beantragt\" | \"genehmigt\" | \"abgelehnt\";\n  title?: string;\n  color?: string;\n};\n\n/**\n * Calendar view modes\n */\nexport type CalendarViewMode = \"month\" | \"week\" | \"day\" | \"personal\" | \"team\" | \"year\";\n\n/**\n * Calendar view configuration\n */\nexport type CalendarView = CalendarViewMode;\n\n/**\n * User leave information for calendar display\n */\nexport interface UserLeave {\n  id: string;\n  userId: string;\n  startDate: string;\n  endDate: string;\n  type: 'VACATION' | 'SICK';\n  status: 'PENDING' | 'APPROVED' | 'REJECTED';\n  comment?: string;\n}\n\n/**\n * User time record for calendar display\n */\nexport interface UserTimeRecord {\n  id: string;\n  userId: string;\n  date: string;\n  timeIn: string;\n  timeOut?: string;\n  breakMinutes: number;\n  totalHours: number;\n}\n\n/**\n * Leave entry for calendar display\n */\nexport interface LeaveEntry {\n  id: string;\n  userId: string;\n  userName: string;\n  startDate: string;\n  endDate: string;\n  type: 'VACATION' | 'SICK';\n  status: 'PENDING' | 'APPROVED' | 'REJECTED';\n  comment?: string;\n}\n\n/**\n * Reminder entry for calendar display\n */\nexport interface ReminderEntry {\n  id: string;\n  title: string;\n  description?: string;\n  date: string;\n  userId?: string;\n  type: 'personal' | 'team' | 'organization';\n}\n\n/**\n * Calendar day representation\n */\nexport type CalendarDay = {\n  date: Date | string;\n  entries: CalendarEntry[];\n  isToday: boolean;\n  isWeekend: boolean;\n  isCurrentMonth?: boolean;\n  userLeaves?: UserLeave[];\n  userTimeRecord?: UserTimeRecord;\n  leaves?: LeaveRequest[];\n  reminders?: VacationReminder[];\n};\n\n/**\n * Calendar event (alias for CalendarEntry for backward compatibility)\n */\nexport type CalendarEvent = CalendarEntry;\n\n/**\n * Calendar filter modes for UI\n */\nexport type CalendarFilterMode = 'all' | 'leaves' | 'work';\n\n/**\n * Vacation statistics\n */\nexport type VacationStats = {\n  totalDays: number;\n  usedDays: number;\n  remainingDays: number;\n  pendingDays: number;\n};\n\n/**\n * Calendar filter options\n */\nexport type CalendarFilter = {\n  userId?: string;\n  type?: CalendarEntry['type'];\n  dateRange?: {\n    start: string;\n    end: string;\n  };\n};\n\n/**\n * Color mapping for different entry types\n */\nexport const colorMap = {\n  urlaub: \"#9df09d\",\n  krank: \"#000000\",\n  meeting: \"#5b8df6\",\n  fortbildung: \"#ffc966\",\n  ux: \"#f55959\",\n  zeit: {\n    vollzeit: \"#98c1f2\",\n    teilzeit: \"#f7d560\",\n    unter6h: \"#f2a19e\"\n  }\n};\n\n/**\n * Abbreviations for entry types\n */\nexport const abbreviationMap = {\n  urlaub: \"U\",\n  krank: \"K\",\n  meeting: \"M\",\n  fortbildung: \"F\",\n  ux: \"Ux\",\n  zeit: (hours?: number) => {\n    if (!hours) return \"?\";\n    if (hours >= 8) return \"Le\";\n    if (hours >= 6) return \"Te\";\n    return \"Ue\";\n  }\n};\n\n/**\n * Get color for work time based on hours\n */\nexport const getWorkTimeColor = (hours?: number): string => {\n  if (!hours) return colorMap.zeit.unter6h;\n  if (hours >= 8) return colorMap.zeit.vollzeit;\n  if (hours >= 6) return colorMap.zeit.teilzeit;\n  return colorMap.zeit.unter6h;\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/types/dashboardInfo.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (104). Maximum allowed is 75.","line":185,"column":1,"nodeType":null,"messageId":"exceed","endLine":245,"endColumn":76}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Dashboard Info Types\n * \n * Type definitions for the dashboard info system that allows admins\n * to upload and manage files (images, PDFs) for display in user dashboards.\n */\n\n/**\n * Supported file types for dashboard info uploads\n */\nexport type DashboardInfoFileType = 'image' | 'pdf';\n\n/**\n * Supported image MIME types\n */\nexport type ImageMimeType = 'image/png' | 'image/jpeg' | 'image/jpg' | 'image/svg+xml';\n\n/**\n * Supported PDF MIME type\n */\nexport type PdfMimeType = 'application/pdf';\n\n/**\n * All supported MIME types\n */\nexport type SupportedMimeType = ImageMimeType | PdfMimeType;\n\n/**\n * File upload information\n */\nexport interface DashboardInfoFile {\n  /** Unique identifier for the file */\n  id: string;\n  /** Original filename */\n  filename: string;\n  /** File MIME type */\n  mimeType: SupportedMimeType;\n  /** File type category */\n  type: DashboardInfoFileType;\n  /** File size in bytes */\n  size: number;\n  /** Base64 encoded file data (for demo purposes) */\n  data: string;\n  /** File URL (when using cloud storage) */\n  url?: string;\n  /** Upload timestamp */\n  uploadedAt: string;\n}\n\n/**\n * Dashboard info item that will be displayed to users\n */\nexport interface DashboardInfo {\n  /** Unique identifier */\n  id: string;\n  /** Title of the info item (required) */\n  title: string;\n  /** Optional description */\n  description?: string;\n  /** Attached file */\n  file: DashboardInfoFile;\n  /** Whether the info is currently active/visible */\n  isActive: boolean;\n  /** Creation timestamp */\n  createdAt: string;\n  /** Last update timestamp */\n  updatedAt: string;\n  /** ID of admin who created this */\n  createdBy: string;\n  /** Optional expiry date for automatic deactivation */\n  expiresAt?: string;\n}\n\n/**\n * Form data for creating new dashboard info\n */\nexport interface CreateDashboardInfoForm {\n  /** Title of the info item */\n  title: string;\n  /** Optional description */\n  description: string;\n  /** File to upload */\n  file: File | null;\n  /** Optional expiry date */\n  expiresAt?: string;\n}\n\n/**\n * Form data for updating existing dashboard info\n */\nexport interface UpdateDashboardInfoForm {\n  /** Updated title */\n  title?: string;\n  /** Updated description */\n  description?: string;\n  /** Replacement file (optional) */\n  file?: File | null;\n  /** Updated expiry date */\n  expiresAt?: string;\n  /** Whether to activate/deactivate */\n  isActive?: boolean;\n}\n\n/**\n * File upload validation result\n */\nexport interface FileValidationResult {\n  /** Whether the file is valid */\n  isValid: boolean;\n  /** Error message if invalid */\n  error?: string;\n  /** File type if valid */\n  type?: DashboardInfoFileType;\n}\n\n/**\n * Dashboard info display configuration\n */\nexport interface DashboardInfoDisplayConfig {\n  /** Maximum number of items to show */\n  maxItems: number;\n  /** Whether to show descriptions */\n  showDescriptions: boolean;\n  /** Whether to show upload dates */\n  showDates: boolean;\n  /** Card layout style */\n  cardStyle: 'compact' | 'expanded';\n}\n\n/**\n * File upload progress information\n */\nexport interface FileUploadProgress {\n  /** File identifier */\n  fileId: string;\n  /** Upload progress percentage (0-100) */\n  progress: number;\n  /** Whether upload is complete */\n  isComplete: boolean;\n  /** Error message if upload failed */\n  error?: string;\n}\n\n/**\n * Dashboard info statistics for admin overview\n */\nexport interface DashboardInfoStats {\n  /** Total number of info items */\n  totalItems: number;\n  /** Number of active items */\n  activeItems: number;\n  /** Number of expired items */\n  expiredItems: number;\n  /** Total storage used in bytes */\n  totalStorageUsed: number;\n  /** Number of image files */\n  imageCount: number;\n  /** Number of PDF files */\n  pdfCount: number;\n}\n\n/**\n * Sort options for dashboard info list\n */\nexport type DashboardInfoSortOption = \n  | 'newest'\n  | 'oldest' \n  | 'title-asc'\n  | 'title-desc'\n  | 'size-asc'\n  | 'size-desc';\n\n/**\n * Filter options for dashboard info list\n */\nexport interface DashboardInfoFilters {\n  /** Filter by file type */\n  fileType?: DashboardInfoFileType;\n  /** Filter by active status */\n  isActive?: boolean;\n  /** Filter by creator */\n  createdBy?: string;\n  /** Filter by date range */\n  dateRange?: {\n    start: string;\n    end: string;\n  };\n}\n\n/**\n * Dashboard info store state\n */\nexport interface DashboardInfoState {\n  /** All dashboard info items */\n  items: DashboardInfo[];\n  /** Currently uploading files */\n  uploadProgress: Record<string, FileUploadProgress>;\n  /** Loading state */\n  isLoading: boolean;\n  /** Error state */\n  error: string | null;\n  /** Display configuration */\n  displayConfig: DashboardInfoDisplayConfig;\n  /** Current sort option */\n  sortBy: DashboardInfoSortOption;\n  /** Current filters */\n  filters: DashboardInfoFilters;\n}\n\n/**\n * Dashboard info store actions\n */\nexport interface DashboardInfoActions {\n  /** Load all dashboard info items */\n  loadItems: () => Promise<void>;\n  /** Create new dashboard info item */\n  createItem: (data: CreateDashboardInfoForm) => Promise<DashboardInfo>;\n  /** Update existing dashboard info item */\n  updateItem: (id: string, data: UpdateDashboardInfoForm) => Promise<DashboardInfo>;\n  /** Delete dashboard info item */\n  deleteItem: (id: string) => Promise<void>;\n  /** Toggle active status */\n  toggleActive: (id: string) => Promise<void>;\n  /** Get active items for user dashboard */\n  getActiveItems: () => DashboardInfo[];\n  /** Get statistics */\n  getStats: () => DashboardInfoStats;\n  /** Update sort option */\n  setSortBy: (sortBy: DashboardInfoSortOption) => void;\n  /** Update filters */\n  setFilters: (filters: Partial<DashboardInfoFilters>) => void;\n  /** Update display configuration */\n  updateDisplayConfig: (config: Partial<DashboardInfoDisplayConfig>) => void;\n  /** Validate file for upload */\n  validateFile: (file: File) => FileValidationResult;\n  /** Convert file to base64 */\n  fileToBase64: (file: File) => Promise<string>;\n  /** Calculate file size in human readable format */\n  formatFileSize: (bytes: number) => string;\n}\n\n/**\n * Complete dashboard info store type\n */\nexport type DashboardInfoStore = DashboardInfoState & DashboardInfoActions;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/types/gamification.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (349). Maximum allowed is 75.","line":85,"column":1,"nodeType":null,"messageId":"exceed","endLine":374,"endColumn":3},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":141,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3171,3174],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3171,3174],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Gamification Events and Tracking Types\n */\n\nexport interface GamificationConfig {\n  xpRates: {\n    trainingCompleted: number;\n    punctualCheckin: number;\n    coinsEarned: number; // XP per coin earned\n    feedbackGiven: number;\n    dailyLogin: number;\n  };\n  coinMilestones: {\n    quarterly: number[];\n    yearly: number[];\n  };\n  achievementCategories: AchievementCategory[];\n  levelSystem: {\n    baseXP: number;\n    multiplier: number;\n  };\n}\n\nexport interface AchievementCategory {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  color: string;\n}\n\nexport interface NotificationEvent {\n  id: string;\n  userId: string;\n  type: 'level_up' | 'achievement_unlocked' | 'skill_level_up' | 'milestone_reached';\n  title: string;\n  message: string;\n  data: {\n    level?: number;\n    skillId?: string;\n    achievementId?: string;\n    xpGained?: number;\n    coinsGained?: number;\n  };\n  isRead: boolean;\n  createdAt: string;\n}\n\nexport interface Achievement {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  category: string;\n  rarity: 'common' | 'rare' | 'epic' | 'legendary';\n  conditions: AchievementCondition[];\n  xpReward: number;\n  rewards?: AchievementReward[];\n  isActive: boolean;\n  isHidden?: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface UserAchievement {\n  id: string;\n  userId: string;\n  achievementId: string;\n  progress?: number;\n  unlockedAt: string;\n  notified: boolean;\n  name: string;\n  description: string;\n  icon: string;\n  rarity: 'common' | 'rare' | 'epic' | 'legendary';\n}\n\nexport interface AchievementCondition {\n  type: 'xp_earned' | 'training_completed' | 'punctual_checkins' | 'coins_earned' | \n        'level_reached' | 'feedback_given' | 'consecutive_days' | 'trainings_completed' |\n        'days_punctual';\n  target: number;\n  operator: 'gte' | 'gt' | 'eq' | 'lt' | 'lte' | 'equals';\n  skillId?: string;\n  timeframe?: 'all_time' | 'quarterly' | 'monthly' | 'weekly';\n}\n\nexport interface AchievementReward {\n  type: 'xp' | 'skill_xp' | 'coins' | 'title' | 'avatar_item';\n  value: number | string;\n  skillId?: string;\n}\n\nexport interface ProgressTracker {\n  userId: string;\n  achievements: {\n    [achievementId: string]: {\n      progress: number;\n      maxProgress: number;\n      isCompleted: boolean;\n      lastUpdated: string;\n    };\n  };\n  dailyStreak: {\n    current: number;\n    longest: number;\n    lastCheckin: string;\n  };\n  quarterlyStats: {\n    quarter: string; // \"2024-Q1\"\n    coinsEarned: number;\n    trainingsCompleted: number;\n    punctualDays: number;\n    feedbackGiven: number;\n  };\n}\n\n// Event types for XP tracking\nexport type XPEventType = \n  | 'training_completed'\n  | 'training_passed'\n  | 'punctual_checkin'\n  | 'coins_earned'\n  | 'feedback_given'\n  | 'daily_login'\n  | 'manual';\n\nexport interface XPEventData {\n  type: XPEventType;\n  userId: string;\n  skillIds?: string[]; // Which skills to award XP to\n  xpAmount?: number; // Override default XP amount\n  metadata?: {\n    trainingId?: string;\n    coinAmount?: number;\n    streakDay?: number;\n    reason?: string;\n    passed?: boolean;\n    feedbackId?: string;\n    date?: string;\n    [key: string]: any;\n  };\n}\n\n// Predefined achievements\nexport const PREDEFINED_ACHIEVEMENTS = [\n  // Learning Achievements\n  {\n    id: 'first_training',\n    name: 'Erste Schritte',\n    description: 'Erste Schulung erfolgreich abgeschlossen',\n    icon: '🎯',\n    category: 'learning' as const,\n    rarity: 'common' as const,\n    conditions: [{\n      type: 'trainings_completed' as const,\n      operator: 'equals' as const,\n      target: 1,\n      timeframe: 'all_time' as const\n    }],\n    rewards: [{ type: 'xp' as const, value: 50 }]\n  },\n  {\n    id: 'knowledge_seeker',\n    name: 'Wissenssucher',\n    description: '5 Schulungen erfolgreich abgeschlossen',\n    icon: '📚',\n    category: 'learning' as const,\n    rarity: 'common' as const,\n    conditions: [{\n      type: 'trainings_completed' as const,\n      operator: 'equals' as const,\n      target: 5,\n      timeframe: 'all_time' as const\n    }],\n    rewards: [\n      { type: 'skill_xp' as const, value: 100, skillId: 'knowledge' },\n      { type: 'coins' as const, value: 50 }\n    ]\n  },\n  {\n    id: 'training_master',\n    name: 'Schulmeister',\n    description: '10 Schulungen erfolgreich abgeschlossen',\n    icon: '🎓',\n    category: 'learning' as const,\n    rarity: 'rare' as const,\n    conditions: [{\n      type: 'trainings_completed' as const,\n      operator: 'equals' as const,\n      target: 10,\n      timeframe: 'all_time' as const\n    }],\n    rewards: [\n      { type: 'skill_xp' as const, value: 200, skillId: 'knowledge' },\n      { type: 'coins' as const, value: 100 },\n      { type: 'title' as const, value: 'Schulmeister' }\n    ]\n  },\n  \n  // Attendance Achievements  \n  {\n    id: 'punctual_week',\n    name: 'Pünktlichkeits-Profi',\n    description: '7 Tage hintereinander pünktlich',\n    icon: '⏰',\n    category: 'attendance' as const,\n    rarity: 'common' as const,\n    conditions: [{\n      type: 'days_punctual' as const,\n      operator: 'equals' as const,\n      target: 7,\n      timeframe: 'all_time' as const\n    }],\n    rewards: [\n      { type: 'skill_xp' as const, value: 75, skillId: 'loyalty' },\n      { type: 'coins' as const, value: 25 }\n    ]\n  },\n  {\n    id: 'punctual_month',\n    name: 'Zeitmanagement-Experte', \n    description: '30 Tage pünktlich gestempelt',\n    icon: '🕐',\n    category: 'attendance' as const,\n    rarity: 'rare' as const,\n    conditions: [{\n      type: 'days_punctual' as const,\n      operator: 'equals' as const,\n      target: 30,\n      timeframe: 'all_time' as const\n    }],\n    rewards: [\n      { type: 'skill_xp' as const, value: 150, skillId: 'loyalty' },\n      { type: 'coins' as const, value: 75 },\n      { type: 'title' as const, value: 'Zeitmanagement-Experte' }\n    ]\n  },\n\n  // Engagement Achievements\n  {\n    id: 'coin_collector',\n    name: 'Münzsammler',\n    description: '100 BrowoCoins gesammelt',\n    icon: '🪙',\n    category: 'engagement' as const,\n    rarity: 'common' as const,\n    conditions: [{\n      type: 'coins_earned' as const,\n      operator: 'equals' as const,\n      target: 100,\n      timeframe: 'all_time' as const\n    }],\n    rewards: [\n      { type: 'skill_xp' as const, value: 50, skillId: 'hustle' },\n      { type: 'xp' as const, value: 25 }\n    ]\n  },\n  {\n    id: 'browo_legend',\n    name: 'Browo Legend',\n    description: '2500 Coins in einem Quartal',\n    icon: '👑',\n    category: 'milestone' as const,\n    rarity: 'legendary' as const,\n    conditions: [{\n      type: 'coins_earned' as const,\n      operator: 'equals' as const,\n      target: 2500,\n      timeframe: 'quarterly' as const\n    }],\n    rewards: [\n      { type: 'skill_xp' as const, value: 500, skillId: 'hustle' },\n      { type: 'xp' as const, value: 250 },\n      { type: 'title' as const, value: 'Browo Legend' },\n      { type: 'coins' as const, value: 250 }\n    ]\n  },\n\n  // Feedback Achievements\n  {\n    id: 'feedback_giver',\n    name: 'Feedback-Geber',\n    description: '5 Bewertungen abgegeben',\n    icon: '💬',\n    category: 'engagement' as const,\n    rarity: 'common' as const,\n    conditions: [{\n      type: 'feedback_given' as const,\n      operator: 'equals' as const,\n      target: 5,\n      timeframe: 'all_time' as const\n    }],\n    rewards: [\n      { type: 'skill_xp' as const, value: 75, skillId: 'loyalty' },\n      { type: 'coins' as const, value: 30 }\n    ]\n  },\n  {\n    id: 'feedback_veteran',\n    name: 'Feedback-Veteran',\n    description: '25 Bewertungen abgegeben',\n    icon: '🗣️',\n    category: 'engagement' as const,\n    rarity: 'rare' as const,\n    conditions: [{\n      type: 'feedback_given' as const,\n      operator: 'equals' as const,\n      target: 25,\n      timeframe: 'all_time' as const\n    }],\n    rewards: [\n      { type: 'skill_xp' as const, value: 150, skillId: 'loyalty' },\n      { type: 'coins' as const, value: 75 },\n      { type: 'title' as const, value: 'Feedback-Veteran' }\n    ]\n  }\n] as const;\n\n// Default gamification configuration\nexport const DEFAULT_GAMIFICATION_CONFIG: GamificationConfig = {\n  xpRates: {\n    trainingCompleted: 50,\n    punctualCheckin: 5,\n    coinsEarned: 0.1, // 1 XP per 10 coins\n    feedbackGiven: 15,\n    dailyLogin: 2\n  },\n  coinMilestones: {\n    quarterly: [500, 1000, 1500, 2000, 2500],\n    yearly: [2000, 5000, 8000, 12000, 15000]\n  },\n  levelSystem: {\n    baseXP: 100,\n    multiplier: 1.15\n  },\n  achievementCategories: [\n    {\n      id: 'learning',\n      name: 'Lernen',\n      description: 'Schulungen und Wissensaufbau',\n      icon: '🎓',\n      color: '#3B82F6'\n    },\n    {\n      id: 'attendance', \n      name: 'Anwesenheit',\n      description: 'Pünktlichkeit und Zuverlässigkeit',\n      icon: '⏰',\n      color: '#10B981'\n    },\n    {\n      id: 'engagement',\n      name: 'Engagement',\n      description: 'Aktive Teilnahme und Feedback',\n      icon: '💪',\n      color: '#F59E0B'\n    },\n    {\n      id: 'milestone',\n      name: 'Meilensteine',\n      description: 'Besondere Leistungen und Erfolge',\n      icon: '🏆',\n      color: '#8B5CF6'\n    },\n    {\n      id: 'special',\n      name: 'Spezial',\n      description: 'Einmalige und seltene Achievements',\n      icon: '⭐',\n      color: '#EF4444'\n    }\n  ]\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/types/index.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (109). Maximum allowed is 75.","line":97,"column":1,"nodeType":null,"messageId":"exceed","endLine":139,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export interface User {\n  id: string;\n  email: string; // Work email (system login)\n  name: string;\n  role: UserRole;\n  organizationId: string;\n  employeeNumber?: string; // Unique employee number for internal identification\n  // Personal info\n  firstName?: string;\n  lastName?: string;\n  privateEmail?: string; // Private email address\n  avatarUrl?: string; // Profile picture URL\n  address?: {\n    street?: string;\n    postalCode?: string;\n    city?: string;\n  };\n  phone?: string;\n  bankDetails?: {\n    iban?: string;\n    bic?: string;\n  };\n  // Clothing sizes for work attire\n  clothingSizes?: {\n    top?: string; // XS, S, M, L, XL, XXL, XXXL\n    pants?: string; // e.g. \"32\", \"W32/L34\"\n    shoes?: string; // e.g. \"42\", \"9.5\"\n  };\n  // Work info\n  position?: string;\n  department?: string;\n  weeklyHours?: number;\n  employmentType?: EmploymentType;\n  employmentTypeCustom?: string; // Custom description when employmentType is 'OTHER'\n  joinDate?: string;\n  employmentStatus?: EmploymentStatus;\n  vacationDays?: number; // Total vacation days per year\n  // Team management\n  teamIds?: string[]; // Teams the user belongs to\n  leadTeamIds?: string[]; // Teams where user is a lead\n  primaryTeamId?: string; // Primary team for leave requests\n  // Coins & Gamification\n  coinWallet?: number;\n  coinProgress?: number;\n  badges?: string[];\n  level?: number;\n}\n\nexport interface Organization {\n  id: string;\n  name: string;\n  slug: string;\n}\n\n/**\n * Team entity for organizational structure\n * Teams can have multiple members and multiple leads\n */\nexport interface Team {\n  /** Unique identifier for the team */\n  id: string;\n  /** Team name */\n  name: string;\n  /** Optional description of team purpose/function */\n  description?: string;\n  /** Organization this team belongs to */\n  organizationId: string;\n  /** Array of user IDs who are team leads */\n  leadIds: string[];\n  /** Array of all team member IDs (including leads) */\n  memberIds: string[];\n  /** ISO timestamp of team creation */\n  createdAt: string;\n  /** ISO timestamp of last update */\n  updatedAt: string;\n}\n\nexport interface LeaveRequest {\n  id: string;\n  userId: string;\n  startDate: string;\n  endDate: string;\n  comment?: string;\n  status: 'PENDING' | 'APPROVED' | 'REJECTED';\n  type: 'VACATION' | 'SICK';\n  createdAt: string;\n  approvedBy?: string; // User ID who approved/rejected\n  approvedAt?: string; // Timestamp when approved/rejected\n  teamId?: string; // Team context for approval routing\n}\n\nexport interface SickNote {\n  id: string;\n  userId: string;\n  dateFrom: string;\n  dateTo: string;\n  fileUrl?: string;\n  status: 'UPLOADED' | 'REVIEWED';\n  createdAt: string;\n}\n\nexport interface TimeRecord {\n  id: string;\n  userId: string;\n  date: string;\n  timeIn: string;\n  timeOut?: string;\n  breakMinutes: number;\n  totalHours: number;\n}\n\nexport interface Document {\n  id: string;\n  userId: string;\n  title: string;\n  category: 'LOHN' | 'VERTRAG' | 'SONSTIGES';\n  fileUrl: string;\n  createdAt: string;\n}\n\nexport interface VacationBalance {\n  userId: string;\n  totalDays: number;\n  usedDays: number;\n  remainingDays: number;\n  year: number;\n}\n\n// Type definitions\nexport type UserRole = 'EMPLOYEE' | 'ADMIN' | 'SUPERADMIN';\nexport type EmploymentType = 'FULL_TIME' | 'PART_TIME' | 'MINI_JOB' | 'INTERN' | 'OTHER';\nexport type EmploymentStatus = 'ACTIVE' | 'PARENTAL_LEAVE' | 'TERMINATED';\n\n// Re-export benefit and training types\nexport * from './benefits';\nexport * from './training';\n\n// Re-export reminder types\nexport * from './reminders';","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/types/learning.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (186). Maximum allowed is 75.","line":87,"column":1,"nodeType":null,"messageId":"exceed","endLine":209,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Types for the enhanced learning module\n\nexport interface VideoContent {\n  id: string;\n  url: string;\n  title: string;\n  description: string;\n  duration: number; // in seconds\n  thumbnail?: string;\n  transcription?: Transcription;\n  category: TrainingCategory;\n}\n\nexport interface Transcription {\n  id: string;\n  videoId: string;\n  text: string;\n  segments: TranscriptionSegment[];\n  language: string;\n  generatedAt: Date;\n}\n\nexport interface TranscriptionSegment {\n  start: number; // timestamp in seconds\n  end: number;\n  text: string;\n  confidence?: number;\n}\n\nexport interface LearningProgress {\n  userId: string;\n  videoId: string;\n  watchedSeconds: number;\n  completed: boolean;\n  lastWatchedAt: Date;\n  testResults?: TestResult[];\n}\n\nexport interface TestQuestion {\n  id: string;\n  type: 'multiple-choice' | 'drag-drop' | 'image-selection' | 'sorting';\n  question: string;\n  options?: string[];\n  correctAnswer: string | string[];\n  points: number;\n  explanation?: string;\n  mediaUrl?: string;\n}\n\nexport interface TestResult {\n  id: string;\n  userId: string;\n  trainingId: string;\n  score: number; // percentage\n  passed: boolean;\n  completedAt: Date;\n  answers: TestAnswer[];\n  earnedXP: number;\n  earnedCoins: number;\n}\n\nexport interface TestAnswer {\n  questionId: string;\n  userAnswer: string | string[];\n  correct: boolean;\n  timeSpent: number; // seconds\n}\n\nexport interface UserLevel {\n  level: number;\n  title: string;\n  xp: number;\n  nextLevelXp: number;\n  icon?: string;\n}\n\nexport interface LevelConfig {\n  level: number;\n  title: string;\n  xp: number;\n  rewards?: Reward[];\n}\n\nexport interface Reward {\n  type: 'coins' | 'badge' | 'avatar-item' | 'title';\n  value: string | number;\n  description: string;\n  icon?: string;\n}\n\nexport interface Avatar {\n  id: string;\n  userId: string;\n  name?: string;\n  baseModel: string;\n  baseImage?: string;\n  accessories: AvatarAccessory[];\n  badges: Badge[];\n  level: number;\n  title: string;\n  backgroundColor?: string;\n  skinColor?: string;\n  hairColor?: string;\n}\n\nexport interface AvatarAccessory {\n  id: string;\n  type: 'hat' | 'glasses' | 'clothing' | 'background' | 'effect' | 'badge';\n  name: string;\n  imageUrl: string;\n  requiredLevel?: number;\n  price?: number;\n}\n\nexport interface Badge {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  earnedAt: Date;\n  category: 'achievement' | 'special' | 'milestone';\n  rarity: 'common' | 'rare' | 'epic' | 'legendary';\n}\n\nexport interface LearningEvent {\n  id: string;\n  name: string;\n  description: string;\n  startDate: Date;\n  endDate: Date;\n  targetCoins: number;\n  rewards: Reward[];\n  participants: EventParticipant[];\n}\n\nexport interface EventParticipant {\n  userId: string;\n  progress: number; // coins earned for this event\n  claimed: boolean;\n}\n\nexport interface ShopItem {\n  id: string;\n  name: string;\n  description: string;\n  type: 'avatar-item' | 'boost' | 'special';\n  price: number;\n  imageUrl: string;\n  available: boolean;\n  limitedTime?: boolean;\n  expiresAt?: Date;\n}\n\nexport interface LootboxAnimation {\n  id: string;\n  type: 'coins' | 'xp' | 'badge' | 'item';\n  rarity: 'common' | 'rare' | 'epic' | 'legendary';\n  reward: Reward;\n  animation: 'spin' | 'burst' | 'reveal';\n}\n\nexport interface TrainingStatistics {\n  userId: string;\n  totalXP: number;\n  totalCoins: number;\n  completedTrainings: number;\n  perfectScores: number;\n  currentStreak: number;\n  badges: Badge[];\n  averageScore: number;\n  totalWatchTime: number; // seconds\n}\n\nexport interface TeamRanking {\n  teamId: string;\n  teamName: string;\n  totalXP: number;\n  averageLevel: number;\n  completedTrainings: number;\n  members: TeamMember[];\n}\n\nexport interface TeamMember {\n  userId: string;\n  name: string;\n  avatar: Avatar;\n  level: number;\n  xp: number;\n  contributionPercentage: number;\n}\n\nexport enum TrainingCategory {\n  MANDATORY = 'mandatory',\n  DEPARTMENT = 'department',\n  BONUS = 'bonus',\n  COMPLIANCE = 'compliance',\n  SKILLS = 'skills',\n  ONBOARDING = 'onboarding'\n}\n\nexport interface Certificate {\n  id: string;\n  userId: string;\n  trainingId: string;\n  issuedAt: Date;\n  score: number;\n  certificateUrl?: string;\n  validUntil?: Date;\n}","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/types/reminders.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/types/training.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (129). Maximum allowed is 75.","line":83,"column":1,"nodeType":null,"messageId":"exceed","endLine":140,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export interface Training {\n  id: string;\n  title: string;\n  description: string;\n  targetAudience: 'ALL' | 'DEPARTMENT' | 'SPECIFIC_USERS';\n  targetDepartments?: string[];\n  targetUserIds?: string[];\n  startDate: string;\n  endDate?: string;\n  isActive: boolean;\n  isMandatory: boolean;\n  createdBy: string;\n  createdAt: string;\n  estimatedDuration: number; // in minutes\n  category: 'ONBOARDING' | 'COMPLIANCE' | 'SKILLS' | 'SAFETY' | 'OTHER';\n}\n\nexport interface TrainingLesson {\n  id: string;\n  trainingId: string;\n  title: string;\n  description: string;\n  order: number;\n  content: TrainingContent[];\n  quiz?: TrainingQuiz;\n  isRequired: boolean;\n}\n\nexport interface TrainingContent {\n  id: string;\n  type: 'TEXT' | 'PDF' | 'VIDEO' | 'LINK';\n  title: string;\n  content: string; // text content or file URL or link URL\n  order: number;\n}\n\nexport interface TrainingQuiz {\n  id: string;\n  lessonId: string;\n  questions: TrainingQuestion[];\n  passingScore: number; // percentage (0-100)\n  maxAttempts: number;\n}\n\nexport interface TrainingQuestion {\n  id: string;\n  question: string;\n  options: string[];\n  correctAnswer: number; // index of correct option\n  explanation?: string;\n}\n\nexport interface TrainingProgress {\n  id: string;\n  userId: string;\n  trainingId: string;\n  status: 'NOT_STARTED' | 'IN_PROGRESS' | 'COMPLETED' | 'FAILED';\n  currentLessonId?: string;\n  completedLessons: string[];\n  startedAt?: string;\n  completedAt?: string;\n  lastActivityAt?: string;\n  finalScore?: number;\n}\n\nexport interface TrainingAttempt {\n  id: string;\n  userId: string;\n  quizId: string;\n  answers: number[]; // array of selected answer indices\n  score: number;\n  passed: boolean;\n  attemptNumber: number;\n  completedAt: string;\n}\n\nexport interface TrainingCertificate {\n  id: string;\n  userId: string;\n  trainingId: string;\n  issuedAt: string;\n  certificateUrl: string;\n  expiresAt?: string;\n}\n\nexport interface TrainingNotification {\n  id: string;\n  userId: string;\n  trainingId: string;\n  type: 'NEW_TRAINING' | 'REMINDER' | 'DEADLINE_APPROACHING' | 'COMPLETED' | 'FAILED';\n  sentAt: string;\n  isRead: boolean;\n}\n\nexport interface TrainingTemplate {\n  id: string;\n  title: string;\n  description: string;\n  category: Training['category'];\n  estimatedDuration: number;\n  lessons: Omit<TrainingLesson, 'id' | 'trainingId'>[];\n}\n\nexport interface AIGenerationRequest {\n  topic: string;\n  description: string;\n  targetAudience: string;\n  duration: number; // in minutes\n  difficulty: 'BEGINNER' | 'INTERMEDIATE' | 'ADVANCED';\n  includeQuiz: boolean;\n  lessonCount: number;\n}\n\nexport interface AIGeneratedContent {\n  title: string;\n  description: string;\n  lessons: {\n    title: string;\n    description: string;\n    content: string;\n    quiz?: {\n      questions: {\n        question: string;\n        options: string[];\n        correctAnswer: number;\n        explanation: string;\n      }[];\n      passingScore: number;\n    };\n  }[];\n  finalQuiz?: {\n    questions: {\n      question: string;\n      options: string[];\n      correctAnswer: number;\n      explanation: string;\n    }[];\n    passingScore: number;\n  };\n}","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/ui/components/layout/Card.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (37). Maximum allowed is 30.","line":81,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":124,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (373). Maximum allowed is 75.","line":101,"column":1,"nodeType":null,"messageId":"exceed","endLine":440,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (34). Maximum allowed is 30.","line":129,"column":54,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":164,"endColumn":2},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (47). Maximum allowed is 30.","line":221,"column":52,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":269,"endColumn":2},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (39). Maximum allowed is 30.","line":282,"column":50,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":322,"endColumn":2},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (35). Maximum allowed is 30.","line":406,"column":62,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":440,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Card System - Universelle Container für deine App\n * Ersetzt deine bestehenden Box-Komponenten mit konsistentem Design\n */\n\nimport React from 'react';\n\nimport { cn } from '../../../utils/cn';\n\n// Base Card Props\ninterface CardProps {\n  children: React.ReactNode;\n  className?: string;\n  variant?: 'default' | 'elevated' | 'outlined' | 'ghost';\n  padding?: 'none' | 'sm' | 'md' | 'lg';\n  radius?: 'none' | 'sm' | 'md' | 'lg' | 'xl';\n  shadow?: 'none' | 'sm' | 'md' | 'lg';\n  clickable?: boolean;\n  onClick?: () => void;\n  fullHeight?: boolean;\n  interactive?: boolean; // Hover effects\n}\n\n// Card Header Props\ninterface CardHeaderProps {\n  children: React.ReactNode;\n  className?: string;\n  title?: string;\n  subtitle?: string;\n  actions?: React.ReactNode;\n  icon?: React.ReactNode;\n}\n\n// Card Content Props\ninterface CardContentProps {\n  children: React.ReactNode;\n  className?: string;\n  centerContent?: boolean;\n  scrollable?: boolean;\n}\n\n// Card Footer Props\ninterface CardFooterProps {\n  children: React.ReactNode;\n  className?: string;\n}\n\n// CSS Class Mappings\nconst variantClasses = {\n  default: 'bg-white border border-gray-200',           // Standard (wie deine Cards)\n  elevated: 'bg-white border-0 shadow-md',             // Mit Shadow\n  outlined: 'bg-white border-2 border-gray-300',       // Emphasized Border\n  ghost: 'bg-transparent border-0 shadow-none',        // Transparent\n};\n\nconst paddingClasses = {\n  none: 'p-0',\n  sm: 'p-4',        // 16px (kleine Cards)\n  md: 'p-6',        // 24px (Standard, wie deine Cards)\n  lg: 'p-8',        // 32px (große Cards)\n};\n\nconst radiusClasses = {\n  none: 'rounded-none',\n  sm: 'rounded-sm',\n  md: 'rounded-md', \n  lg: 'rounded-lg',\n  xl: 'rounded-xl',  // Standard (wie deine Cards)\n};\n\nconst shadowClasses = {\n  none: 'shadow-none',\n  sm: 'shadow-sm',   // Standard (wie deine Cards)\n  md: 'shadow-md',   // Elevated\n  lg: 'shadow-lg',   // Hover/Focus\n};\n\n/**\n * Base Card Component\n */\nexport const Card: React.FC<CardProps> = ({\n  children,\n  className,\n  variant = 'default',\n  padding = 'md',\n  radius = 'xl',\n  shadow = 'sm',\n  clickable = false,\n  onClick,\n  fullHeight = false,\n  interactive = false,\n}) => {\n  const Component = onClick ? 'button' : 'div';\n  \n  return (\n    <Component\n      className={cn(\n        // Base styles\n        'transition-all duration-200',\n        variantClasses[variant],\n        paddingClasses[padding],\n        radiusClasses[radius],\n        variant === 'default' && shadowClasses[shadow],\n        \n        // Layout\n        fullHeight && 'h-full',\n        'flex flex-col', // Für konsistentes Layout\n        \n        // Interactive styles\n        (clickable || interactive) && [\n          'cursor-pointer',\n          'hover:shadow-lg hover:scale-[1.02]',\n          'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n          'active:scale-[0.98]',\n        ],\n        \n        className\n      )}\n      onClick={onClick}\n    >\n      {children}\n    </Component>\n  );\n};\n\n/**\n * Card Header Component\n */\nexport const CardHeader: React.FC<CardHeaderProps> = ({\n  children,\n  className,\n  title,\n  subtitle,\n  actions,\n  icon,\n}) => {\n  return (\n    <div className={cn('flex items-start justify-between mb-4', className)}>\n      <div className=\"flex items-start gap-3 flex-1\">\n        {icon && <div className=\"flex-shrink-0\">{icon}</div>}\n        \n        <div className=\"flex-1\">\n          {title && (\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\n              {title}\n            </h3>\n          )}\n          {subtitle && (\n            <p className=\"text-sm text-gray-500\">\n              {subtitle}\n            </p>\n          )}\n          {!title && !subtitle && children}\n        </div>\n      </div>\n      \n      {actions && (\n        <div className=\"flex items-center gap-2 ml-4\">\n          {actions}\n        </div>\n      )}\n    </div>\n  );\n};\n\n/**\n * Card Content Component\n */\nexport const CardContent: React.FC<CardContentProps> = ({\n  children,\n  className,\n  centerContent = false,\n  scrollable = false,\n}) => {\n  return (\n    <div\n      className={cn(\n        'flex-grow',\n        centerContent && 'flex items-center justify-center',\n        scrollable && 'overflow-auto',\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n};\n\n/**\n * Card Footer Component\n */\nexport const CardFooter: React.FC<CardFooterProps> = ({\n  children,\n  className,\n}) => {\n  return (\n    <div className={cn('mt-4 pt-4 border-t border-gray-200', className)}>\n      {children}\n    </div>\n  );\n};\n\n/**\n * Preset Card Components für häufige Use Cases\n */\n\n// Stats Card (wie deine Dashboard-Karten)\ninterface StatsCardProps {\n  title: string;\n  value: string | number;\n  subtitle?: string;\n  icon?: React.ReactNode;\n  trend?: {\n    value: string;\n    direction: 'up' | 'down' | 'neutral';\n  };\n  className?: string;\n  onClick?: () => void;\n}\n\nexport const StatsCard: React.FC<StatsCardProps> = ({\n  title,\n  value,\n  subtitle,\n  icon,\n  trend,\n  className,\n  onClick,\n}) => {\n  const trendColors = {\n    up: 'text-green-600',\n    down: 'text-red-600', \n    neutral: 'text-gray-600',\n  };\n\n  return (\n    <Card \n      className={className} \n      clickable={!!onClick}\n      onClick={onClick}\n      fullHeight\n    >\n      <CardHeader>\n        <div className=\"flex items-center justify-between w-full\">\n          <h3 className=\"text-sm font-medium text-gray-500\">{title}</h3>\n          {icon && <div className=\"text-2xl\">{icon}</div>}\n        </div>\n      </CardHeader>\n      \n      <CardContent>\n        <div>\n          <p className=\"text-2xl font-bold text-gray-900 mb-1\">{value}</p>\n          {subtitle && (\n            <p className=\"text-sm text-gray-500\">{subtitle}</p>\n          )}\n          {trend && (\n            <div className=\"mt-2\">\n              <span className={cn('text-sm font-medium', trendColors[trend.direction])}>\n                {trend.direction === 'up' && '↗ '}\n                {trend.direction === 'down' && '↘ '}\n                {trend.value}\n              </span>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\n// Info Card (wie deine Beschäftigungsdetails)\ninterface InfoCardProps {\n  title: string;\n  children: React.ReactNode;\n  className?: string;\n  actions?: React.ReactNode;\n  icon?: React.ReactNode;\n  collapsible?: boolean;\n  defaultCollapsed?: boolean;\n}\n\nexport const InfoCard: React.FC<InfoCardProps> = ({\n  title,\n  children,\n  className,\n  actions,\n  icon,\n  collapsible = false,\n  defaultCollapsed = false,\n}) => {\n  const [isCollapsed, setIsCollapsed] = React.useState(defaultCollapsed);\n\n  return (\n    <Card className={className} fullHeight>\n      <CardHeader\n        title={title}\n        icon={icon}\n        actions={\n          <div className=\"flex items-center gap-2\">\n            {actions}\n            {collapsible && (\n              <button\n                onClick={() => setIsCollapsed(!isCollapsed)}\n                className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n              >\n                {isCollapsed ? '▼' : '▲'}\n              </button>\n            )}\n          </div>\n        }\n      >\n        {/* Empty children for CardHeader */}\n      </CardHeader>\n      \n      {!isCollapsed && (\n        <CardContent>\n          {children}\n        </CardContent>\n      )}\n    </Card>\n  );\n};\n\n// Avatar Card (wie deine Gamification-Card)\ninterface AvatarCardProps {\n  children: React.ReactNode;\n  className?: string;\n  onClick?: () => void;\n  compact?: boolean;\n}\n\nexport const AvatarCard: React.FC<AvatarCardProps> = ({\n  children,\n  className,\n  onClick,\n  compact = false,\n}) => {\n  return (\n    <Card\n      className={cn('relative', compact && 'p-4', className)}\n      clickable={!!onClick}\n      onClick={onClick}\n      fullHeight\n      interactive={!!onClick}\n    >\n      {children}\n    </Card>\n  );\n};\n\n// Action Card (mit Primary Action)\ninterface ActionCardProps {\n  title: string;\n  description?: string;\n  icon?: React.ReactNode;\n  action: {\n    label: string;\n    onClick: () => void;\n  };\n  className?: string;\n}\n\nexport const ActionCard: React.FC<ActionCardProps> = ({\n  title,\n  description,\n  icon,\n  action,\n  className,\n}) => {\n  return (\n    <Card className={className} clickable onClick={action.onClick} fullHeight>\n      <CardContent centerContent>\n        <div className=\"text-center\">\n          {icon && (\n            <div className=\"text-3xl mb-4\">{icon}</div>\n          )}\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n            {title}\n          </h3>\n          {description && (\n            <p className=\"text-sm text-gray-500 mb-4\">\n              {description}\n            </p>\n          )}\n          <span className=\"text-blue-600 font-medium\">\n            {action.label} →\n          </span>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\n// Empty State Card\ninterface EmptyStateCardProps {\n  title: string;\n  description?: string;\n  icon?: React.ReactNode;\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n  className?: string;\n}\n\nexport const EmptyStateCard: React.FC<EmptyStateCardProps> = ({\n  title,\n  description,\n  icon,\n  action,\n  className,\n}) => {\n  return (\n    <Card className={className} variant=\"ghost\" fullHeight>\n      <CardContent centerContent>\n        <div className=\"text-center py-8\">\n          {icon && (\n            <div className=\"text-4xl mb-4 opacity-50\">{icon}</div>\n          )}\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n            {title}\n          </h3>\n          {description && (\n            <p className=\"text-sm text-gray-500 mb-4 max-w-sm\">\n              {description}\n            </p>\n          )}\n          {action && (\n            <button\n              onClick={action.onClick}\n              className=\"text-sm text-blue-600 hover:text-blue-700 font-medium\"\n            >\n              {action.label}\n            </button>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/ui/components/layout/Container.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (62). Maximum allowed is 30.","line":100,"column":60,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":164,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 16. Maximum allowed is 10.","line":100,"column":60,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":164,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (334). Maximum allowed is 75.","line":101,"column":1,"nodeType":null,"messageId":"exceed","endLine":398,"endColumn":3},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (40). Maximum allowed is 30.","line":169,"column":48,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":210,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Container System - Page Layout & Spacing\n * Konsistente Container für alle Seiten\n */\n\nimport React from 'react';\n\nimport { cn } from '../../../utils/cn';\n\n// Base Container Props\ninterface ContainerProps {\n  children: React.ReactNode;\n  className?: string;\n  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n  padding?: 'none' | 'sm' | 'md' | 'lg';\n  centered?: boolean;\n}\n\n// Page Container Props\ninterface PageContainerProps {\n  children: React.ReactNode;\n  className?: string;\n  title?: string;\n  subtitle?: string;\n  actions?: React.ReactNode;\n  breadcrumbs?: React.ReactNode;\n  backButton?: boolean;\n  onBack?: () => void;\n  maxWidth?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n  background?: 'default' | 'white' | 'gray';\n}\n\n// Section Props\ninterface SectionProps {\n  children: React.ReactNode;\n  className?: string;\n  title?: string;\n  subtitle?: string;\n  actions?: React.ReactNode;\n  spacing?: 'sm' | 'md' | 'lg' | 'xl';\n  separator?: boolean;\n}\n\n// CSS Class Mappings\nconst sizeClasses = {\n  sm: 'max-w-2xl',      // 672px\n  md: 'max-w-4xl',      // 896px\n  lg: 'max-w-6xl',      // 1152px\n  xl: 'max-w-7xl',      // 1280px (wie deine App)\n  full: 'max-w-none',\n};\n\nconst paddingClasses = {\n  none: 'px-0 py-0',\n  sm: 'px-4 py-4',      // Mobile\n  md: 'px-6 py-6',      // Standard (wie deine App)\n  lg: 'px-8 py-8',      // Desktop\n};\n\nconst spacingClasses = {\n  sm: 'mb-6',           // 24px\n  md: 'mb-8',           // 32px\n  lg: 'mb-12',          // 48px\n  xl: 'mb-16',          // 64px\n};\n\nconst backgroundClasses = {\n  default: 'bg-gray-50',     // Wie deine App\n  white: 'bg-white',\n  gray: 'bg-gray-100',\n};\n\n/**\n * Base Container Component\n */\nexport const Container: React.FC<ContainerProps> = ({\n  children,\n  className,\n  size = 'xl',\n  padding = 'md',\n  centered = true,\n}) => {\n  return (\n    <div\n      className={cn(\n        sizeClasses[size],\n        paddingClasses[padding],\n        centered && 'mx-auto',\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n};\n\n/**\n * Page Container - Vollständiger Page Wrapper\n */\nexport const PageContainer: React.FC<PageContainerProps> = ({\n  children,\n  className,\n  title,\n  subtitle,\n  actions,\n  breadcrumbs,\n  backButton = false,\n  onBack,\n  maxWidth = 'xl',\n  background = 'default',\n}) => {\n  return (\n    <div className={cn('flex-1 min-h-screen', backgroundClasses[background])}>\n      <Container size={maxWidth} className={className}>\n        {/* Page Header */}\n        {(breadcrumbs || backButton || title || subtitle || actions) && (\n          <div className=\"mb-6\">\n            {/* Navigation */}\n            {(breadcrumbs || backButton) && (\n              <div className=\"mb-4\">\n                {backButton && onBack && (\n                  <button \n                    onClick={onBack}\n                    className=\"flex items-center text-blue-600 hover:text-blue-700 transition-colors text-sm font-medium mb-2\"\n                  >\n                    ← Zurück\n                  </button>\n                )}\n                {breadcrumbs}\n              </div>\n            )}\n            \n            {/* Title Section */}\n            {(title || subtitle || actions) && (\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  {title && (\n                    <h1 className=\"text-2xl md:text-3xl font-bold text-gray-900 mb-1\">\n                      {title}\n                    </h1>\n                  )}\n                  {subtitle && (\n                    <p className=\"text-gray-600 text-sm md:text-base\">\n                      {subtitle}\n                    </p>\n                  )}\n                </div>\n                \n                {actions && (\n                  <div className=\"flex items-center gap-3 ml-6\">\n                    {actions}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        )}\n        \n        {/* Page Content */}\n        {children}\n      </Container>\n    </div>\n  );\n};\n\n/**\n * Section Component - Content Sections mit optionalem Titel\n */\nexport const Section: React.FC<SectionProps> = ({\n  children,\n  className,\n  title,\n  subtitle,\n  actions,\n  spacing = 'md',\n  separator = false,\n}) => {\n  return (\n    <section className={cn(spacingClasses[spacing], className)}>\n      {/* Section Header */}\n      {(title || subtitle || actions) && (\n        <div className={cn('mb-6', separator && 'pb-4 border-b border-gray-200')}>\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex-1\">\n              {title && (\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-1\">\n                  {title}\n                </h2>\n              )}\n              {subtitle && (\n                <p className=\"text-gray-600 text-sm\">\n                  {subtitle}\n                </p>\n              )}\n            </div>\n            \n            {actions && (\n              <div className=\"flex items-center gap-2 ml-4\">\n                {actions}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n      \n      {/* Section Content */}\n      {children}\n    </section>\n  );\n};\n\n/**\n * Content Area - Main/Sidebar Layout\n */\ninterface ContentAreaProps {\n  children: React.ReactNode;\n  sidebar?: React.ReactNode;\n  sidebarPosition?: 'left' | 'right';\n  sidebarWidth?: 'narrow' | 'normal' | 'wide';\n  className?: string;\n  gap?: 'sm' | 'md' | 'lg';\n}\n\nconst sidebarWidths = {\n  narrow: 'w-64',     // 256px\n  normal: 'w-80',     // 320px  \n  wide: 'w-96',       // 384px\n};\n\nconst gapSizes = {\n  sm: 'gap-4',        // 16px\n  md: 'gap-6',        // 24px\n  lg: 'gap-8',        // 32px\n};\n\nexport const ContentArea: React.FC<ContentAreaProps> = ({\n  children,\n  sidebar,\n  sidebarPosition = 'right',\n  sidebarWidth = 'normal',\n  className,\n  gap = 'md',\n}) => {\n  if (!sidebar) {\n    return <div className={className}>{children}</div>;\n  }\n\n  return (\n    <div className={cn('flex flex-col lg:flex-row', gapSizes[gap], className)}>\n      {sidebarPosition === 'left' && sidebar && (\n        <aside className={cn('flex-shrink-0 lg:order-1', sidebarWidths[sidebarWidth])}>\n          {sidebar}\n        </aside>\n      )}\n      \n      <main className=\"flex-1 lg:order-2\">\n        {children}\n      </main>\n      \n      {sidebarPosition === 'right' && sidebar && (\n        <aside className={cn('flex-shrink-0 lg:order-3', sidebarWidths[sidebarWidth])}>\n          {sidebar}\n        </aside>\n      )}\n    </div>\n  );\n};\n\n/**\n * Header Card Component (wie dein Dashboard Header)\n */\ninterface HeaderCardProps {\n  children: React.ReactNode;\n  className?: string;\n  background?: boolean;\n}\n\nexport const HeaderCard: React.FC<HeaderCardProps> = ({\n  children,\n  className,\n  background = true,\n}) => {\n  return (\n    <div\n      className={cn(\n        'rounded-xl p-6 mb-6',\n        background && 'bg-white shadow-sm',\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n};\n\n/**\n * Stack Component - Vertikale Layouts\n */\ninterface StackProps {\n  children: React.ReactNode;\n  className?: string;\n  spacing?: 'xs' | 'sm' | 'md' | 'lg' | 'xl';\n  align?: 'start' | 'center' | 'end' | 'stretch';\n}\n\nconst stackSpacingClasses = {\n  xs: 'space-y-2',      // 8px\n  sm: 'space-y-3',      // 12px\n  md: 'space-y-6',      // 24px\n  lg: 'space-y-8',      // 32px\n  xl: 'space-y-12',     // 48px\n};\n\nconst alignClasses = {\n  start: 'items-start',\n  center: 'items-center',\n  end: 'items-end',\n  stretch: 'items-stretch',\n};\n\nexport const Stack: React.FC<StackProps> = ({\n  children,\n  className,\n  spacing = 'md',\n  align = 'stretch',\n}) => {\n  return (\n    <div\n      className={cn(\n        'flex flex-col',\n        stackSpacingClasses[spacing],\n        alignClasses[align],\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n};\n\n/**\n * Inline Component - Horizontale Layouts\n */\ninterface InlineProps {\n  children: React.ReactNode;\n  className?: string;\n  spacing?: 'xs' | 'sm' | 'md' | 'lg' | 'xl';\n  align?: 'start' | 'center' | 'end' | 'baseline';\n  justify?: 'start' | 'center' | 'end' | 'between' | 'around';\n  wrap?: boolean;\n}\n\nconst inlineSpacingClasses = {\n  xs: 'space-x-1',      // 4px\n  sm: 'space-x-2',      // 8px\n  md: 'space-x-4',      // 16px\n  lg: 'space-x-6',      // 24px\n  xl: 'space-x-8',      // 32px\n};\n\nconst justifyClasses = {\n  start: 'justify-start',\n  center: 'justify-center',\n  end: 'justify-end',\n  between: 'justify-between',\n  around: 'justify-around',\n};\n\nconst inlineAlignClasses = {\n  start: 'items-start',\n  center: 'items-center',\n  end: 'items-end',\n  baseline: 'items-baseline',\n};\n\nexport const Inline: React.FC<InlineProps> = ({\n  children,\n  className,\n  spacing = 'md',\n  align = 'center',\n  justify = 'start',\n  wrap = false,\n}) => {\n  return (\n    <div\n      className={cn(\n        'flex',\n        inlineSpacingClasses[spacing],\n        inlineAlignClasses[align],\n        justifyClasses[justify],\n        wrap && 'flex-wrap',\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/ui/components/layout/Grid.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (34). Maximum allowed is 30.","line":73,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":108,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (211). Maximum allowed is 75.","line":96,"column":1,"nodeType":null,"messageId":"exceed","endLine":262,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Grid System - 12-Column Layout\n * Flexibles, responsives Grid-System für deine App\n */\n\nimport React from 'react';\n\nimport { cn } from '../../../utils/cn';\n\n// Grid Container Props\ninterface GridProps {\n  children: React.ReactNode;\n  className?: string;\n  gap?: 'none' | 'xs' | 'sm' | 'md' | 'lg' | 'xl';\n  cols?: 1 | 2 | 3 | 4 | 6 | 12;\n  mdCols?: 1 | 2 | 3 | 4 | 6 | 12;\n  lgCols?: 1 | 2 | 3 | 4 | 6 | 12;\n  xlCols?: 1 | 2 | 3 | 4 | 6 | 12;\n  responsive?: boolean; // Auto-responsive behavior\n}\n\n// Grid Item Props  \ninterface GridItemProps {\n  children: React.ReactNode;\n  className?: string;\n  span?: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 'full';\n  mdSpan?: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 'full';\n  lgSpan?: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 'full';\n  xlSpan?: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 'full';\n  order?: number;\n  mdOrder?: number;\n  lgOrder?: number;\n}\n\n// CSS Class Mappings\nconst gapClasses = {\n  none: 'gap-0',\n  xs: 'gap-2',      // 8px\n  sm: 'gap-3',      // 12px  \n  md: 'gap-6',      // 24px (Standard)\n  lg: 'gap-8',      // 32px\n  xl: 'gap-12',     // 48px\n};\n\nconst colsClasses = {\n  1: 'grid-cols-1',\n  2: 'grid-cols-2', \n  3: 'grid-cols-3',\n  4: 'grid-cols-4',\n  6: 'grid-cols-6',\n  12: 'grid-cols-12',\n};\n\nconst spanClasses = {\n  1: 'col-span-1',\n  2: 'col-span-2',\n  3: 'col-span-3',\n  4: 'col-span-4',\n  5: 'col-span-5',\n  6: 'col-span-6',\n  7: 'col-span-7',\n  8: 'col-span-8',\n  9: 'col-span-9',\n  10: 'col-span-10',\n  11: 'col-span-11',\n  12: 'col-span-12',\n  full: 'col-span-full',\n};\n\n/**\n * Main Grid Container\n */\nexport const Grid: React.FC<GridProps> = ({\n  children,\n  className,\n  gap = 'md',\n  cols = 1,\n  mdCols,\n  lgCols,\n  xlCols,\n  responsive = true,\n}) => {\n  const responsiveClasses = responsive ? {\n    // Auto-responsive: 1 -> 2 -> 3 -> 4 columns\n    1: 'grid-cols-1',\n    2: 'grid-cols-1 md:grid-cols-2',\n    3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',\n    4: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-4',\n    6: 'grid-cols-1 md:grid-cols-3 lg:grid-cols-6',\n    12: 'grid-cols-1 md:grid-cols-12',\n  } : {};\n\n  return (\n    <div\n      className={cn(\n        'grid',\n        gapClasses[gap],\n        responsive ? responsiveClasses[cols] : colsClasses[cols],\n        mdCols && !responsive && `md:${colsClasses[mdCols]}`,\n        lgCols && !responsive && `lg:${colsClasses[lgCols]}`,\n        xlCols && !responsive && `xl:${colsClasses[xlCols]}`,\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n};\n\n/**\n * Grid Item\n */\nexport const GridItem: React.FC<GridItemProps> = ({\n  children,\n  className,\n  span = 1,\n  mdSpan,\n  lgSpan,\n  xlSpan,\n  order,\n  mdOrder,\n  lgOrder,\n}) => {\n  return (\n    <div\n      className={cn(\n        spanClasses[span],\n        mdSpan && `md:${spanClasses[mdSpan]}`,\n        lgSpan && `lg:${spanClasses[lgSpan]}`,\n        xlSpan && `xl:${spanClasses[xlSpan]}`,\n        order && `order-${order}`,\n        mdOrder && `md:order-${mdOrder}`,\n        lgOrder && `lg:order-${lgOrder}`,\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n};\n\n/**\n * Preset Grid Layouts - Ready-to-use für häufige Patterns\n */\n\n// Dashboard Grid (9-3 Split wie in deiner App)\nexport const DashboardGrid: React.FC<{ children: React.ReactNode; className?: string }> = ({ \n  children, \n  className \n}) => (\n  <Grid cols={1} mdCols={12} gap=\"md\" responsive={false} className={className}>\n    {children}\n  </Grid>\n);\n\n// Stats Grid (1->2->3 responsive, wie deine Dashboard-Karten)\nexport const StatsGrid: React.FC<{ children: React.ReactNode; className?: string }> = ({ \n  children, \n  className \n}) => (\n  <Grid cols={3} gap=\"md\" className={className}>\n    {children}\n  </Grid>\n);\n\n// Two Column Grid (gleichmäßig)\nexport const TwoColumnGrid: React.FC<{ children: React.ReactNode; className?: string }> = ({ \n  children, \n  className \n}) => (\n  <Grid cols={2} gap=\"md\" className={className}>\n    {children}\n  </Grid>\n);\n\n// Four Column Grid (für Listen, Cards)\nexport const FourColumnGrid: React.FC<{ children: React.ReactNode; className?: string }> = ({ \n  children, \n  className \n}) => (\n  <Grid cols={4} gap=\"md\" className={className}>\n    {children}\n  </Grid>\n);\n\n// Auto Grid (automatische Spalten basierend auf Content)\nexport const AutoGrid: React.FC<{ \n  children: React.ReactNode; \n  className?: string;\n  minWidth?: string;\n}> = ({ \n  children, \n  className, \n  minWidth = '250px'\n}) => (\n  <div \n    className={cn('grid gap-6', className)}\n    style={{ gridTemplateColumns: `repeat(auto-fit, minmax(${minWidth}, 1fr))` }}\n  >\n    {children}\n  </div>\n);\n\n/**\n * Layout Utilities für spezifische Use Cases\n */\n\n// Dashboard Main/Sidebar Layout\nexport const DashboardMainSidebar: React.FC<{\n  main: React.ReactNode;\n  sidebar: React.ReactNode;\n  sidebarPosition?: 'left' | 'right';\n  className?: string;\n}> = ({ main, sidebar, sidebarPosition = 'right', className }) => (\n  <DashboardGrid className={className}>\n    {sidebarPosition === 'left' && (\n      <GridItem span=\"full\" mdSpan={3}>\n        {sidebar}\n      </GridItem>\n    )}\n    \n    <GridItem span=\"full\" mdSpan={9}>\n      {main}\n    </GridItem>\n    \n    {sidebarPosition === 'right' && (\n      <GridItem span=\"full\" mdSpan={3}>\n        {sidebar}\n      </GridItem>\n    )}\n  </DashboardGrid>\n);\n\n// Content mit optionaler Sidebar\nexport const ContentWithSidebar: React.FC<{\n  content: React.ReactNode;\n  sidebar?: React.ReactNode;\n  sidebarWidth?: 'narrow' | 'normal' | 'wide';\n  className?: string;\n}> = ({ content, sidebar, sidebarWidth = 'normal', className }) => {\n  const sidebarSpans = {\n    narrow: 2,   // 2/12\n    normal: 3,   // 3/12  \n    wide: 4,     // 4/12\n  };\n  \n  const contentSpan = sidebar ? 12 - sidebarSpans[sidebarWidth] : 12;\n  \n  return (\n    <DashboardGrid className={className}>\n      <GridItem span=\"full\" mdSpan={contentSpan as 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12}>\n        {content}\n      </GridItem>\n      \n      {sidebar && (\n        <GridItem span=\"full\" mdSpan={sidebarSpans[sidebarWidth] as 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12}>\n          {sidebar}\n        </GridItem>\n      )}\n    </DashboardGrid>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/ui/examples/DashboardMigration.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (38). Maximum allowed is 30.","line":22,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":63,"endColumn":2},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (123). Maximum allowed is 30.","line":66,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":197,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (184). Maximum allowed is 75.","line":101,"column":1,"nodeType":null,"messageId":"exceed","endLine":276,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Dashboard Migration Beispiel\n * Zeigt wie dein bestehendes Dashboard mit dem neuen UI-System aussehen würde\n */\n\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\n\n// Neue UI System Imports\nimport { StatsCard, InfoCard, AvatarCard, CardHeader, CardContent } from '../components/layout/Card';\nimport { PageContainer, HeaderCard } from '../components/layout/Container';\nimport { StatsGrid } from '../components/layout/Grid';\n\n// Deine bestehenden Hooks (bleiben unverändert)\n// ... andere Hooks\n\n/**\n * VORHER vs NACHHER Vergleich\n */\n\n// ❌ VORHER - Deine bisherige Struktur\nexport const DashboardOld: React.FC = () => {\n  \n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <div className=\"max-w-7xl mx-auto px-6 py-6\">\n        {/* Header */}\n        <div className=\"bg-white rounded-xl shadow-sm p-6 mb-6\">\n          <div className=\"flex justify-between items-center\">\n            {/* ... Header Content ... */}\n          </div>\n        </div>\n\n        {/* Main Content Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-12 gap-6\">\n          {/* Stats Section */}\n          <div className=\"col-span-1 md:col-span-9\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n              {/* Heute */}\n              <div className=\"bg-white rounded-xl shadow-sm p-6\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <h3 className=\"text-sm font-medium text-gray-500\">Heute</h3>\n                  <span className=\"text-2xl\">⏰</span>\n                </div>\n                <p className=\"text-2xl font-bold text-gray-400\">-</p>\n                <span className=\"inline-block mt-2 px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full\">\n                  Nicht gestempelt\n                </span>\n              </div>\n              \n              {/* Mehr Stats... */}\n            </div>\n          </div>\n          \n          {/* Avatar Card */}\n          <div className=\"col-span-1 md:col-span-3\">\n            {/* Avatar Content */}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// ✅ NACHHER - Mit neuem UI-System\nexport const DashboardNew: React.FC = () => {\n  const navigate = useNavigate();\n  \n  return (<PageContainer \n      title=\"Dashboard\" \n      subtitle=\"Willkommen zurück, Anna!\"\n    >\n      {/* Header Card - Wiederverwendbar */}\n      <HeaderCard>\n        <div className=\"flex justify-between items-center\">\n          {/* Left side: Avatar + Name + Info */}\n          <div className=\"flex items-center gap-4\">\n            {/* Avatar Image */}\n            <div className=\"w-16 h-16 rounded-full overflow-hidden bg-gradient-to-br from-gray-300 to-gray-500 flex-shrink-0\">\n              <div className=\"w-full h-full flex items-center justify-center\">\n                <span className=\"text-white text-xl\">👤</span>\n              </div>\n            </div>\n            \n            {/* Name and Info */}\n            <div>\n              <h1 className=\"text-heading-2 mb-1\">Hallo, Anna!</h1>\n              <div className=\"flex items-center gap-6 text-caption text-gray-600\">\n                <span>HR Manager</span>\n                <span>Abteilung: Human Resources</span>\n                <span>Organisation: Tech Company</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </HeaderCard>\n\n      {/* Main Content */}\n      <div className=\"grid gap-6 lg:grid-cols-3\">\n        {/* Main Column */}\n        <div className=\"lg:col-span-2 space-y-6\">\n          {/* Stats Grid */}\n          <StatsGrid>\n            <StatsCard\n              title=\"Abwesenheiten\"\n              value=\"4\"\n              subtitle=\"diesen Monat\"\n              icon=\"📅\"\n              trend={{ value: \"12\", direction: \"down\" }}\n            />\n            <StatsCard\n              title=\"Urlaub\"\n              value=\"22\"\n              subtitle=\"von 30 Tagen\"\n              icon=\"🏖️\"\n            />\n          </StatsGrid>\n\n          {/* Employment Details - Wiederverwendbare InfoCard */}\n          <InfoCard \n            title=\"Beschäftigungsdetails\"\n            className=\"mt-6\"\n          >\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n              <div>\n                <span className=\"text-gray-600\">Eintrittsdatum:</span>\n                <span className=\"ml-2 text-gray-900\">01.03.2022</span>\n              </div>\n              <div>\n                <span className=\"text-gray-600\">Arbeitszeit:</span>\n                <span className=\"ml-2 text-gray-900\">40h/Woche</span>\n              </div>\n              <div>\n                <span className=\"text-gray-600\">Vertragsart:</span>\n                <span className=\"ml-2 text-gray-900\">Unbefristet</span>\n              </div>\n              <div>\n                <span className=\"text-gray-600\">Standort:</span>\n                <span className=\"ml-2 text-gray-900\">Berlin</span>\n              </div>\n            </div>\n          </InfoCard>\n        </div>\n\n        {/* Sidebar */}\n        <div className=\"space-y-6\">\n          {/* Avatar Card */}\n          <AvatarCard onClick={() => navigate('/settings')} className=\"cursor-pointer hover:shadow-md transition-shadow\">\n            <CardHeader>\n              <h3 className=\"text-caption font-semibold text-gray-700\">Avatar</h3>\n              <span className=\"text-xs text-gray-400 hover:text-gray-600\">\n                Einstellungen →\n              </span>\n            </CardHeader>\n\n            <CardContent centerContent>\n              <div className=\"text-center space-y-6\">\n                {/* Level */}\n                <div>\n                  <h4 className=\"text-caption font-medium text-gray-900\">Level 01: Rookie</h4>\n                </div>\n\n                {/* Skills */}\n                <div>\n                  <h4 className=\"text-lg font-semibold text-gray-900 mb-3\">Skills</h4>\n                  <div className=\"bg-gradient-to-r from-cyan-400 to-cyan-600 text-white px-4 py-2 rounded-full font-medium\">\n                    Level 1\n                  </div>\n                </div>\n\n                {/* Engagement */}\n                <div>\n                  <div className=\"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-xl p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"font-semibold text-gray-900\">Engagement</span>\n                      <div className=\"flex items-center gap-1\">\n                        <span className=\"text-lg font-bold text-gray-900\">1600</span>\n                        <span className=\"text-lg\">🪙</span>\n                      </div>\n                    </div>\n                  </div>\n                  <p className=\"text-caption text-gray-600 mt-2\">Browo Coins</p>\n                </div>\n\n                {/* Achievement */}\n                <div>\n                  <span className=\"text-3xl mb-2 block\">🏆</span>\n                  <p className=\"text-caption text-gray-500\">Verdiene dein erstes Achievement!</p>\n                </div>\n              </div>\n            </CardContent>\n          </AvatarCard>\n        </div>\n      </div>\n    </PageContainer>\n  );\n};\n\n/**\n * Migration Benefits - Was du gewinnst:\n */\n\n// 🎯 Vorteile der Migration:\n\n// 1. KONSISTENZ\n// - Einheitliche Abstände überall (6px, 12px, 24px System)\n// - Konsistente Farben, Shadows, Border Radius\n// - Wiederverwendbare Komponenten\n\n// 2. WARTBARKEIT  \n// - Zentrale Änderungen in Design Tokens\n// - Komponenten sind dokumentiert und typisiert\n// - Einfache Anpassungen ohne Copy/Paste\n\n// 3. RESPONSIVITÄT\n// - Automatische responsive Behavior\n// - Mobile-first Approach\n// - Konsistente Breakpoints\n\n// 4. ENTWICKLER-ERFAHRUNG\n// - TypeScript Support mit IntelliSense\n// - Klare Component APIs\n// - Weniger Copy/Paste Code\n\n// 5. PERFORMANCE\n// - Optimierte Tailwind-Klassen  \n// - Kleinere Bundle Size durch Wiederverwendung\n// - CSS-in-JS Vermeidung\n\n/**\n * Schritt-für-Schritt Migration:\n */\n\n// SCHRITT 1: Installiere das UI-System\n// - Kopiere die UI-Ordner-Struktur\n// - Ersetze tailwind.config.js\n\n// SCHRITT 2: Migriere Seite für Seite\n// - Beginne mit einer Seite (z.B. Dashboard)\n// - Ersetze die Container-Struktur\n// - Ersetze Cards/Boxes mit Card-Komponenten\n// - Ersetze Grid-Layouts\n\n// SCHRITT 3: Teste responsive Verhalten\n// - Mobile, Tablet, Desktop\n// - Verschiedene Content-Längen\n// - Hover/Focus States\n\n// SCHRITT 4: Optimiere und dokumentiere\n// - Erstelle Style Guide\n// - Dokumentiere Custom Components\n// - Setup Storybook (optional)\n\n/**\n * Live Migration Beispiel:\n */\nexport const DashboardMigrationDemo: React.FC = () => {\n  const [useNewSystem, setUseNewSystem] = React.useState(false);\n  \n  return (\n    <div>\n      {/* Toggle Button */}\n      <div className=\"fixed top-4 right-4 z-50\">\n        <button\n          onClick={() => setUseNewSystem(!useNewSystem)}\n          className=\"btn-primary\"\n        >\n          {useNewSystem ? 'Zeige Alt' : 'Zeige Neu'} System\n        </button>\n      </div>\n      \n      {/* Render Current System */}\n      {useNewSystem ? <DashboardNew /> : <DashboardOld />}\n    </div>\n  );\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/ui/tokens/breakpoints.ts","messages":[{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 4 times.","line":57,"column":15,"nodeType":"Literal","endLine":57,"endColumn":28},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":65,"column":15,"nodeType":"Literal","endLine":65,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Responsive Breakpoint System\n * Mobile-First Approach für deine App\n */\n\n// Shared constants to avoid duplication\nconst WIDTH_640 = '640px';\nconst WIDTH_768 = '768px';\nconst WIDTH_1024 = '1024px';\nconst WIDTH_1280 = '1280px';\nconst WIDTH_1536 = '1536px';\n\nexport const breakpoints = {\n  // Mobile First Breakpoints\n  sm: WIDTH_640,      // Small tablets, large phones\n  md: WIDTH_768,      // Tablets\n  lg: WIDTH_1024,     // Laptops, small desktops\n  xl: WIDTH_1280,     // Large desktops\n  '2xl': WIDTH_1536,  // Extra large screens\n} as const;\n\n// Container Max-Widths für verschiedene Breakpoints\nexport const containerMaxWidth = {\n  sm: WIDTH_640,\n  md: WIDTH_768, \n  lg: WIDTH_1024,\n  xl: WIDTH_1280,     // Wie deine max-w-7xl\n  '2xl': WIDTH_1536,\n} as const;\n\n// Grid System Configuration\nexport const gridSystem = {\n  // Standard 12-Column Grid\n  columns: 12,\n  \n  // Grid Gaps für verschiedene Breakpoints\n  gap: {\n    mobile: '16px',    // 4 (enger auf Mobile)\n    tablet: '24px',    // 6 (Standard)\n    desktop: '24px',   // 6 (gleich wie Tablet)\n  },\n  \n  // Container Padding für verschiedene Breakpoints\n  containerPadding: {\n    mobile: '16px',    // 4 (weniger Padding auf Mobile)\n    tablet: '24px',    // 6 (Standard, wie in deiner App)\n    desktop: '24px',   // 6 (gleich)\n  },\n} as const;\n\n// Responsive Utilities\nexport const responsivePatterns = {\n  // Häufige Grid-Layouts\n  layouts: {\n    // Dashboard Layout (9-3 Split)\n    dashboard: {\n      mobile: 'grid-cols-1',           // 1 Spalte auf Mobile\n      tablet: 'md:grid-cols-1',        // 1 Spalte auf Tablet\n      desktop: 'lg:grid-cols-12',      // 12 Spalten auf Desktop\n    },\n    \n    // Stats Grid (1-2-3 Pattern)\n    stats: {\n      mobile: 'grid-cols-1',           // 1 Spalte auf Mobile\n      tablet: 'md:grid-cols-2',        // 2 Spalten auf Tablet  \n      desktop: 'lg:grid-cols-3',       // 3 Spalten auf Desktop\n    },\n    \n    // Two Column Layout\n    twoColumn: {\n      mobile: 'grid-cols-1',           // 1 Spalte auf Mobile\n      tablet: 'md:grid-cols-2',        // 2 Spalten ab Tablet\n      desktop: 'lg:grid-cols-2',       // 2 Spalten auf Desktop\n    },\n    \n    // Four Column Layout (für Listen, Cards)\n    fourColumn: {\n      mobile: 'grid-cols-1',           // 1 Spalte auf Mobile\n      tablet: 'md:grid-cols-2',        // 2 Spalten auf Tablet\n      desktop: 'lg:grid-cols-4',       // 4 Spalten auf Desktop\n    },\n  },\n  \n  // Spacing Adjustments\n  spacing: {\n    // Container Padding responsive\n    containerPadding: 'px-4 md:px-6',\n    \n    // Section Spacing responsive  \n    sectionSpacing: 'space-y-6 md:space-y-8 lg:space-y-12',\n    \n    // Grid Gaps responsive\n    gridGap: 'gap-4 md:gap-6',\n  },\n  \n  // Typography responsive\n  typography: {\n    // Headlines responsive\n    h1: 'text-2xl md:text-3xl lg:text-4xl',\n    h2: 'text-xl md:text-2xl lg:text-3xl', \n    h3: 'text-lg md:text-xl lg:text-2xl',\n    \n    // Body text responsive\n    body: 'text-sm md:text-base',\n    caption: 'text-xs md:text-sm',\n  },\n} as const;\n\nexport type BreakpointKey = keyof typeof breakpoints;\nexport type ResponsiveLayoutKey = keyof typeof responsivePatterns.layouts;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/ui/tokens/colors.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (114). Maximum allowed is 75.","line":99,"column":1,"nodeType":null,"messageId":"exceed","endLine":148,"endColumn":60}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Color System\n * Basierend auf deine bestehende UI - Grau-dominiert mit blauen Akzenten\n */\n\n// Base Color Palette\nexport const colors = {\n  // Graustufen (Hauptfarben deiner App)\n  gray: {\n    50: '#f9fafb',   // Sehr heller Hintergrund\n    100: '#f3f4f6',  // Heller Hintergrund (wie bg-gray-50)\n    200: '#e5e7eb',  // Border, Divider\n    300: '#d1d5db',  // Subtile Border\n    400: '#9ca3af',  // Disabled Text\n    500: '#6b7280',  // Secondary Text\n    600: '#4b5563',  // Primary Text (dunkel)\n    700: '#374151',  // Dark Text\n    800: '#1f2937',  // Sehr dunkler Text\n    900: '#111827',  // Schwarz-ähnlich\n  },\n  \n  // Blau (Primary Color - wie in deinen Buttons)\n  blue: {\n    50: '#eff6ff',\n    100: '#dbeafe',\n    200: '#bfdbfe',\n    300: '#93c5fd',\n    400: '#60a5fa',\n    500: '#3b82f6',   // Standard Blau\n    600: '#2563eb',   // Dein Button-Blau\n    700: '#1d4ed8',   // Hover-Zustand\n    800: '#1e40af',\n    900: '#1e3a8a',\n  },\n  \n  // Status Farben\n  green: {\n    50: '#f0fdf4',\n    100: '#dcfce7',\n    500: '#22c55e',   // Success\n    600: '#16a34a',\n    700: '#15803d',\n  },\n  \n  orange: {\n    50: '#fff7ed',\n    100: '#ffedd5',\n    400: '#fb923c',   // Warning\n    500: '#f97316',\n    600: '#ea580c',\n  },\n  \n  red: {\n    50: '#fef2f2',\n    100: '#fee2e2',\n    500: '#ef4444',   // Error\n    600: '#dc2626',\n    700: '#b91c1c',\n  },\n  \n  // Gamification Farben (basierend auf deiner Avatar-UI)\n  cyan: {\n    50: '#ecfeff',\n    100: '#cffafe',\n    400: '#22d3ee',   // Skills Level\n    500: '#06b6d4',\n    600: '#0891b2',\n  },\n  \n  yellow: {\n    50: '#fffbeb',\n    100: '#fef3c7',   // Engagement Background\n    400: '#fbbf24',\n    500: '#f59e0b',   // Coins/Engagement\n    600: '#d97706',\n  },\n  \n  // Base\n  white: '#ffffff',\n  black: '#000000',\n  transparent: 'transparent',\n} as const;\n\n// Semantic Color System (Use Cases)\nexport const semanticColors = {\n  // Text Colors\n  text: {\n    primary: colors.gray[900],     // Haupttext\n    secondary: colors.gray[600],   // Secondary Text\n    tertiary: colors.gray[500],    // Subtle Text\n    disabled: colors.gray[400],    // Disabled Text\n    inverse: colors.white,         // Text auf dunklem Hintergrund\n  },\n  \n  // Background Colors\n  background: {\n    primary: colors.white,         // Haupthintergrund\n    secondary: colors.gray[50],    // Page Background (wie bei dir)\n    tertiary: colors.gray[100],    // Subtle Background\n    disabled: colors.gray[50],     // Disabled Background\n  },\n  \n  // Border Colors\n  border: {\n    light: colors.gray[200],       // Standard Border\n    medium: colors.gray[300],      // Emphasized Border\n    dark: colors.gray[400],        // Strong Border\n  },\n  \n  // Interactive States\n  interactive: {\n    primary: colors.blue[600],     // Primary Buttons (wie deine)\n    primaryHover: colors.blue[700], // Primary Hover\n    secondary: colors.gray[200],   // Secondary Buttons\n    secondaryHover: colors.gray[300], // Secondary Hover\n  },\n  \n  // Status Colors\n  status: {\n    success: colors.green[500],\n    successBg: colors.green[50],\n    warning: colors.orange[500],\n    warningBg: colors.orange[50],\n    error: colors.red[500],\n    errorBg: colors.red[50],\n    info: colors.blue[500],\n    infoBg: colors.blue[50],\n  },\n  \n  // Gamification (für deine Avatar-Komponenten)\n  gamification: {\n    level: colors.cyan[500],       // Skills Level\n    levelBg: colors.cyan[100],\n    engagement: colors.yellow[500], // Engagement/Coins\n    engagementBg: colors.yellow[100],\n    achievement: colors.orange[500], // Achievements\n  },\n  \n  // Card/Surface Colors\n  surface: {\n    primary: colors.white,         // Card Background\n    elevated: colors.white,        // Elevated Cards (mit Shadow)\n    overlay: 'rgba(0, 0, 0, 0.5)', // Modal Overlay\n  },\n} as const;\n\nexport type ColorKey = keyof typeof colors;\nexport type SemanticColorKey = keyof typeof semanticColors;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/ui/tokens/effects.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/ui/tokens/spacing.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/ui/tokens/typography.ts","messages":[{"ruleId":"max-lines","severity":1,"message":"File has too many lines (106). Maximum allowed is 75.","line":91,"column":1,"nodeType":null,"messageId":"exceed","endLine":124,"endColumn":53}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Typography System\n * Basierend auf deine bestehenden Text-Größen\n */\n\nexport const fontSizes = {\n  xs: '12px',      // 0.75rem - Caption Text\n  sm: '14px',      // 0.875rem - Small Text\n  base: '16px',    // 1rem - Body Text\n  lg: '18px',      // 1.125rem - Large Body\n  xl: '20px',      // 1.25rem - Small Heading\n  '2xl': '24px',   // 1.5rem - Medium Heading\n  '3xl': '30px',   // 1.875rem - Large Heading\n  '4xl': '36px',   // 2.25rem - Extra Large Heading\n} as const;\n\nexport const fontWeights = {\n  normal: '400',\n  medium: '500',\n  semibold: '600',\n  bold: '700',\n} as const;\n\nexport const lineHeights = {\n  tight: '1.25',    // Für Headlines\n  normal: '1.5',    // Standard Line Height\n  relaxed: '1.75',  // Für längere Texte\n} as const;\n\nexport const letterSpacing = {\n  tight: '-0.025em',\n  normal: '0',\n  wide: '0.025em',\n} as const;\n\n// Semantic Typography System\nexport const typography = {\n  // Headlines (wie in deinem Dashboard)\n  heading: {\n    h1: {\n      fontSize: fontSizes['3xl'],      // 30px\n      fontWeight: fontWeights.bold,\n      lineHeight: lineHeights.tight,\n      letterSpacing: letterSpacing.tight,\n    },\n    h2: {\n      fontSize: fontSizes['2xl'],      // 24px\n      fontWeight: fontWeights.bold,\n      lineHeight: lineHeights.tight,\n      letterSpacing: letterSpacing.normal,\n    },\n    h3: {\n      fontSize: fontSizes.xl,          // 20px\n      fontWeight: fontWeights.semibold,\n      lineHeight: lineHeights.normal,\n    },\n    h4: {\n      fontSize: fontSizes.lg,          // 18px\n      fontWeight: fontWeights.semibold,\n      lineHeight: lineHeights.normal,\n    },\n  },\n  \n  // Body Text\n  body: {\n    large: {\n      fontSize: fontSizes.lg,          // 18px\n      fontWeight: fontWeights.normal,\n      lineHeight: lineHeights.relaxed,\n    },\n    normal: {\n      fontSize: fontSizes.base,        // 16px\n      fontWeight: fontWeights.normal,\n      lineHeight: lineHeights.normal,\n    },\n    small: {\n      fontSize: fontSizes.sm,          // 14px\n      fontWeight: fontWeights.normal,\n      lineHeight: lineHeights.normal,\n    },\n  },\n  \n  // UI Text\n  ui: {\n    caption: {\n      fontSize: fontSizes.xs,          // 12px\n      fontWeight: fontWeights.normal,\n      lineHeight: lineHeights.normal,\n    },\n    label: {\n      fontSize: fontSizes.sm,          // 14px\n      fontWeight: fontWeights.medium,\n      lineHeight: lineHeights.normal,\n    },\n    button: {\n      fontSize: fontSizes.sm,          // 14px\n      fontWeight: fontWeights.medium,\n      lineHeight: lineHeights.normal,\n    },\n  },\n  \n  // Stats/Numbers (wie in deinen Dashboard-Karten)\n  stat: {\n    large: {\n      fontSize: fontSizes['2xl'],      // 24px\n      fontWeight: fontWeights.bold,\n      lineHeight: lineHeights.tight,\n    },\n    medium: {\n      fontSize: fontSizes.xl,          // 20px\n      fontWeight: fontWeights.bold,\n      lineHeight: lineHeights.tight,\n    },\n    small: {\n      fontSize: fontSizes.lg,          // 18px\n      fontWeight: fontWeights.semibold,\n      lineHeight: lineHeights.normal,\n    },\n  },\n} as const;\n\nexport type FontSizeKey = keyof typeof fontSizes;\nexport type FontWeightKey = keyof typeof fontWeights;\nexport type TypographyKey = keyof typeof typography;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/utils/cn.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/utils/exportCalendar.test.ts","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":30,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":35},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":31,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":31,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1203,1240],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":35,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":35,"endColumn":35},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":36,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":36,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1371,1408],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { CalendarEntry } from '../types/calendar';\n\nimport { exportToCSV, exportToPDF } from './exportCalendar';\n\n// Test data\nconst testEntries: CalendarEntry[] = [\n  { userId: '1', userName: 'Max Mustermann', date: '2025-01-06', type: 'urlaub', status: 'genehmigt' },\n  { userId: '1', userName: 'Max Mustermann', date: '2025-01-07', type: 'urlaub', status: 'genehmigt' },\n  { userId: '2', userName: 'Anna Admin', date: '2025-01-07', type: 'krank' },\n  { userId: '3', userName: 'Tom Teilzeit', date: '2025-01-08', type: 'meeting' },\n  { userId: '1', userName: 'Max Mustermann', date: '2025-01-09', type: 'zeit', stunden: 8.5 },\n  { userId: '2', userName: 'Anna Admin', date: '2025-01-09', type: 'zeit', stunden: 6.0 },\n  { userId: '3', userName: 'Tom Teilzeit', date: '2025-01-09', type: 'zeit', stunden: 4.0 },\n];\n\nconst testUsers = [\n  { userId: '1', userName: 'Max Mustermann' },\n  { userId: '2', userName: 'Anna Admin' },\n  { userId: '3', userName: 'Tom Teilzeit' },\n];\n\nconst testDateRange = [\n  new Date('2025-01-06'),\n  new Date('2025-01-07'),\n  new Date('2025-01-08'),\n  new Date('2025-01-09'),\n];\n\n// Manual test functions (to be run in browser console)\nexport const testCSVExport = () => {\n  console.log('Testing CSV export...');\n  exportToCSV(testEntries, testDateRange, testUsers, 'monat', new Date('2025-01-01'));\n};\n\nexport const testPDFExport = () => {\n  console.log('Testing PDF export...');\n  exportToPDF(testEntries, testDateRange, testUsers, 'monat', new Date('2025-01-01'));\n};\n\n// Export test functions to window for easy testing\ninterface WindowWithTestFunctions extends Window {\n  testCSVExport?: typeof testCSVExport;\n  testPDFExport?: typeof testPDFExport;\n}\n\nif (typeof window !== 'undefined') {\n  (window as WindowWithTestFunctions).testCSVExport = testCSVExport;\n  (window as WindowWithTestFunctions).testPDFExport = testPDFExport;\n}","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/utils/exportCalendar.ts","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (44). Maximum allowed is 30.","line":46,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":103,"endColumn":2},{"ruleId":"max-params","severity":1,"message":"Arrow function has too many parameters (5). Maximum allowed is 3.","line":52,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":52,"endColumn":11},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (198). Maximum allowed is 30.","line":113,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":350,"endColumn":2},{"ruleId":"max-statements","severity":1,"message":"Arrow function has too many statements (29). Maximum allowed is 15.","line":113,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":350,"endColumn":2},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (267). Maximum allowed is 75.","line":119,"column":1,"nodeType":null,"messageId":"exceed","endLine":350,"endColumn":3},{"ruleId":"max-params","severity":1,"message":"Arrow function has too many parameters (5). Maximum allowed is 3.","line":119,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":119,"endColumn":11},{"ruleId":"max-lines-per-function","severity":1,"message":"Arrow function has too many lines (34). Maximum allowed is 30.","line":158,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":194,"endColumn":6},{"ruleId":"max-lines-per-function","severity":1,"message":"Method 'didDrawCell' has too many lines (45). Maximum allowed is 30.","line":216,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":263,"endColumn":8},{"ruleId":"max-statements","severity":1,"message":"Method 'didDrawCell' has too many statements (17). Maximum allowed is 15.","line":216,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"exceed","endLine":263,"endColumn":8},{"ruleId":"complexity","severity":1,"message":"Method 'didDrawCell' has a complexity of 15. Maximum allowed is 10.","line":216,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":263,"endColumn":8},{"ruleId":"sonarjs/cognitive-complexity","severity":1,"message":"Refactor this function to reduce its Cognitive Complexity from 18 to the 15 allowed.","line":216,"column":27,"nodeType":null,"messageId":"refactorFunction","endLine":216,"endColumn":29},{"ruleId":"max-depth","severity":1,"message":"Blocks are nested too deeply (4). Maximum allowed is 3.","line":246,"column":17,"nodeType":"IfStatement","messageId":"tooDeeply","endLine":252,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport jsPDF from 'jspdf';\nimport autoTable from 'jspdf-autotable';\n\nimport { CalendarEntry } from '../types/calendar';\n\n// Extend jsPDF type for autoTable\ndeclare module 'jspdf' {\n  interface jsPDF {\n    lastAutoTable: {\n      finalY: number;\n    };\n  }\n}\n\n/**\n * Type map for display names (German)\n */\nconst typeDisplayMap: Record<string, string> = {\n  urlaub: 'Urlaub',\n  krank: 'Krankheit',\n  meeting: 'Meeting',\n  fortbildung: 'Fortbildung',\n  ux: 'Sonderurlaub',\n  zeit: 'Arbeitszeit'\n};\n\n/**\n * Status map for display names (German)\n */\nconst statusDisplayMap: Record<string, string> = {\n  beantragt: 'Beantragt',\n  genehmigt: 'Genehmigt',\n  abgelehnt: 'Abgelehnt'\n};\n\n/**\n * Export calendar data as CSV\n * @param entries - Calendar entries to export\n * @param dateRange - Date range for the export\n * @param users - List of users to include\n * @param view - Current view (month or year)\n * @param selectedMonth - Currently selected month\n */\nexport const exportToCSV = (\n  entries: CalendarEntry[],\n  dateRange: Date[],\n  users: { userId: string; userName: string }[],\n  view: 'monat' | 'jahr',\n  selectedMonth: Date\n): void => {\n  // Create CSV headers\n  const headers = ['Datum', 'Mitarbeiter', 'Typ', 'Stunden', 'Status'];\n  \n  // Create CSV rows\n  const rows: string[][] = [];\n  \n  // Sort entries by date and user\n  const sortedEntries = [...entries].sort((a, b) => {\n    const dateCompare = a.date.localeCompare(b.date);\n    if (dateCompare !== 0) return dateCompare;\n    return a.userName.localeCompare(b.userName);\n  });\n  \n  // Add each entry as a row\n  sortedEntries.forEach(entry => {\n    const formattedDate = format(new Date(entry.date), 'dd.MM.yyyy', { locale: de });\n    const type = typeDisplayMap[entry.type] || entry.type;\n    const hours = entry.stunden ? `${entry.stunden}h` : '-';\n    const status = entry.status ? statusDisplayMap[entry.status] : '-';\n    \n    rows.push([\n      formattedDate,\n      entry.userName,\n      type,\n      hours,\n      status\n    ]);\n  });\n  \n  // Convert to CSV string\n  const csvContent = [\n    headers.join(','),\n    ...rows.map(row => row.map(cell => `\"${cell}\"`).join(','))\n  ].join('\\n');\n  \n  // Create blob and download\n  const blob = new Blob(['\\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  \n  const fileName = view === 'monat' \n    ? `Kalender_${format(selectedMonth, 'yyyy-MM', { locale: de })}.csv`\n    : `Kalender_${format(selectedMonth, 'yyyy', { locale: de })}.csv`;\n  \n  link.setAttribute('href', url);\n  link.setAttribute('download', fileName);\n  link.style.visibility = 'hidden';\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n};\n\n/**\n * Export calendar data as PDF\n * @param entries - Calendar entries to export\n * @param dateRange - Date range for the export\n * @param users - List of users to include\n * @param view - Current view (month or year)\n * @param selectedMonth - Currently selected month\n */\nexport const exportToPDF = (\n  entries: CalendarEntry[],\n  dateRange: Date[],\n  users: { userId: string; userName: string }[],\n  view: 'monat' | 'jahr',\n  selectedMonth: Date\n): void => {\n  // Create new PDF document\n  const doc = new jsPDF({\n    orientation: view === 'jahr' ? 'landscape' : 'portrait',\n    unit: 'mm',\n    format: 'a4'\n  });\n  \n  // Add title\n  const title = view === 'monat'\n    ? `Team-Kalender ${format(selectedMonth, 'MMMM yyyy', { locale: de })}`\n    : `Team-Kalender ${format(selectedMonth, 'yyyy', { locale: de })}`;\n  \n  doc.setFontSize(18);\n  doc.text(title, 14, 20);\n  \n  // Create entries map for quick lookup\n  const entriesMap = new Map<string, CalendarEntry>();\n  entries.forEach(entry => {\n    const key = `${entry.userId}-${entry.date}`;\n    entriesMap.set(key, entry);\n  });\n  \n  if (view === 'monat') {\n    // Monthly view - create a calendar grid\n    const startY = 35;\n    \n    // Prepare table data\n    const tableHeaders = ['Mitarbeiter'];\n    const weekDays = ['Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa', 'So'];\n    \n    // Add date headers\n    dateRange.forEach(date => {\n      const dayOfWeek = weekDays[(date.getDay() + 6) % 7]; // Adjust for Monday start\n      tableHeaders.push(`${dayOfWeek} ${format(date, 'd')}`);\n    });\n    \n    // Create rows for each user\n    const tableRows: string[][] = [];\n    users.forEach(user => {\n      const row = [user.userName];\n      \n      dateRange.forEach(date => {\n        const dateStr = format(date, 'yyyy-MM-dd');\n        const entry = entriesMap.get(`${user.userId}-${dateStr}`);\n        \n        if (entry) {\n          let cellContent = '';\n          switch (entry.type) {\n            case 'urlaub':\n              cellContent = 'U';\n              break;\n            case 'krank':\n              cellContent = 'K';\n              break;\n            case 'meeting':\n              cellContent = 'M';\n              break;\n            case 'fortbildung':\n              cellContent = 'F';\n              break;\n            case 'ux':\n              cellContent = 'Ux';\n              break;\n            case 'zeit':\n              cellContent = entry.stunden ? `${entry.stunden}h` : '?';\n              break;\n          }\n          row.push(cellContent);\n        } else {\n          row.push('');\n        }\n      });\n      \n      tableRows.push(row);\n    });\n    \n    // Add table to PDF\n    autoTable(doc, {\n      head: [tableHeaders],\n      body: tableRows,\n      startY: startY,\n      theme: 'grid',\n      styles: {\n        fontSize: 8,\n        cellPadding: 1,\n        halign: 'center',\n        valign: 'middle'\n      },\n      headStyles: {\n        fillColor: [59, 130, 246], // Blue color\n        textColor: 255,\n        fontSize: 7\n      },\n      columnStyles: {\n        0: { cellWidth: 30 } // Name column\n      },\n      didDrawCell: (data) => {\n        // Color cells based on entry type\n        if (data.section === 'body' && data.column.index > 0) {\n          const userIndex = data.row.index;\n          const dateIndex = data.column.index - 1;\n          const user = users[userIndex];\n          const date = dateRange[dateIndex];\n          const dateStr = format(date, 'yyyy-MM-dd');\n          const entry = entriesMap.get(`${user.userId}-${dateStr}`);\n          \n          if (entry) {\n            let fillColor;\n            switch (entry.type) {\n              case 'urlaub':\n                fillColor = [157, 240, 157]; // Green\n                break;\n              case 'krank':\n                fillColor = [0, 0, 0]; // Black\n                doc.setTextColor(255, 255, 255); // White text\n                break;\n              case 'meeting':\n                fillColor = [91, 141, 246]; // Blue\n                break;\n              case 'fortbildung':\n                fillColor = [255, 201, 102]; // Orange\n                break;\n              case 'ux':\n                fillColor = [245, 89, 89]; // Red\n                break;\n              case 'zeit':\n                if (entry.stunden && entry.stunden >= 8) {\n                  fillColor = [152, 193, 242]; // Light blue\n                } else if (entry.stunden && entry.stunden >= 6) {\n                  fillColor = [247, 213, 96]; // Yellow\n                } else {\n                  fillColor = [242, 161, 158]; // Light red\n                }\n                break;\n            }\n            \n            if (fillColor) {\n              doc.setFillColor(fillColor[0], fillColor[1], fillColor[2]);\n              doc.rect(data.cell.x, data.cell.y, data.cell.width, data.cell.height, 'F');\n              doc.setTextColor(0, 0, 0); // Reset text color\n            }\n          }\n        }\n      }\n    });\n    \n    // Add legend\n    const finalY = doc.lastAutoTable.finalY + 10;\n    doc.setFontSize(10);\n    doc.text('Legende:', 14, finalY);\n    \n    const legendItems = [\n      { label: 'U = Urlaub', color: [157, 240, 157] },\n      { label: 'K = Krankheit', color: [0, 0, 0] },\n      { label: 'M = Meeting', color: [91, 141, 246] },\n      { label: 'F = Fortbildung', color: [255, 201, 102] },\n      { label: 'Ux = Sonderurlaub', color: [245, 89, 89] },\n      { label: 'h = Arbeitsstunden', color: [152, 193, 242] }\n    ];\n    \n    let legendY = finalY + 5;\n    legendItems.forEach(item => {\n      doc.setFillColor(item.color[0], item.color[1], item.color[2]);\n      doc.rect(14, legendY - 3, 5, 3, 'F');\n      doc.setFontSize(8);\n      doc.text(item.label, 22, legendY);\n      legendY += 5;\n    });\n    \n  } else {\n    // Year view - create a summary table\n    const startY = 35;\n    \n    // Summary by user and type\n    const summaryData: Record<string, Record<string, number>> = {};\n    \n    entries.forEach(entry => {\n      if (!summaryData[entry.userName]) {\n        summaryData[entry.userName] = {\n          urlaub: 0,\n          krank: 0,\n          meeting: 0,\n          fortbildung: 0,\n          ux: 0,\n          arbeitsstunden: 0\n        };\n      }\n      \n      if (entry.type === 'zeit' && entry.stunden) {\n        summaryData[entry.userName].arbeitsstunden += entry.stunden;\n      } else {\n        summaryData[entry.userName][entry.type] = (summaryData[entry.userName][entry.type] || 0) + 1;\n      }\n    });\n    \n    // Create table data\n    const tableHeaders = ['Mitarbeiter', 'Urlaub', 'Krankheit', 'Meeting', 'Fortbildung', 'Sonderurlaub', 'Arbeitsstunden'];\n    const tableRows: string[][] = [];\n    \n    Object.entries(summaryData).forEach(([userName, data]) => {\n      tableRows.push([\n        userName,\n        `${data.urlaub} Tage`,\n        `${data.krank} Tage`,\n        `${data.meeting} Tage`,\n        `${data.fortbildung} Tage`,\n        `${data.ux} Tage`,\n        `${data.arbeitsstunden.toFixed(1)} h`\n      ]);\n    });\n    \n    // Add summary table\n    autoTable(doc, {\n      head: [tableHeaders],\n      body: tableRows,\n      startY: startY,\n      theme: 'striped',\n      headStyles: {\n        fillColor: [59, 130, 246],\n        textColor: 255\n      }\n    });\n  }\n  \n  // Save the PDF\n  const fileName = view === 'monat'\n    ? `Kalender_${format(selectedMonth, 'yyyy-MM', { locale: de })}.pdf`\n    : `Kalender_${format(selectedMonth, 'yyyy', { locale: de })}.pdf`;\n  \n  doc.save(fileName);\n};","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"/Users/halteverbotsocialmacpro/Desktop/arsvivai/HRthis/HRthis/src/utils/validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]}]
